[{"title":"科技公司下岗再就业指导","url":"//guidelines-for-re-employment/","content":"前端炒面，后端烤串，\n算法磨豆浆，中台煎饼灌。\n商拓裹面粉，客服炸鸡块，\n运维拉电线，硬件把煤担。\n测试擦桌椅，UI洗碗筷。\n总监跑堂勤，前台唱花旦。\n产品经理沿街站，客官进来看。\n文武十八艺，总有你一款。\n","categories":["二逼青年"],"tags":["下岗再就业","指导"]},{"title":"日语输入法使用","url":"//japanese-ime-issues/","content":"\n    .warn {\n        color: #F76516;\n    }\n    .tip{\n      color: #118Cf3;\n    }\n    .char img{\n      display:inline-block;\n      height: 1.1em;\n      width: 1.1em;\n      padding:0;\n      margin:0;\n      vertical-align: -0.2em;\n    }\n    .monospace{\n      font-family:Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace;\n      text-decoration-line: underline;\n      font-size:0.8em;\n      text-underline-offset:5px;\n    }\n    .del{\n      text-decoration-line: line-through;\n      color: #aaa;\n    }\n    .caption {\n        text-align: center;\n        font-size: 0.8em;\n        position: relative;\n        top: -1.5em;\n    }\n\n\n\n日语输入法概述日语常用的有罗马音输入法和假名输入法两种，前者类似于中文的拼音，后者则直接把按键映射为具体的假名。假名键位整体上输入速度会更快，多数情况可以一键一假名，还能减少 aiueo 五个键的磨损，但需要专门去记忆排布位置。罗马音键位则基本沿循了假名的音标注音，键位排布就是英语键盘也不需要重新学习。初步了解一下输入法软件的使用方法就可以上手打字了。\n罗马音输入法的整体逻辑为：\n\n键入英文字符 -&gt; 根据码表转假名\n根据假名选字 -&gt; 进一步选择平假名、片假名，或展开列表择选汉字。\n回车或数字键确认选项 -&gt; 上屏\n\n而假名输入法相当于只是跳过了罗马音输入法的 西文字符-&gt;假名 这一步的转换，但后续的 决定平片假 -&gt; 选字 -&gt; 输出上屏 这几步一样。\n所以对于初学者，使用系统自带的罗马音输入法就够了。\n\n      &gt点击展开：罗马音键位、假名键位与&nbsp;JIS&nbsp;键盘收起\n      \n          \n罗马音键位 - 就是普通的英语键盘键位\n\n\n假名键位 - 非 JIS 键盘通常不会在键帽上印假名，需要心里默记\n\n另外还有单独的 JIS 键盘布局和对应的键盘。以假名键位为基础，键盘上有单独的「半角&#x2F;全角」、「片假&#x2F;平假」、「变换&#x2F;无变换」（用以选择输出汉字）等功能键。普通英语键盘则需要通过组合键实现这些功能。JIS 键盘在纯日语环境下会方便一些。\n\nJIS 键盘与键位表\n      \n  \n\n\n\n扩展阅读 - 五花八门的中文输入法 [维基百科]\n\n输入法的安装（Windows 和 MacOS，以及网页版）\n手机端有另外的输入法和输入方式，另文再述。\n\nWindows 和 MacOS 下都有系统自带的输入法。同时还有一些站点提供了在线方案，比如 Google Translate 的日语模块自带的输入法（需翻墙），不方便安装时可以考虑。\n\n      &gt点击展开：安装过程详述收起\n      \n          在 Windows 下需要在系统中先添加日语语言，再在语言下添加日语输入法。这里输入法的名字也叫「微软输入法」，和中文的同名，实际用的是罗马音输入方式，可以在输入法选项里进一步配置。\n在 Windows 的系统设置中，先添加日语语言：\n在日语语言选项中，添加日语输入法，顺便按需添加手写包和语音包，以防学习时遇到不会念的字导致无法输入：\n在 MacOS 下，在设置内查找 键盘 -&gt; 输入法，然后添加日文 - 罗马字输入法。MacOS 有几项设置比较重要，见文末补充：\n键盘 - 输入法\n添加日文 - 罗马字输入法\n如果两者都不想安装，也可以使用网页版的输入法，比如 Google Translate 的日语模块自带的输入法（需翻墙）。Google 翻译本身还能在学习过程中提供很多其它的帮助。\nGoogle Translate\n\n      \n  \n\n输入法的使用输入法的使用包括：\n\n输入法的热键，输入状态的切换，以及平台间差异\n输入、选择模式与详细的罗马音码表\n一些特殊字符的输入方法\n\n输入法热键（Windows）对于日文输入法而言，存在三种状态分别为平假名、片假名、英文。在英文状态下相当于普通的英文输入法，输入英文字符直接上屏。热键也针对这三种情况有相应的配置。\n\n\n\n输入法状态快捷键\n功能\n\n\n\nWin+Space左 Alt+Shift\n切换输入语言及该语言下的输入法。Win+Space 会在屏幕上展示列表，而左 Alt+Shift 不会\n\n\nAlt+&#96;(数字 1 左边的键)\n在假名和英文输入状态间切换，当从英文切回假名状态时，会恢复到上次切换为英文前的假名状态。平假名还是平假名，片假名还是片假名。\n\n\nCtrl+CapsLock\n切换到平假名输入状态\n\n\nAlt+CapsLock\n切换到片假名输入状态\n\n\nShift+CapsLock\n切换到全角英文输入状态。这状态下输入的英文字符都是全角的，同时仍然保留了择字功能，通过 Tab 而不是平常的 Space 可以选择列表项。\n\n\nWin+.\n打开 emoji 菜单\n\n\n\n\n\n上屏菜单快捷键\n功能\n\n\n\nF6\n当前输入内容转为平假名\n\n\nF7\n当前输入内容转为片假名\n\n\nF8\n当前输入内容转为半宽片假名\n\n\nF9\n当前输入内容转为全角英文\n\n\nF10\n当前输入内容转为半角英文\n\n\n*\nF6 F7 F10 较为常用\n\n\nSpace（空格）\n第一次拍击直接选择选字列表第一项，连续第二次拍击使光标进入选字列表，并逐个选择列表项\n\n\n方向键\n已经展开的选字列表里，定位选择列表项\n\n\nTab\n如果没有拍空格而直接按 Tab，则光标进入选字列表，并逐个选择列表项。此时 Space 与 Tab 作用完全相同。如果由 Space 启动的选字，则按 Tab 会使选字菜单横向展开成多列，方便使用方向键选字\n\n\nEnter（回车）\n确认当前光标位置的选字上屏\n\n\nCtrl-B\n打开浏览器使用搜索引擎搜索当前输入内容（给浏览器引流）\n\n\n输入法热键（MacOS）MacOS 的热键与 Windows 有所不同，但基本功能相同。主要区别在于，在 Windows 下，输入法的状态切换是在输入法内部切换的，而在 MacOS 下，平假名 &#x2F; 片假名直接作为两种输入法条目与 ABC（英文）并列，由系统输入法切换快捷键（通常是 Control+Space）统一切换。在输入法选项中可以设置只激活平假名输入，仍然可以通过 F7、择字等方式输入片假名和中文，不影响。\n\n\n\n输入法状态快捷键\n功能\n\n\n\nControl-Shift-R\n在当前光标处输入上一次确认的短句并重新择字\n\n\nControl-3\n直接在当前光标处打开颜文字选字列表\n\n\n\n&lt;以下快捷键需要先拖动光标使若干字处于文本选中状态&gt;\n\n\nControl-1\n将选中文本转换为相关字符，通常就是选择假名使其在清浊音之转，也可以使漢字在不同书写形式之间转。例如，选择「汉」然后 Control-1 就会出菜单。类似的还有「假」与「仮」等\n\n\nControl-2\n根据选中文本搜索相似汉字，似乎是基于偏旁相似的，例如「假」与「葭暇瑕」等\n\n\nControl-Shift-R\n将选中文本先反转为读音，然后根据读音重新打开选字列表，用于同音不同字的勘误\n\n\n\n\n\n上屏菜单快捷键\n功能\n\n\n\nControl-J &#x2F; F6\n当前输入内容转为平假名\n\n\nControl-J &#x2F; F7\n当前输入内容转为片假名\n\n\nControl-L &#x2F; F9\n当前输入内容转为全角英文\n\n\nControl-; &#x2F; F10\n当前输入内容转为半角英文\n\n\nSpace（空格）\nMacOS 选字菜单是自动出现的，拍击使标进入选字列表，并逐个选择列表项。列表会自动展开\n\n\n方向键\n已经展开的选字列表里，定位选择列表项\n\n\nTab\nMacOS 选字菜单下方有分类列表，Tab 键切换\n\n\nEnter（回车）\n确认当前光标位置的选字上屏\n\n\n输入法选字菜单罗马字输入法的输入方式类似于拼音，键入英文字符，输入法弹出选词框，默认一般为平假名。用户用空格或数字键选择相同发音下的各种不同写法，择字确定后按回车上屏。初学者背完五十音图就不会有障碍。\n\n示例：输入 shinjitsu 后按空格逐项选择想要的词组（含翻页），回车确定。也可用数字键直接择字。由于输入有明确意义，因此输入法第一建议是汉字的「真実」，第二选项才是平假名的「しんじつ」。 &gt; \n\n日语实际有的发音不止 50 音，以下是字符输入的全表。其中有部分音的输入码存在多种方式。输出结果是一样的，哪个音码习惯就用哪个。\n\n清浊音表\n\n\n\nあ\nい\nう\nえ\nお\n\nあ&#x3099;\nい&#x3099;\nう&#x3099;\nえ&#x3099;\nお&#x3099;\n\n\n\nあア\nいイ\nうウ\nえエ\nおオ\n\n\n\nゔヴ\n\n\n\n\na\ni&#x2F;yi\nu\ne\no\n\n\n\nvu\n\n\n\n\nかカ\nきキ\nくク\nけケ\nこコ\n\nがガ\nぎギ\nぐグ\nげゲ\nごゴ\n\n\nka\nki\nku&#x2F;qu\nke\nko\n\nga\ngi\ngu\nge\ngo\n\n\nさサ\nしシ\nすス\nせセ\nそソ\n\nざザ\nじジ\nずズ\nぜゼ\nぞゾ\n\n\nsa\nshi&#x2F;si\nsu\nse\nso\n\nza\nji&#x2F;zi\nzu\nze\nzo\n\n\nたタ\nちチ\nつツ\nてテ\nとト\n\nだダ\nぢヂ\nづヅ\nでデ\nどド\n\n\nta\nchi&#x2F;ti\ntsu&#x2F;tu\nte\nto\n\nda\ndi\ndu\nde\ndo\n\n\nなナ\nにニ\nぬヌ\nねネ\nのノ\n\n\n\n\n\n\n\n\nna\nni\nnu\nne\nno\n\n\n\n\n\n\n\n\nはハ\nひヒ\nふフ\nへヘ\nほホ\n\nばバ\nびビ\nぶブ\nべベ\nぼボ\n\n\nha\nhi\nfu&#x2F;hu\nhe\nho\n\nba\nbi\nbu\nbe\nbo\n\n\n\n\n\n\n\n\nぱパ\nぴピ\nぷプ\nぺペ\nぽポ\n\n\n\n\n\n\n\n\npa\npi\npu\npe\npo\n\n\nまマ\nみミ\nむム\nめメ\nもモ\n\n\n\n\n\n\n\n\nma\nmi\nmu\nme\nmo\n\n\n\n\n\n\n\n\nやヤ\n\nゆユ\n\nよヨ\n\n\n\n\n\n\n\n\nya\n\nyu\n\nyo\n\n\n\n\n\n\n\n\nらラ\nりリ\nるル\nれレ\nろロ\n\n\n\n\n\n\n\n\nra\nri\nru\nre\nro\n\n\n\n\n\n\n\n\nわワ\nゐヰ\n\nゑヱ\nをヲ\n\nヷ\nヸ\n\nヹ\nヺ\n\n\nwa\nwyi\n\nwye\nwo\n\nkyuukana\nkyuukana\n\nkyuukana\nkyuukana\n\n\nんン\n\n\n\n\n\n\n\n\n\n\n\n\nnn\n\n\n\n\n\n\n\n\n\n\n\n\n\nじジ 与 ぢヂ、ずズ 与 づヅ 的读音是相同的，但在码表上则有区别，前者为 ji&#x2F;zi zu 后者为 di du 以便于输入时区分。\n\nふフ 读作 fu，但输入法一般 fu 和 hu 都支持。\n\nヴ 是因外来语而补充的新假名，读作 vu，类似于英语里的 [v] 音。例如ヴァイオリン（Violin 小提琴）。在日常应用中，也可以以浊音 ブ 来标记。所以ブァイオリン也是对的。但发音上此处的 ブ 最好仍读作 [v]。\n\n由于 ヴ 本来就是新造词用于外来语表音，而日语中对音译词统一采用片假名表示，因此实际没有 ゔ 应用的场景。在微软输入法里无法通过 F6 或 Ctrl+CapsLock 切换到 ゔ，但可以通过空格下拉菜单实现。在 MacOS 下则直接展示 ゔ 并正常切换。\n\nゐヰ 和 ゑヱ 在现代日语中已经不再使用，只存在于古文和歌词中，例如《いるは歌》（伊吕波歌）。但在输入法上仍然保留，为避免与 いえ 重码，两者的音码调整为 wyi 和 wye。\n\n根据 维基百科，江户到明治期间，有过若干种 wu，即 わ行う（）的独立假名写法出现在不同的文献中，但未有正式规范。字体文件和输入法也都不支持，既不能正常键入，也不能正常显示。や行い（） 和 や行え（）也有相同情况。\n\n用「kyuukana（旧仮名）」也可以输入旧时代的假名，比如「ゐ」、「ゑ」、「ゔ」等。这种输入方式属于以意定字，后面会有更多类似的例子。\n\n这三个音节的对应字符目前 在 Unicode 扩展词表中有定义，统归为「変体仮名」，使用定制的字体可以显示。本文采纳 Unicode 的写法，但使用 svg 图片代替显示。\n\n在实际的输入中，由于句子往往是片段或整句输入的，有些假名有两种输入方法（表中蓝字标部分），有些在输入时可以有一定程度的简略。类似于中文拼音里的容错、模糊音、联想功能。\n\n比如 ん，如果需要独立输入，需要按两次 n。但在实际整句输入中，会自动判断是否需要独立输入，经常只需要输入一次 n。比如「山田さんわ日本人です（山田先生是日本人）」这句，实际输入是：\n\n\n\n山田\nさん\nわ\n日本\n人\nです\n\n\n\nyamada\nsan\nwa\nnihon\njin\ndesu\n\n\n这里さん（先生）的 ん 就只输入了一个 n，因为在日语中，ん 后面不会跟元音。因此在后续接 wa 时。输入法会自动把 n 转换成 ん。这里的 ん 确实可以输入 nn，但没必要。但若后续跟随的是元音时，为了区分就需要输入两次 n。比如 tanni（たんい，単位），若错输为 tani，就变成了たに（谷）。\n\n\n\n常规拗音表\n\n\n\nゃ\n\nゅ\n\nょ\n\nや&#x3099;\n\nゆ&#x3099;\n\nよ&#x3099;\n\n\n\nきゃ\n\nきゅ\n\nきょ\n\nぎゃ\n\nぎゅ\n\nぎょ\n\n\nkya\n\nkyu\n\nkyo\n\ngya\n\ngyu\n\ngyo\n\n\nしゃ\n\nしゅ\n\nしょ\n\nじゃ\n\nじゅ\n\nじょ\n\n\nsya&#x2F;sha\n\nsyu&#x2F;shu\n\nsyo&#x2F;sho\n\nja&#x2F;jya\n\nju&#x2F;jyu\n\njo&#x2F;jyo\n\n\nちゃ\n\nちゅ\n\nちょ\n\nぢゃ\n\nぢゅ\n\nぢょ\n\n\ncha&#x2F;cya&#x2F;tya\n\nchu&#x2F;cyu&#x2F;tyu\n\ncho&#x2F;cyo&#x2F;tyo\n\ndya\n\ndyu\n\ndyo\n\n\nにゃ\n\nにゅ\n\nにょ\n\n\n\n\n\n\n\n\nnya\n\nnyu\n\nnyo\n\n\n\n\n\n\n\n\nひゃ\n\nひゅ\n\nひょ\n\nびゃ\n\nびゅ\n\nびょ\n\n\nhya\n\nhyu\n\nhyo\n\nbya\n\nbyu\n\nbyo\n\n\n\n\n\n\n\n\nぴゃ\n\nぴゅ\n\nぴょ\n\n\n\n\n\n\n\n\npya\n\npyu\n\npyo\n\n\nみゃ\n\nみゅ\n\nみょ\n\n\n\n\n\n\n\n\nmya\n\nmyu\n\nmyo\n\n\n\n\n\n\n\n\nりゃ\n\nりゅ\n\nりょ\n\n\n\n\n\n\n\n\nrya\n\nryu\n\nryo\n\n\n\n\n\n\n\n\n\n常规拗音（通常直接称为拗音）只有 ゃゅょ 三列。它们和清浊表中 い 列的各个假名，组成一类转腔调的音。\n拗音当然也有片假名写法，表格空间有限，只写了平假名以作示意。\n虽然拗音表只有 36 个，但实际上输入法的码表中通常可以输出大量不在上表的可能的发音组合，用于表达各类外来语的发音，这些非常规的组合称为 合拗音。\n其实，即使是在各种教材中作为标准音表存在的常规拗音，本身也是用于外来词音译发音的，只不过这个外来语是汉语。由于历史原因，常规拗音被视作日语本语言发音的一份，成为五十音图的增表了。\n\n\n合拗音表\n\n\n\n\n\nあ\nい\nう\nえ\nお\n\nあ&#x3099;\nい&#x3099;\nう&#x3099;\nえ&#x3099;\nお&#x3099;\n\n\n\nうぁ\nうぃ\n\nうぇ\nうぉ\n\n\n\n\nいぇ\n\n\n\nwha\nwhi&#x2F;wi\n\nwhe\nwho\n\n\n\n\nye\n\n\n\nきゃ\nきぃ\nきゅ\nきぇ\nきょ\n\nぎゃ\nぎぃ\nぎゅ\nぎぇ\nぎょ\n\n\nkya\nkyi\nkyu\nkye\nkyo\n\ngya\ngyi\ngyu\ngye\ngyo\n\n\nくゃ · くぁ\nくぃ\nくゅ · くぅ\nくぇ\nくょ · くぉ\n\nぐぁ\nぐぃ\nぐぅ\nぐぇ\nぐぉ\n\n\nqya · kwa&#x2F;qa&#x2F;qwa\nqyi&#x2F;qi&#x2F;qwi\nqyu · qwu\nqye&#x2F;qe&#x2F;qwe\nqyo qo&#x2F;qwo\n\ngwa\ngwi\ngwu\ngwe\ngwo\n\n\nしゃ\nしぃ\nしゅ\nしぇ\nしょ\n\nじゃ\nじぃ\nじゅ\nじぇ\nじょ\n\n\nsya&#x2F;sha\nsyi\nsyu&#x2F;shu\nsye&#x2F;she\nsyo&#x2F;sho\n\njya&#x2F;zya&#x2F;ja\njyi&#x2F;zyi\njyu&#x2F;zyu&#x2F;ju\njye&#x2F;zye&#x2F;je\njyo&#x2F;zyo&#x2F;jo\n\n\nすぁ\nすぃ\nすぅ\nすぇ\nすぉ\n\n\n\n\n\n\n\n\nswa\nswi\nswu\nswe\nswo\n\n\n\n\n\n\n\n\nちゃ\nちぃ\nちゅ\nちぇ\nちょ\n\nぢゃ\nぢぃ\nぢゅ\nぢぇ\nぢょ\n\n\ncha&#x2F;cya&#x2F;tya\ncyi&#x2F;tyi\nchu&#x2F;cyu&#x2F;tyu\ncye&#x2F;che\ncho&#x2F;cyo&#x2F;tyo\n\ndya\ndyi\ndyu\ndye\ndyo\n\n\nつぁ\nつぃ\nつ\nつぇ\nつぉ\n\n\n\n\n\n\n\n\ntsa\ntsi\ntsu\ntse\ntso\n\n\n\n\n\n\n\n\nてゃ\nてぃ\nてゅ\nてぇ\nてょ\n\nでゃ\nでぃ\nでゅ\nでぇ\nでょ\n\n\ntha\nthi\nthu\nthe\ntho\n\ndha\ndhi\ndhu\ndhe\ndho\n\n\nとぁ\nとぃ\nとぅ\nとぇ\nとぉ\n\nどぁ\nどぃ\nどぅ\nどぇ\nどぉ\n\n\ntwa\ntwi\ntwu\ntwe\ntwo\n\ndwa\ndwi\ndwu\ndwe\ndwo\n\n\nにゃ\nにぃ\nにゅ\nにぇ\nにょ\n\n\n\n\n\n\n\n\nnya\nnyi\nnyu\nnye\nnyo\n\n\n\n\n\n\n\n\nひゃ\nひぃ\nひゅ\nひぇ\nひょ\n\nびゃ\nびぃ\nびゅ\nびぇ\nびょ\n\n\nhya\nhyi\nhyu\nhye\nhyo\n\nbya\nbyi\nbyu\nbye\nbyo\n\n\n\n\n\n\n\n\nぴゃ\nぴぃ\nぴゅ\nぴぇ\nぴょ\n\n\n\n\n\n\n\n\npya\npyi\npyu\npye\npyo\n\n\nふゃ · ふぁ\nふぃ\nふゅ · ふぅ\nふぇ\nふょ · ふぉ\n\n\n\n\n\n\n\n\nfya · fwa&#x2F;fa\nfyi&#x2F;fwi&#x2F;fi\nfyu · fwu\nfye&#x2F;fwe&#x2F;fe\nfyo · fwo&#x2F;fo\n\n\n\n\n\n\n\n\nみゃ\nみぃ\nみゅ\nみぇ\nみょ\n\n\n\n\n\n\n\n\nmya\nmyi\nmyu\nmye\nmyo\n\n\n\n\n\n\n\n\nりゃ\nりぃ\nりゅ\nりぇ\nりょ\n\n\n\n\n\n\n\n\nrya\nryi\nryu\nrye\nryo\n\n\n\n\n\n\n\n\nりゃ\nりぃ\nりゅ\nりぇ\nりょ\n\n\n\n\n\n\n\n\nrya\nryi\nryu\nrye\nryo\n\n\n\n\n\n\n\n\nヴゃ · ヴぁ\nヴぃ\nヴゅ\nヴぇ\nヴょ · ヴぉ\n\n\n\n\n\n\n\n\nvya · va\nvyi&#x2F;vi\nvyu\nvye&#x2F;ve\nvyo · vo\n\n\n\n\n\n\n\n\n\n\n\n合拗音表里标注蓝色的单元格写了两个拗音，因为码表里同时存在形如 くゃ 和 くぁ 两种拗音码，考虑到表格空间写在一起。两者是不同的码，不同的输出结果。\n同样，合拗音有片假名形式，表格写不下。或者说因为表外来语，合拗音主要是用片假名形式。\nヴ 行在 Windows 和 MacOS 下有不同表现。Windows 下默认输出形式为片假名 ヴ 搭配平假名拗尾，而 MacOS 下则直接输出片假名拗尾。另外 MacOS 下没有 vyi 和 vye 这两个码，只有 vi 和 ve。\n长拗音，例如「きょう（今日）」，是个发音的概念，但在输入法上正常写作 kyou，即常规拗音 きょ 接普通平假名 う 即可。这个词在罗马音注音上可能会写作 kyō，ō 即是拼音的第一声的符号。\n\n\n特殊输入\n日语里还有一些特殊的假名或符号，有些常用有些罕用，但整体都是被输入法支持的。这些特殊规则需要固定记忆：\n小写假名及输入输入小写假名需要使用 x 或 l 为前缀后正常输入音码，两个都可以，分别用左右手无名指击键，习惯哪个用哪个。小写假名大部分出现在拗音、外来语发音、特殊停顿等场景。\n\n\n\na\ni\nu\ne\no\n\n\n\nぁァ\nぃィ\nぅゥ\nぇェ\nぉォ\n\n\nla&#x2F;xa\nli&#x2F;xi\nlu&#x2F;xu\nle&#x2F;xe\nlo&#x2F;xo\n\n\nゕヵ\n\n\nゖヶ\n\n\n\nlka&#x2F;xka\n\n\nlke&#x2F;xke\n\n\n\n\n\nっッ\n\n\n\n\n\n\nltsu&#x2F;ltu&#x2F;xtsu&#x2F;xtu\n\n\n\n\nゃャ\n\nゅュ\n\nょョ\n\n\nlya&#x2F;xya\n\nlyu&#x2F;xyu\n\nlyo&#x2F;xyo\n\n\nゎヮ\n\n\n\n\n\n\nlwa&#x2F;xwa\n\n\n\n\n\n\n\n可以看到，所有的拗音、合拗音中的第二个小写假名都可以简单地直接输入，所以拗音码表主要也是为了输入简化、更易配合发音习惯，并不需要特别记忆。\nゕゖ 与 ゔ 类似，可以通过空格下拉选项输入，但无法通过快捷键切换得到。这三者都是因为其片假名形式用于外来语，而额外添加的对应平假名。\nヵ一般只在量词中出现，「一ヵ月」。ヶ 也是，「三ヶ国」。这两个基本是同义的，源头其实就是中文的「箇（个）」。\nゎ 用于古拗音，比如 くゎんおん（观音）。按码表规律 くゎ 和 ぐゎ 两个拗音本应写作 kwa 和 gwa，但这两音码已经被 くぁ 和 ぐぁ 占了位置，所以只能输入 kuxwa。\nっッ 在每个课程中都会讲到，表句中停顿，不详述。\n\n特殊假名及输入&gt;&gt;『 っッ 』\n表发音短促停顿的符号，除了 ltsu&#x2F;ltu&#x2F;xtsu&#x2F;xtu 等以「小写つ」的形式输入外，还可以通过 复写下一个假名的首字母 的方式来输入。比如がっき（学期）→gakki，にっぽん(日本)→nippon。\n所以除了 nn 得ん以外，连写任意两个辅音字母都会出来「っ」，甚至「xxa」也能得到「っぁ」。这属于っ的单独输入逻辑。\n\n&gt;&gt;『 ー 』\n在日语输入法中，直接按「-」键得到的就是「ー」。这个符号在日语中表示长音，主要用于片假名外来词，比如ケ一キ（蛋糕），偶尔也用在平假名中，比如おーいしい（美味しい）。\n相对的，若要输入英语半角减号「-」，需要按「-」然后空格下拉择字，或者快捷键切换到英文输入状态再按「-」。\n\n&gt;&gt;『 ゠ 』\n「゠」名叫「二分二重双罫」，与等号相似但为独立字符。\n本意上表示外国人名、地区名转为假名时，两个单词间的隔断。比如ホー゠チ゠ミン（胡志明）。可以同时用于平片假名。\n这个符号实际上已经被抛弃，只在个别文章中还可以看见。现在一般用「・」来表示。大概是゠太容易和 &#x3D;（等号）混淆了。\n输入法无法直接输入「゠」，甚至用 &#x3D;（等号）空格择字都没有该字符。需要通过 Unicode 码表输入（&amp;#x30A0;）。\n「゠」设计上还有一个「・」没有的作用，即对标英语的单词断行连接符「-」，用于外来词在行尾写不完转行时的标记。在英语中，当一个单词过长需要截断时，会在合适的音节处加「-」（减号）后回车换行，例如：  Today is a big day, you got your first light-\n  saber. Now you must go to Jedi Temple immedi-\n  ately get your Jedi Knight certificate. May&nbsp;\n  the Force be with you.\n  但在日文写作中「゠」的实际作用可有可无。和中文类似，日文换行也只需要直接另起即可，不需要专门标注单词连接。因而逐渐被彻底抛弃甚至不纳入输入法。\n考据来源：https://ja.wiktionary.org/wiki/%E3%82%A0\n\n\n我觉得这就是黑船来航后全面西化时用力过猛的遗留。\n\n&gt;&gt;『 ・ 』\n在日文输入法状态下直接按「&#x2F;」（与问号同键）即可输入。\n和 ゠ 一样，表示外国人名、地区名转为片假名时，两个单词间的隔断。目前仍是常用符号。\n\n&gt;&gt;『゛゜』以及&gt;&gt;『组合用&#x3099;&#x309A;』\n「゛」读作 dakuten（濁点），「゜」读作 handakuten（半濁点），分别表示清音、浊音假名的变化标记。输入也是这个拼写，在空格下拉列表中择字。\n这两个是独立的符号，不是附加在假名上的。正常输入浊音最好还是用浊音的音码。濁点主要用于特殊场合，比如本文说明部分，或者拼凑「い゛」之类时用到。\n因为是独立符号，所以在特殊场景下要考虑换行问题。比如「い゛」，如果在行尾，那么换行时濁点容易被带到下一行。\n「&#x3099;&nbsp;&nbsp;&#x309A;&nbsp;&nbsp;」 是组合用浊点和半浊点符号。无法直接输入，只能通过复制粘贴或用 Unicode 码表输入「&amp;#x3099;」和「&amp;#x309A;」。相对的，普通「゛゜」的 Unicode 码则是「&amp;#x309B;」和「&amp;#x309C;」。两者码位不同，是不同的字符。\n「组合用」的意思是，利用了 Unicode 的偏移量特性，这两个符号会自动往左靠到前一个字符上。比如「い&#x3099;い&#x309A;」。\n组合用「&#x3099;&nbsp;&nbsp;&#x309A;&nbsp;&nbsp;&nbsp;」输入麻烦，但其它好处较多。在很多操作中，い&#x3099; 会完全地被当作一个字符，移动光标、选择复制或调整格式时都很方便。如果是「い゛」，在行尾换行时濁点容易被带到下一行。而 い&#x3099; 则不会。\n在删除时，如果按 delete 删除光标右方的字，那么整个 い&#x3099; 会被删除。如果按 BackSpace 删除光标左方的字，那么只会删除&#x3099;&nbsp;&nbsp;&nbsp;，い 不会被删除。\n在统计字数时，い&#x3099; 会被当作两个字符。但在移动光标时会当作一个字符。在程序化编辑或 RPA 控制时需要单独处理。\nOffice 软件中插入符号功能可以比较方便地输入组合用　&#x3099;　&#x309A;&nbsp;&nbsp;&nbsp;。\n\n&gt;&gt;『 々　ゝゞヽヾ　〃　〱〲〳〴〵 』\n々表示连续两个相同汉字的第二个汉字的简写，比如「人々，ひとびと（人们）」，「先々月，せんせんげつ（上上月）」。\n在普通输入时，输入可以表示为两个相同汉字的音节时，输入法会将々自动作为候选词之一。\n当要单独输入时，输入 onaji（おなじ，同じ），意为「相同的」，然后在候选词中择字。思路类似于中文输入中的以词定字，或者说以意寻字。\n々 有一个 Windows 和 MacOS 都不支持，但 Google Translate 在线输入法支持的输入是「noma」下拉择字。思路是ノマ两字拼起来像是々。可谓以形寻字。\n基于「以意寻字」的逻辑，若输入 dou（どう，同）也可以择得这些字符，只是杂项会更多一些。Windows 还额外可以用 kurikaeshi（くりかえし，繰り返し）择得这些字符。\nMacOS 可择字符比 Windows 少一些。\n当输入 おなじ 开始选词时，你会发现一连串的类似符号。\nゝゞ 分别表示清音、浊音平假名的重复，ヽヾ 表示清、浊片假名的重复\n〃 称为 ノノ字点（ののじてん） ，代表「与上方或前方对应位置的内容重复」。比如：\n\n\n站点\n类型\n\n\n\n京东\n购物网站\n\n\n淘宝\n〃\n\n\n拼多多\n〃\n\n\n4399\n游戏网站\n\n\n\n〱〲 这两个就厉害了。它俩不是 くぐ，而是「竖排文本时表示前面两到四个假名的重复」，分别表示清音或浊音。并且在竖排文本书写印刷时，要占据两格长。\n〳〴〵这三个就更厉害了。因为上面两个符号要占据两格长，而通常来说哪怕是 Word 这种专业排版软件都很难让一个字符拉长占两个位置，所以发明了这三个字符，以便在竖写时可以拼成〱〲 。上半部分分清浊有两个，下半部分就只有一个。我试着在 Word 里拼了一下，在特定字体下的效果还不错。\n\n\n考据来源：https://en.wiktionary.org/wiki/%E3%80%B1\n\n\n果然是黑船来航后用力过猛了。\n\n&gt;&gt;『 ゟ 』\n读作 yori，输入也是 yori 后择字。用于在书面中表示书信的发件人，类似于中文里的「谨缄」「呈」，或路途的起点，类似于「始」「发」。这类字称为「合略仮名」(维基百科)。\n日语中因为存在汉字训读，所以一个字符读两个音并不奇怪。这个字在明治以前经常使用，现在也还在看板招牌等处偶尔出现。\n中文曾有段时间也出现过合字的现象，最知名的是「瓩」，读作 Qīanwǎ，意思就是千瓦，电力功率单位，因为被收入字典而一度引发关注。多音节汉字大部分产生自外来语计量单位翻译，有兞兣兙兡兛兝嗧等若干字。\n但也有如「圕」这样，由文化名人自行创造的多音节汉字。「圕」最初被图书馆学家杜定友用于代替笔画繁多书写不便的繁体「圖書館」三字，一开始直接念作 túshūguǎn，即图书馆，后渐渐演化为 tuān，回归为单音节字。但在简化字方案中，「書」简化为「书」，「圕」则成为历史并未被简化字方案收录。理论上对应简化后的「」则作为一个扩展字符收入 Unicode - U+31578; 点位。\n合略假名页面中还列举了其它一些合略字，有不少暂时还没有被 Unicode 收录。\n\n&gt;&gt;『 ヿ 』\nkoto。MacOS 自带日文输入法无此字，Windows 可以择得。\n字典的解释直接就是「事」の略体。ヿ 相关的短语包括ことにする、ことになっている等常用短语。但这个字本身很少用到，只有在书面语中才会出现。\n被定义为片假名，还有对应平假名形式的，但尚未在 Unicode 中收录，也无法输入。\n\n&gt;&gt;『 〆 乄 』\nshime。两者是同一个字，历史原因两者在字库中有独立的位置。MacOS 只能输入前者，而 Windows 两者都可以择得。Windows 下还可以用 shite 输入两个字符。\n主要用法是用密封的信封向对方寄送信件等时，以及强调信封已「封闭」牢固时。此外，它有时也有「收紧」、「扼杀」和「占领」的意思。\n组词包括「〆切（締切）」、「昆布〆（昆布締め）」、「尺〆（尺貫法の木材の体積の単位）」，「林方立木尺〆法（江户法律）」等。\n\n&gt;&gt;『 〼 』\nmasu。各输入法都可以正常输入。\n这个字可厉害了，浪费了我一个小时。我一直以为它是某个字符不能正常显示时，替代出现的那种方框。但实际上它是一个独立的字符，并且还是个象形字。甚至在简体中文里我都从未见过如此象形的字。\n来，欣赏一下：\n释意一：是「枡」的替代字。用于表示「盛」、「量」、「桶」等容量单位，比如「一〼の酒」、「一〼の米」。「枡」就是上图这样的容器。\n释意二：ます 的简写，語尾「〜あり〼」，单纯用其发音。\n释意三：「益々（ますます）」的替代字，比如「〼〼のご発展を」。其实也是 ます 的替代简写。\n\n符号与其输入方式&gt;&gt;『 ← ↑ → ↓ 』\n用于表示方向，这个是符号，但和假名一样有专门的输入码。←(zh) ↑(zj) →(zk) ↓(zl)。\n熟悉 Vim 的知道这是 Vim 移动光标的键位。再往前考据则会涉及到 VI 的一段轶事。\n一图胜千言：\n\n&gt;&gt;『 ○×△□ 』\n从这里开始就是符号了，输入法均使用以意定字的方式。列个列表方便看，表太长了放下面。\n除下表外，有个「kigou（記号）」可谓终极大法，可以选择输入法码表内的几乎所有符号。逐个翻阅吧。\n顔文字与絵文字是不同的，它俩的出现有先后，发展有联系。但单纯从字符角度来说，前者是用符号拼出来的，后者则是单独的字符。\n不同输入法支持的码、具体可选的符号数量有较大区别，下表在 MacOS 有很多不能输入。该表也不是全覆盖。\n有些码意义不大，比如「ando&#x3D;&amp;」不如 Shift+7 方便。但有些还是有用的，比如「kiroguramu&#x3D;㎏」。要从符号堆里择出 ㎏ 很麻烦，直接输入哪怕多打几个字都可以。\n输入符号再按空格，也可以选择同类下形似的其它符号。比如输入「＞」再按空格可以 择得「≫」。\n可以看到这些符号有些音类似于中文，有些音类似于西文。对照一下中文，像电力单位瓦、中文也是音译。但对于「公斤」，中文采用意译，而日文则直接音译。\n\n\n\n\n意義\nRomaji\n記号例\n\n意義\nRomaji\n記号例\n\n\n\n矢印\nyajirushi\n⏩→▷⇨👉⇄\n\n数字\nsuuji\n0️⃣1️⃣2️⃣3️⃣\n\n\n上\nue\n↑ ￣㊤ ↜↗↖⇑⇈↻↺☝\n\n上矢\nueya\n↑↗⇡⇧⇑⇈➚\n\n\n下\nshita\n↓＿㊦ ↷↘⇂☟↧➷\n\n下矢\nshitaya\n↓↯↶⇩↡\n\n\n左\nhidari\n㊧ ←↙↫⇠⇤↰⇦☚↩⇚⇇↸↜☜↚\n\n左矢\nhidariya\n←↢⇙⇦↖\n\n\n右\nmigi\n㊨ →⇒↛↱☞➳➔➴☛➢➠➪➫➤➥➲➺⇏➟➼\n\n右矢\nmigiya\n→⇒↗↝↛➭➬⇛➤➜➧\n\n\n上\njou\n㊤\n\n下\nge\n㊦\n\n\n点\nten\n゜゛；：．，、´.・｀ ¨…‥∵･:;ﾞﾟ ∴\n\n括弧\nkakko\n「」「」（）【】“”\n\n\n三角\nsankaku\n▾△▲▽▼∵∴◁\n\n四角\nshikaku\n■□◆◇▪▫▨▩❑❖▣◩\n\n\n演算\nkeisan\n≧÷±－× ＋＝ ≠ ＜ ≦ ＞\n\n近似\nkinji\n≒\n\n\n恒等\ngoudou\n≡≅≢\n\n不等号\nfutougou\n≠≧⋝≳⋧≱≥≯≹\n\n\nplus minus\npurasumainasu\n±∓\n\nroot\nru-to\n√∜∛\n\n\n乘号\nkakeru\n×⋇⊠⊗\n\n割\nwaru\n÷⊘⋇∤\n\n\nPercent\npa-sento\n%\n\nPermillage\npa-miru\n‰\n\n\n何故ならば\nnazenaraba\n∵\n\n故に\nyueni\n∴\n\n\n斜線\nshasen\n／＼\n\n垂直\nsuichoku\n⊥\n\n\n角\nkaku\n∠⊥∟⊾∢∡\n\n直角\ncholtsukaku\n∟\n\n\nIntegral\ninteguraru\n∫∬∰∱∳∭⌠⌡\n\nPhi\nfulai\nφΦ∮\n\n\n無限大\nmugendai\n∞\n\n丸数字\nmarusuuji\n①②③⑳❶❷❸\n\n\n括号数字\nkakkosuuji\n⑴⑵⑶⒇\n\n罗马数字\nro-masuuji\nⅠⅡⅢⅫ\n\n\n図形\nzukei\n★○▼▽▲△■□◆◇◎●☆\n\n単位\ntanni\n°′″℃ ￥＄ € ￠￡％Å ㍗‰㎜㍳℧℥℔ℓ㎯₪₦㏒\n\n\n米\nkome\n※\n\nヴィ\nbui\n✌\n\n\n星\nhoshi\n☆✨💫🌟\n\n星座\nseiza\n♈️♉️♊️♋️\n\n\n天気\ntenki\n🌞🌤☁️☔️✨\n\n顔\nkao\n😃😂😇😍\n\n\n雄\nosu\n♂\n\n雌\nmesu\n♀\n\n\n音楽\nongaku\n🎵🎼🎷🪕\n\n音符\nonpu\n♪♬♫♩\n\n\nFlat\nfuratto\n♭\n\nAND\nando\n∩＆∧⋀⋏\n\n\n株式会社\nkabushikikaisha\n㈱㊑会社㍿\n\n有限会社\nyuugengaisha\n(有)㈲㊒\n\n\n代表\ndaihyou\n(代)㈹\n\n土&#x2F;度\ndo\n℃°℉ ㊏㈯\n\n\n丸\nmaru\n●○◎◉⚫︎⚪️⭕️💮\n\nバツ\nbatsu\n×❌❎✖️\n\n\n二重丸\nnijuumaru\n◎\n\n菱\nhishi\n◆◇❖\n\n\n黒星\nkuroboshi\n★\n\n黒丸\nkuromaru\n●\n\n\n白星\nshiroboshi\n☆\n\n白丸\nshiromaru\n○\n\n\n手\nte\n👉✊🙏👌\n\n郵便\nyuubin\n〒 📮🏧📦\n\n\nチェス\nchesu\n♟️\n\nトランプ\ntoranpu\n♤♡♧♢🃏\n\n\n電話\ndenwa\n℡✆☏☎\n\nNumber\nnanba-\n№＃\n\n\n円\nen\n￥\n\ncent\nsento\n㌣￠ ¢\n\n\nPond\npondo\n£\n\nDollar\ndoru\n＄$\n\n\n摂氏\nseltsushi\n℃\n\nJIS\njisu\n〄\n\n\ncenti\nsenchi\n㎝ ㌢\n\n千米\nkirome-toru\n㎞\n\n\n平米\nheibei\n㎡\n\n立方 Meter\nrippoumi-teru\n㎥\n\n\n千克\nkiro&#x2F;kiroguramu\n㎏\n\nLitre\nrittoru\nｌ lℓ\n\n\nmilli\nmiri\n㎜ ㍉\n\nmilligram\nmiriguramu\n㎎\n\n\n昭和\nshouwa\n㍼\n\n平成\nheisei\n㍻\n\n\n大正\ntaishou\n㍽\n\n明治\nmeiji\n㍾\n\n\nSection\nsekushon\n§\n\n注\nchuu\n㊥㊟\n\n\n左上\nhidariue\n┏┌╒╓┎╭╔┍\n\n左下\nhidarishita\n┗└╘╙┖╰╚┕\n\n\n右上\nmigiue\n┐┓╕╖┒╮╗┑\n\n右下\nmigishita\n┘┛╛╜┚╯╝┙\n\n\n縦\ntate\n│┃ ｜￤ ∥╵║¦❚┆❙\n\n横\nyoko\n━─┈╌┄┉╍═\n\n\n太枠\nfutowaku\n┗┻━┛┏┳━┓\n\n細枠\nhosowaku\n└┴─┘┌┬─┐\n\n\n满中\nmannnaka\n┼╂╋┿╃╁╳╬╪╫\n\n罫線\nkeisen\n&lt;上全部及更多&gt;\n\n\n汗\nase\n(・・;)(^_^;)\n\n疼\nitai\n(&gt;_&lt;)\n\n\n居眠\ninemuri\n(-_-)zzz\n\n御茶\nocha\n( ^^) *U~~　( ^^) *旦~~\n\n\nWink\nulinku\n(^_-)-☆\n\n嗯——\nu-n\n(゜-゜) (゜.゜) (゜レ゜)\n\n\n奥特曼\nurutoraman\n(o|o)\n\nえっへん\nehhen\n&lt;(｀^´)&gt;\n\n\n跪拜&#x2F;抱歉\nojigi&#x2F;gomen\n_(._.)_ &lt;(_ _)&gt;\n\n徹夜\ntetsuya\n(&#x3D;_&#x3D;)\n\n\n闪亮\nkirakira\n☆ ミ ☆ 彡\n\nごぼごぼ\ngobogobo\n.。o○ ○o。.\n\n\nじと\njito\n(-.-) (--) (ーー)!!\n\nじろ\njiro\n( 一一)　(；一_一)\n\n\n一服&#x2F;烟\nippuku&#x2F;tabako\n(-。-)y-゜゜゜(^。^)y-.。o○\n\nあわ\nawa\n.。o○ 　 ○o。.\n\n\n動物\ndoubutsu\n(&#x3D;^・^&#x3D;)　&lt;*))&gt;&#x3D;&lt;　Ｃ:。ミ\n\n猫\nneko\n(&#x3D;^・^&#x3D;)　&#x3D;^_^&#x3D;\n\n\n哈依\nha-i\n(^O^)／\n\n何故&#x2F;謎\nnaze&#x2F;nazo\n(?_?)　(・・?\n\n\n吃驚\nbikkuri\n( ﾟ Д ﾟ)\n\n无语\nmuka\n(-&quot;-)(ーー゛)(-_-メ)\n\n\n顔文字\nkaomoji\n&lt;以上全部及更多&gt;\n\n絵文字\nemoji\n😱😓\n\n\n&gt;&gt;『 ā ī ū ē ō 』\n这是用于在罗马音注音中表示长音的符号。比如「おかあさん okāsan 妈妈」，「おにいさん onīsan 哥哥」，「じゅうにがつ jyūniketsu 十二月」，「おねえさん onēsan 姐姐」，「おとうさん otōsan 爸爸」。\n尽管如此，日文输入法却无法输入这五个字符，没有对应的码表，也没有以意寻字的方法。在きごう下择字也同样找不到这几个。\n对于中文用户，输入这几个字符最方便的办法是直接切换到中文输入法，然后调出软键盘等符号功能，然后在拼音符号中择字输入。\n其次的方法是在 Word 等软件中，使用插入符号功能，找到对应字符输入。或在相关功能的网页上复制粘贴。\n如果要经常使用，可以在输入法的用户自定义词典里添加，并分配对应的输入码。\n一般不需要担心输入问题，通常会使用 ā&#x3D;aa ī&#x3D;ii ū&#x3D;uu ē&#x3D;ee ō&#x3D;ou 代替。随着发音变迁，ē 有时也会写作 ei。[参考]。\n\n","categories":["软件使用"],"tags":["Japanese","Input Method","How to use","Issues","Bean Knowledge","Windows","MacOS"]},{"title":"我好像没从租光盘上省下什么钱","url":"//not-saving-much-from-disc-renting/","content":"在 PSN 会员费又一次涨价后，我重新审视了光盘租赁的经济性。在过去不多的几次租光盘经历中，我发现自己其实并没有节约多少钱。于是做了一些主观分析，尝试厘清这个问题。\n一，实际支出主要来自于光盘降价和背刺虽然老猎人等二手盘商家的买卖差价都只有 10-15 元，但实际上，由于每张光盘在手上存留的时间都很长，光盘二手价格的下降才是真正的实际支出。尽管没有明确计算（因为有几张盘目前还在手上承受着掉价损失），但大致估计下来每张盘要损失 100-200 左右。\n存留时间长带来的另一个风险是同游戏在各数字渠道的赠送或打折。比如《底特律：化身为人》《战神4》《尼尔：自动人形》《十三机兵防卫圈》等都是在光盘租赁期间，甚至尚未开始游玩时，就在 PSN XGPU 等会免或入库。光盘租赁成了无意义的支出，同时还得承担一笔会免大降价损失，俗称『背刺』。数字游戏的大幅折扣或赠送冲击光盘价格是市场的常态，实质是同一商品的渠道间竞争，但真轮到自己头上了还是很不好受。\n二，引出问题：为什么会存留时间较长闲余时间有限，而可选择的游戏却很多，有限的时间分摊给了不同的游戏。尤其是暴雪全家桶等长消耗类游戏占用了相当一块时间。\n和直觉不同的是，虽然游戏总量很多，但每个单机游戏实际分配到的时间不会减少，因为通关时间是相对固定的。代之的是游戏完成周期不断地拉长，甚至可能断断续续持续几年，也使得光盘留存时间不断延长。很多故事剧情驱动的游戏更需要完整的时间段和精神舒适的状态才能游玩，相比于几分钟一局的消耗类游戏，在选择上也不占优势，更加长了通关周期。\n另外，XGPU 等订阅服务的兴起、多年积累的 PSN 会免库、Steam 屡次大促积累的游戏库、Epic 坚持不懈的游戏赠送，使得排队列表越来越长，进一步稀释了光盘游戏的时间密度。\n光盘租赁的固有缺陷，需要收发快递、换盘费事保管麻烦、资金占用等，虽然也都是劣势，却并不是导致存留时间长的原因，甚至是反向因素。其中唯与存留时长正相关的只有『计划赶不上变化』一项，买的时候计划着要玩，两天以后快递到了，却没时间玩，就变成了无效留存。\n三，还有其它因素\n游戏口味的宽泛减弱了对游戏库的二次筛选，增大了平均游戏周期。\n\n对游戏新作时效性需求不高，不追求第一时间体验。\n 新作发售时光盘版与数字版价格一致。如果第一时间购买，那么无论后续掉价几何，全价光盘版可以二手出售就仍比全价数字版有价差优势。但迄今为止追求第一时间玩到的单机游戏并不多。当游戏进入折扣周期后，光盘版价格与数字版价格变得互有高低，这就回到本文开头的情况了——因为存留周期掉价和背刺，我没从租光盘上省下什么钱。\n\n其它生活因素的时间挤压。\n生活中的所有闲余时间都是相互挤占的，副业加班阅读学习运动健身动漫娱乐等等，都在分摊不多的时间。当生活休闲中加入新要素，游戏时间分配就变得更加捉襟见肘。\n\n\n四，为什么重新考虑光盘租赁目前的花费和实际消耗的时间不匹配。\nPSN 和 XGP 费用在不断上涨，低价区限制越发严格，数字游戏的成本在变高，Epic 送的游戏越来越水，游戏总时间也在缩减。会员费交了不用，游戏买了不玩，光盘租了不还，都是浪费。在有限的时间下，几个游戏渠道不再是互为补充，而变成了相互冲突的状态。光盘租赁在大作上的相对价格优势重新凸显，比如《只狼》至今数字版最大折扣也就 50%，和光盘租赁的最坏支出差不多。另外如前文所述，如果减除 PSN 和 XGP，游戏库缩小，光盘游戏的存留时间也有可能减缩，以降低光盘租赁的平均成本。\n缩减游戏库的纠结在于，停用 PSN 和 XGP 除了失去两个游戏库外，还会失去联网功能，同样会影响到一些游戏的体验。而另一方面，光盘的优势也需要一定的条件。一是其它渠道挤兑要少，因此排除第一方大作。二是通关周期短，因此不能是长消耗类游戏。三是游戏要优质，优先级高，且单价高，口碑好，市场稳定，最好是次新大作。\n选择同时意味着放弃。\n五，总不能什么都要吧方案一，彻底数字化，PSNP 二档和 XGPU 二选一或二选二，以帐号共享进一步降低成本。主机选数字版，游戏以库存为主，大作等 50off 或随缘等入库，真有垂涎的就全价购入。\n方案二，单平台化。放弃 XGPU，XSX 出售。只开 PSN 二档并出售 Home 位，PS5 购买光驱版。大作用光盘作为补充。\n方案三，买块好显卡，放弃主机，保留 PC + SteamDeck。一别两宽，各生欢喜。\n方案四，我全都要。\n\n2024-11-27 edit:\n目前实践现状是方案二+方案三，PSN 二档已经提供了足够的时间消耗，并没有租赁光盘，买光驱版主要是考虑二手保值问题。\nSteamDeck 主要是出门&#x2F;过年回家使用，同时也是一个现成的 Linux 机，比虚拟机方便且完善。\nPC 处理各种杂事，偶尔暴雪全家桶。\n","categories":["游戏中心"],"tags":["游戏光盘租赁","收益计算"]},{"title":"微星 B450M 迫击炮主板说明书","url":"//MSI-B450M-Mortar-Manual/","content":"同上，这是微星 MSI B450M 迫击炮主板说明书。下载文件\n其它参数及兼容设备列表不在说明书里，在官网的 兼容性报告 里。\n\n  如果您的浏览器不支持 PDF 文件，请下载文件查看。\n\n","categories":["硬件折腾"]},{"title":"OpenMove 使用手册","url":"//Shokz-OpenMove-Manual/","content":"买了个韶音，发现说明书不好找，就放这里了。下载文件\n\n关机状态下长按音量 ⊕ 不放开机后继续按住进入配对模式。\n配对状态下同时长按耳机键与音量 ⊕ 键开启双重配对。\n配对状态下同时长按耳机键与音量 ⊖ 键关闭双重配对。\n配对状态下同时长按耳机键、音量 ⊕ 键与音量 ⊖ 键恢复出厂设置，恢复后需要关机再开。\n\n\n\n\n耳机键（多功能键）\n状态\n操作\n\n\n\n播放&#x2F;暂停音乐\n待机\n单击\n\n\n拨打上一次通话\n待机\n双击\n\n\n唤醒语音助手\n待机\n长按\n\n\n下一首音乐\n音乐播放\n双击\n\n\n上一首音乐\n音乐播放\n三击\n\n\n接听电话\n来电\n单击\n\n\n拒接电话\n来电\n长按\n\n\n挂断电话\n通话中\n单击\n\n\n挂断当前电话并切换到第二个通话\n通话中\n长按\n\n\n切换系统语言\n配对状态\n双击\n\n\n\n  如果您的浏览器不支持 PDF 文件，请下载文件查看。\n\n\n顺便测试 HTML 插入 PDF 的方法，不需要 hexo-pdf 插件。\n&lt;embed src=&quot;../attach/2023/11/Shokz-OpenMove.pdf&quot; width=&quot;100%&quot; height=&quot;850px&quot;  type=&quot;application/pdf&quot; /&gt;\n\n咨询了 chatGPT，还有稍复杂的方式：\n&lt;object data=&quot;../attach/2023/11/Shokz-OpenMove.pdf&quot; type=&quot;application/pdf&quot; width=&quot;100%&quot; height=&quot;850px&quot;&gt;  &lt;p&gt;如果您的浏览器不支持 PDF 文件，请&lt;a href=&quot;../attach/2023/11/Shokz-OpenMove.pdf&quot;&gt;下载文件&lt;/a&gt;查看。&lt;/p&gt;&lt;/object&gt;\n","categories":["硬件折腾"]},{"title":"索爱 MW600 使用手册","url":"//Sony-MW600-Manual/","content":"同上，这是 Sony Ericsson MW600 索尼爱立信 MW600 蓝牙耳机说明书。下载文件\n\n关机状态下长按开机键 ⏼ 不放经过开机阶段继续按住进入配对模式，使用滑动条选择覆盖哪个旧配对。\nMW600 连接的通话设备和音乐设备是独立切换的，分别通过长按 ⏯ 或 📞 选择。\n在待机模式下长按 ⏯ 选择设备时，存在第四项 FM 收音机功能。FM 为自带功能不需要蓝牙连接其它设备。\n\n\n\n\n状态\n按键\n操作\n备注\n\n\n\n待机模式\n长按 ⏯\n长按选择音乐播放配对设备\n使用滑动条选择设备列表\n\n\n待机模式\n长按 📞\n长按选择通话配对设备\n使用滑动条选择设备列表\n\n\n待机模式\n📞\n启动手机语音助手\n部分电脑设备也有语音助手\n\n\n待机模式\n📞📞\n重拨\n\n\n\n待机模式\n⏯\n启动当前音乐&#x2F;视频播放\n部分设备会自动启动默认音乐播放器\n\n\n播放状态\n⏯\n暂停当前音乐&#x2F;视频播放\n\n\n\n来电状态\n📞\n短按接听，长按拒绝接听\n\n\n\n通话状态\n📞\n短按挂断，长按切换第二通话\n另有耳机发声 &#x2F; 手机发声切换功能\n\n\nFM 模式\n⏮ ⏭\n长按搜索，短按微调\n屏幕显示当前频率\n\n\n所有状态\n⊂&#x3D;&#x3D;&#x3D;&#x3D;⊃\n感应滑动条调整音量\n设备列表时选择配对设备\n\n\n配对状态\n📞⏼\n同时长按两键\n重新设置耳机，清空配对设备\n\n\n\n  如果您的浏览器不支持 PDF 文件，请下载文件查看。\n\n","categories":["硬件折腾"]},{"title":"树莓派 4B 命令行部署 BT/PT 下载机","url":"//BitTorrent-on-raspberry-pi-4B/","content":"树莓派 4B 相比于 3B&#x2F;3B+ 等 3 系有很多改进，但主要的是内存从 1G 加到了顶配版 8G，网卡也从百兆升级到了千兆，使得树莓派 4B 有了作为下载机的实用性。\n系统直接使用官方的 Raspberry Pi。BT 软件一开始尝试使用 qBittorrent 的命令行版本 qBittorrent-nox，开启服务用 web UI 进行远程控制。但实际使用后发现在高压力下，qBittorrent-nox 因为内存占用巨大而频繁被杀进程，然后由系统服务重启，再被杀，再重启，最差时每两三分钟就被杀一次。报错日志看得我心惊肉跳。频繁异常重启也导致了文件丢失、下载进度丢失以及网站封禁等情况，其配置中关于内存限制的参数完全无用，搜索后发现官方开发组把很多反馈，包括内存控制、磁盘碎片、重启丢文件等都甩锅给 libtorrent。遂放弃。\n\n对 qBittorrent 的评价又下降了。之前在 windows 下也是因为 qBittorrent 的缺陷（数量巨大的硬盘碎片）而放弃的。\n\n一番周折后，最终改用了 Transmission 作为 BT&#x2F;PT 服务器端（transmission-daemon），开启 RPC 以允许 Web UI 和第三方客户端连接，Samba 作为局域网文件共享服务器的方案。并自行编写了 RSS 下载脚本以实现 RSS 订阅自动下载。\nTransmission安装与文件目录连接# 安装sudo apt updatesudo apt install transmission-daemon# 获得配置文件的权限sudo chown -R $USER:$USER /etc/transmission-daemon# 设置配置文件软链接sudo mkdir -p /home/$USER/.config/transmission-daemon/sudo ln -s /etc/transmission-daemon/settings.json /home/$USER/.config/transmission-daemon/sudo chown -R $USER:$USER /home/$USER/.config/transmission-daemon/## 挂载 USB 外接硬盘并设置目录权限 sudo mkdir -p /home/$USER/Momoda               # Momoda 是硬盘挂载目录sudo mount /dev/sda1 /home/$USER/Momoda        # 挂载硬盘sudo chown -R $USER:$USER /home/$USER/Momoda   # 设置权限mkdir -p /home/$USER/Momoda/BT                 # 建立下载目录\n\n修改系统服务设置# 修改启动脚本sudo nano /etc/init.d/transmission-daemon&gt;&gt; 在 nano 编辑器中，修改 USER=&lt;YOURUSERNAME&gt; 为你的用户名，&lt;Ctrl+S&gt; 保存 &lt;Ctrl+X&gt; 退出。# 修改服务配置sudo nano /etc/systemd/system/multi-user.target.wants/transmission-daemon.service&gt;&gt; 在 nano 编辑器中，继续修改 User=&lt;YOURUSERNAME&gt; 为你的用户名，&lt;Ctrl+S&gt; 保存 &lt;Ctrl+X&gt; 退出。# 重新加载服务sudo systemctl daemon-reload\n\n修改配置文件Trasmission 会在停止服务时自动保存配置文件，运行服务时修改会被覆盖，必须停机修改。\n# 停止服务sudo systemctl stop transmission-daemon# 编辑配置文件nano ~/.config/transmission-daemon/settings.json\n\n// 部分参数后续可以在 web UI 中再次修改，但当前另一些参数只能在配置文件中修改。&#123;    &quot;download-dir&quot;: &quot;/home/kaikai/Momoda/BT&quot;, // 设置下载目录，kaikai 替换为你的用户名    &quot;rpc-whitelist-enabled&quot;: true,            // 只允许白名单内的 IP 访问    &quot;rpc-whitelist&quot;: &quot;192.168.*.*&quot;,           // 局域网白名单，如果公网要访问则为 *.*.*.*    &quot;rpc-authentication-required&quot;: false,     // 因为只是家用，不需要密码。若公网访问则设置为 true，之后下两条有效    &quot;rpc-user-name&quot;: &lt;username&gt;,              // 独立的用于 webUI/RPC 登录的用户名，自己设置，和本文其它用户名无关    &quot;rpc-password&quot;: &lt;password&gt;,               // 独立的用于 webUI/RPC 登录的密码，transmission 会自动修改内容加密    &quot;umask&quot;: 2,                               // 设置下载文件的权限    &quot;preallocation&quot;: 1,                       // 设置预分配磁盘空间方法，0 No 1 Fast 2 Full    &quot;watch-dir-enabled&quot;: true,                // 开启监视目录，将种子文件放入监视目录，transmission 会自动开始下载    &quot;watch-dir&quot;: &quot;/home/kaikai&quot;,              // 设置监视目录路径&#125;\n\n（可选）替换默认的 webui 为 Flood-for-transmission# 下载wget https://github.com/johman10/flood-for-transmission/releases/download/latest/flood-for-transmission.zip# 解压unzip flood-for-transmission.zip # 备份原来的 webuisudo mv /usr/share/transmission/web /usr/share/transmission/web.bak # 替换sudo cp -r flood-for-transmission /usr/share/transmission/web \n\n还有 Transmission-web-control、Transmissionioc 等多个选择。当然默认的也很好。另外还有独立的客户端比如 Transmission Remote GUI，如果有多个下载服务器的话用客户端更好。\n\n重启 transmission-daemon 服务# 启动服务sudo systemctl start transmission-daemon # 查看服务状态sudo systemctl status transmission-daemon \n\n远程访问# 查看树莓派的 IP 地址ip a \n在浏览器中输入 http://&lt;树莓派的ip&gt;:9091 即可访问 webUI，如果设置了 &quot;rpc-authentication-required&quot;: true 则会跳出认证输入框。使用 RPC 远程客户端也是类似设置。\nRSS 订阅Transmission 并不支持 RSS 订阅，所以我自己写了个脚本，定期检查指定的 RSS，并通过 RPC 接口发送 torrent-add 消息给 Transmisson。https://github.com/kaikaiiiiiii/rss-feed-down 。特色在于支持 PAC 代理读取 RSS。\ngit clone https://github.com/kaikaiiiiiii/rss-feed-downcd rss-feed-downnpm installnode ./rss.js# 在 rss.js 中修改下载目录 savepath = &lt;path&gt;# 在 rssFeeds.txt 修改订阅源，格式为 &lt;name&gt;,&lt;url&gt;,&lt;useProxy&gt;\n通过 crontab 定时执行脚本，实现 RSS 订阅更新并自动下载 torrent 文件。\nSamba安装与配置sudo apt updatesudo apt install samba samba-common-binsudo nano /etc/samba/smb.conf\n smb.conf 文件有一堆内容，拉到最下面，修改或添加以下内容：\n[Pi]                        # 虚拟共享文件夹的名字，后续访问时的路径为 \\\\&lt;树莓派的ip&gt;\\Pipath = /home/kaikai/Momoda  # Pi 虚拟文件夹对应的本地目录writeable=Yes               # 可以写，即可以上传文件，同时也可以删除文件create mask=0777            # 新建文件的权限directory mask=0777         # 新建文件夹的权限public=no                   # 不是公共文件夹，ananymous 不能访问                            # 编辑完成后按 Ctrl+S 保存，Ctrl+X 退出\n\n添加 samba 的授权用户# kaikaiHome 为独立的用于 samba 登录的用户名，和本文其它用户名无关sudo smbpasswd -a kaikaiHome \n随后系统会提示输入密码，输入两次并确认\n重启 samba 服务sudo systemctl restart smbd\n\n在 Windows 的 &lt;映射网络驱动器&gt; 或其它可以用 smb&#x2F;cifs 的程序 app 输入 \\\\&lt;树莓派的ip&gt;\\Pi 并输入 kaikaiHome 的用户名和密码即可访问。\n","categories":["命令行"],"tags":["树莓派","Raspberry Pi","BitTorrent","BT 下载","PT","Transmission","Samba","qBittorrent","Flood","RSS"]},{"title":"与硬盘相关的若干 raspbian 命令","url":"//commands-about-hdd-on-raspbian/","content":"sudo fdisk -l                   # 列举设备或分区sudo blkid                      # 查看硬盘 UUID，只列举物理储存设备sudo fdisk /dev/sda             # 互动式硬盘分区sudo mkfs.ext4 /dev/sda         # 格式化整个硬盘sudo mkfs.ext4 /dev/sda1        # 仅格式化第一个分区sudo e2label /dev/sda momoda    # 给硬盘命名为 momodasudo e2label /dev/sda           # 查看硬盘名字ls /dev/disk/by-label/momoda    # 以硬盘名字指向硬盘，方便硬盘位置变动后正常挂载sudo mount /dev/sda ~/momoda    # 挂载硬盘sudo umount /dev/sda            # 卸载硬盘sudo chown $USER:$USER ~/momoda # 修改硬盘访问权限# 挂载 windows 共享文件夹：命令，远端路径（Windows端），本地路径，用户名，密码，编码，文件权限，文件夹权限sudo mount.cifs //&lt;主机IP或主机名&gt;/&lt;共享目录&gt; ~/&lt;本地映射目录&gt; -o username=&lt;Win主机设置的共享用户名&gt;,password=&lt;Win主机设置的共享密码&gt;,iocharset=utf8,file_mode=0777,dir_mode=0777sudo apt install smartmontools  # smartctl 命令属于 smartmontools 包sudo smartctl -a /dev/sda       # 查看硬盘健康状态sudo hdparm -I /dev/sda         # 查看硬盘健康状态（另一种方式）dos2unix /path/to/file          # 将文件从 windows 格式转换为 unix 格式，可用 * 通配unix2dos /path/to/file          # 将文件从 unix 格式转换为 windows 格式，可用 * 通配\n\n# 开机自动挂载硬盘nano /etc/fstab\n\n# &lt;device&gt;                &lt;mountpoint&gt;        &lt;file system&gt; &lt;options&gt; &lt;dump&gt; &lt;fschk&gt;/dev/disk/by-label/momoda /home/kaikai/momoda  ext4          defaults  0      0\n关于 fstab 的参数说明：https://www.redhat.com/sysadmin/etc-fstab\n","categories":["命令行"],"tags":["Raspbian","linux","commands about HDD"]},{"title":"Surface Go 4 好像是个不错的 Galgame 设备","url":"//galgame-device/","content":"在 CPU 提升为 N200 后，Surface Go 4 似乎成为了一款不错的 Galgame 设备。当然现在还有另一个选择 Steamdeck，但是 Steamdeck 也有屏幕、风扇、系统兼容性等方面的劣势。尤其是在屏幕方面，差别非常大。总之先列举一下配置作参考。\nSurface 系列\n\n\n名称\n配置\n重量\n厚度\nCPU分数\n\n\n\nSurface Go\n奔腾 G4415Y HD615 8G 128&#x2F;256G 1800*1200\n522g\n8.3mm\n1591\n\n\nSurface Go 2\n奔腾 G4425Y HD615 8G 128G 1920*1280\n544g\n8.3mm\n1696\n\n\nSurface Go 2\n酷睿 M3 8100Y HD615 8G 128&#x2F;256G 1920*1280\n544g\n8.3mm\n2878\n\n\nSurface Go 3\n奔腾 G6500Y HD615-23EU@900M 8G 128G 1920*1280\n544g\n8.3mm\n3022\n\n\nSurface Go 3\n酷睿 i3 10100Y HD615-24EU@1G 8G 128&#x2F;256G 1920*1280\n544g\n8.3mm\n2935\n\n\nGo 4 Business\n酷睿 N200 UHD 8G 64&#x2F;128&#x2F;256G UFS 1920*1280\n521g\n8.3mm\n5455\n\n\nSteamdeck 系列\n\n\n名称\n配置\n重量\n厚度\n屏幕\n\n\n\nSteamdeck\n7nm Zen2 8CU 16G 64G-1T\n669g\n49mm\n7寸 1280 × 800\n\n\nSteamdeck OLED\n6nm Zen2 8CU 16G 512G-1T\n640g\n49mm\n7.4寸 1280 × 800@90 HDR\n\n\n对比两者还是有挺大区别的，前几代 Surface Go 的 CPU 性能基本已经脱离主流了，毕竟被动散热，上架就是同时代低端性能，跑 E-mote&#x2F;Live2D 都存在一定性能问题。手头的 Surface Go 一代跑 Steam 客户端本身都显得很勉强。4 代的 N200 CPU 性能其实也是本代低端，但毕竟刚上市还过得去。\n所以针对 Galgame，Surface 的主要且唯一巨大的优势就是屏幕，无风扇算个小优，系统优势不大，Deck 也可以装 Win 切换。\n而 Steamdeck 毕竟是游戏机，能跑的都能跑，只是屏幕差距对 Galgame 来说是个硬伤，性能则显得相对冗余。\n","categories":["游戏中心"],"tags":["Galgame","Game Device"]},{"title":"通过 DisqusJS 添加 Disqus 评论系统","url":"//disqusjs-installation/","content":"在博客访问者无法直连 Disqus 时，有个 DisqusJS 的劣化替代方案可供博主使用。方案内置在 Hexo Next 主题中，在正确配置第三方反向代理后，博客可向游客展示评论，但游客无法参与讨论。\n这种方案的效果如本文底部评论区所示。该方案需要在三个地方进行配置，分别是 Disqus 服务提供方（需科学上网）、代理端（本文为 Cloudflare 云函数），以及 Hexo Next 配置文件（本地），没有先后顺序。\nDisqus先 注册 Disqus 账号。注册后，点击首页的『GET STARTED』，并选择『I want to install Disqus on my site』选项。\n下一页，只有 Shortname 会在后续的配置中用到，其余随便选。下一页，付费页面下拉选择 Basic 免费计划。下一页，出现 Installation 界面就可以关闭了，因为 Hexo Next 已经内置，不需要手动安装。左侧菜单其它的审核策略等选项都可以后续有需要再设置。\n然后 注册 Disqus API 应用。第一页，都随便填，Label 填个自己能看懂的名字，方便后续管理。网址格式要正确。填完以后点『Register my application』下一页，Settings 下的 Domains 填上博客网址，不用加 http&#x2F;https 协议前缀。Disqus 后续会用来匹配 referer。填完后点『Save Changes』保存以后切换到『Details』页面，把 Public Key 的一长串字符复制下来，后续会用到。\nCloudflare\n假设你已经有了 Cloudflare 账号，并且有一个由 Cloudflare 管理的域名。\n\n登录 Cloudflare 云函数平台，Login。下一页，点击右上角『Create a Worker』，下一页点击『创建 Worker』，下一页起个名 worker name 后续管理要用，点右下角部署。下一页，『配置 Worker』。下一页，右上角『快速编辑』，复制下面代码，粘贴后点右上角『保存并部署』。\naddEventListener(&#x27;fetch&#x27;, event =&gt; &#123;  event.respondWith(proxy(event));&#125;);async function proxy(event) &#123;  const getReqHeader = (key) =&gt; event.request.headers.get(key);  let url = new URL(event.request.url);  url.hostname = &quot;disqus.com&quot;;  let parameter = &#123;    headers: &#123;      &#x27;Host&#x27;: &#x27;disqus.com&#x27;,      &#x27;User-Agent&#x27;: getReqHeader(&quot;User-Agent&quot;),      &#x27;Accept&#x27;: getReqHeader(&quot;Accept&quot;),      &#x27;Accept-Language&#x27;: getReqHeader(&quot;Accept-Language&quot;),      &#x27;Accept-Encoding&#x27;: getReqHeader(&quot;Accept-Encoding&quot;),      &#x27;Connection&#x27;: &#x27;keep-alive&#x27;,      &#x27;Cache-Control&#x27;: &#x27;max-age=0&#x27;    &#125;  &#125;;  if (event.request.headers.has(&quot;Referer&quot;)) &#123;    parameter.headers.Referer = getReqHeader(&quot;Referer&quot;);  &#125;  if (event.request.headers.has(&quot;Origin&quot;)) &#123;    parameter.headers.Origin = getReqHeader(&quot;Origin&quot;);  &#125;  return fetch(new Request(url, event.request), parameter);&#125;// 代码来自 [idawnlight](https://github.com/idawnlight/disqusjs-proxy-cloudflare-workers)\n\n下一页，点击仪表上 『Custom Domains』下面 『0』右边的『查看』，随后点击右上角『添加自定义域』。建议填入 disqus.&lt;你自己拥有的域名&gt;，点击『保存』。这是 cloudflare worker domain，后续会用到。如果你没有自定义域名，也可以用默认的。默认的在仪表上『预览』位置处，格式为 &lt;workername&gt;.&lt;你的cloudflare 帐号名&gt;.worker.dev。\n点击『添加自定义域』，Cloudflare 的配置完成。需要等几分钟生效。期间可以先配置 Hexo Next。\nHexo Next编辑 _config.next.yml 文件，找到 comments disqus disqusjs 三个配置项，修改内容：\ncomments:    style: tabs    active: disqusjs    # 这里用 disqusjs 代替了 disqus    storage: true    lazyload: false    nav:        disqusjs:       # 这里用 disqusjs 代替了 disqus          text: Load DisqusJS          order: -1# Disqusdisqus:    enable: false       # 这里改为 false，关闭原始的 Disqus    shortname:     count: true# DisqusJSdisqusjs:    enable: true        # 这里改为 true，启用 DisqusJS    api:  https://&lt;cloudflare worker domain&gt;/api/   # 这里填 Cloudflare 云函数的域名，注意还要加上 /api/ 后缀    apikey:  &lt;API key&gt;                              # 这里填 Disqus 提供的 public key    shortname: &lt;shortname&gt;                          # 这里填 Disqus 注册时的 shortname\n\n验证本地，或编译后在服务器端打开页面，都可以看到评论区。自行留言后断开科学上网，刷新页面看有没有更新即可。或者用 Cloudflare 的云函数计数是否增加也可以。\n","categories":["代码脚本"],"tags":["DisqusJS","Disqus","Comments","Cloudflare"]},{"title":"Latex 语法简单总结","url":"//latex-syntax-mathjax/","content":"\n.red {\n    color: red;\n}\n.green {\n    color: green;\n}\n.f{\n    border-bottom: 1px solid #333;\n    padding-bottom: 2px;\n    font-size:0.9em\n}\n\n\nHexo Next 开启 MathjaxHexo Next 主题默认支持 Mathjax 和 katex，以在博客文章中显示数学公式。其中，Mathjax 默认以『按需加载』的方式开着，只需要在 md 文件的头部区域添加 mathjax: true 即可激活该文的 Mathjax 支持。\n---layout: posttitle: &quot;Latex 简单语法总结&quot;mathjax: true # 开启 Mathjax---\n\n也可以在 _config.next.yml 配置文件中设置 math: ↴ every_page: true 为所有文章开启数学公式支持。\nLatex 语法\nMathjax 不只支持 Latex，还支持 MathML 等语法。本着快速入门的实用主义角度，本文只记录一部分 Latex 语法。\n\nLatex 的基本语法包括：\n\n开头结尾与键盘字符。\n格式控制，包括公式组合、上下标、分数、根式、矩阵等 。\n转义字符，包括希腊字符、数学符号、运算符、箭头、修饰符等。\n打印控制，包括字体、颜色、大小、对齐等。\n宏定义与扩展包，包括自定义命令、环境等。\n\n开头结尾与键盘字符用 $ ... $ 包裹的内容会被 Mathjax 重新改写为 行内公式，比如 \\$F&#x3D;ma\\$ 就会被自动渲染为 $F&#x3D;ma$，行内公式后续文字会在同一行继续。用 $$ ... $$ 包裹的内容称为 行间公式 或者 块内公式，公式在文章中是独立的块，\\$\\$E&#x3D;mc^2\\$\\$ 会被渲染为 $$E&#x3D;mc^2$$ 文字将被断开换行并形成上下围绕。\n对于英文字母以及一些键盘上的符号，Mathjax 也会适当地重新渲染，$+ - * &#x2F; &#x3D; &gt; &lt; ( ) [ ]$ 等均会被渲染为数学符号。因此像 F&#x3D;ma 这样的公式，直接前后套上 $，变为 \\$F&#x3D;ma\\$ 就是 Latex 表达式了。\n格式控制：初步从上面我们还注意到，c^2 经过 Mathjax 渲染后变成了 $c^2$。没错，^ 就是上标控制符，将紧随其后的字符变为上标。同理，_ 就是下标控制符。\\$C_4^1 * C^2_4\\$ 将渲染为 $C_4^1 * C^2_4$。上下标没有先后顺序，都会附着到前一个全高字符上。\n当表达『24 选 4』时，\\$C_24^4\\$ 却被渲染为了 $C_24^4$。规则是严格执行的，但结果却不是我们想要的。这时候需要用到花括号 &#123;&#125; 来控制上下标的范围，用 \\$C_&#123;24&#125;^4\\$ 就能正确渲染为 $C_{24}^4$ 了。\n&#123;&#125; 『分组符』不光能用于上下标，其用途如名字所言，是将若干 latex 表达式定义为一个组，以一个整体与表达式中其它部分作用。比如 \\$1^{3^{5^{7^9}}}\\$ $\\Rightarrow$ $1^{3^{5^{7^9}}}$，就是先将 7^9 视为整体，作为 5 的上标，再以三者的组合作为整体，作为 3 的上标，以此类推直到完成这个叠幂公式。你甚至可以反过来，比如 \\${{{1^3}^5}^7}^9\\$ $\\Rightarrow$ ${{{1^3}^5}^7}^9$。分组符的灵活应用是大型公式的基础之一。\n\n注意看两种不同的叠幂公式的渲染效果，有什么不同？为什么？\n\n$C_{24}^4$ 可以展开为 $(24 \\cdot 23 \\cdot 22 \\cdot 21)&#x2F;(1 \\cdot 2 \\cdot 3 \\cdot 4)$。即通项公式 $C_n^k &#x3D; \\frac{1 \\times 2 \\times \\dots \\times k}{n (n-1) (n-2) (n-k+1)}$，其 Latex 表达式为 \\$ C_n^k &#x3D; \\frac{1 \\times 2 \\times \\dots \\times k}{n (n-1) (n-2) (n-k+1)} \\$。\n从这里我们开始入门大型公式。上述分数的表达式是 $\\frac&#123;分子&#125;&#123;分母&#125;$，在 \\frac 后面，分子和分母的位置是固定的，分子在前，分母在后，与上下标有所不同。大括号 &#123;&#125; 则继续发挥分组的作用。在分子分母两组内部，我们又用了 \\times 作为乘号，\\dots 作为三点省略号。Mathjax 会自动识别空格，因此我们不必担心空格的问题，在源代码上添加空格可以使阅读与编辑更方便，有时也能避免一些 latex 的编译错误。\n在初步掌握格式控制后，就可以展开阅读以下表格了：\n\n\n\n控制符\n作用\n效果\n\n控制符\n作用\n效果\n\n\n\n^\n上标\n2^3 $\\Rightarrow$ $2^3$\n\n_\n下标\nC_2 $\\Rightarrow$ $ C_2$\n\n\n{ }\n分组\n1^{3^5} $\\Rightarrow$ $1^{3^5}$\n\n\\quad\n宽度 1em 的空格$^*$\n1 \\quad 2 $\\Rightarrow$ $1\\quad 2$\n\n\n\\frac\n上下分式\n\\frac 1 2 $\\Rightarrow$ $\\frac 1 2$\n\n\\over\n上下分式\n1 \\over 2 $\\Rightarrow$ $ {1\\over2}$\n\n\n\\sqrt\n根号\n\\sqrt[3]{27} $\\Rightarrow$ $\\sqrt[3]{27}$\n\n\\binom\n组合数\n\\binom{4}{24} $\\Rightarrow$ $\\binom{4}{24}$\n\n\n\\left(\n左大括号$^*$\n\\left( \\frac{4}{24} \\right) $\\Rightarrow$ $\\left( \\dfrac4{24} \\right)$\n$\\Leftrightarrow$\n\\right)\n右大括号\n&lt;反例&gt; (\\frac{4}{24}) $\\Rightarrow$ $( \\dfrac4{24} )$\n\n\n\\left[\n左大方括号\n\\left[ \\frac{4}{24} \\right] $\\Rightarrow$ $\\left[ \\dfrac4{24} \\right]$\n$\\Leftrightarrow$\n\\right]\n右大方括号\n&lt;反例&gt; [\\frac{4}{24}] $\\Rightarrow$ $[ \\dfrac4{24} ]$\n\n\n\\left\\{\n左大方括号\n\\left\\{ \\frac{4}{24} \\right\\} $\\Rightarrow$ $\\left\\{\\dfrac4{24}\\right\\}$\n$\\Leftrightarrow$\n\\right]\n右大方括号\n&lt;反例&gt; \\{\\frac{4}{24}\\} $\\Rightarrow$ $\\{\\dfrac4{24}\\}$\n\n\n* 为兼容源代码的可读性，Latex 会忽略普通空格。因此在公式中需要添加额外空格时要用 \\quad。后续排版环节会介绍更多距离控制符。* 在所属代码块内，以最大上下范围为准，自动调整括号大小。\n转义字符与修饰符号在数学中我们会用到很多字符，比如圆周率 π，积分符号 ∫，无穷大 ∞，等等。归功于 unicode 的普及，我们可以直接从输入法的特殊字符输入，或者其它查码表的方式来输入这些字符，Mathjax 也都是支持的。但 Latex 出身甚早，自身也提供了一套转义字符以输入这些特殊字符，显示效果也更好。\n希腊字符\n\n\n小写希腊字符\nLatex 转义\nMathjax 效果\n\n大写希腊字符\nLatex 转义\nMathjax 效果\nUnicode\n\n\n\nα\n\\alpha\n$\\alpha$\n\nΑ\n\\Alpha\n$\\Alpha$\nx0391\n\n\nβ\n\\beta\n$\\beta$\n\nΒ\n\\Beta\n$\\Beta$\nx0392\n\n\nγ\n\\gamma\n$\\gamma$\n\nΓ\n\\Gamma\n$\\Gamma$\nx0393\n\n\nδ\n\\delta\n$\\delta$\n\nΔ\n\\Delta\n$\\Delta$\nx0394\n\n\nϵ\n\\epsilon\n$\\epsilon$\n\nΕ\n\\Epsilon\n$\\Epsilon$\nx0395\n\n\nζ\n\\zeta\n$\\zeta$\n\nΖ\n\\Zeta\n$\\Zeta$\nx0396\n\n\nη\n\\eta\n$\\eta$\n\nΗ\n\\Eta\n$\\Eta$\nx0397\n\n\nθ\n\\theta\n$\\theta$\n\nΘ\n\\Theta\n$\\Theta$\nx0398\n\n\nι\n\\iota\n$\\iota$\n\nΙ\n\\Iota\n$\\Iota$\nx0399\n\n\nκ\n\\kappa\n$\\kappa$\n\nΚ\n\\Kappa\n$\\Kappa$\nx039a\n\n\nλ\n\\lambda\n$\\lambda$\n\nΛ\n\\Lambda\n$\\Lambda$\nx039b\n\n\nμ\n\\mu\n$\\mu$\n\nΜ\n\\Mu\n$\\Mu$\nx039c\n\n\nν\n\\nu\n$\\nu$\n\nΝ\n\\Nu\n$\\Nu$\nx039d\n\n\nξ\n\\xi\n$\\xi$\n\nΞ\n\\Xi\n$\\Xi$\nx039e\n\n\nο\n\\omicron\n$\\omicron$\n\nΟ\n\\Omicron\n$\\Omicron$\nx039f\n\n\nπ\n\\pi\n$\\pi$\n\nΠ\n\\Pi\n$\\Pi$\nx03a0\n\n\nρ\n\\rho\n$\\rho$\n\nΡ\n\\Rho\n$\\Rho$\nx03a1\n\n\nσ\n\\sigma\n$\\sigma$\n\nΣ\n\\Sigma\n$\\Sigma$\nx03a3\n\n\nτ\n\\tau\n$\\tau$\n\nΤ\n\\Tau\n$\\Tau$\nx03a4\n\n\nυ\n\\upsilon\n$\\upsilon$\n\nΥ\n\\Upsilon\n$\\Upsilon$\nx03a5\n\n\nϕ\n\\phi\n$\\phi$\n\nΦ\n\\Phi\n$\\Phi$\nx03a6\n\n\nχ\n\\chi\n$\\chi$\n\nΧ\n\\Chi\n$\\Chi$\nx03a7\n\n\nψ\n\\psi\n$\\psi$\n\nΨ\n\\Psi\n$\\Psi$\nx03a8\n\n\nω\n\\omega\n$\\omega$\n\nΩ\n\\Omega\n$\\Omega$\nx03a9\n\n\n\n可以看到，希腊字母的转义就是它的英语名称前加反斜杠 `\\`。大写希腊字母则首字母大写。同时也会注意到，不少大写的 Mathjax 渲染效果并不是西腊字符，而是将源码染红了。\n\n标红是因为 Mathjax 认为它是错误代码。标红错误代码有助于作者顺利进行排查，比如 $\\fracc{k}{n(n-k)}$ 很容易便能看出来是 \\frac 拼写错误。但为何 $\\Alpha$ 是错误的呢？原因如下：\n\n[引用] There is no uppercase Alpha, Beta etc. deﬁned in LATEX2ε because it looks the same as a normal roman A, B.\n\n由于历史原因，Latex 以『形状相似』为由，没有定义几个与英文相似的大写希腊字母，包括 Α Β Ε Ζ Τ 等，遇到就报错，建议你用英文字母代替这几个大写希腊字符。所以 Mathjax 也跟着报错了。仔细想来，只是用于公式排版倒也差不多说得过去。只是极端节省到这地步，我的心情如下述评论：\n\n[引用] The fact that they actually bothered to make a capital tau symbol surprises me ...\n\n这种情况下，如果有必要输入正确的大写希腊字符，例如某些可能会被复制的场合。可以直接用输入法的特殊字符输入，或者用 Latex 后续版本扩展出来的 \\unicode{} 方法，例如 \\$\\unicode{x0391} \\neq \\text{A}\\$ $\\Rightarrow$ $\\unicode{x0391}\\neq \\text{A}$。\n数学符号Latex 定义了大量的符号，下表只列出了一小部分。大部分符号用不到就是不需要，知识领域没覆盖那部分。这里 有一份号称完整的符号表，不过比起查书，问问 ChatGPT 也许更直接。\n\n\n\n效果\nLatex\n效果\nLatex\n效果\nLatex\n效果\nLatex\n\n\n\n$\\infty$\n\\infty\n$\\aleph$\n\\aleph\n$\\because$\n\\because\n$\\therefore$\n\\therefore\n\n\n$\\approx$\n\\approx\n$\\neq$\n\\neq\n$\\equiv$\n\\equiv\n$\\mid$\n\\mid\n\n\n$\\oplus$\n\\oplus\n$\\pm$\n\\pm\n$\\parallel$\n\\parallel\n$\\nparallel$\n\\nparallel\n\n\n$\\times$\n\\times\n$\\div$\n\\div\n$\\forall$\n\\forall\n$\\exists$\n\\exists\n\n\n$\\cup$\n\\cup\n$\\cap$\n\\cap\n$\\subset$\n\\subset\n$\\supset$\n\\supset\n\n\n$\\in$\n\\in\n$\\notin$\n\\notin\n$\\sum$\n\\sum\n$\\prod$\n\\prod\n\n\n$\\partial$\n\\partial\n$\\int$\n\\int\n$\\iint$\n\\iint\n$\\oint$\n\\oint\n\n\n$\\geq$\n\\geq\n$\\leq$\n\\leq\n$\\gg$\n\\gg\n$\\ll$\n\\ll\n\n\n$\\to$\n\\to\n$\\gets$\n\\gets\n$\\mapsto$\n\\mapsto\n$\\leadsto$\n\\leadsto\n\n\n$\\uparrow$\n\\uparrow\n$\\upuparrows$\n\\upuparrows\n$\\Uparrow$\n\\Uparrow\n$\\downarrow$\n\\downarrow\n\n\n$\\updownarrow$\n\\updownarrow\n$\\leftrightarrow$\n\\leftrightarrow\n$\\twoheadrightarrow$\n\\twoheadrightarrow\n$\\xtwoheadrightarrow{abc}$\n\\xtwoheadrightarrow{abc}\n\n\n$\\curvearrowleft$\n\\curvearrowleft\n$\\curvearrowright$\n\\curvearrowright\n$\\circlearrowleft$\n\\circlearrowleft\n$\\circlearrowright$\n\\circlearrowright\n\n\n$\\square$\n\\square\n$\\triangle$\n\\triangle\n$\\perp$\n\\perp\n$\\angle$\n\\angle\n\n\n$\\lim$\n\\lim\n$\\log$\n\\log\n$\\sin$\n\\sin\n$\\cos$\n\\cos\n\n\n特殊转义符我们使用 $ ... $ 和 $$ ... $$ 来包裹 Latex 表达式，用 &#123;&#125; 来分组包裹，用 ^_ 作为上下标。那么当我们需要在公式中直接显示这几个字符时，就需要额外添加转义符了。\n\n\n\n转义字符\nLatex 表示法\nMathjax 效果\n说明\n\n\n\n$ _ { }\n\\\\$ \\_ \\{ \\}\n\\\\{ \\\\_ \\\\\\$ \\\\} $\\Rightarrow$ $ \\{ \\_ \\$ \\}$\n普通地添加 \\ 前缀即可，{} 大括号本身也是公式常用字符。\n\n\n^\n\\verb!^! $^*$\n3\\verb!^!3&#x3D;27 $\\Rightarrow$ $3\\verb!^!3&#x3D;27$\n\\verb 可能在一些复杂公式中与其它控制符冲突。\n\n\n^\n^\\wedge\n3^\\wedge3&#x3D;27 $\\Rightarrow$ $3^\\wedge3&#x3D;27$\n只是像，不是同一个字符。但参考上文，像有时就够了。\n\n\n\\\n\\backslash\nC:{\\backslash}Windows $\\Rightarrow$ $ C:{\\backslash}Windows$\n这里用到 { } 是因为要与 Windows 这个单词分开。\n\n\n* verb 是 verbatim 的简写，verbatim text 意为原始文本。\\verb 的语法较为特殊，首先以 \\verb 开头，然后紧接着一个界定符，这个界定符可以是 ! | # 等各种符号任选，只需要与正文不冲突即可，再继续输入正文，最后再以相同的界定符结尾。两个界定符之间的内容将被原样输出，不会被 Mathjax 渲染。界定符甚至可以是数字，比如 \\$\\verb03^30\\$ 将输出 $\\verb03^30$，前后两个 0 成为了首尾界定符，但唯独不能是字母，因为会和 verb 本身形成新的单词短语导致解析错误，\\$\\verba3^3a\\$ $\\Rightarrow$ $\\verba3^3a$。\n修饰符号\n\n\n效果\nLatex\n效果\nLatex\n效果\nLatex\n效果\nLatex\n\n\n\n$\\hat{abc}$\n\\hat{abc}\n$\\widehat{abc}$\n\\widehat{abc}\n$\\bar{abc}$\n\\bar{abc}\n$\\overline{abc}$\n\\overline{abc}\n\n\n$\\vec{abc}$\n\\vec{abc}\n$\\overrightarrow{abc}$\n\\overrightarrow{abc}\n$\\dot{abc}$\n\\dot{abc}\n$\\ddot{abc}$\n\\ddot{abc}\n\n\n$\\tilde{abc}$\n\\tilde{abc}\n$\\widetilde{abc}$\n\\widetilde{abc}\n$\\overbrace{abc}^n$\n\\overbrace{abc}^n\n$\\underbrace{abc}_n$\n\\underbrace{abc}_n\n\n\n修饰符号的使用类似于函数，用 &#123;&#125; 将修饰对象包裹起来，修饰符号的位置总是相对于修饰对象进行调整，而与修饰对象在整个公式中的位置无关。\n从大型运算符到修饰命令我们在前面已经见到了 \\sum \\prod \\int 等大型运算符，这些符号在公式中往往还配有上下限、积分定义域等算子与脚标。Mathjax 会自动根据行内或块内的场景来调整算子的大小和脚标的相对位置。比如 \\$\\sum_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6\\$ 将渲染为 $\\sum_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6$，而相同的公式在块内渲染为：\n$$\\sum_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6$$\n可以看到，$_{i&#x3D;1}$ 与 $^n$ 的位置随着不同的条件自动调整了。这种自动调整的机制在大型公式中非常有用，我们只需要关心公式的结构即可。但如果一定要坚持特定的格式，也可以用 \\limits 和 \\nolimits 来强制调整上下限的位置。比如 \\$\\sum\\limits_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6\\$ 将渲染为 $\\sum\\limits_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6$。而\\$\\$\\sum\\nolimits_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6\\$\\$ 将渲染为：\n$$\\sum\\nolimits_{i&#x3D;1}^n i^2 &#x3D; \\frac {n(n+1)(2n+1)} 6$$\n\\limits 与 \\nolimits 没有自己的符号，但可以修饰很多带脚标的大形运算符，强制调整其形式，且只能用在运算符上。如果你用在别处，Mathjax 会报错。比如： \\$C\\limits_4^2\\$ $\\Rightarrow$ $C\\limits_4^2$，报错了。我们期望的是 4 出现在 C 的下方，正确的实现方式是用下面的 \\underset 命令：\n\n\n\n修饰命令\n作用\n效果\n\n\n\n\\limits \\nolimits\n强制上下限以指定场景显示\n上文已述\n\n\n\\substack{}\n创建一个多行块，整体通常作为上下标\n\\sum*{\\substack{0&lt;i&lt;3\\\\\\\\0&lt;j&lt;5}}a*{ij} $\\Rightarrow$ $\\sum_{\\substack{0&lt;i&lt;3\\\\0&lt;j&lt;5}}a_{ij}$\n\n\n\\mathop{}\n将 { }内的内容整体视作一个大型运算符\n\\mathop{\\sum\\sum}\\limits_{i \\neq j} (i *j) $\\Rightarrow$ $\\mathop{\\sum\\sum}\\limits_{i \\neq j} (i *j)$\n\n\n\\mbox{}\n{ } 内的文本不会断行，可能导致溢出\n\\mbox{ ... very long contnet ... } $\\Rightarrow$ $$\\mbox{Very very very very very very very long content in the mbox and there is no line break. }$$\n\n\n\\sideset{}{}\\prod\n在 \\prod 的左右边分别添加指定内容\n\\sideset{_1^2}{_3^4}\\prod $\\Rightarrow$ $\\sideset{_1^2}{_3^4}\\prod$\n\n\n\\overset{A}{B}\n在内容 B 的上方添加内容 A\n2Cu+2Al\\overset{\\triangle}{&#x3D;}2Au+Cl_2\\uparrow $\\Rightarrow$ $2Cu+2Al\\overset{\\triangle}{&#x3D;}2Au+Cl_2\\uparrow$\n\n\n\\underset{A}{B}\n在内容 B 的下方添加内容 A\n\\underset{probability}{P}(X&#x3D;x) &#x3D; \\frac{1}{x}^2 $\\Rightarrow$ $\\underset{probability}{P}(X&#x3D;x) &#x3D; \\frac{1}{x}^2$\n\n\n多行公式组：矩阵，表格及其它equation 与 cases经过前面的铺垫，我们可以开始对公式进行组合了。公式组的基本形式是：\n\\begin&#123;equation&#125;    \\begin&#123;cases&#125;        x + y = 35 \\\\        2x + 4y = 94    \\end&#123;cases&#125;\\end&#123;equation&#125;\n\n效果如下：\\begin{equation}\\begin{cases}x + y &#x3D; 35 \\\\2x + 4y &#x3D; 94\\end{cases}\\end{equation}\n\n多行公式组不需要以 $ ... $ 包裹，但需要以 \\begin&#123;env&#125; \\end&#123;env&#125; 单独的首尾声明作为公式起止。env 则是由 latex 预先定义的一些环境，比如上面的 equation 就是一个环境。\nequation 环境的作用是将包裹的所有内容视作一个公式全局自动编号，编号的位置在公式组的最右侧。而 cases 环境的作用是为包裹的所有内容添加左大括号，形成一个公式组。\n公式组内部仍可以用其它的公式控制符，比如 \\frac \\sum \\int 等。\n公式组内部通常都有多行，需要用 \\\\ 来换行。Latex 源码的回车换行和空格一样会在渲染时忽略，多行 latext 公式组在源码上仍然可以只写成一行，\\\\begin{equation}\\\\begin{cases}x+y&#x3D;35\\\\\\\\2x+4y&#x3D;94\\end{cases}\\end{equation} 的效果是一样的，但合理书写可以让源码可读性及可编辑性更高。\n\\begin&#123;env&#125; \\end&#123;env&#125; 是可以嵌套的，在上面的例子中，我们用了两个环境，在 equation 环境内部嵌套了 cases 环境，效果是将鸡兔同笼的两个二元一次方程合并成组，并做了全局编号。\n\nalign 与 align*align 的作用是将每一个包裹的公式对齐，比较适合于表现演算过程。要注意的是，align 并不会自动以 $&#x3D;$ 对齐，而是要用 &amp; 指定竖向对齐位置。比如：\n\\begin&#123;align&#125;    f(x) &amp;= x^4 + 4 \\\\         &amp;= x^4 + 4x^2 + 4 - 4x^2 \\\\         &amp;= (x^2 + 2)^2 - (2x)^2 \\\\         &amp;= (x^2 + 2x + 2)(x^2 - 2x + 2)\\end&#123;align&#125;\n\n得到：\\begin{align}f(x) &amp;&#x3D; x^4 + 4 \\\\&amp;&#x3D; x^4 + 4x^2 + 4 - 4x^2 \\\\&amp;&#x3D; (x^2 + 2)^2 - (2x)^2 \\\\&amp;&#x3D; (x^2 + 2x + 2)(x^2 - 2x + 2)\\end{align}\n可以看到，每个公式后面都加上了全局编号，如果不想要的话，可以用 align* 来代替 align，效果如下：\n\\begin{align*}f(x) &amp;&#x3D; x^4 + 4 \\\\&amp;&#x3D; x^4 + 4x^2 + 4 - 4x^2 \\\\&amp;&#x3D; (x^2 + 2)^2 - (2x)^2 \\\\&amp;&#x3D; (x^2 + 2x + 2)(x^2 - 2x + 2)\\end{align*}\n同样的情况也适用于 equation，即无编号公式 equation*，不再演示。\nmatrix 矩阵与省略号matrix 环境用于矩阵排版，例如：\n\\begin&#123;matrix&#125;    a_1 &amp; b_1 &amp; c_1 \\\\    a_2 &amp; b_2 &amp; c_2 \\\\    a_3 &amp; b_3 &amp; c_3\\end&#123;matrix&#125;\n\n\\begin{matrix}a_1 &amp; b_1 &amp; c_1 \\\\a_2 &amp; b_2 &amp; c_2 \\\\a_3 &amp; b_3 &amp; c_3\\end{matrix}同样是用 &amp; 来进行上下对齐。上述渲染结果相比于常见的矩阵缺少了左右 $[ ]$，可以使用上文的 \\left[ \\right] 命令来添加：\n$$\\left[\\begin&#123;matrix&#125;    a_1 &amp; b_1 &amp; c_1 \\\\    a_2 &amp; b_2 &amp; c_2 \\\\    a_3 &amp; b_3 &amp; c_3\\end&#123;matrix&#125;\\right]$$  % 当内容放在 \\begin \\end 之外时，需要用 $ 或 $$ 包裹\n\n$$\\left[\\begin{matrix}    a_1 &amp; b_1 &amp; c_1 \\\\    a_2 &amp; b_2 &amp; c_2 \\\\    a_3 &amp; b_3 &amp; c_3\\end{matrix}\\right]$$\n也可以用 pmatrix bmatrix Bmatrix vmatrix Vmatrix 等环境来代替 matrix，效果如下：$$ \\text{pmatrix:}\\begin{pmatrix} a_1 &amp; b_1 \\\\ a_2 &amp; b_2 \\end{pmatrix}, \\text{bmatrix:}\\begin{bmatrix} a_1 &amp; b_1 \\\\ a_2 &amp; b_2 \\end{bmatrix}, \\text{Bmatrix:}\\begin{Bmatrix} a_1 &amp; b_1 \\\\ a_2 &amp; b_2 \\end{Bmatrix},\\text{vmatrix:}\\begin{vmatrix} a_1 &amp; b_1 \\\\ a_2 &amp; b_2 \\end{vmatrix}, \\text{Vmatrix:}\\begin{Vmatrix} a_1 &amp; b_1 \\\\ a_2 &amp; b_2 \\end{Vmatrix}$$\n另外还有一个 smallmatrix 环境，用于在行内排版小矩阵，如下： \\$\\left(\\\\begin{smallmatrix}a_1&amp;b_1\\\\\\\\a_2&amp;b_2\\end{smallmatrix}\\right)\\$ $\\Rightarrow$ $\\left(\\begin{smallmatrix} a_1 &amp; b_1 \\\\ a_2 &amp; b_2 \\end{smallmatrix}\\right)$，但它没有 \\smallBmatrix 等变化形式，需要括号时用普通的即可。\n当矩阵很大时，会使用省略号来代替部分内容：\n\\begin&#123;pmatrix&#125;    a_&#123;11&#125; &amp; a_&#123;12&#125; &amp; \\cdots &amp; a_&#123;1n&#125; \\\\    a_&#123;21&#125; &amp; a_&#123;22&#125; &amp; \\cdots &amp; a_&#123;2n&#125; \\\\    \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots \\\\    a_&#123;m1&#125; &amp; a_&#123;m2&#125; &amp; \\cdots &amp; a_&#123;mn&#125;\\end&#123;pmatrix&#125;\n\n\\begin{pmatrix}a*{11} &amp; a*{12} &amp; \\cdots &amp; a*{1n} \\\\a*{21} &amp; a*{22} &amp; \\cdots &amp; a*{2n} \\\\\\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots \\\\a*{m1} &amp; a*{m2} &amp; \\cdots &amp; a_{mn}\\end{pmatrix}\n我们上文用过 \\dots，此处又使用了 \\cdots \\vdots \\ddots 等命令来输出省略号，可以认为前缀字母 c &#x3D; center，v &#x3D; vertical，d &#x3D; diagonal，分别表示水平、垂直、对角线方向。另外还有 \\ldots，l &#x3D; lower 表示靠近底线的省略号。\narrayarray 可以起到与 matrix 一致的效果，但可以容纳更多的修饰或控制符使得表现效果更丰富，当然也意味着更多的 latex 代码量和复杂度。因为可以添加横竖线作为表格边框，array 一般用来表现表格：\n\\begin&#123;array&#125;&#123;c|lcr&#125;    n &amp; 左对齐 &amp; 居中对齐                         &amp; 右对齐 \\\\    \\hline    % 横线不占用行高，不必添加 \\\\ 换行    1 &amp; \\pi   &amp; rad                              &amp; 355/113 \\\\    2 &amp; e     &amp; &#123;\\left(1+\\frac&#123;1&#125;&#123;n&#125;\\right)&#125;^n   &amp; \\ln x \\\\    3 &amp; i     &amp; \\sqrt&#123;-1&#125;                        &amp; sin(\\theta)+icos(\\theta)\\end&#123;array&#125;\n\n效果：\n$$\\begin{array}{c|lcr}    n &amp; 左对齐 &amp; 居中对齐                         &amp; 右对齐 \\\\    \\hline    1 &amp; \\pi   &amp; rad                              &amp; 355&#x2F;113 \\\\    2 &amp; e     &amp; {\\left(1+\\frac{1}{n}\\right)}^n   &amp; \\ln x \\\\    3 &amp; i     &amp; \\sqrt{-1}                        &amp; sin(\\theta)+icos(\\theta)\\end{array}$$\n代码首行 \\begin{array}{c|lcr} 中的 &#123;c|lcr&#125; 部分是 array 环境的参数，用于指定每一列的对齐方式，c &#x3D; center，l &#x3D; left，r &#x3D; right，| 表示添加竖线作为列分隔符，可以不添加也可以添加多条。在内容部分，用 &amp; 来对齐各列，用 \\\\ 来换行。用 \\hline 添加横线，会自动置入两行之间，不影响文本的行高，也不必添加 \\ 换行。\n{array}也同样可以配合 \\left{ \\right} 来构造方程组，一些形式上要求齐次对齐的方程组，使用 array 会比较方便：\n$$\\left\\\\&#123;    \\begin&#123;array&#125;&#123;lrrrrr&#125;        f_1(x) = &amp;      &amp;       &amp;       &amp; x   &amp; +1 \\\\        f_2(x) = &amp;      &amp;       &amp; 8x^2  &amp; +5x &amp; +2 \\\\        f_3(x) = &amp;      &amp; 3x^3  &amp; +7x^2 &amp; +2x &amp; +9 \\\\        f_4(x) = &amp; 9x^4 &amp; +3x^3 &amp;       &amp; +4x &amp; +6    \\end&#123;array&#125;\\right.$$ % 有 \\left\\&#123; 时，必须要有对应的右括号闭合。但可以用 \\right. 放一个不显示内容的右括号。\n\n$$\\left\\{    \\begin{array}{lrrrrr}        f_1(x) &#x3D; &amp;      &amp;       &amp;       &amp; x   &amp; +1 \\\\        f_2(x) &#x3D; &amp;      &amp;       &amp; 8x^2  &amp; +5x &amp; +2 \\\\        f_3(x) &#x3D; &amp;      &amp; 3x^3  &amp; +7x^2 &amp; +2x &amp; +9 \\\\        f_4(x) &#x3D; &amp; 9x^4 &amp; +3x^3 &amp;       &amp; +4x &amp; +6    \\end{array}\\right.$$\n公式引用\\tag \\label 与 \\eqref公式引用分为被引用，和引用别人的。虽然使用 \\begin{equation} 等环境可以自动编号，但却无法直接根据该编号引用对应的公式。在 Latex 中引用公式，必须满足两个条件：\n\n被引用的公式必须是块公式，行内公式不能被引用。\n被引用的公式必须显式地声明一个 label，用于引用的锚点，语法为 \\label{labelname}。\n\n公式也可以用 \\tag{equationname} 来修改默认的全局编号名，但并非必须。\n\\begin&#123;equation&#125;    \\label&#123;ef&#125;    \\tag&#123;Euler&#x27;s Formula&#125;    % 自定义公式名，非必须    e^&#123;i\\pi&#125; + 1 = 0\\end&#123;equation&#125;\n\n\\begin{equation}\\label{ef}\\tag{Euler&#39;s Formula}e^{i\\pi} + 1 &#x3D; 0\\end{equation}\n在上面的例子中，我们为欧拉公式添加了一个 label ef。如果我们想要引用这个公式，可以使用 \\eqref{ef} 命令，引用时则不限于是否是块公式，也不限于是否有 \\tag{tagname}，例如：\n\\$e^{i\\theta}\\overset{\\\\eqref{ef}}{&#x3D;}cos\\theta+isin\\theta\\$ $\\Rightarrow$ $e^{i\\theta}\\overset{\\eqref{ef}}{&#x3D;}cos\\theta+isin\\theta$。\n可以看到，引用的锚点是 \\label{labelname} $\\Rightarrow$ \\\\eqref{ labelname}，而在 \\eqref 处显示的则是由 \\tag{equationname} 设定的公式名称。labelname 可以是几乎任意字符串，在各种教程中经常出现的 \\label{eq:1} 主要是为了方便管理，取『equation No.1』之意。上面的 ef 也是 Euler&#39;s Formula 的缩写。使用 \\label 的好处在于，当我们在后续编辑排版时，即使公式的编号变了，引用的地方也会自动更新，因为引用的锚点是固定的。这也是为什么要分别定义 \\label 和 \\tag 的原因。\n\\ref 与 \\href在完整的 latex 中，\\ref 与 \\eqref 稍有不同，后者是前者子集。但对于 Mathjax 这种限于网页展示的场合，两者并没有什么不同。根据 这里 的说明，\\ref 还能引用外链，但我没有尝试成功，可能是 Mathjax 的限制。本来，在 Markdown 博客中引用外链有更简单的方式：[文字](链接地址)，但如果非得拧巴一下，也可以用 \\href{链接地址}{文字} 来实现：\n$\\href{https://www.kaikai.men/latex-syntax-mathjax/}{本文地址}$ $\\Rightarrow$ $\\href{https://www.kaikai.men/latex-syntax-mathjax/}{本文地址}$\n打印控制Latex 会自动调整公式的大小和排版，但有时候我们也需要适当地调整一下字体字号、空隙间距等，以达到更好的排版效果。这里介绍一些常用的控制命令。\n空格间距\n\n\n\n\nLatex 源码\n效果\n说明\n\n\n\nab\n$ab$\nab 间无空格\n\n\na b\n$a b$\na b 间有空格，无效\n\n\na\\ b\n$a\\ b$\n使用 \\ 转义的空格，有效\n\n\na\\ &nbsp;b\n$a\\  b$\n第二空格未转义，无效\n\n\na\\ \\ b\n$a\\ \\ b$\n两个\\ 转义的空格，有效\n\n\na\\quad b\n$a\\quad b$\nquad 为 1em，一般相当于三个空格\n\n\na\\qquad b\n$a\\qquad b$\nqquad 为 2em\n\n\na\\,b\n$a\\,b$\n半个空格\n\n\na\\:b\n$a\\:b$\n2&#x2F;3 个空格\n\n\na\\;b\n$a\\;b$\n5&#x2F;6 个空格\n\n\na\\!b\n$a\\!b$\n负向半个空格，常用于绘制长等号，如： &#x3D;\\!&#x3D;\\!&#x3D; $\\Rightarrow$ $&#x3D;\\!&#x3D;\\!&#x3D;$\n\n\n\n\n行间距公式组的多行之间通过 \\\\\\\\ 分隔，在分隔符后面可以添加下方行距，允许小数点，如下：\n\\begin&#123;cases&#125;    x + y = 35 \\\\[15pt]    2x + 4y = 94 \\\\[1.5em]    x = 23, y = 12\\end&#123;cases&#125;\n\n\\begin{cases}x + y &#x3D; 35 \\\\[15pt]2x + 4y &#x3D; 94 \\\\[1.5em]x &#x3D; 23, y &#x3D; 12\\end{cases}\n字形字号\n\n\n字形\nLatex\n效果\n字体\nLatex\n效果\n字体\nLatex\n效果\n\n\n\nRoman 正体\n\\rm E\n$\\rm E$\nItalic 斜体\n\\it E\n$\\it E$\nBold 黑体\n\\bf E\n$\\bf E$\n\n\nCalligraphic 草书\n\\cal E\n$\\cal E$\nFraktur 尖角体\n\\frak E\n$\\frak E$\nBlackboard Bold 黑板粗体\n\\Bbb E\n$\\Bbb E$\n\n\nSans-serif 无衬线体\n\\sf E\n$\\sf E$\nTypewriter 等宽\n\\tt E\n$\\tt E$\nScript 花体\n\\scr E\n$\\scr E$\n\n\n\n\n\n字号\nLatex\n效果\n字号\nLatex\n效果\n字号\nLatex\n效果\n\n\n\ntiny\n\\tiny E\n$\\tiny E$\nscriptsize\n\\scriptsize E\n$\\scriptsize E$\nsmall\n\\small E\n$\\small E$\n\n\nnormalsize\n\\normalsize E\n$\\normalsize E$\nlarge\n\\large E\n$\\large E$\nLarge\n\\Large E\n$\\Large E$\n\n\nLARGE\n\\LARGE E\n$\\LARGE E$\nhuge\n\\huge E\n$\\huge E$\nHuge\n\\Huge E\n$\\Huge E$\n\n\n字体颜色Mathjax 使用 \\color{colorname} 命令来设置字体颜色，colorname 可以是预定义的颜色名，也可以是 RGB 值。比如 \\$\\color{red} E\\$ $\\Rightarrow$ $\\color{red} E$。预定义的颜色名参考 这里，摘抄一部分如下：\n$\\color{aqua}{aqua}$ $\\color{black}{black}$ $\\color{blue}{blue}$ $\\color{blueviolet}{blueviolet}$ $\\color{brown}{brown}$ $\\color{burlywood}{burlywood}$ $\\color{cadetblue}{cadetblue}$ $\\color{chocolate}{chocolate}$ $\\color{coral}{coral}$ $\\color{cornflowerblue}{cornflowerblue}$ $\\color{crimson}{crimson}$ $\\color{cyan}{cyan}$ $\\color{darkblue}{darkblue}$ $\\color{darkcyan}{darkcyan}$ $\\color{darkgoldenrod}{darkgoldenrod}$ $\\color{darkgray}{darkgray}$ $\\color{darkgreen}{darkgreen}$ $\\color{darkkhaki}{darkkhaki}$ $\\color{deeppink}{deeppink}$ $\\color{deepskyblue}{deepskyblue}$ $\\color{dimgrey}{dimgrey}$ $\\color{firebrick}{firebrick}$ $\\color{forestgreen}{forestgreen}$ $\\color{fuchsia}{fuchsia}$ $\\color{gainsboro}{gainsboro}$ $\\color{gold}{gold}$ $\\color{goldenrod}{goldenrod}$ $\\color{gray}{gray}$ $\\color{green}{green}$ $\\color{greenyellow}{greenyellow}$ $\\color{grey}{grey}$ $\\color{hotpink}{hotpink}$ $\\color{indianred}{indianred}$ $\\color{indigo}{indigo}$ $\\color{lightblue}{lightblue}$ $\\color{lightcoral}{lightcoral}$ $\\color{lightsalmon}{lightsalmon}$ $\\color{lightseagreen}{lightseagreen}$ $\\color{lightskyblue}{lightskyblue}$ $\\color{lime}{lime}$ $\\color{limegreen}{limegreen}$ $\\color{magenta}{magenta}$ $\\color{maroon}{maroon}$ $\\color{navy}{navy}$ $\\color{olive}{olive}$ $\\color{orange}{orange}$ $\\color{orangered}{orangered}$ $\\color{orchid}{orchid}$ $\\color{peru}{peru}$ $\\color{pink}{pink}$ $\\color{plum}{plum}$ $\\color{purple}{purple}$ $\\color{red}{red}$ $\\color{salmon}{salmon}$ $\\color{silver}{silver}$ $\\color{teal}{teal}$ $\\color{thistle}{thistle}$ $\\color{tomato}{tomato}$ $\\color{turquoise}{turquoise}$ $\\color{violet}{violet}$ $\\color{yellow}{yellow}$ $\\color{yellowgreen}{yellowgreen}$\n如果使用 RGB，格式为 \\color{#rrggbb} 或缩写的 \\color{#rgb}，其中 rgb 为 0-f 的十六进制数。\n这里有一个新的注意点，在下一节中介绍。\n宏定义与扩展包Mathjax 不支持宏与扩展。Latex 本身提供了很多扩展功能，但 Mathjax 仅仅是一个 JS 库，它并不是完整的 Latex。如果需要使用这些功能，需要在 Latex 编译器中进行。\n在这里记一笔，是因为在搜索某个效果的 Latex 语法时，往往会遇到一些使用扩展功能的回答，那些回答不适用于 Mathjax，需要注意。\n与 Markdown 和 Hexo 的冲突处理这个博客是 Hexo 搭建，加载了 Hexo Next 主题。使用 Markdown 语法在文本文件中编写博客，由 Hexo 将其编译为 HTML 文件，而 Mathjax 则在 HTML 文件中渲染 Latex 公式。而 Hexo 本身也有自己的模板语法，这使得我们编写的内容，需要经过 Hexo 编译，Markdown 编译，再由 Mathjax 渲染，最后才能在浏览器中显示。这样的多重编译过程，使得我们在写文章时，需要额外考虑一些情况。\nHexo 处理使用 {% raw %} ... {% endraw %} 避免 Hexo 模板语法带来的问题。所有 {% raw %} ... {% endraw %} 两者之间的内容都不会被 Hexo 进一步解释，而是进入 Markdown 解释器层进行下一步处理。\n在使用 \\color{#rrggbb} 语法时就会遇到相关问题，{# 会被 Hexo 识别，但又不属于合法的模板语法，导致 Hexo 编译失败报错。相似的情况还出现在 &#123;&#125; 的嵌套场景下，连续的 {{{ 也会被视为错误的 Hexo 模板语法。因此，我们需要用 {% raw %} ... {% endraw %} 来避免这些问题。\nMarkdown 处理Markdown 语法中，\\ 也是转义字符，用于输出特殊字符，比如 \\# $\\Rightarrow$ # ,\\* $\\Rightarrow$ * 等。因为 #、*、_ 等字符在 Markdown 中是有意义的（用于标题、列表、强调等），因此需要用 \\ 转义。所以为了在 Markdown 处理完以后还能保留 \\，我们在写文章时就需要有意地写成 \\\\\\\\。\n此外，Markdown 本身也会有意地忽略多余的空格，因此如果需要将多个空格传递给 html，需要使用 &amp;nbsp; 来转义。所幸 &amp;nbsp; 只要隔开连续的空格，每个空格包括 &amp;nbsp; 都会保留，因此可以与空格交替写来省点事。\nMathjax 处理在经过 Markdown 编译后，原始文章已经变成了 HTML 文件。此时 Mathjax 会搜索全文中的 Latex 相关语法，将其渲染为对应的公式。但是由于 Mathjax 也将 \\$ 等符号视作特殊字符，因此仍然会再进行一次转义。比如 HTML 中如果有一个『\\\\\\$』，会被 Mathjax 认为是 \\$ 符号的转义符，因此会消除 \\\\，单显示一个 $ 符号。\n与此相似的，还有为了在 Mathjax 渲染后还能正常显示 \\\\\\\\ （两个反斜杠），我们在源文件中需要写成惊人的八条反斜杠：\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\。在 Markdown 编译时，每两条 \\\\ 会被解释为一条有效的反斜杠，因此在 HTML 文件中会生成连续的四条反斜杠。而 Mathjax 会在 HTML 呈现的内容基础上再作渲染，再一次将每两条反斜杠编译为一条有效的反斜杠，因此最终显示的是两条反斜杠。\n如果能及时注意到 Mathjax 是在页面的 HTML 上再次渲染，就能很好地理解这个过程。\n其它信息本文到这里就差不多尾声了。Mathjax 是为网页提供 latex 公式渲染的 JS 库，并不拥有 latex 的全部功能。Latex 有很多全页排版、宏定义与扩展包，包括自定义命令、环境等功能，在 Mathjax 里是没有的。\n本文的目的是为了介绍 Mathjax 的基本语法，以及与 Markdown 和 Hexo 的冲突处理。如果需要更多的功能，可以参考下面的参考资料。\nMathjax 的官方文档：https://docs.mathjax.org/en/latest/index.html\nMathjax 的官方示例：https://docs.mathjax.org/en/latest/web/start.html#mathjax-cdn\nLatex 编辑器：TEXMaker\nMathJax basic tutorial and quick reference\nLaTeX Grammar List @rollpie\n","categories":["软件使用"],"tags":["Hexo Next","Mathjax","Latex","Latex Syntax","Latex 语法"]},{"title":"jubeat 游戏数据","url":"//jubeat-game-data/","content":"不同等级的歌曲在获得对应评价时获得的经验值：\n\n\nScore\nRating\nLv.1\nLv.2\nLv.3\nLv.4\nLv.5\nLv.6\nLv.7\nLv.8\nLv.9\nLv.10\n\n\n\n1000000\nExc\n88\n104\n120\n136\n152\n168\n184\n200\n216\n232\n\n\n980000-999999\nSSS\n82\n97\n112\n127\n142\n157\n172\n187\n202\n217\n\n\n950000-979999\nSS\n77\n91\n105\n119\n133\n147\n161\n175\n189\n203\n\n\n900000-949999\nS\n71\n84\n97\n110\n123\n136\n149\n162\n175\n188\n\n\n850000-899999\nA\n66\n78\n90\n102\n114\n126\n138\n150\n162\n174\n\n\n800000-849999\nB\n60\n71\n82\n93\n104\n115\n126\n137\n148\n159\n\n\n700000-799999\nC\n55\n65\n75\n85\n95\n105\n115\n125\n135\n145\n\n\n500000-699999\nD\n49\n58\n67\n76\n85\n94\n103\n112\n121\n130\n\n\n0-499999\nE\n44\n52\n60\n68\n76\n84\n92\n100\n108\n116\n\n\n\n同评价下不同等级的歌曲获得的经验值为等差增长数列；\n同等级下不同评价的歌曲获得的经验值为交替增长数列；\n各等级歌曲 Exc 的经验总是 E 的两倍，细分的小数点等级以取整计。\n\n玩家各等级升级经验：\n\n\nLvl\nExp\nLvl\nExp\nLvl\nExp\nLvl\nExp\nLvl\nExp\n\n\n\n1\n44\n21\n2505\n41\n7597\n61\n15329\n81\n25701\n\n\n2\n113\n22\n2697\n42\n7921\n62\n15785\n82\n26289\n\n\n3\n179\n23\n2895\n43\n8251\n63\n16247\n83\n26883\n\n\n4\n252\n24\n3100\n44\n8588\n64\n16716\n84\n27484\n\n\n5\n332\n25\n3312\n45\n8932\n65\n17192\n85\n28092\n\n\n6\n418\n26\n3530\n46\n9282\n66\n17674\n86\n28706\n\n\n7\n511\n27\n3755\n47\n9639\n67\n18163\n87\n29327\n\n\n8\n611\n28\n3987\n48\n10003\n68\n18659\n88\n29955\n\n\n9\n717\n29\n4225\n49\n10373\n69\n19161\n89\n30589\n\n\n10\n830\n30\n4470\n50\n10750\n70\n19670\n90\n31230\n\n\n11\n949\n31\n4721\n51\n11133\n71\n20185\n91\n31877\n\n\n12\n1075\n32\n4979\n52\n11523\n72\n20707\n92\n32531\n\n\n13\n1207\n33\n5243\n53\n11919\n73\n21235\n93\n33191\n\n\n14\n1346\n34\n5514\n54\n12322\n74\n21770\n94\n33858\n\n\n15\n1492\n35\n5792\n55\n12732\n75\n22312\n95\n34532\n\n\n16\n1644\n36\n6076\n56\n13148\n76\n22860\n96\n35212\n\n\n17\n1803\n37\n6367\n57\n13571\n77\n23415\n97\n35899\n\n\n18\n1969\n38\n6665\n58\n14001\n78\n23977\n98\n36593\n\n\n19\n2141\n39\n6969\n59\n14437\n79\n24545\n99\n37293\n\n\n20\n2320\n40\n7280\n60\n14880\n80\n25120\n100\n38000\n\n\n\n两等级间的经验差额 Dn&#x3D;Expn+1-Expn 在 n≥2 时符合间隔为 7,7,6,7,7,6,7,6,7,6 的递增序列。\n即 Expn+10-Expn&#x3D;830+66n, n≥2。E2~E11 为基准值。\n可以进一步推测，Exp1 原本应为 53，但为了确保任何一个新玩家哪怕是最初级的玩家也能立刻体验到升级效果，单独修正为 44。\n\n玩家等级与体力值：スタミナ &#x3D; プレーヤーレベル + 49，即 Stamina 体力 &#x3D; Player Level 玩家等级 + 49，初始 1 级 50 点体力。\n\n1-3 级歌曲，每次游玩消耗 20 点体力\n\n4-6 级歌曲，每次游玩消耗 25 点体力\n\n7-10 级歌曲，每次游玩消耗 30 点体力\n\n每 3 分钟恢复 1 点体力，直到达到体力上限；\n\n当用户升级时，会恢复体力上限等额的体力，此时可用体力会超过上限；\n\n当前体力不足以游玩指定歌曲时，系统会提示用户观看广告获得 50 点体力，当上限小于 79 时，可用体力可能会超过上限；\n\n观看广告获得 50 体力，这一行为本身有 1 小时的 CD，不影响其它情况下观看广告获得加成。\n\n使用 1 个可乐道具，或 50 个 jBlock 道具可以换取 50 点体力，无 CD，道具通过各类任务获得，也可以直接付费购买；\n\n使用 jBlock 在 plus 模式下购买的曲包可以无限次游玩，不消耗体力，但也不会获得经验值；\n\n使用 Skip 券可以跳过指定谱面的实际游玩过程，直接按该谱面的历史最高分结算奖励，也会消耗体力。该谱面必须之前有过演奏记录。节约时间用。\n\n\n尽快升级\n由于体力上限与等级成正比，因此在游戏初期，尽快升级是提高游戏体验的要素之一。\n由于歌曲难度等级对应体力消耗不同，且歌曲难度对 Rating 有影响，因此同体力最多 Exp 的升级路线要根据个人能力调整。\n例如，都为 E 级，Lv.6 的 84&#x2F;25 &#x3D; 3.36 就大于 Lv.8 的 100&#x2F;30 &#x3D; 3.33。\n如果所有歌都能打相同 Rating，优势顺序为 10 9 6 8 7 5 3 4 2 1。如果不是，就需要按下表排列：\n\n\n\n\n档位\n效率比例与等级\n\n\n\n≥ 7\n10Exc (7.73) 10SSS (7.23) 9Exc (7.2)\n\n\n≥ 6.5\n10SS (6.77) 9SSS (6.73) 6Exc (6.72) 8Exc (6.67)\n\n\n≥ 6\n9SS (6.3) 6SSS (6.28) 10S (6.27) 8SSS (6.23) 7Exc (6.13) 5Exc (6.08) 3Exc (6)\n\n\n≥ 5.5\n6SS (5.88) 8SS (5.83) 9S (5.83) 10A (5.8) 7SSS (5.73) 5SSS (5.68) 3SSS (5.6)\n\n\n≥ 5\n6S (5.44) 4Exc (5.44) 8S (5.4) 9A (5.4) 7SS (5.37) 5SS (5.32) 10B (5.3) 3SS (5.25) 2Exc (5.2) 4SSS (5.08) 6A (5.04) 8A (5)\n\n\n≥ 4.5\n7S (4.97) 9B (4.93) 5S (4.92) 3S (4.85) 2SSS (4.85) 10C (4.83) 4SS (4.76) 6B (4.6) 7A (4.6) 8B (4.57) 5A (4.56) 2SS (4.55) 3A (4.5) 9C (4.5)\n\n\n≥ 4\n1Exc (4.4) 4S (4.4) 10D (4.33) 6C (4.2) 2S (4.2) 7B (4.2) 8C (4.17) 5B (4.16) 1SSS (4.1) 3B (4.1) 4A (4.08) 9D (4.03)\n\n\n≥ 3.5\n2A (3.9) 10E (3.87) 1SS (3.85) 7C (3.83) 5C (3.8) 6D (3.76) 3C (3.75) 8D (3.73) 4B (3.72) 9E (3.6) 1S (3.55) 2B (3.55)\n\n\n≥ 3\n7D (3.43) 5D (3.4) 4C (3.4) 6E (3.36) 3D (3.35) 8E (3.33) 1A (3.3) 2C (3.25) 7E (3.07) 5E (3.04) 4D (3.04) 1B (3) 3E (3)\n\n\n≥ 2\n2D (2.9)1C (2.75)4E (2.72)2E (2.6)1D (2.45)1E (2.2)\n\n\n\n这里有个重要的点位是 10E(3.87)。E 是最低评价，摆烂也能拿。也就是说，对于效率升级的目标，即以相同体力获得最多经验经验值来说，即使你 1 级歌能打 SS，都不如开 10 级歌放那里不动等 0 分结算快。\n\nコイン (Coin)\n1-3 级歌曲，每次游玩后奖励 3 个宝箱\n4-6 级歌曲，每次游玩后奖励 4 个宝箱，其中 1 个为劣质宝箱\n7-10 级歌曲，每次游玩后奖励 5 个宝箱，其中 2 个为劣质宝箱\n宝箱可能开出 20, 30, 50, 100, 200, 1000, 10000 等数额的金币。\n根据 Rating 不同，宝箱开出的金币数目不同，且有一定的随机性。\n在 Rating &#x3D; E 的情况下，宝箱开出的金币绝大部分为 20, 30 两种。\n完成任务和日常签到也会获得金币、jBlock 和道具奖励，数额不等。\n\n","categories":["游戏中心"],"tags":["jubeat","游戏数据","game data"]},{"title":"PT 站中的做种公式（魔力值计算）分析","url":"//formula-seeding-pt/","content":"PT 站大多使用了 nexusPHP 的方案，因此其 Seeding Bonus，通常称为魔力点数，基本也使用了相同的公式进行计算：\n\\begin{align*}&amp;A &#x3D; \\sum_i\\left( 1-10^{ -\\frac{T_i}{T_0} } \\right) \\cdot S_i \\cdot \\left( 1+\\sqrt2 \\cdot 10^{ -\\frac{N_i-1}{N_0-1} } \\right) \\\\&amp;B &#x3D; B_0 \\cdot \\frac{2}{\\pi}arctan\\left( \\frac{A}{L} \\right) \\\\\\end{align*}\n其中：\n\n积分每小时计算并发放一次，后文不再赘述。\n$S_i$ 为第 i 个种子的大小，单位是 GB\n$T_i$ 为第 i 个种子发布起到现在经过的时间，单位为周，$T_0$ 为参数，$T_0 &#x3D; 4$\n$N_i$ 为第 i 个种子当前的做种人数，$N_0$ 为参数，$N_0 &#x3D; 7$\n$L$ 为参数，$L &#x3D; 300$，$B_0$ 为参数，$B_0 &#x3D; 50$，不同站点有时会在 $B_0$ 和 $L$ 上有所调整。\n$B$ 为每小时用户获得的点数，由于 $arctan$ 函数值有上限，因此 $B$ 恒小于 $B_0$\n\n可以看到，对于 A，实质上是对每个种子的体积进行了加权求和，两个系数分别与时间和做种人数有关，实质上还是某种『有效做种体积』。因此先分析第二段公式，使用 Geogebra 绘制函数 $\\frac{2}{\\pi} \\cdot arctan\\left( \\frac{A}{L} \\right)$ 图像并取若干个样点：\n\n函数图像是个有上限、增幅递减的增函数，在有效做种体积为 200GB 时，可以得到 $0.37B_0$ 的魔力值，在 1000GB 时为 $0.81B_0$。以下列举一些计算结果：\n\n\n\n加权体积\n上限比\n加权体积\n上限比\n加权体积\n上限比\n\n\n\n10 GB\n0.0212 $B_0$\n1 TB\n0.8186 $B_0$\n15 TB\n0.9876 $B_0$\n\n\n25 GB\n0.0529 $B_0$\n1.5 TB\n0.8772 $B_0$\n20 TB\n0.9907 $B_0$\n\n\n50 GB\n0.1051 $B_0$\n2 TB\n0.9074 $B_0$\n25 TB\n0.9925 $B_0$\n\n\n75 GB\n0.1560 $B_0$\n2.5 TB\n0.9257 $B_0$\n30 TB\n0.9938 $B_0$\n\n\n100 GB\n0.2048 $B_0$\n3 TB\n0.9380 $B_0$\n35 TB\n0.9947 $B_0$\n\n\n200 GB\n0.3743 $B_0$\n3.5 TB\n0.9468 $B_0$\n40 TB\n0.9953 $B_0$\n\n\n300 GB\n0.5 $B_0$\n4 TB\n0.9535 $B_0$\n45 TB\n0.9959 $B_0$\n\n\n400 GB\n0.5903 $B_0$\n4.5 TB\n0.9586 $B_0$\n50 TB\n0.9963 $B_0$\n\n\n500 GB\n0.6560 $B_0$\n5 TB\n0.9627 $B_0$\n55 TB\n0.9966 $B_0$\n\n\n600 GB\n0.7048 $B_0$\n6 TB\n0.9689 $B_0$\n60 TB\n0.9969 $B_0$\n\n\n700 GB\n0.7422 $B_0$\n7 TB\n0.9734 $B_0$\n70 TB\n0.9973 $B_0$\n\n\n800 GB\n0.7716 $B_0$\n8 TB\n0.9767 $B_0$\n80 TB\n0.9977 $B_0$\n\n\n900 GB\n0.7952 $B_0$\n9 TB\n0.9793 $B_0$\n90 TB\n0.9979 $B_0$\n\n\n1000 GB\n0.8145 $B_0$\n10 TB\n0.9814 $B_0$\n100 TB\n0.9981 $B_0$\n\n\n如果要达到特定的目标上限比，几个档位如下：\n\n\n\n上限比\n加权体积\n上限比\n加权体积\n上限比\n加权体积\n\n\n\n0.1 $B_0$\n48 GB\n0.91 $B_0$\n2108 GB (2.06 TB)\n0.991 $B_0$\n21220 GB (20.72 TB)\n\n\n0.2 $B_0$\n98 GB\n0.92 $B_0$\n2375 GB (2.32 TB)\n0.992 $B_0$\n23872 GB (23.31 TB)\n\n\n0.3 $B_0$\n153 GB\n0.93 $B_0$\n2718 GB (2.65 TB)\n0.993 $B_0$\n27283 GB (26.64 TB)\n\n\n0.4 $B_0$\n218 GB\n0.94 $B_0$\n3174 GB (3.10 TB)\n0.994 $B_0$\n31831 GB (31.08 TB)\n\n\n0.5 $B_0$\n300 GB\n0.95 $B_0$\n3812 GB (3.72 TB)\n0.995 $B_0$\n38197 GB (37.30 TB)\n\n\n0.6 $B_0$\n413 GB\n0.96 $B_0$\n4769 GB (4.66 TB)\n0.996 $B_0$\n47746 GB (46.63 TB)\n\n\n0.7 $B_0$\n589 GB\n0.97 $B_0$\n6362 GB (6.21 TB)\n0.997 $B_0$\n63662 GB (62.17 TB)\n\n\n0.8 $B_0$\n924 GB\n0.98 $B_0$\n9547 GB (9.32 TB)\n0.998 $B_0$\n95493 GB (93.25 TB)\n\n\n0.9 $B_0$\n1895 GB\n0.99 $B_0$\n19098 GB (18.65 TB)\n0.999 $B_0$\n190986 GB (186.51 TB)\n\n\n200 GB 以下大致可视为线性增长，2 TB 时可以达到 90% 上限分数，更高的分值需要极大的硬盘空间，逐渐不甚合理了。$L$ 参数的变化会等比例地影响上表中的加权体积数值。\n\n下面来研究两个系数的影响，这两个系数实现了『实际做种体积』$\\rightarrow$『有效做种体积』之间的换算。首先是时间系数，$f(T_i) &#x3D; \\left(1-10^{ -\\frac{T_i}{T_0}}\\right)$，由于 nexusPHP 本身对该分值是基于小数的，且『周』的展示不甚直观，这里直接改用『天』作为单位，换算 $T_0 &#x3D; 28$，其图像为：\n\n显然这也是和 arctan 一样的有上限、增幅递减的增函数，但增幅比 arctan 要大得多，靠近上限十分容易，也就是说到达 0.999 或更高值是个可行的目标。以下列举一些计算结果：\n\n\n\n时间\n系数\n时间\n系数\n时间\n系数\n\n\n\n1 小时\n0.0034\n2 天\n0.1517\n9 天\n0.5229\n\n\n2 小时\n0.0068\n3 天\n0.2186\n15 天\n0.7087\n\n\n3 小时\n0.0102\n4 天\n0.2803\n28 天（4 周）\n0.9\n\n\n6 小时\n0.0203\n5 天\n0.3371\n56 天（8 周）\n0.99\n\n\n12 小时\n0.0403\n6 天\n0.3895\n84 天（12 周）\n0.999\n\n\n24 小时\n0.0789\n7 天\n0.4377\n112 天（16 周）\n0.9999\n\n\n因为是 10 的幂运算，计算分段明显。每 28 天小数点后多一位 9，在寻找 free 种子攒积分时，选时间大于三个月 (&gt;0.999) 的就行，『实际做种体积』与『有效做种体积』几乎一致。\n最后是做种人数系数，$f(N_i) &#x3D; \\left(1+\\sqrt2 \\cdot 10^{ -\\frac{N_i-1}{N_0-1}}\\right)$，在其定义域内这是个有上下限的减函数，其图像为：\n\n与前两个系数不同，$N_i$ 做种人数只能取正整数，因此其图像是离散的。以下列举一些计算结果：\n\n\n\n做种人数\n系数\n做种人数\n系数\n做种人数\n系数\n\n\n\n1\n2.4142\n6\n1.2076\n12\n1.0208\n\n\n2\n1.9635\n7\n1.1414\n14\n1.0100\n\n\n3\n1.6564\n8\n1.0963\n20\n1.0010\n\n\n4\n1.4472\n9\n1.0656\n26\n1.0001\n\n\n5\n1.3047\n10\n1.0447\n28\n1.0000\n\n\n可以看到，只有 8 人以下的种子才有可能达到 &gt;1.1 的系数，而 20 人以上的种子，该系数的增益已经完全可以忽略了。由于做种人数是不可控的，因此可以简单划为两类，20 人以下有加成， 20 人以上无。又因为人数会变动，因此若要从这个系数上获得稳定收益，必须考虑 $N_i&lt;8$ 的种子，以容许一些浮动范围。\n通过以上两个系数的分析，可以得到一个结论，我称为『三八原则』：\n\n三八原则：在 PT 站做种赚取积分时，选择时间大于三个月，做种人数小于 8 人的种子。\n\n原则展开如下：\n\n做种人数足够少，可以使实际 1GB 的硬盘空间达成 2.4GB 的做种效果，但条件苛刻。\n但再多的做种人数也不过是系数为 1，没有奖励，但不会有折损。\n三个月以前的种子，做种效果几乎 1:1 且容易达成。而一个月以内则折损可观，不是没得选尽量避免保新种。\n积分有上限，有效做种体积 1-2 TB 已经可以达到 80%-90% 的上限了。再增长 10% 到 99% 则需要近 20TB 有效保种，即使都是长寿孤种也需要 8TB，意义不大。\n形势所迫必须新种，则放置一周有 44% 的有效做种体积，准备 4TB 硬盘也就够了。\n孤种才有奖励，新种只有折损。\n\n这样可以最大化体积系数，从而用相同的硬盘空间获取更大的做种收益。当然，既然是赚取积分，肯定是要选择 free 种子。种子时间可以挑选，但做种人数加成八成是不必指望了。\n\n其它一些 Bonus：\n各站点会根据自己的实际调整参数，或添加其它的奖励机制，例如：\n\n每个种子 0.7 基本分，最多 14 个。\n 该数值上限 9.8，是直接作为基础值的，因此该站的积分上限为 $9.8+B_0$。这个条件几乎不存在代价，保种 1-2 TB 通常来说都会超过 14 个种子。\n\n用户等级奖励，每升一级 1% 的比例奖励。\n 这个奖励是在基础值之外的奖励，计算公式为 $(1+1\\%\\times Level) * (9.8+B_0)$\n 用户等级奖励其实存在很大的隐性的代价。PT 站往往要求上传量远大于下载量才能升级，而 1% 的奖励却聊胜于无。这就像在银行存一百万拿 2% 的利息，银行要求你再存一千万升 VIP，而 VIP 的待遇仅仅是利息多 1%，并不是 $2\\%\\rightarrow 3\\%$ 的 1%，而是 $2\\%\\rightarrow 2.02\\%$ 的 1%。如果上传本有余裕，自然升级也就罢了，刻意去为 1% 奖励而花大力气冲没什么意义。\n\n为官方种子做种的额外奖励，上限为 25%。\n 百分比类型奖励都是平行的，也就是 $(1+1\\%\\times Level + 25\\%) * (9.8+B_0)$。 注：该站点程序有 bug，多个官种奖励叠加反而会导致总 bonus 下降，因此只保一个 +25% 官种即可。\n\n每 100 个种子做种 24 小时以上开始 5% 的比例奖励，无上限，每个种子需要大于 5MB。\n $$(1+1\\%\\times Level + 25\\% + \\mathop{SeedsQuantity}\\limits_{\\substack{seedsize&gt;5\\text{MB} \\\\ seedinghour&gt;24}} &#x2F; 100 \\times 5\\%) * (9.8+B_0)$$\n 该规则鼓励大量小体积种子做种，理论上来说，以 2TB 的目标计算，若全部靠 5MB 的种子达成，至多可以使用 40 万个种子，单这项 bonus 就能达到 $200B_0$，这是一个巨大的增益。客观上受限于种子总量有限及大小各异，不可能达到这个数量，但成为一个万种大佬还是有可能的。此时的 bonus 为 $$(1+25\\%+\\frac{10000}{100}*5\\%) \\times (9.8+0.9\\times B_0) &#x3D; 6.25 \\times (9.8+0.9\\times B_0)$$ 若 $B_0&#x3D;50$，则值为 $342.5$。在该规则下，保种策略是尽量地将大种子更替为小种子，在总量有限而不变的情况下，提升种子数量。\n 但是我们需要进一步讨论。更替小种虽有额外收益但通常也会产生额外的下载流量，需要靠魔力值兑换上传量来冲抵。一个种子的小时增益为 $5\\% &#x2F; 100 \\times (9.8 + 0.9B_0) &#x3D; 0.0274$，每天可以通过魔力值兑换的上传流量为 $0.0274 \\times 24 \\; &#x2F; \\; 425 \\times 1024 &#x3D;  1.5844$ MB，一个 5MB 的种子在 3.15 天回本，因为是独立计算，一百个 5MB 的种子也是 3.15 天回本。回本时间不受种子数量的影响，但与种子体积成正比，当种子体积到 50MB 时回本时间就超过一个月了。\n 另一需要考虑的软性限制是 PT 与站点服务器的通讯。当做种数量足够多时，PT 客户端的 tracker update 操作变得十分频繁，甚至变相成为一种对服务器的 DOS 攻击。这也是热门大站往往 tracker update interval 很长的原因。大量种子对保种用户本身也是存在风险的，对同一地址的短时间频繁请求，在客户端到服务器的整条网络传输路径上的任何一个环节都有可能触发限制。服务器收不到 update 信息，用户就反而无法获得积分。\n\n使用 $250\\times B_0$ 的价格购买 5% 比例的奖励徽章，可购买多个。\n 同样是某种需要考虑投入产出的增益。该站点没有其它基础值奖励，以每小时 $0.9B_0$ 计算，购买后的增益为 $0.045B_0$，回本时间为 $250B_0 &#x2F;0.045B_0 &#x2F; 24 &#x3D; 231.49$ 天。该站 50G 上传量为 $50B_0$，一个徽章相当于 250 GB 的上传量。从无穷长远来看，一切本金不会湮灭且无通胀环境下的投入都是值得的，算来第 232 天开始可就是净收益了。但是在合理的生命周期内，这个投入产出比是十分低的。因此这个徽章是一个『炫耀』的物品，而不是一个『赚钱』的物品。\n PT 站的生命周期是客观存在的，对于用户方，如果生活中发生了某些变化，帐号有时就冷落消失了。对于站点方，也有可能因为各种原因关闭跑路。长周期的收益更多只是在纸面上的。\n\n相聚离开都有时候，没有什么会永垂不朽。\n\n\n后宫加成，每个下线 5%。\n 这个奖励的 ROI 计算更为复杂，暂不清楚是否有复利加成，即我后宫的后宫是不是我的后宫。单从实践经验来看，$50B_0$ 兑换邀请和赠与新人 $62.5B_0$ 启动资金，换得的是下线的 5% 增益。如果下线足够给力，则可以得到和徽章奖励一致的 $0.045B_0$。回本周期为 105 天。考虑到下线需要积累一段时间才能达到 $0.9B_0$，实际周期在 150 天左右。比起奖章仍合算一些。如果不提供启动资金，回本周期为 47 天，但新人启动时间会长不少，相当于额外再增加一个 0-50G 的启动时间。\n 如果考虑风险因素，ROI 就不好说了。下线的行为是不可控的，且会影响到自己的账号。$112.5B_0$ 的本金浪费是一方面，其它权利影响是则另一方面。除非有站点相关数据作为支撑，否则这些风险很难量化。\n\n从奖池中抽道具，部分道具增加 10% 基础魔力值奖励，每次抽取动作消耗 $2.5B_0$。\n 从 n 个道具中抽取特定的 k 个道具，假设无重复时，全部抽齐的期望次数为 $\\frac{k(n+1)}{k+1}$，则成本为 $\\frac{k(n+1)}{k+1} \\times 2.5B_0$，收益为 $k \\times 10\\% \\times 0.9B_0$，回本周期为 $1.1574 \\cdot \\frac{n+1}{k+1}$ 天，取决于奖池 n 和 k 的比例。事实上哪怕是 1&#x2F;100 的比例，也比上一条后宫加成更合算。\n 进一步考虑，第一个道具在抽出后开始生效，其成本为 $\\frac{n+1}{k+1}\\times 2.5B_0$，收益为 $10\\% \\times 0.9B_0$，回本周期同样为 $1.1574 \\cdot \\frac{n+1}{k+1}$ 天。也就是说，在整个过程中，每个道具的奖励比例一致，则回本周期也都是一致的。\n 当有重复时，情况则有不同，第一个的期望成本为 $n&#x2F;k\\times 2.5B_0$，回本周期为 $1.1574 n&#x2F;k$ 天。所有奖品抽到的期望次数为 $n\\cdot H_k$，其中 $H_k&#x3D;\\sum_{i&#x3D;1}^n\\frac{1}{i}$ 为调和级数。越往后面，即使奖励相同，但抽取成本变大也会导致回本周期变长。最后一个的成本是 $n\\times 2.5B_0$，回本周期对应为 $1.1574 n$ 天。\n 如果除 k 外的其它道具也有一定的奖励，或者总数 n 难以计算，则 ROI 的计算只能通过少量抽样下的贝叶斯推断来进行了。\n\n上传流量的奖励，每 1GB 上传流量奖励 0.1 魔力值。\n PT 站本身上传量就是货币，这个其实属于某种重复奖励，且没有可优化或者可选择的余地。不讨论。\n\n\n\n末尾一些啰嗦：\n$f(A) &#x3D; B_0 \\cdot \\frac{2}{\\pi} \\cdot arctan\\left( \\frac{A}{L} \\right)$ 的导数为 $f^{&#39;}(A) &#x3D; \\frac{2B_0}{\\pi L} \\cdot \\frac{1}{1+\\left( \\frac{A}{L} \\right)^2}$，为 $\\frac{1}{1+x^2}$ 的缩放。当前每增加 1GB 的有效做种体积对应多少魔力值增量，可以通过导数来计算。\n通过计算 $Total\\_Bonus &#x3D; N_i \\cdot \\left(\\sqrt2 \\cdot 10^{ -\\frac{N_i-1}{N_0-1}}\\right)$ 发现，在 3 人及以下做种时，PT 站额外奖励了更多的体积系数分到所有的人，而人数更多时 Bonus 总增益开始下降，奖励总量反而逐渐减少。算法并非是将固定的 Bonus 分发给所有人，而确实是针对孤种的单独加成：\n\n","categories":["硬用数学"],"tags":["PT","魔力值公式","Seeding Bonus"]},{"title":"几种奖池抽取期望计算","url":"//deck-drawing-expectations/","content":"1. 不放回抽取从一套充分洗匀的扑克中不放回地一直抽，直到抽到两张大小王都抽到，一共抽了多少张的期望值？\n先说结论：\n\n一般地，从 $n$ 张牌中不放回地抽取特定 $k$ 张，期望抽取次数是 $Exp &#x3D; k \\cdot (n+1)\\ &#x2F;\\ (k+1)$\n\n然后说证明：\n首先，在充分洗匀的情况下，从牌堆顶部抽取和从牌堆中间任意位置抽取是等价的，所以可以假设牌堆是从左到右的展开一列，抽取动作等效于从左开始逐张提取卡片，直到所有目标牌都抽取到手里。想像 k 张目标牌已经排成一列，其顺序无关紧要因为最终都会被清空。这 k 张牌相隔包括左右外侧共产生 k+1 个空隙：\n\n然后将 n-k 张非目标牌随机插入这 k+1 个空隙中，每个空隙插入的概率相等，所以期望张数是 $\\frac{n-k}{k+1}$。\n最后考察清点过程，显然最右侧外侧可以抛弃，所以需要抽取的期望张数是 $n - \\frac{n-k}{k+1} &#x3D; \\frac{k \\times (n+1)}{k+1}$。得证。\n这类抽奖励在各类游戏中都有，其特点是：\n\n奖池有限\n不会抽到重复的奖品\n通常玩家心仪的是奖池中的几个特定奖品，其它是无关紧要的\n\n有些游戏会添加『升星级』的设置，某个抽卡人物 A 多次抽到后，会升级为 A+，A++ 等。这种情况完全可以视为若干个独立的 A 在奖池中，需要全部抽齐，计算时调整 n 与 k 的值即可。\n\n—— 算下来『全部抽齐』确实是成本很高的目标。\n\n2. 放回抽取\n在数量为 n 的奖池中进行抽取，抽取结果是可重复的（抽完放回），抽完所有 n 件奖品的期望抽取次数是多少？\n\n$$Exp&#x3D; n \\cdot (1 + 1&#x2F;2 + 1&#x2F;3 + \\cdots + 1&#x2F;n)  &#x3D; n \\cdot \\sum _{i&#x3D;1}^n \\frac{1}{i} &#x3D; n \\cdot H_n $$\n$H_n$ 就是调和级数。\n证明，从后往前考察抽取过程：\n\n如果当前只剩最后一件奖品没抽到，则从 n 件奖品中抽取特定一件的几率是 1&#x2F;n，期望抽取次数是 n。\n如果剩最后两件奖品没抽到，只要从 n 件奖励中抽到这两件的任意一件，就会进入上一条的『只剩一件』状态。抽到这两件奖励之一的几率是 2&#x2F;n，期望抽取次数是 n&#x2F;2。\n每抽到一件新的就会进入下一个状态。而在任意某个状态时，当前对应的期望抽取次数是总数 &#x2F; 剩余新奖品数。\n因此，总的期望抽取次数是所有状态的期望抽取次数之和。\n\n调和级数是发散的，可以用 Excel 等工具计算期望值，也可以用近似公式 $H_n \\approx \\ln n + C + 1&#x2F;2n$ 算。这里的 $C$ 就是欧拉常数，约为 0.5772156649。\n进一步的，如果不需要抽完，而只是抽取其中的特定 k 件奖品，仍可以从最后一件倒数推算，其期望抽取次数是：\n$$Exp &#x3D; \\frac{n}{1} + \\frac{n}{2} + \\cdots + \\frac{n}{k-1} + \\frac{n}{k} &#x3D; n \\cdot H_k$$\n3. 放回抽取，不同概率在各类游戏中，奖励物品往往有不同的『品质』等级，以及不同的出现概率。可以简单理解为\n\n奖池分为 $m$ 个小奖池，每个小奖池进入概率分别为 $p_1, p_2, \\cdots, p_m$，奖品数量分别为 $n_1, n_2, \\cdots, n_m$。获得整个奖池全部奖励的期望抽取次数 $N$ 是多少？\n\n对于每个小奖池，期望抽取次数是 $n_i \\cdot H_{n_i}$，再除以小奖池本身的概率 $p_i$，即得 $N_i&#x3D;n_i\\cdot H_{n_i} \\ &#x2F;\\ p_i$。但对于整个奖池，总期望抽取次数 $N$ 不是所有小奖池的次数之和，而是它们之中的最大值。因为当有 $n_i &#x3D; p_i\\cdot N$ 的抽取次数落到 $i$ 号小奖池时，也有对应的 $(1-p_i) N$ 溢出到其它小奖池。最大值保证溢出部分覆盖其它小奖池的期望抽取次数。随意举例如下：\n\n\n\n品质\n数量\n概率\n期望有效抽取次数\n对应期望抽取总次数\n溢出次数\n\n\n\n橙色传说\n10\n0.01\n$10\\cdot H_{10} \\approx 29.29$\n$2928.97$\n$10\\cdot H_{10} \\ &#x2F;\\ 0.01 \\cdot 0.99 \\approx  2899.68$\n\n\n紫色史诗\n20\n0.09\n$20\\cdot H_{20} \\approx 71.95$\n$799.50$\n$20\\cdot H_{20} \\ &#x2F;\\ 0.09 \\cdot 0.91 \\approx  727.54$\n\n\n蓝色稀有\n50\n0.3\n$50\\cdot H_{50} \\approx 224.96$\n$749.86$\n$50\\cdot H_{50} \\ &#x2F;\\ 0.3 \\cdot 0.7 \\approx 524.91 $\n\n\n白色普通\n200\n0.6\n$200\\cdot H_{200} \\approx 1175.6$\n$1959.34$\n$200\\cdot H_{200} \\ &#x2F;\\ 0.6 \\cdot 0.4 \\approx 783.74$\n\n\n总抽取次数 $N$ 会以 $0.01:0.09:0.3:0.6$ 的比例分配到四种品质中。观察表格，橙色传说所需的抽取次数最多，且溢出部分按比例仍可以覆盖其它所有奖池的有效抽取次数，也就是说抽到 2929 次时，期望可以让全部 10 件橙色传说抽取到手里。此时溢出的 2899 次已经完全覆盖了其它三种品质的有效期望抽取次数。所以 $$Exp &#x3D; Max\\left(n_i \\cdot H_{n_i} \\ &#x2F;\\ p_i\\right)$$\n进一步考虑发现，只要每个小奖池的期望有效抽取次数和设定的小奖池进入概率比例不一致，则一定会有一个小奖池的期望抽取次数最大。如果正好一致，也意味着每个都是最大值。这个结论是普适的。\n4. 放回抽取，反还比例在某些游戏中，抽取到重复奖品时，会通过『碎片』等给予一定的返还比例，若干个碎片可以合成需要的道具。先考虑单个奖池的情况：\n\n假设奖池中有 n 件奖品，抽取概率相同。抽到重复奖品时，返还比例是 r(r&lt;1)，那么抽取次数的期望值是多少？\n\n没有傻逼会去合成已经存在的道具，所以返还可以视为抽取了 r 个新道具。同时由于 r &lt;1，重复的价值仍是小于不重复的，因此在确保碎片可以合成奖池所有剩余奖品前，应当不合成任何奖励减少重复，使得整体收益最大化。再次从后往前考察抽取过程：\n\n如果只差最后一件奖品没抽到，那么我仍需要从 n 件奖励中抽取，抽到这件奖励的几率是 1&#x2F;n，期望抽取次数是 n。其中 1 次是有效抽取，n-1 次是重复抽取，返还 r(n-1) 碎片。\n如果剩最后两件奖品没抽到，只要从 n 件奖励中抽到这两件的任意一件，就会进入『最后一件』状态，抽到这两件奖励的几率是 2&#x2F;n，期望抽取次数是 n&#x2F;2。其中 1 次是有效抽取，n&#x2F;2-1 次是重复抽取，返还 r(n&#x2F;2-1) 碎片。\n以此类推，在 n 奖池中抽取到 t 个奖品时，对应的总抽取碎片为：\n\n\\begin{align*}R(t) &amp;&#x3D; r\\cdot(n-1) + r\\cdot(\\frac{n}{2}-1) + \\cdots + r\\cdot(\\frac{n}{t-1}-1) +r\\cdot(\\frac{n}{t}-1) \\\\&amp;&#x3D; r \\cdot \\sum_{i&#x3D;1}^t \\left( \\frac{n}{i} - 1 \\right) \\\\&amp;&#x3D; r \\cdot \\left( nH_t - t \\right) \\\\\\end{align*}\n在某个节点 $t&#x3D;k$ 时，获得的碎片就已经足够合成了所有剩余的奖品，即 $R(k) \\geq n-k$。因为 $R$ 单调递增，$k$ 必然存在，此时对应的期望抽取次数即是 $n \\cdot H_k$。$k$ 的通式求解超出了我的能力，但使用 Excel 或编程求解在有限的 n 范围内仍是方便的。\n5. 放回抽取，反还比例，多个奖池\n假设还是 $m$ 个分概率的小奖池，但返还的碎片是通用的，那么全部奖品的总抽取次数期望值是多少？\n\n这里需要再添加一个参数，每个奖池的相对价格是不同的，设为 $c_i$。在 r 相同同，高价值奖池重复物品返回的碎片绝对数量更多。需要通过调整各奖池的 $c_i \\cdot R(t)$，使各奖池的每抽价值归一化，后续就化为多个小奖池取最大值的已知问题了。即：\n\n设总抽取次数为 $N$，则对于每个小奖池会分得 $k_i &#x3D; N \\cdot p_i$ 次。\n各小奖池 $i$ 各抽取 $k_i$ 次，得到 $t_i$ 个奖品，满足 $n_i \\cdot H_{t_i} \\leq k_i$，虽然计算期望可以取等号，但调和级数无法依此简化计算。\n此时产生的碎片为 $r\\cdot(k_i-t_i)$ 即 $R(t_i)$，剩余未抽取的奖品数量为 $n_i - t_i$。\n当总碎片数量大于等于剩余奖品所须数量时，N 得解。整理得到：\n\n\\begin{array}{l}\\left\\{\\begin{aligned}&amp; k_i &#x3D;N \\times p_i, \\\\&amp;n_i \\cdot H_{t_i} \\leq k_i, \\\\&amp;\\sum_{i&#x3D;1}^m [R(t_i) \\cdot c_i] \\geq \\sum_{i&#x3D;1}^m [(n_i-t_i)\\cdot c_i] \\\\\\end{aligned}\\right. \\\\\\\\\\Rightarrow \\large{ N &#x3D; Max\\left( k_i &#x2F; p_i \\right) }\\end{array}\n\n$c_i$ 为不同奖池间的价值权重，与碎片兑换各级别奖品的相对数量有关，与 $r$ 无关。\n$p_i c_i$ 为定义数据，调和级数只有离散解，每个小奖池计算的全局期望 $N_i$ 仍可能不一致。\n\n6. 概率提升\n在某些游戏中，当抽取未能获得奖励时，会提升下一次抽取的概率，直到抽取到奖励后重置概率。则真实概率是多少？\n\n先从一个简单例子入手：\n\n事件 A 的发生概率是 1&#x2F;2，事件 B 发生概率为另 1&#x2F;2，当 A 未发生时，下一次发生事件 A 的概率提到 100%。那么在多次重复中，A 事件的真实概率是多少？\n\n直觉可能会认为是 75%。但进一步思考发现，事件 B 的下一轮必定跟随事件 A，而事件 A 的下一轮 A 与 B 各有 50% 几率发生。将多轮过程展开后会发现这是 $A:BA&#x3D;1:1$ 的序列。因此单看事件 A 发生的真实概率为 2&#x2F;3。\n推广到 A 事件 1&#x2F;3 的情况，可以得到：\n\n\n\n组合\n概率\n\n\n\nA\n$1&#x2F;3$\n\n\nBA\n$2&#x2F;3 \\times 2&#x2F;3 &#x3D; 4&#x2F;9$\n\n\nBBA\n$2&#x2F;3 \\times 1&#x2F;3 \\times 1 &#x3D; 2&#x2F;9$\n\n\n在足够长的序列中，三者以 $A:BA:BBA&#x3D;\\frac{1}{3}:\\frac{4}{9}: \\frac{2}{9}$ 的比例出现，序列总长度为 $L &#x3D; \\frac{1}{3}\\cdot n + \\frac{4}{9}\\cdot 2n+ \\frac{2}{9}\\cdot 3n$，其中 A 在每个组合中都出现一次，因此 A 的真实概率是 $\\frac{n}{L} &#x3D; \\frac{9}{17}$。\n由此观察到一般规律，对于初始概率为 $a$，提升步长为 $p$，达到 100% 时的步数为 $k$，即 $a+kp\\geq 1 \\Rightarrow k\\geq(1-a)&#x2F;p$ 时，真实概率 $P(A)$ 是以下式子的解：\n\\begin{align*}L &amp;&#x3D; p(A)+2\\cdot p(BA)+3\\cdot p(BBA)+ \\cdots + k \\cdot p(\\underbrace{BBB \\ldots B}_{k-1}A) + (k+1) \\cdot p(\\underbrace{BBB \\ldots B}_{k}A) \\\\&amp;&#x3D; a + 2(1-a)(a+p) + 3(1-a)^2(a+2p) + \\cdots + k(1-a)^{k-1}(a+(k-1)p) +(k+1)(1-a)^k\\cdot1 \\\\&amp;&#x3D; \\sum_{i&#x3D;1}^k \\left[i\\cdot(1-a)^{i-1}(a+(i-1)\\cdot p) \\right] + (k+1)(1-a)^k \\cdot 1 \\\\P(A) &amp;&#x3D; k&#x2F;L\\end{align*}\n\n这其实就是马尔克夫链与状态转移方程。\n\n因为 $k$ 是有限的，所以式子不涉及无穷级数，但是计算仍然不方便，需要借助工具。\n在 $a &#x3D; p &#x3D; 1&#x2F;n$ 的特殊情况下，可以进一步简化为：\n\\begin{align*}L &amp;&#x3D; \\frac{1}{n} + \\frac{n-1}{n}\\cdot\\frac{2}{n}\\cdot2 + \\frac{n-1}{n}\\cdot\\frac{n-2}{n}\\cdot\\frac{3}{n}\\cdot3 + \\cdots + \\frac{n-1}{n}\\cdot\\frac{n-2}{n}\\cdots\\frac{1}{n}\\cdot\\frac{n}{n}\\cdot n \\\\&amp; &#x3D; \\sum_{i&#x3D;1}^n \\left[\\frac{i^2}{n^i} \\cdot \\prod_{j&#x3D;1}^{i-1} (n-j) \\right] \\\\Q(n) &amp;&#x3D; 1&#x2F;L \\\\\\end{align*}\n手动计算几个较小值：\\begin{align*}Q(2) &amp;&#x3D; \\frac{1}{ \\frac{1}{2} + \\frac{2^2}{2^2}(2-1) } &#x3D; \\frac{2}{3} \\\\Q(3) &amp;&#x3D; \\frac{1}{ \\frac{1}{3} + \\frac{2^2}{3^2}(3-1) + \\frac{3^2}{3^3}(3-1)(3-2) } &#x3D; \\frac{9}{17} \\approx 0.5294 \\\\Q(4) &amp;&#x3D; \\frac{1}{ \\frac{1}{4} + \\frac{2^2}{4^2}(4-1) + \\frac{3^2}{4^3}(4-1)(4-2) + \\frac{4^2}{4^4}(4-1)(4-2)(4-3) } &#x3D; 32&#x2F;71\\approx 0.4507 \\\\Q(5) &amp;&#x3D; \\frac{1}{ \\frac{1}{5} + \\frac{2^2}{5^2}\\cdot4 + \\frac{3^2}{5^3}\\cdot4\\cdot3 + \\frac{4^2}{5^4}\\cdot4\\cdot3\\cdot2 + \\frac{5^2}{5^5}\\cdot4\\cdot3\\cdot2\\cdot1 } &#x3D; 625&#x2F;1569\\approx 0.3983 \\\\Q(6) &amp;&#x3D; \\frac{1}{ \\frac{1}{6} + \\frac{2^2}{6^2}\\cdot5 + \\frac{3^2}{6^3}\\cdot5\\cdot4 + \\frac{4^2}{6^4}\\cdot5\\cdot4\\cdot3 + \\frac{5^2}{6^5}\\cdot5\\cdot4\\cdot3\\cdot2 + \\frac{6^2}{6^6}\\cdot5\\cdot4\\cdot3\\cdot2\\cdot1 } &#x3D; 324&#x2F;899 \\approx 0.3604 \\\\Q(7) &amp;&#x3D; 117649&#x2F;355081 \\approx 0.3313, \\\\Q(8) &amp;&#x3D; 131072&#x2F;425331 \\approx 0.3082, \\\\Q(9) &amp;&#x3D; 4782969&#x2F;16541017 \\approx 0.2892, \\\\Q(10)&amp;&#x3D; 1562500&#x2F;5719087 \\approx 0.2732,\\end{align*}\n来个大的：\n\\begin{align*}Q(100)&amp;&#x3D;\\frac{\\tiny{10587911840678754238354031258495524525642395019531250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000}}{\\tiny{129277986730885202106151856642773382549665465071825090615034369359178917814747670780594211447306244001059786961886915926297133393516168977984471526892507817}} \\\\&amp;\\approx 0.0819\\end{align*}\n再来个图：\n\n7. 保底\n在某些游戏中，抽取到一定次数后，会有保底机制，即抽取次数超过一定值后，会直接给予某个奖励。\n\n待续。\n","categories":["硬用数学"],"tags":["抽奖","奖池","期望"]},{"title":"素数算法，外加点糖","url":"//primes-algorith-with-sugar/","content":"质数，也叫素数，是对 Prime Number 的不同翻译。素数的叫法大概率来自日语，素在日语里引申出了根本，源头以及不可再分割的意思，这一点古汉语里是没有的。因此诞生出了一大批和制词汇，比如元素，素材，要素等等。而 Prime Number 正好符合这个特性，叫素数再合适不过了。现代汉语由于引入了上面这些和制词汇，所以素也开始有了上述意思。至于港台地区保留了这个叫法也是因为延袭了民国时期的翻译习惯，没有做变更而已。\n\n《为什么叫素数》 来源：Spenser Sheng链接：https://www.zhihu.com/question/22456389/answer/967574484至此，质数这个名词就在中国成了官方认可的科学术语，并一直没用至今。但是，素数这个说法并没有因此退出历史舞台。同时代的秀多著作，还是用了这个名词，比如华罗庚先生于 1940 年出版的《堆垒素数论》等。这直接影响了后来更多数学家在著书立说时没用素数这个名词（可能因为要考虑与他人表述的统一性），如陈景润研究“哥德巴赫猜想”也是讲素数。……在中小学教材上，目前是统一使用质数这个名词，但是标明了“质数，又叫素数”《梳理源流，叩问本质——对质数、合数名词的考证与思考》顾志能 https://www.doc88.com/p-1478574668277.html\n\n\n如何计算 N 以内的素数，或者判断 p 为素数，在编程领域是孪生的两个问题，也是很多编程语言的入门题目。这个题目优点在于有相当多的解法和优化空间，尤其适合用来练习算法和程序优化。这里我们就来逐步优化一个素数计算程序。\n基础实现我们从最简单的开始，先写一个函数 isPrime(n) 判断 n 是否为素数，这个判断函数严格按素数的定义实现：\n\n除了 1 和 n 之外，没有其他整数能整除 n\n\n也就是说，将 2 ~ n-1 之间的每个整数都试一遍，看看是否能整除 n。再用 isPrime(n) 逐个找出 &lt; N 的所有素数。\nfunction isPrime(n) &#123;    // 判断 n 是否为素数    for (let i = 2; i &lt; n; i++) &#123;        if (n % i === 0) return false;    &#125;    return true;&#125;function calcPrimes(n) &#123;    // 找出 &lt;N 的所有素数    let primes = [];    for (let i = 2; i &lt;= n; i++) &#123;        if (isPrime(i)) &#123;            prime.push(i);        &#125;    &#125;    return primes;&#125;console.log(calcPrimes(100));// [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]\n\n\n※ 本文演示代码为 JavaScript，方便在浏览器控制台内测试。但考虑到与正文内容保持一致，并未使用 JavaScript 内置的 .map(), .forEach(), .filter() 等遍历函数，而只用普通的 for loop if else 等代码。\n\n简单优化显然上面的代码是有很多无效的计算的，一些简单的数学知识就可以大幅地优化计算效率：\n\n所有的偶数都不是素数，除了 2。\n\nfunction calcPrimes(n) &#123;    let primes = [2]; // for 循环从 3 开始，因此直接把特例 2 加入    for (let i = 3; i &lt;= n; i = i + 2) &#123;        // 从 i++ 优化为 i=i+2        if (isPrime(i)) &#123;            prime.push(i);        &#125;    &#125;    return primes;&#125;\n\n\n同上，所有 3 的倍数都不是素数，除了 3。因此，我们可以只检查 6k ± 1 的数。\n\nfunction calcPrimes(n) &#123;    let primes = [2, 3];    for (let i = 6; i &lt;= n; i = i + 6) &#123;        // 计算 6k        if (isPrime(i - 1)) &#123;            prime.push(i - 1);        &#125; // 判断 6k-1        if (isPrime(i + 1)) &#123;            prime.push(i + 1);        &#125; // 判断 6k+1    &#125;    return primes;&#125;\n\n\n※ 理论上我们可以继续讨论 5 的倍数，但这会使 for 循环需要处理 30k ± a，且 a 有 1,7,13 等多个值。代码变得复杂，而优化效果一般。过于复杂的代码会让你不幸福。\n\n\n判断素数时，只需要检查到 sqrt(n) 即可。如果 n 有一个大于 sqrt(n) 的因子，必然对应一个小于 sqrt(n) 的因子，则之前的循环中已经判断过了。\n\nfunction isPrime(n) &#123;    if (n &lt; 2) return false;    for (let i = 2; i * i &lt;= n; i++) &#123;        // 从 i &lt; n 优化为 i*i &lt;= n        if (n % i === 0) return false;    &#125;    return true;&#125;\n\n更多优化进一步思考 isPrime 函数，我们发现，不必让所有小于 sqrt(n) 的数都试一遍，只需要用之前已经计算出来的素数尝试即可。但我们需要整体调整代码，使 isPrime() 函数可以调用 primes 数组。\nfunction calcPrimes(n) &#123;    let primes = [2, 3];    function isPrime(n) &#123;        for (let i = 0; primes[i] ** 2 &lt; n; i++) &#123;            // 在 isPrime 函数中可以直接使用 primes 数组            if (n % primes[i] === 0) return false;        &#125;        return true;    &#125;    for (let i = 6; i &lt;= n; i = i + 6) &#123;        if (isPrime(i - 1)) &#123;            prime.push(i - 1);        &#125;        if (isPrime(i + 1)) &#123;            prime.push(i + 1);        &#125;    &#125;    return primes;&#125;console.log(calcPrimes(100));// [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]\n\n筛法以上的方法都是用较小的数字去尝试整除 N 以判断 N 是否为素数，这种方法称为试除法。从直观考虑，每个 N 都会被 2,3,5 ... 等数字都除一遍，比如 49 和 77 都会在 2, 3, 5 上各浪费三次计算。如果可以绕过无效除法，只用 7 去尝试 49，而 2,3,5 则不去浪费时间，耗时会大幅会降低。事实上这种方法是存在的，并且非常简单，称为『筛法』。\n简单到解释起来只需要两句话：\n\n从 2 开始，将所有 2 的倍数都划掉；从 3 开始，将所有 3 的倍数都划掉；从 5 开始，将所有 5 的倍数都划掉；\n以此类推。\n\nfunction calcPrimes(n) &#123;    let primes = [];    let numboard = new Array(n + 1).fill(true);    for (let i = 2; i &lt; n; i++) &#123;        if (numboard[i]) &#123;            primes.push(i); // 将素数加入 primes 数组            for (let j = i * 2; j &lt; n; j += i) &#123;                // 将 i 的倍数都划掉                numboard[j] = false;            &#125;        &#125;    &#125;    return primes;&#125;console.log(calcPrimes(100));// [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]\n\n这个筛法也被称为埃拉托斯特尼筛法，是为了纪念古希腊数学家埃拉托斯特尼而命名的。这个方法看似很简单，实际也确实很简单，是一种朴素的空间换时间方案。算法改除法为乘法，同时避免互质两数相遇，避免了很多无效运算。虽然当 N 非常大时，numboard 数组会占用很多内存，但时间优势更为明显。\n\n※ 由于这个方法如此简单，普通人也能想到，不值得特地冠名。我猜测这个名字只是为了纪念历史名人，不能说明是他最早发明了这个方法。\n\n同样，上述代码也有一些优化空间，比如：\n\n划掉倍数时，可以从 j &#x3D; i*i 开始，因为 2i, 3i ... (i-1)i 在对应的 2, 3 ... i-1(或其因数)那一轮时已经被划掉了。\n当划到 i &gt; sqrt(N) 时，则剩余未标记数也都是素数。假设有任意合数 m 满足 sqrt(N) &lt; m &lt; N，则 m 的素因数 p1,p2 ... 中最小的一个 p 也必然小于 sqrt(N)。而我们已经找到所有小时 sqrt(N) 的素数，并划掉其倍数了，所以找到 p 时必定已经划掉 m。\n\nfunction calcPrimes(n) &#123;    let primes = [];    let numboard = new Array(n + 1).fill(true);    let sqrt_n = Math.sqrt(n);    for (let i = 2; i &lt;= n; i++) &#123;        if (numboard[i]) &#123;            if (i &gt; sqrt_n) break; // 根据上文证明，剩余未标记数也都是素数            for (let j = i * i; j &lt; n; j += i) &#123;                // j = i * 2 -&gt; j = i * i                numboard[j] = false;            &#125;        &#125;    &#125;    for (let j = 2; j &lt;= n; j++) &#123;        if (numboard[j]) &#123;            primes.push(j);        &#125; // 清点未标记数    &#125;    return primes;&#125;console.log(calcPrimes(100));// [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]\n\n在算法进入筛法层次后，isPrime() 函数与 calcPrimes() 函数的功能区别也就不再明显。为了判断 N 是否为素数，需要至少计算到 sqrt(N) 的素数，而上文又证明剩余的未标记数也都是素数。差别只是最后判断一下 N 是否在 primes 数组中而已。\n另外，在埃氏筛法中，6k ± 1 等手段不再有优化作用。构造一个『只有奇数的筛盘』是可以的，但后续的划除操作需要大量的脚标奇偶运算，反而会增加计算量。\n位运算在埃氏筛法中，内存占用是一个问题，尤其在筛法本身就是为了计算大 N 而生的。在实际应用中，有时也需要在有限的内存空间内尽量优化。注意到 numboard 数组只是用来标记是否为素数，只需要 0,1 两个状态，因此可以用位运算来减少内存占用。这使得内存的占用降为原来的 1&#x2F;8。但此时算法的实现与编程语言也开始耦合，不是每种编程语言都支持直接的位运算，例如 JavaScript 的位运算就只是某种『模拟』，效率并不高。Javascript 也不支持直接修改某个 bit 位，而要经过多次字节操作来实现。尽管如此，我们仍可以编写一个 setBitFalse() 函数来模拟这个操作：\nfunction setBitFalse(arr, i) &#123;    arr[i &gt;&gt; 5] &amp;= ~(1 &lt;&lt; (i &amp; 31));&#125;\n\n代码解释：\n\nJavaScript 里数值默认 32 位，通过 i &gt;&gt; 5 相当于 i&#x2F;32 取整，可以得到对应的数组下标，即具体操作哪个元素。\ni &amp; 31 将 i 与 31 (00001111) 进行按位与操作，相当于对 32 取余，得到具体操作该元素的第几个 bit 位。\n1 &lt;&lt; (i &amp; 31) 将 1 左移 i &amp; 31 位，得到一个只有第 i &amp; 31 位为 1 的数，即只有指定 bit 位是 1 其它都是 0 的掩码。\n~( ... ) 按位取反以后就得到了 1111....0...111 的反掩码，只有指定 bit 位为 0。\n&amp;&#x3D; 是按位与且赋值，将数组指定元素与反掩码进行按位与运算，其它位与 1 后值不变，指定 bit 位则变为 0。目标达成。\n\n然后，我们需要写一个 isBitTrue() 函数来判断某个位是否为 1：\nfunction isBitTrue(arr, i) &#123;    return (arr[i &gt;&gt; 5] &amp; (1 &lt;&lt; (i &amp; 31))) !== 0;&#125;\n\n类似地，函数计算数组下标和 bit 位置，生成一个只有指定 bit 位是 1 的掩码，将其与数组元素进行按位与操作。因为按位与操作遇 0 必 0，所以其它位都会被掩码数值置为 0。如果结果不为 0，则说明数组元素与掩码在该 bit 位上都是 1。\n最后，我们还需要写一个 bitsToNums() 函数，将位运算后的结果数组转换为素数数组：\nfunction bitsToNums(arr,n) &#123;    let primes = [];    for (let i = 0; i &lt; arr.length; i++) &#123;        for (let j = 0; j &lt; 32; j++) &#123;            if (arr[i] &amp; (1 &lt;&lt; j)) &#123;                primes.push(i * 32 + j);            &#125;        &#125;    &#125;    let real_primes = [];    for (let j = 2; j &lt;= n; j++) &#123;        real_primes.push(primes[j])    &#125;    // 因为是字节位长的整倍数，位运算可能会多一些数字，因此要二次筛选一下    let real_primes = [];    for (let j = 2; j &lt;= n; j++) &#123;        if (primes[j] &lt;= n) real_primes.push(primes[j]) else break;    &#125;    return real_primes;&#125;\n\n将几个函数代入原程序中的对应位置，我们可以得到一个位运算版本的埃拉托斯特尼筛选算法：\nfunction calcPrimes(n) &#123;    let bitboard = new Array((n &gt;&gt; 5) + 1).fill(-1); // 位运算数组    let sqrt_n = Math.sqrt(n);    for (let i = 2; i &lt;= n; i++) &#123;        if (isBitTrue(bitboard, i)) &#123;            if (i &gt; sqrt_n) break;            for (let j = i * i; j &lt;= n; j += i) &#123;                setBitFalse(bitboard, j);            &#125;        &#125;    &#125;    return bitsToNums(bitboard);&#125;console.log(calcPrimes(100));// [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]\n\n可以看到，位运算版本的代码更为复杂，原本只是根据下标取数组元素并判断 true&#x2F;false 的操作，现在需要生成掩码，计算偏移量，转换位数等多次计算。只有在 N 极大，以至于必须减少内存占用的情况下，才需要使用位运算。在一般情况下并不值得作此妥协。\n同时，对于 JavaScript &#x2F; Python &#x2F; java 等高级语言，位运算的效率并不高。即使实际情况确实拮据，也必须先考虑更换编程语言。比如在 C++ 中，std::bitset 这种数据结构，就特别适合于埃氏筛法结合位运算计算素数表。\n分段筛法说到内存不足，很容易就能想到另一种解决方案：分段筛法。在筛选过程中，我们把素数放进了单独的 primes 数组，而 numboard 数组则只是用来筛除合数。当 primes 找到大小为 p 的素数，就意味着 p*p 之前的 numboard 数据已经没有用了，如果我们能把这部分内存释放掉，就能大幅减少内存占用。\n因此从逻辑上讲，当求 N 以内的素数时，我们只需要保留 sqrt(N) 以内的素数，并将整个 N 范围划为若干块，对每一块使用 primes 数组进行筛选。如果不考虑分块本身的内存分配回收时间，单只考虑数值与操作量的话，分段筛法的时间复杂度与原始筛法是相同的。对于每一个被筛选的元素，都会被其每一个独特的素因数筛选一次，无论是在全局 numboard 中，还是在局部 numboard_i 中，都一样。\n基于前文的铺垫，似乎分块大小设置为 sqrt(N) 是直觉上合理的方案。但实践中，分块大小更多与内存大小有关。比如 nodejs 的默认内存上限为 2GB，尽管可以通过 --max-old-space-size 参数调整，但在个人电脑环境下再提升其实也并不会有什么质变。只要确保 primes 数组空间的前提下仍有足够的内存，就是合理的块大小。\n// JavaScript 数值默认 4Byte，1GB 内存可以存储 2^28 个数值。约 2.68 * 10^8 个。const BOARD_SIZE = 10; // 分块大小，基于演示目的设置为 10function calcPrimes(n) &#123;    let primes = [];    function cleanBoard(s, e) &#123;        // 分块筛选区间 [s, e] 素数的子函数        let board = new Array(e - s + 1).fill(true);        let sqrt_e = Math.sqrt(e);        for (let i = 0; i &lt; primes.length; i++) &#123;            // 用先前得到的素数筛选本区间            let p = primes[i];            let start = Math.ceil(s / p) * p;            for (let j = start; j &lt;= e; j += p) &#123;                board[j - s] = false;            &#125;        &#125;        for (let i = 0; i &lt; board.length; i++) &#123;            // 本区间埃筛            if (board[i]) &#123;                let p = i + s;                if (p &gt; sqrt_e) break;                for (let j = p * p; j &lt;= e; j += p) &#123;                    board[j - s] = false;                &#125;            &#125;        &#125;        for (let i = 0; i &lt; board.length; i++) &#123;            // 清点本区间的素数            if (board[i]) &#123;                primes.push(i + s);            &#125;        &#125;    &#125;    cleanBoard(2, Math.min(BOARD_SIZE - 1, n)); // 第一个区间特殊处理，去掉 0 和 1    for (let i = 1; i &lt; Math.ceil(n / BOARD_SIZE); i++) &#123;        cleanBoard(i * BOARD_SIZE, Math.min((i + 1) * BOARD_SIZE - 1, n));    &#125;    return primes;&#125;console.log(calcPrimes(100));// [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]\n\n欧拉筛法在埃氏筛法中，我们注意到，数字 6 会被 2, 3 划掉两次，30 会被 2, 3, 5 划掉三次。所有合数都会被其不同的素因数重复操作若干次，浪费还是有不少。但我们并不能去判断筛盘上某个具体的数是否已经划掉，因为『读取与判断』的时间本身可能比直接划掉时间还长。\n进一步用力注意到，筛法的本质是从『验证素数』变成了『排除合数』，而且是有规律的排除合数。考察一个合数 6 &#x3D; 2 x 3，我们希望在算法中，2 x 3 只发生一次，而不是在 2 与 3 的循环中各发生一次。对于 12 也一样，尽管它有 2 x 2 x 3, 4 x 3, 6 x 2 这三种分解方式，但我们希望只有其中一种发生，其它的被跳过。\n仿佛一头雾水但哪里又有一些灵感，这好像是可能的，只要足够聪明合理地安排合数生成，好像可以做到？\n事实确实如此。欧拉筛法就是为了解决这个问题而生的。具体操作是这样的：\n\n有一个自增的数字 i，从 2 开始。\n有一个数组 primes，存放已经找到的素数。\n如果筛板上 i 还没被划掉，则 i 是素数，将其加入 primes 数组。\n用每一个 i 乘以当前所有 primes 中的素数，得到的数都是合数，在筛板将它们标记为 false 划掉。\n如果 i 是 primes 中某个素数的倍数，那么 i * p 这个数会被标记 false，但后续直接跳过，进到 i+1 轮。\n\nfunction calcPrimes(n) &#123;    let primes = [];    let eularboard = new Array(n + 1).fill(true);    for (let i = 2; i &lt;= n; i++) &#123;        if (eularboard[i]) &#123;            primes.push(i);        &#125;        for (let j = 0; j &lt; primes.length; j++) &#123;            if (i * primes[j] &gt; n) break; // 上限判断            eularboard[i * primes[j]] = false;            if (i % primes[j] === 0) break; // 跳过本轮后续筛选        &#125;    &#125;    return primes;&#125;console.log(calcPrimes(100));// [ 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97 ]\n\n在欧拉筛中，我们通过 i * primes[j] 的方式来筛除合数，且当 i 本身为 primes[j] 的倍数时，跳过 i 与后续素数的计算环节。例如：\n\n当 i &#x3D; 4 时，本应划掉 4 * 2 与 4 * 3，但可以跳过 4 * 3，因为它会被后续的 6 * 2 划掉。\n当 i &#x3D; 35 时，会先划掉 35 * 5，而 35 * 7 会被跳过，因为它将在 i &#x3D; 49 时被 5 划掉。\n\n一般来说，如果 i &#x3D; k * primes[j]，则接下来要划掉的 s = i * primes[j+1] = k * primes[j] * primes[j+1] 会在 i&#39; = k * primes[j+1] 轮次时会被 primes[j] 划掉（因为 primes[j] 是 i&#39; 的最小素因子），所以此时可以先跳过。\n可以看到，在欧拉筛法中，由于 primes 是从小到大排列的，因此每个合数只在其最小素因数 m 对应的 i &#x3D; n &#x2F; m 轮次时，才会被划掉。\n在这个算法中，合数的分解是唯一且有序的，因此欧拉筛与埃筛内存占用一样，但算法复杂度优化到了大约 O(n)。——严格来说，因为一些必须的额外判断，实际是 $O(nlog_2log_2n)$。\n\n※ 数学先师的伟业至今仍被人传颂，有一个算法以他的名字命名。纵然身为一个 18 世纪数学家，那个时代还远未出现计算机。\n\n\n素数的分布有了高效的素数筛选算法，我们可以开始搜索大范围的素数了。计算 1 亿以内的素数，并每 10 万分为一组，统计每组的数量。可以看到，虽然有波动，但整体是逐渐减少的，并且这个图好像有点眼熟？\n\n事实上，确实有一个 素数渐近分布定理，大致描述了素数的分布规律：\n\n设不大于 n 的所有素数的个数为 π(n)，则 π(n) ≈ n &#x2F; ln(n)\n\n具体举例来说，当 n &#x3D; 1 亿时，使用前文的程序计算出素数具体有 5761455 个，而 $n&#x2F;ln(n)\\approx 5428681$，两者比例为 1.061，较为近似。而当 n→∞ 时，值趋近于 1。\n另外也可以得到一个推论，在 n 附近随机取一个数字，它是素数的概率是 $P(n)\\approx 1&#x2F;ln(n)$。函数下降不算快，就算 n &#x3D; 1 亿，概率也有 1&#x2F;18.42，5.43%。\n这个定理已经被证明，但这个值本身只是一个渐近值。也就是说，虽然 $\\lim\\limits_{x \\rightarrow 0}\\frac{\\pi(n)}{ n &#x2F; ln(n)} &#x3D; 1$，但 $\\lim\\limits_{x \\rightarrow 0} [\\pi(n) - n &#x2F; ln(n)]$ 却是越来越大的。从函数图像上而言，两者只是越来越接近于平行，但距离却越来越远。\n素数的分布规律是数论的一个重要研究方向。后来数学家又提出了几个更精确的估算公式，这一方向的顶点便是著名的黎曼猜想。\n梅森素数与 Lucas-Lehmer 检验。在了解素数的大致分布，并回顾欧拉筛法以后，我们发现即使是 O(n) 的算法也仍然有很大的局限性。内存限制是最初的现实问题，但也只是所有问题中最简单的一个，更大的限制仍然是来自于算法本身。我们要筛到至少 sqrt(N)，才能得到 N 是否为素数的结果。在 N 非常非常大时，O(n) 的算法仍然太慢了。\n仔细思考发现，这是因为筛法天然地要求算法结果的素数是连续的，如果跳过某个数，那么后续的合数也可能被认为是素数，整体就会崩盘。那么是否存在『跳过一部分数，快速往更大的素数 N 前进』，以及在不知道小于 sqrt(N) 全部素数的情况下，判断 N 是否为素数的算法呢？\n两者都是存在的，并且有多种方法。典型例子是梅森素数和配套的 Lucas-Lehmer 算法。\n梅森素数是形如 $2^p - 1$ 的素数，并且简单可以证明，当 $2^p - 1$为素数时，p 也是素数。\n\n当 p 是合数时，令 p &#x3D; ab，有：$2^p-1&#x3D; (2^a)^b - 1 \\overset{ x&#x3D;2^a}{&#x3D;\\!&#x3D;\\!&#x3D;} (x - 1)\\cdot[x^{b-1}+x^{b-2}+\\cdots+x+1]$ 为合数。\n\n尽管反过来并不一定成立，当 p 是素数时，$2^p - 1$ 仍可能是合数，比如 2^11 - 1 &#x3D; 2047 &#x3D; 23 x 89。但即使如此，梅森素数依然有很多优点，比如：\n\n比普通的序列增长得更快，可以跳过很多中间的数，尽快找到更大的素数。\n$2^p - 1$ 中包含素数的比例比全体自然中要高，因此更容易找到素数。\n否定性验证很容易，只需要验证 p 是否为素数。正向验证难度也比一般的低。\n\nLucas-Lehmer 算法是验证梅森素数的一种方法。它构造了一个递推公式：\n\\begin{equation*}s_i&#x3D;\\begin{cases} 4, &amp; i&#x3D;0 \\\\ (s_{i-1}^2-2) \\mod (2^p-1), &amp; i&gt;0 \\end{cases}\\end{equation*}\n则当 $s_{p-2} \\equiv 0 \\pmod{2^p-1}$ 时，$2^p - 1$ 为素数。其算法复杂度为 $O((log\\underset{2}{}n)^2)$。\n\n※ 在大数环境下的计算需要编程语言和专门的数学包支持，代码就不放了\n\n由于梅森素数拥有的诸多优点，目前已知的最大素数都是梅森素数，也有专门的 互联网协作项目 GIMPS 来众算更大的梅森素数。该项目前段时间正好确认了 M(57885161) 是一个新发现的素数。\n质性检验从梅森素数我们得到启发，在合理添加一些额外的限制条件后，素数的出现概率会提高，检验手段也可以针对性设计而变得简单，这对大素数的搜索非常有帮助。\n在这个层次上，calcPrimes() 基本就不再是人们的目标，而 isPrime() 则不断地发展，成为专门的『质性测试』算法。这些算法的目标是尽可能快地判断一个数是否为素数，而不是找到所有素数。在这个领域，有很多经典的算法，比如：\nLucas-Lehmer 检验\n上文提到的梅森素数检验算法。仅适用于 $2^p - 1$ 形式的素数。\nPépin 检验\n验证费马数 $2^{2^n} + 1$ 是否为素数的算法。但由于费马数目前只发现 n&#x3D;0,1,2,3,4 五个，后面都是合数，甚至有猜想认为 n &gt; 4 时皆为合数。因此 Pépin 检验的应用范围有限。而欧拉和卢卡斯接力证明了费马数的素因数皆可表达为 $k^{2n+2} + 1$，为具体的因数分解也提供了不小的方便。\n\n※ 感觉 Pépin 被费马坑了。\n\nMiller-Rabin 素数测试算法\n一个随机性的否定性算法。当测试结果为 false 则一定是合数，测试结果为 true 可能为素数。算法基于费马小定理和二次探测定理，在进行 n 次测试后，错误概率为 $1&#x2F;4^n$。\n费马小定理：如果 p 是一个素数，而 a 是任意不是 p 的倍数的整数，则 $a^{p-1} ≡ 1 (mod\\ p)$。这意味着对于任意素数 p，选择一个不是 p 的倍数的整数 a，计算 $a^{p-1}\\ \\% \\ p$，如果不等于 1，则 p 一定不是素数；等于 1，则 p 可能是素数 。二次探测定理：假设 p 是一个素数，我们可以将 p-1 写为 $2^s * d$ 的形式，其中 d 是奇数。则对于任意整数 a，如果存在整数 x 满足：\n\n\n$a^d ≡ 1 (mod\\ p)$\n存在一个 i 满足 0 ≤ i &lt; s，使得 $a^{2^i * d} ≡ -1 (mod\\ p)$\n\n\n以上两个条件之一，则 a 是一个模 p 的非平凡平方根，即 $a^2 ≡ x (mod\\ p)$：\n假设我们要测试数字 p &#x3D; 17 是否为素数。\n\n选择不是 p 的倍数的整数 a，假设选择 a &#x3D; 3。计算 $a^{p-1}\\ \\%\\ p &#x3D; 3^{16} \\% 17 &#x3D; 1$ 结果等于 1。根据费马小定理，17 可能是素数。\n\n根据二次探测定理，当 p &#x3D; 17，有 $p-1&#x3D;16&#x3D;2^4*1$，因此 s &#x3D; 4，d &#x3D; 1。我们需验证任意整数 a，可以满足以下两个条件之一：\n\n$a^d &#x3D; a ≡ 1 (mod 17)$\n存在一个 i 满足 0 ≤ i &lt; 4，使得 $a^{2^i} ≡ -1 (mod 17)$\n\n 假若仍然选择 a&#x3D;3，则 $3 \\% 17 &#x3D;3 \\neq 1$，不满足条件一，继续检验条件二：\n\n$i&#x3D;0, 3^{2^0}\\ \\% 17 &#x3D; 3$\n$i&#x3D;1, 3^{2^1}\\ \\% 17 &#x3D; 9$\n$i&#x3D;2, 3^{2^2}\\ \\% 17 &#x3D; 13$\n$i&#x3D;3, 3^{2^3}\\ \\% 17 &#x3D; 16 &#x3D; -1$，满足条件。因此 17 可能是素数。\n\n\n\n继续类似地进行多轮测试，如果任意一轮验证失败，则 p 一定是合数，反之随着验证轮次增加，p 为素数的可能性便越来越大。\nAKS 类质性测试\n一个确定性的质性测试算法，复杂度为 $O(log^{6+\\epsilon}n)$。AKS 是第一个被发表的一般的、多项式的、确定性的和无依赖的素数判定算法。算法基于一个简单定理：\n\n当 $(x+a)^n\\equiv(x^n+a)(\\text{mod}\\ n)$ 时，n 为素数。\n\n后续 ASK 被不同科学家多次改进，因此有多个版本，统称为 AKS 类算法。AKS 类算法也是目前效率最高的确定性算法，只要算法给出 true 的结果就一定是素数。\n\n※ ChatGPT 与 Copilot 对本文亦有贡献。\n\n","categories":["硬用数学"],"tags":["素数","编程","程序优化"]},{"title":"VMWare 17 免费了，但下载链接不好找","url":"//vmware-download-link/","content":"简述直接用浏览器打开 VMWare 的 CDS 地址：\nhttps://softwareupdate.vmware.com/cds/vmw-desktop/\n其中\nfusion 目录是 MacOS 下的 VM Fusion，x86 和 M1 的 MacOS 都能用。ws 目录是 VM Workstation。有 Windows 和 Linux 版。\n一路点进去，选完版本号编译号系统版本后就可以下载 tar 包。用 7zip 等软件可以解压出 VMWare 的安装包。\n比如发文时 ws 的最新版本号是 17.5.2，下载链接就是https://softwareupdate.vmware.com/cds/vmw-desktop/ws/17.5.2/23775571/windows/core/VMware-workstation-17.5.2-23775571.exe.tar\n记自从被博通收购以后，VMWare 对个人用户免费了。虽然以前满地都是序列号，个人用户实质也是随便用的，但现在毕竟有官方直接授权了。但博通的帮助系统是真难用，找了半天找不到下载链接。然后想起 vmware 自带的更新是走一个 cds 的，尝试搜索了一下还在，这比在帮助系统里找方便多了。\n记录一下。\n记 II遇到了 VMWare 17.5.1 跑 Windows XP 黑屏的 bug，搜索得知 VMWare 一直在不断地删减功能，未来甚至要把底层技术换成 KVM&#x2F;HyperV，自己只做套皮。\n又一个新版本不如老版本的软件。所以挖了一下把 CDS 上现有的老版本下载链接都提了出来。\nwget -r -np -nd -e robots=off \\    --spider --wait=1 -l inf \\    https://softwareupdate.vmware.com/cds/vmw-desktop/ \\    2&gt;&amp;1 | grep -E &#x27;^--&#x27;  \\    | awk &#x27;&#123; print $3 &#125;&#x27; &gt;&gt; links.txt\n\n整理结果：\n\n\n\nVersion\nWorkstation\nPlayer\nVersion\nFusion\nVMRC\n\n\n\n\n\n\ne.x.p\nx86\n\n\n\n\n\n\n3.0.2\nx86\n\n\n\n12.0.0\nWindows Linux\nWindows Linux\n8.0.0\nx86\n\n\n\n12.0.1\nWindows Linux\nWindows Linux\n8.0.1\nx86\n\n\n\n\n\n\n8.0.2\nx86\n\n\n\n12.1.0\nWindows Linux\nWindows Linux\n8.1.0\nx86\n\n\n\n12.1.1\nWindows Linux\nWindows Linux\n8.1.1\nx86\n\n\n\n12.5.0\nWindows Linux\nWindows Linux\n8.5.0\nx86\n\n\n\n12.5.1\nWindows Linux\nWindows Linux\n8.5.1\nx86\n\n\n\n12.5.2\nWindows Linux\nWindows Linux\n8.5.2\nx86\n\n\n\n12.5.3\nWindows Linux\nWindows Linux\n8.5.3\nx86\n\n\n\n12.5.4\nWindows Linux\nWindows Linux\n8.5.4\nx86\n\n\n\n12.5.5\nWindows Linux\nWindows Linux\n8.5.5\nx86\n\n\n\n12.5.6\nWindows Linux\nWindows Linux\n8.5.6\nx86\n\n\n\n12.5.7\nWindows Linux\nWindows Linux\n8.5.7\nx86\n\n\n\n12.5.8\nWindows Linux\nWindows Linux\n8.5.8\nx86\n\n\n\n12.5.9\nWindows Linux\nWindows Linux\n8.5.9\nx86\n\n\n\n\n\n\n8.5.10\nx86\n\n\n\n14.0.0\nWindows Linux\nWindows Linux\n10.0.0\nx86\n\n\n\n\n\n\n10.0.1\nx86\n\n\n\n14.1.0\nWindows Linux\nWindows Linux\n10.1.0\nx86\n\n\n\n14.1.1\nWindows Linux\nWindows Linux\n10.1.1\nx86\n\n\n\n14.1.2\nWindows Linux\nWindows Linux\n10.1.2\nx86\n\n\n\n14.1.3\nWindows Linux\nWindows Linux\n10.1.3\nx86\n\n\n\n14.1.4\nWindows Linux\nWindows Linux\n10.1.4\nx86\n\n\n\n14.1.5\nWindows Linux\nWindows Linux\n10.1.5\nx86\n\n\n\n14.1.6\nWindows Linux\nWindows Linux\n10.1.6\nx86\n\n\n\n14.1.7\nWindows Linux\nWindows Linux\n\n\n\n\n\n14.1.8\nWindows\nWindows\n\n\n\n\n\n15.0.0\nWindows Linux\nWindows Linux\n11.0.0\nx86\n\n\n\n15.0.1\nWindows Linux\nWindows Linux\n11.0.1\nx86\n\n\n\n15.0.2\nWindows Linux\nWindows Linux\n11.0.2\nx86\n\n\n\n15.0.3\nWindows Linux\nWindows Linux\n11.0.3\nx86\n\n\n\n15.0.4\nWindows Linux\nWindows Linux\n\n\n\n\n\n15.1.0\nWindows Linux\nWindows Linux\n11.1.0\nx86\n\n\n\n15.5.0\nWindows Linux\nWindows Linux\n11.5.0\nx86\n\n\n\n15.5.1\nWindows Linux\nWindows Linux\n11.5.1\nx86\n\n\n\n15.5.2\nWindows Linux\nWindows Linux\n11.5.2\nx86\n\n\n\n\n\n\n11.5.3\nx86\n\n\n\n15.5.5\nWindows Linux\nWindows Linux\n11.5.5\nx86\n\n\n\n15.5.6\nWindows Linux\nWindows Linux\n11.5.6\nx86\n\n\n\n15.5.7\nWindows Linux\nWindows Linux\n11.5.7\nx86\n\n\n\n16.0.0\nWindows Linux\nWindows Linux\n\n\n\n\n\n\n\n\n12.0.1\n\nWindows Linux\n\n\n\n\n\n12.0.2\n\nWindows Linux MacOS\n\n\n\n\n\n12.0.3\n\nWindows Linux MacOS\n\n\n\n\n\n12.0.4\n\nWindows Linux MacOS\n\n\n\n\n\n12.0.5\n\nWindows Linux MacOS\n\n\n16.1.0\nWindows Linux\nWindows Linux\n12.1.0\nx86\n\n\n\n16.1.1\nWindows Linux\nWindows Linux\n12.1.1\nx86\n\n\n\n16.1.2\nWindows Linux\nWindows Linux\n12.1.2\nx86\n\n\n\n16.2.0\nWindows Linux\nWindows Linux\n12.2.0\nx86 arm64\n\n\n\n16.2.1\nWindows Linux\nWindows Linux\n12.2.1\nx86 arm64\n\n\n\n16.2.2\nWindows\nWindows\n\n\n\n\n\n16.2.3\nWindows Linux\nWindows Linux\n12.2.3\nx86 arm64\n\n\n\n16.2.4\nWindows Linux\nWindows Linux\n12.2.4\nx86 arm64\n\n\n\n16.2.5\nWindows Linux\nWindows Linux\n12.2.5\nx86 arm64\n\n\n\n17.0.0\nWindows Linux\nWindows Linux\n13.0.0\nx86 arm64 universal\n\n\n\n17.0.1\nWindows Linux\nWindows Linux\n13.0.1\nuniversal\n\n\n\n17.0.2\nWindows Linux\nWindows Linux\n13.0.2\nuniversal\n\n\n\n17.5.0\nWindows Linux\nWindows Linux\n13.5.0\nuniversal\n\n\n\n17.5.1\nWindows Linux\nWindows Linux\n13.5.1\nuniversal\n\n\n\n17.5.2\nWindows Linux\nWindows Linux\n13.5.2\nuniversal\n\n\n\n17.6.0\nWindows Linux\nWindows Linux\n13.6.0\nuniversal\n\n\n\n17.6.1\nWindows Linux\nWindows Linux\n13.6.1\nuniversal\n\n\n\n","categories":["软件使用"],"tags":["vmware","download","下载链接"]},{"title":"zstd xz 7z lz4 管道压缩效率比较","url":"//pipeable-compress-methods-compare/","content":"担心 TF 卡易损坏导致重新配置系统的麻烦，我准备定期使用 dd 对树莓派进行全卡备份：\nsudo dd if=/dev/mmcblk0 of=/mnt/momoda/$(date +%Y-%m-%d)-sysbak.img\n\n尽管使用的是 64GB 的 TF 卡，生成的镜像文件也是 64GB。然而，实际系统盘的数据占用并不多，大部分空间是空白。因此，我选择通过管道压缩备份数据的方式以节省存储空间，并测试了几种支持管道的压缩算法的性能。\n测试环境：系统存储被分为 &#x2F;dev&#x2F;mmcblk0p1 和 &#x2F;dev&#x2F;mmcblk0p2 两个分区，实际上是同一张 TF 卡，目前总空间使用率约为 10%。目标是定期对全盘进行备份以应对意外，同时通过压缩方式保存数据，减少备份所需的存储空间。由于备份操作在运行中的设备上进行，数据在此期间仍可能被读写，因此选择的压缩算法需要尽可能高效，以减少数据变动的影响。\n全盘空间信息：\n~ df ⮐Filesystem          1K-blocks       Used  Available Use% Mounted onudev                  3728364          0    3728364   0% /devtmpfs                  799744       3176     796568   1% /run/dev/mmcblk0p2       59551920    5034336   51780988   9% /tmpfs                 3998704          0    3998704   0% /dev/shmtmpfs                    5120         16       5104   1% /run/lock/dev/mmcblk0p1         522232      66728     455504  13% /boot/firmwaretmpfs                  799740          0     799740   0% /run/user/1000\n\n首先生成一个未压缩的镜像文件：\n~ sudo dd if=/dev/mmcblk0 of=/mnt/exDisk/sys.img bs=4M ⮐14909+1 records in14909+1 records out62534975488 bytes (63 GB, 58 GiB) copied, 1459.15 s, 42.9 MB/s# 如果压缩算法在树莓派的 CPU 上能达到 42.9 MB/s 的处理速度，就可以认为压缩完全不影响原备份速度。\n\n由于大部分空间是空数据，如果以 63GB 为基数计算，压缩后的文件大小差异将显得微不足道。因此，下表中的百分比均以 zstd 默认压缩率的结果作为 100% 的基准进行比较。\n同时，受限于树莓派的储存方式，该镜像放在了另一台 NAS 上，两台机器间的传输能力为千兆有线，纯传输时间最低约为 536 秒。\n\n\n\n算法\n压缩参数\n压缩时间秒\n压缩后字节\n时间比\n体积比\n备注\n\n\n\nzstd\n-T2 -1\n771.511\n2574731933\n89.66%\n108.84%\n\n\n\nzstd\n-T2\n860.439\n2365713277\n100.00%\n100.00%\n默认压缩率档位 3\n\n\nzstd\n-T2 -10\n1274.784\n2190541240\n148.16%\n92.60%\n\n\n\nzstd\n-T2 -19\n4416.055\n2009856914\n513.23%\n84.96%\n\n\n\nxz\n-T2 -0\n1798.904\n2293838248\n209.07%\n96.96%\n\n\n\nxz\n-T2\n4475.497\n1924084292\n520.14%\n81.33%\n默认压缩率档位 6\n\n\nxz\n-T2 -9\n5041.978\n1803774144\n585.98%\n76.25%\n\n\n\nxz\n-T2 -9e\n8380.731\n1801292000\n974.01%\n76.14%\ne: 消耗额外时间进一步提高压缩率\n\n\n7z\n-mmt&#x3D;2 -mx&#x3D;1\n1896.414\n2330130495\n220.40%\n98.50%\n\n\n\n7z\n-mmt&#x3D;2\n7938.620\n1870578044\n922.62%\n79.07%\n默认压缩率档位 5\n\n\n7z\n-mmt&#x3D;2 -mx&#x3D;9\n13600.655\n1788204019\n1580.66%\n75.59%\n\n\n\nlz4\n-fast\n606.257\n3529871893\n70.46%\n149.21%\nlz4 没有多线程参数\n\n\nlz4\n\n640.828\n3458840786\n74.48%\n146.21%\n\n\n\nlz4\n-best\n2613.739\n3038936614\n303.77%\n128.46%\n\n\n\n测试结果\n总体来看，zstd 的性价比明显高于 xz 和 7z 等其它算法。\nlz4 速度极快。尽管没有多线程参数，单核性能仍快于其它算法的双核表现。然而，其较低的压缩率不适合作为备份用途，更适合处理持续性超大量数据的场景。\n使用 lz4 -fast 时，压缩算法的数据吞吐量已经超过数据传输的上限。这是硬盘的瓶颈，不是算法的处理上限。\n由于 TF 卡的读取速度更低，因此对于本文的需求而言，压缩时间低于 1459.15 秒时，是算法在等待数据读取，此时时间消耗的差异不再有区别。\n综合考虑数据分布和性能表现，zstd -T2 -10 是当前测试中最合适的选择。可以进一步测试 -8、-12 等参数，以在 TF 卡读取时间内达到最佳压缩率。由于 TF 卡和 CPU 性能的差异，最佳方案会有所不同，需根据具体情况选择。\n7z 和 xz 实际上用的都是 lzma 算法，两者的压缩率、性能和内存占用都没有什么实际差异。\n在测试过程中，发现 xz -9 和 7z -mx=9 运行时的内存占用也高达 2GB 多，如果是小内存版本的树莓派也根本跑不起来。\n\n","categories":["软件使用"],"tags":["zstd","xz","7z","lz4","compress ratio"]},{"title":"虚岁是长大提前一年的预演","url":"//age-s-dress-rehearsal/","content":"江南水乡的婴儿呱呱坠地时，窗外的桃枝上正结着薄霜。接生婆用红绸裹住婴儿，在族谱写下&quot;一岁&quot;的瞬间，这个生命就完成了对时间的第一次突围。虚岁不是简单的数字游戏，而是一把丈量生命的游标卡尺，在文明的刻度上为成长预留出余量。\n中国人对时间的认知始终保持着弹性。上古时期，先民们在龟甲上刻下&quot;岁&quot;字时，就赋予了它双重含义：既指周天星辰的运行周期，又指人类生命的生长韵律。《周礼》将三百六十五日划为&quot;岁实&quot;，又在每个朔望月设置&quot;虚日&quot;，这种虚实相生的智慧投射到年龄计算上，便形成了虚岁与实岁并行的独特系统。孩子尚未学会走路，却已在时间的账簿上拥有了完整的一年，如同春分前的惊蛰，用先声夺人的雷鸣预告生命的力量。\n传统礼仪中的冠礼最能体现虚岁的深意。少年十五行冠礼，实则身体仅十四龄。当长辈将缁布冠缓缓加诸其首时，不仅是在完成形式上的成年仪式，更是在进行一场庄重的心理暗示。提前赋予的年龄如同试穿的礼服，让少年在宽出一寸的衣襟里，提前感知未来需要承担的重荷。就像苏州园林的借景艺术，虚岁借来未来的光阴，将成长的远景拉进现实的取景框。\n这种时间预支的智慧，在当代依然焕发着生命力。上海弄堂里的阿婆教孙子打算盘，会故意把算珠拨快一个档位；岭南祠堂的族老主持祭祖，总让孩童站在比实际年龄高一级的台阶上。这些细微的&quot;误差&quot;，实则是为成长铺设的缓冲地带。当成都的茶馆里老人们谈论&quot;虚岁三十该立事&quot;时，他们深谙人生如戏，需要提前一年拉开帷幕，才能让主角从容登场。\n生命的年轮从不是严丝合缝的同心圆。虚岁制在时间褶皱里藏着的这枚硬币，正面镌刻着&quot;未雨绸缪&quot;，背面铭刻着&quot;留有余地&quot;。它提醒我们，成长从来不是瞬间的蜕变，而是层层铺垫的渐进。就像黄山顶上的迎客松，在嶙峋山石间蜿蜒的根系，早在地面枝干成形前，就已在地下完成千百次生长的预演。\n","categories":["文艺青年"],"tags":["虚岁"]},{"title":"1/n 与 n-1 位循环节","url":"//1-over-n-and-n-1-recurring%20decimal/","content":"142857近期刷到了一个视频，说 142857 这串数字如何的神秘，与古埃及有如何如何的关系。由于它分别乘以 1~6 都还是这串数，所以叫什么走马灯数，如何如何。抛开神秘学话题，这就是简单的 1&#x2F;7 循环节：\n\n不过『走马灯数』这个概念还是有点意思的。它最显著的特征是循环节长度 &#x3D; n-1，同时附带的性质是当乘以 $1, 2, 3, \\cdots, n-1$ 时，循环节顺序和长度不变，只是起始位置换了一下。因此写了段程序简单搜索一下还有没有其它的 n 也有这个特征。\nconst loop = (n) =&gt; &#123;    let a = 1;    let pool = new Set();    while (true) &#123;        a = (a % n) * 10;        if (a === 0) &#123;            return &quot;&quot;;        &#125; // 除尽没有循环节        let digi = (a / n) | 0;        let b = a + digi;        if (pool.has(b)) &#123;            // 当当前位的值和当前余数都出现过时，新的循环开始了            let loop = [...pool];            let index = loop.findIndex((i) =&gt; i === b);            let str = loop                .slice(index)                .map((e) =&gt; e % 10)                .join(&quot;&quot;);            return str;        &#125; else &#123;            pool.add(b);        &#125;    &#125;&#125;;let start = 7;while (start &lt; 1000) &#123;    let str = loop(start);    if (str.length == start - 1) &#123;        console.log(start, str);    &#125;    start++;&#125;\n\n结果出乎意料地多：\n\n\n\n1&#x2F;n\n循环节\n\n\n\n1&#x2F;7\n142857\n\n\n1&#x2F;17\n0588235294117647\n\n\n1&#x2F;19\n052631578947368421\n\n\n1&#x2F;23\n0434782608695652173913\n\n\n1&#x2F;29\n0344827586206896551724137931\n\n\n1&#x2F;47\n0212765957446808510638297872340425531914893617\n\n\n1&#x2F;59\n0169491525423728813559322033898305084745762711864406779661\n\n\n1&#x2F;61\n016393442622950819672131147540983606557377049180327868852459\n\n\n1&#x2F;97\n010309278350515463917525773195876288659793814432989690721649484536082474226804123711340206185567\n\n\n1&#x2F;109\n009174311926605504587155963302752293577981651376146788990825688073394495412844036697247706422018348623853211 \n\n\n1&#x2F;113\n0088495575221238938053097345132743362831858407079646017699115044247787610619469026548672566371681415929203539823 \n\n\n1&#x2F;131\n0076335877862595419847328244274809160305343511450381679389312977099236641221374045801526717557251908396946564885496183206106870229 \n\n\n1&#x2F;149\n0067114093959731543624161073825503355704697986577181208053691275167785234899328859060402684563758389261744966442953020134228187919463087248322147651 \n\n\n1&#x2F;167\n0059880239520958083832335329341317365269461077844311377245508982035928143712574850299401197604790419161676646706586826347305389221556886227544910179640718562874251497 \n\n\n1&#x2F;179\n0055865921787709497206703910614525139664804469273743016759776536312849162011173184357541899441340782122905027932960893854748603351955307262569832402234636871508379888268156424581 \n\n\n1&#x2F;181\n005524861878453038674033149171270718232044198895027624309392265193370165745856353591160220994475138121546961325966850828729281767955801104972375690607734806629834254143646408839779 \n\n\n1&#x2F;193\n005181347150259067357512953367875647668393782383419689119170984455958549222797927461139896373056994818652849740932642487046632124352331606217616580310880829015544041450777202072538860103626943 \n\n\n1&#x2F;223\n004484304932735426008968609865470852017937219730941704035874439461883408071748878923766816143497757847533632286995515695067264573991031390134529147982062780269058295964125560538116591928251121076233183856502242152466367713 \n\n\n1&#x2F;229\n004366812227074235807860262008733624454148471615720524017467248908296943231441048034934497816593886462882096069868995633187772925764192139737991266375545851528384279475982532751091703056768558951965065502183406113537117903930131 \n\n\n1&#x2F;233\n0042918454935622317596566523605150214592274678111587982832618025751072961373390557939914163090128755364806866952789699570815450643776824034334763948497854077253218884120171673819742489270386266094420600858369098712446351931330472103 \n\n\n1&#x2F;257\n0038910505836575875486381322957198443579766536964980544747081712062256809338521400778210116731517509727626459143968871595330739299610894941634241245136186770428015564202334630350194552529182879377431906614785992217898832684824902723735408560311284046692607 \n\n\n1&#x2F;263\n0038022813688212927756653992395437262357414448669201520912547528517110266159695817490494296577946768060836501901140684410646387832699619771863117870722433460076045627376425855513307984790874524714828897338403041825095057034220532319391634980988593155893536121673 \n\n\n1&#x2F;269\n0037174721189591078066914498141263940520446096654275092936802973977695167286245353159851301115241635687732342007434944237918215613382899628252788104089219330855018587360594795539033457249070631970260223048327137546468401486988847583643122676579925650557620817843866171 \n\n\n1&#x2F;313\n003194888178913738019169329073482428115015974440894568690095846645367412140575079872204472843450479233226837060702875399361022364217252396166134185303514376996805111821086261980830670926517571884984025559105431309904153354632587859424920127795527156549520766773162939297124600638977635782747603833865814696485623 \n\n\n1&#x2F;337\n002967359050445103857566765578635014836795252225519287833827893175074183976261127596439169139465875370919881305637982195845697329376854599406528189910979228486646884272997032640949554896142433234421364985163204747774480712166172106824925816023738872403560830860534124629080118694362017804154302670623145400593471810089020771513353115727 \n\n\n1&#x2F;367\n002724795640326975476839237057220708446866485013623978201634877384196185286103542234332425068119891008174386920980926430517711171662125340599455040871934604904632152588555858310626702997275204359673024523160762942779291553133514986376021798365122615803814713896457765667574931880108991825613079019073569482288828337874659400544959128065395095367847411444141689373297 \n\n\n1&#x2F;379\n002638522427440633245382585751978891820580474934036939313984168865435356200527704485488126649076517150395778364116094986807387862796833773087071240105540897097625329815303430079155672823218997361477572559366754617414248021108179419525065963060686015831134564643799472295514511873350923482849604221635883905013192612137203166226912928759894459102902374670184696569920844327176781 \n\n\n1&#x2F;383\n0026109660574412532637075718015665796344647519582245430809399477806788511749347258485639686684073107049608355091383812010443864229765013054830287206266318537859007832898172323759791122715404699738903394255874673629242819843342036553524804177545691906005221932114882506527415143603133159268929503916449086161879895561357702349869451697127937336814621409921671018276762402088772845953 \n\n\n1&#x2F;389\n0025706940874035989717223650385604113110539845758354755784061696658097686375321336760925449871465295629820051413881748071979434447300771208226221079691516709511568123393316195372750642673521850899742930591259640102827763496143958868894601542416452442159383033419023136246786632390745501285347043701799485861182519280205655526992287917737789203084832904884318766066838046272493573264781491 \n\n\n1&#x2F;419\n0023866348448687350835322195704057279236276849642004773269689737470167064439140811455847255369928400954653937947494033412887828162291169451073985680190930787589498806682577565632458233890214797136038186157517899761336515513126491646778042959427207637231503579952267303102625298329355608591885441527446300715990453460620525059665871121718377088305489260143198090692124105011933174224343675417661097852028639618138424821 \n\n\n1&#x2F;433\n002309468822170900692840646651270207852193995381062355658198614318706697459584295612009237875288683602771362586605080831408775981524249422632794457274826789838337182448036951501154734411085450346420323325635103926096997690531177829099307159353348729792147806004618937644341801385681293302540415704387990762124711316397228637413394919168591224018475750577367205542725173210161662817551963048498845265588914549653579676674364896073903 \n\n\n1&#x2F;461\n0021691973969631236442516268980477223427331887201735357917570498915401301518438177874186550976138828633405639913232104121475054229934924078091106290672451193058568329718004338394793926247288503253796095444685466377440347071583514099783080260303687635574837310195227765726681127982646420824295010845986984815618221258134490238611713665943600867678958785249457700650759219088937093275488069414316702819956616052060737527114967462039045553145336225596529284164859 \n\n\n1&#x2F;487\n002053388090349075975359342915811088295687885010266940451745379876796714579055441478439425051334702258726899383983572895277207392197125256673511293634496919917864476386036960985626283367556468172484599589322381930184804928131416837782340862422997946611909650924024640657084188911704312114989733059548254620123203285420944558521560574948665297741273100616016427104722792607802874743326488706365503080082135523613963039014373716632443531827515400410677618069815195071868583162217659137577 \n\n\n1&#x2F;491\n0020366598778004073319755600814663951120162932790224032586558044806517311608961303462321792260692464358452138492871690427698574338085539714867617107942973523421588594704684317718940936863543788187372708757637474541751527494908350305498981670061099796334012219959266802443991853360488798370672097759674134419551934826883910386965376782077393075356415478615071283095723014256619144602851323828920570264765784114052953156822810590631364562118126272912423625254582484725050916496945010183299389 \n\n\n1&#x2F;499\n002004008016032064128256513026052104208416833667334669338677354709418837675350701402805611222444889779559118236472945891783567134268537074148296593186372745490981963927855711422845691382765531062124248496993987975951903807615230460921843687374749498997995991983967935871743486973947895791583166332665330661322645290581162324649298597194388777555110220440881763527054108216432865731462925851703406813627254509018036072144288577154308617234468937875751503006012024048096192384769539078156312625250501\n\n\n简化代码并扩大计算量搜索后，得到 100 万以内的走马灯数分布：\nconst n_devide_len = (n) =&gt; &#123;    let a = 1,        pool = new Set();    while (true) &#123;        a = (a % n) * 10;        if (a == 0) &#123;            return 0;        &#125;        if (pool.has(a)) &#123;            return pool.size;        &#125; else &#123;            pool.add(a);        &#125;    &#125;&#125;;\n\n\n有点意思。\n\n研究原因对于任意由 1&#x2F;n 形成的循环小数，$\\frac{1}{n} &#x3D; 0.\\overline{******}$，设循环节部分为 $r$，其长度为 $l$，都可以写成一个无穷级数之和：\n$$\\frac{1}{n} &#x3D; \\frac{r}{10^l}+\\frac{r}{10^{2l}}+\\cdots+\\frac{r}{10^{kl}} +\\cdots &#x3D; \\sum_{k&#x3D;1}^\\infty\\frac{r}{10^{kl}}$$\n对这个无穷等比数列重新求和，$S&#x3D;1&#x2F;n$，$10^l * S-S &#x3D; r$，得到 $S &#x3D; \\frac{r}{10^l-1} &#x3D; \\frac{1}{n}$，所以 $n&#x3D;\\frac{10^l - 1}{r}$ ，或者写成 $r&#x3D;\\frac{\\overbrace{999\\cdots999}^l}{n}$，这里的 r 一定是整数。这个方法同时也是将循环小数化为分数的标准方法。\n\n当 $n &#x3D; 7, l &#x3D; 6$ 时，也就得到了 $142857 &#x3D; \\frac{\\overbrace{999999}^6}{7}$，所以 $1&#x2F;7 &#x3D; 0.\\overline{142857}$\n\n当 $n &#x3D; 3, l &#x3D; 2$ 时，得到 $r &#x3D; \\frac{99}{3} &#x3D; 33$，所以 $1&#x2F;3 &#x3D; 0.\\overline{33}$，逻辑上其实也是对的，只是一般来说小数循环时只考虑最小周期，所以正确的写法应该是 $1&#x2F;3 &#x3D; 0.\\overline{3}$。\n\n当 $n &#x3D; 11, l&#x3D; 10$ 时，得到 $r &#x3D; \\frac{9999999999}{11} &#x3D; 0909090909$，要注意这是循环节的计算因此首位的 0 不能去掉，所以 $1&#x2F;11 &#x3D; 0.\\overline{0909090909}$，正写为 $1&#x2F;11&#x3D;0.\\overline{09}$\n\n\n\n对于 $1&#x2F;6 &#x3D; 0.1\\overline{6}$ 这类存在非循环小数部分的，可以通过乘 10 等操作，把非循环部分移到整数上并抛弃，即化为 $10&#x2F;6 \\rightarrow 4&#x2F;6 &#x3D; 2&#x2F;3 &#x3D; 0.\\overline{6}$，考察 $0.\\overline{6}$ 即可。\n\n同余在上述 $n&#x3D;3, n&#x3D;11$ 两个例子中，虽然得到了逻辑上可行的循环节，但不符合通常的习惯，于在结果上进行了缩减，变为符合习惯的最小循环节。\n\n$10^k-1$ 本身就是 3 的倍数，所以循环节永远只有一位。\n\n11 因其自身的特殊性质，11 &#x3D; 10 + 1，天然地符合 10 为底的级数的结构，如果一个数字各位数值相同，那么奇数位数字对 11 都是同余的，偶数位也是。所以 $10^k-1 (mod\\ 11)$ 只有两个结果 9 和 0。并且在两者间不断跳转。\n\n\n可见，循环节长度即是最早出现同余时的 k 值，若要 1&#x2F;n 的循环节长度为 n-1，需要 $10^k \\ mod\\ n$ 在 $k &#x3D; 1, \\cdots, n-1$ 时都不同余。\n进制从上可见，循环小数与进制密切相关。例如在 8 进制中，9（在 8 进制中也写为 11）的性质将和 10 进制中的 11 相似，也会出现奇位同余偶位同余的情况。所以 $1&#x2F;11_{(8)} &#x3D; 0.\\overline{07}_{(8)}$，形式上完全一致。\n而 $1&#x2F;7_{(8)}$ 则变为了 $0.\\overline{1}_{(8)}$，因为 $8^k-1_{(8)} &#x3D; {\\overbrace{77\\dots7}^{k}}_{(8)}$ 各位恒为 7，也就不存在什么神秘数字循环了。\n由于和进制本身高度相关，因此某个 1&#x2F;n 是否有 n-1 位循环节，取决于它和进制 $R^k - 1$ 之间的相除结果，这个关系不知道数论中是否已有结论。\n推论\nn-1 位循环节天然存在，只是因为有可能内部重复导致长度缩减。而在 n-1 基础上的缩减不会破坏原有模式，因此最小循环节长度一定是 n-1 的因数。\n\n只有当 n 为素数时，才有可能实际出现 n-1 位循环节。由于余数需要遍历 1 到 n-1 的所有数。若 n &#x3D; pq，余数会在 q-1 与 p-1 的共同作用下循环，但 p-1 与 q-1 至少含有公因素 2，不可能产生所有 {0, p-1} 与 {0, q-1} 之间的全部两两组合。\n\n一切循环节在若干次乘 10 排除不循环部分，整理为 $0.\\overline{******}$ 形式后，都可以用 $a * 1&#x2F;n$ 来表示。\n\n如果 n 为素数，而其循环节长度 $l$ 不为 n-1，则必有互相不能抵达的 $\\frac{n-1}{l}$ 套循环，进入哪套循环取决于分子 $a$ 的值。因为素数没有因数，$a&#x2F;n (a&#x3D;1, 2,\\dots, n-1)$ 必然有 n-1 个不同余数。\n\n如果 n 为素数，则 1&#x2F;n 的循环节必然形如 $0.\\overline{******}$，从小数点后就开始，即使起始是若干个 0 也是循环节的一部分。\n\n如果 n 是若干个不同素数乘积，则循环节长度是这些素数对应的循环节长度的最小公倍数。如果 n 是素数 p 的 k 次方时，循环节长度是 $l * p^{k-1},(p&gt;3)$ 或 $l * p^{k-2},(p&#x3D;3)$。\n\n$p&#x3D;3$ 的特例在于 $p^2&#x3D;9$ 仍然小于 10，没有触发进退位，即当 p^k 仍小于对应进制单位时，不往上叠加循环节长度。在 8 进制下就是正常的 $l*p^{k-1}$ 了。\n\n\n不存在比 n-1 更长的循环节。\n\n不同进制下的走马灯数具体是不一样的，例如 7 在 10 进制下是走马灯数，但在 8 进制下不是。2 在一切奇数进制下都是走马灯数，因为只要除不尽，循环节长度就至少为 1。\n\n除 2 以外，走马灯数的循环节长必度是偶数，将循环节的两段拆分后相加，一定是 $999\\cdots$。例如 $1&#x2F;7 &#x3D; 0.\\overline{142857}$，则 $142 + 857 &#x3D; 999$。上述结论在其它进制下也成立，例如 8 进制下为 $777\\cdots_{(8)}$。\n 证明：设一个循环小数 $\\frac{1}{n}$ 的循环节两段分别为 $\\overline{r_1r_2}$，总长度为$2k$，则其既可以表达为\n \\begin{align*} \\frac{1}{n} &#x3D; \\frac{\\overline{r_1r_2}}{10^{2k}} + \\frac{\\overline{r_1r_2}}{10^{4k}} + \\cdots + \\frac{\\overline{r_1r_2}}{10^{pk}}+\\cdots &#x3D; \\frac{\\overline{r_1r_2}}{10^{2k}-1} &amp;&amp;(1) \\end{align*}\n 也可以表示为：\n \\begin{align*} \\frac{1}{n} &#x3D;\\frac{r_1}{10^k} + \\frac{\\overline{r_2r_1}}{10^{3k}} + \\cdots + \\frac{\\overline{r_2r_1}}{10^{(p+1)k}}+\\cdots &amp;&amp;(2) \\end{align*}\n $(2)$ 式乘以 $10^n$ 再加 $(1)$ 式，得到：\n \\begin{align*} \\frac{(10^k+1)}{n} &#x3D; r_1 + \\frac{(r_1+r_2)(10^k+1)}{10^{2k}-1} &#x3D; r_1 +\\frac{r_1+r_2}{10^k-1} &amp;&amp;(3) \\end{align*}\n 再将 $(1)$ 式分子分母同除 $10^n+1$ 得到：\n \\begin{align*} &amp;&amp;\\frac{1}{n} &#x3D; \\frac{\\overline{r_1r_2}}{10^{2k}-1} &#x3D; \\frac{\\overline{r_1r_2}&#x2F;(10^k+1)}{(10^{2k}-1)(10^k+1)} &#x3D; \\frac{\\frac{\\overline{r_1r_2}}{10^k+1}}{10^k-1} &amp;&amp;(4) \\\\ \\Rightarrow &amp;&amp;\\frac{\\overline{r_1r_2} * n}{10^k+1} &#x3D; 10^k-1 &amp;&amp;(5) \\end{align*}\n 其中，$(4)$ 中分子 $\\frac{\\overline{r_1r_2}}{10^k+1}$ 不可能为整数，否则直接可以化简：\n \\begin{align*} \\frac{1}{n} &#x3D; \\frac{\\frac{\\overline{r_1r_2}}{10^k+1}}{10^k-1} &#x3D; \\frac{r_k}{10^k-1} &amp;&amp;(6) \\end{align*}\n 循环节长度直接由 2k 降为 k，这与之前的假设不符。因此在 $(5)$ 式中，$n$ 与 $(10^k+1)$ 必然存在公因数。而 n 为素数，则 $(10^k+1)$ 为 $n$ 的倍数。即 $(3)$ 式中 $\\frac{(10^k+1)}{n}$ 为整数。\n 因此，$r_1 + \\frac{r_1+r_2}{10^k-1}$ 为整数。$r_1$ 本来就是提出来的前半循环节为整数，而 $\\frac{r_1+r_2}{10^k-1}$ 是由两个长度为 k 的半循环节加和得到的分子，要求其为整数只可能是 1。所以 $r_1+r_2 &#x3D; 10^k-1 &#x3D; \\overbrace{999\\cdots}^k$\n 得证。其它进制下的证明将底数 10 替换为对应进制即可。\n\n\n计算程序走马灯数搜索程序在得到以上结论后可以提升一些效率：\n\n使用 欧拉筛法，只在素数堆里进行验证。\n如果循环节小于 n-1，由于推论 1，则其至多 $\\frac{n-1}{2}$，因此当计算到第 $\\frac{n+1}{2}$ 项时，便可得出结论而不必计算后半段。\n\nfunction searchCarousel(n) &#123;    let primes = [];    let eularboard = new Array(n + 1).fill(true);    let carousels = [];    const isCarousel = (p, radix = 10) =&gt; &#123;        let a = 1,            pool = new Set(),            end = (p + 1) / 2;        while (pool.size &lt; end) &#123;            a = (a % p) * radix;            if (a == 0) &#123;                return false;            &#125;            if (pool.has(a)) &#123;                return false;            &#125; else &#123;                pool.add(a);            &#125;        &#125;        return true;    &#125;;    for (let i = 2; i &lt;= n; i++) &#123;        if (eularboard[i]) &#123;            primes.push(i);            if (isCarousel(i)) &#123;                carousels.push(i);            &#125;        &#125;        for (let j = 0; j &lt; primes.length; j++) &#123;            if (i * primes[j] &gt; n) break; // 上限判断            eularboard[i * primes[j]] = false;            if (i % primes[j] === 0) break; // 跳过本轮后续筛选        &#125;    &#125;    return carousels;&#125;console.log(searchCarousel(1000));// [7, 17, 19, 23, 29, 47, 59, 61, 97, 109, 113, 131, 149, 167, 179, 181, 193, 223, 229, 233,  257, 263,// 269, 313, 337, 367, 379, 383, 389, 419,  433, 461, 487, 491, 499, 503, 509, 541, 571, 577,  593, 619,// 647, 659, 701, 709, 727, 743, 811, 821, 823, 857, 863, 887, 937, 941, 953, 971, 977, 983]\n\n其它进制根据前文继续厘清思路，在其它进制下：\n\n循环节长度的度量和进制数无关，表述形式不改变数值大小，在 10 进制下若为 16，在 8 进制下就写为 20，但都指的是同一个值。\n但循环节的生成和进制有关，在当前位下不满足该进制条件下的整除，产生余数，就会退到下一位。\n在其它进制下，$r &#x3D; \\frac{R^{n-1}-1}{n}$ 仍然成立，这是循环小数定义公式的变形。\n仍然只需要在素数表中搜索走马灯数，因为 r 需要由 $n-1$ 个不同余的结果来确保循环长度上限。\n\n/* 计算各进制下的走马灯数 */function searchCarousel(n) &#123;    let primes = [];    let eularboard = new Array(n + 1).fill(true);    for (let i = 2; i &lt;= n; i++) &#123;        if (eularboard[i]) &#123;            primes.push(i);        &#125;        for (let j = 0; j &lt; primes.length; j++) &#123;            if (i * primes[j] &gt; n) break; // 上限判断            eularboard[i * primes[j]] = false;            if (i % primes[j] === 0) break; // 跳过本轮后续筛选        &#125;    &#125;    const isCarousel = (p, radix = 10) =&gt; &#123;        if (p === 2 &amp;&amp; radix % 2 !== 0) return true; // 2 在奇数进制下必然是 1 位循环        let a = 1,            pool = new Set(),            end = (p + 1) / 2;        while (pool.size &lt; end) &#123;            a = (a % p) * radix;            if (a == 0) &#123;                return false;            &#125;            if (pool.has(a)) &#123;                return false;            &#125; else &#123;                pool.add(a);            &#125;        &#125;        return true;    &#125;;    for (thisRadix = 2; thisRadix &lt; 100; thisRadix++) &#123;        let carousels = [];        for (let i = 0; i &lt; primes.length; i++) &#123;            if (isCarousel(primes[i], thisRadix)) &#123;                carousels.push(primes[i]);            &#125;        &#125;        console.log(thisRadix, carousels.length);    &#125;&#125;searchCarousel(10000);\n\n搜索在各不同进制下， 10000 以内的走马灯数的数量，结果如下：\n\n\n\n进制\n走马灯数数量\n进制\n走马灯数数量\n进制\n走马灯数数量\n进制\n走马灯数数量\n进制\n走马灯数数量\n\n\n\n\n\n21\n447\n41\n460\n61\n457\n81\n1\n\n\n2\n470\n22\n472\n42\n476\n62\n482\n82\n455\n\n\n3\n477\n23\n459\n43\n490\n63\n457\n83\n453\n\n\n4\n0\n24\n461\n44\n460\n64\n0\n84\n466\n\n\n5\n493\n25\n1\n45\n483\n65\n477\n85\n468\n\n\n6\n470\n26\n455\n46\n445\n66\n469\n86\n464\n\n\n7\n466\n27\n278\n47\n477\n67\n471\n87\n478\n\n\n8\n277\n28\n451\n48\n468\n68\n459\n88\n454\n\n\n9\n1\n29\n465\n49\n1\n69\n461\n89\n470\n\n\n10\n467\n30\n488\n50\n471\n70\n473\n90\n478\n\n\n11\n444\n31\n469\n51\n471\n71\n471\n91\n453\n\n\n12\n459\n32\n372\n52\n460\n72\n470\n92\n464\n\n\n13\n458\n33\n474\n53\n470\n73\n465\n93\n446\n\n\n14\n459\n34\n473\n54\n471\n74\n447\n94\n485\n\n\n15\n454\n35\n461\n55\n486\n75\n471\n95\n462\n\n\n16\n0\n36\n0\n56\n461\n76\n467\n96\n464\n\n\n17\n451\n37\n466\n57\n451\n77\n449\n97\n471\n\n\n18\n472\n38\n466\n58\n478\n78\n451\n98\n459\n\n\n19\n473\n39\n489\n59\n465\n79\n466\n99\n476\n\n\n20\n487\n40\n458\n60\n455\n80\n490\n100\n0\n\n\n这里最有特点的是当进制为偶数的完全平方时，没有走马灯数，当进制为奇数的完全平方时，只有唯一一个走马灯数 2，循环节长度为 1。\n特殊进制 $R&#x3D;s^2$无论在哪种进制下，循环节公式 $r &#x3D; \\frac{R^{n-1}-1}{n}$ 都仍然是成立的。其中 $R$ 为指定的进制数，$n$ 为测试数字， $r$ 为对应的循环节。根据前文所述，在一些情况下循环节会缩减。即当 r 的数字序列内部出现重复时，需要用更短的循环节代替。前文 $\\frac{1}{11} &#x3D; 0.\\overline{0909090909} &#x3D; 0.\\overline{09}$ 便是例子。\n而当 $R$ 为完全平方数 $s^2$ 时，将循环节公式展开为；\n$$ r_{(R)} &#x3D; \\frac{(s^2)^{n-1}-1}{n} &#x3D; \\frac{(s^{n-1}+1)(s^{n-1}-1)}{n} &#x3D; (s^{n-1}+1) \\cdot \\frac{s^{n-1}-1}{n}$$\n因为 $s$ 是整数，注意到 $\\frac{s^{n-1}-1}{n}$ 实际上是在 $s$ 进制下的 $\\frac{1}{n}$ 的循环节表达式 $r_{s(s)}$，必定是有整数解的，并且在 $s$ 进制下的长度至多为 $n-1$ 。\n现在将 $r_{s}$ 的数值从 $s$ 进制转到 $R$ 进制。因为$R&#x3D;s^2$，$R$ 进制下一位数值可以容纳 $s$ 进制下两位。其长度在转换后正好一半 $\\frac{n-1}{2}$，n 为素数。则：\n$$r_{(R)} &#x3D;(s^{n-1} + 1) * r_{s(s)} \\overset{s\\rightarrow R}{&#x3D;\\!&#x3D;\\!&#x3D;}  (R^{\\frac{n-1}{2}} + 1) * r_{s(R)}$$\n除 2 以外的 n 都是素数，所以 $\\frac{n-1}{2}$ 是整数，$(R^{\\frac{n-1}{2}} + 1)$ 是形如 $\\overbrace{100\\cdots01}^{(n+1)&#x2F;2}$ 的整数，长度上正好使 $r_{s(R)}$ 重复两遍，而不会有叠加进位。\n因此当进制 $R$ 为完全平方数时，任意 $n$ 的 $r_{(R)} &#x3D; \\frac{R^{n-1}-1}{n}$ 数字序列至少会内部重复一次，所以长度一定小于 $n-1$，也就不存在跑马灯数。\n\n推论：当进制 $R&#x3D;s^{(2^n)}$ 时，对应的最长循环节为 $\\frac{n-1}{2^n}$ 向上取整。\n\n费马小定律在前文中数次使用 $r&#x3D;(R^{n-1}-1)&#x2F;n$，并且认定它是整数，是因为该式是从循环节的级数表示法计算出来的，而循环节本身一定是 n-1 位的整数，所以认为是整数。这个推论是单薄的，不能证明任意 $(R^{n-1}-1)&#x2F;n$ 一定是整数。但其实关于这一点的正向证明早就在三百多年前就被书空白写不下学家完成了：\n$(R^{n-1}-1)&#x2F;n$ 为整数，其实本身就是 费马小定理 的一部分，即：\n\n假如 $a$ 是整数，$p$ 是素数，那么 $a^p \\equiv a (mod\\ p)$\n如果 $a$ 不是 $p$ 的倍数，则 $a^{p-1} \\equiv 1 (mod\\ p)$，这其实就是我们用的循环节公式。\n如果 $a$ 是 $p$ 的倍数，则 $a^{p-1} \\equiv 0 (mod\\ p)$，这时就除尽不构成循环节了。\n\n我们之前提到，进制的转换会影响循环节数字序列的变化，但不影响素数、整除等基于数本身的性质，因此这里的 R 在整除判定上反而和进制本身没什么关系，就是一个单纯的幂底数。\n模运算与原根当引入费马小定律后，我们进入了数论中模运算的领域。在前文中有一条推论 2：\n\n只有当 n 为素数时，才有可能出现 n-1 位循环节。由于余数需要遍历 1 到 n-1 的所有数。若 n &#x3D; pq，余数会在 q-1 与 p-1 的共同作用下循环，但 p-1 与 q-1 至少含有公因素 2，不可能产生所有 {0, p-1} 与 {0, q-1} 之间的全部两两组合。\n\n其实是在数论的门外匆匆一瞥。思而不学则民科，在查询了一些资料后，发现其实这些走马灯数在数论中早已有深入的讨论。本文前半篇是从计算中发现现象，再从现象中思索原因。后半篇打算从原理出发，厘清前因后果全套链条。\n欧拉函数 ϕ(n)为了循序渐进，先来熟悉一下欧拉函数，其定义为：\n$$\\phi(n)&#x3D;小于正整数 n 且与 n 互素（即最大公约数为1）的正整数的个数。$$\n\n注意这些正整数不一定是素数，例如 8 与 9 是互素的，但两个都不是素数。\n\n这个函数描述相比一般函数通俗得多，这也是数论领域的特色。尽管如此，这个函数实际上却并不用真的去逐个数个数，它确实是有公式通解的：\n一般地，若 $n&#x3D;p_1^{k_1}\\cdot p_2^{k_2}\\cdot \\cdots \\cdot p_m^{k_m}$，$p_m$为 n 的素因数，则：$$\\phi(n)&#x3D;n\\cdot\\left(1-\\frac{1}{p_1}\\right)\\left(1-\\frac{1}{p_2}\\right)\\cdots\\left(1-\\frac{1}{p_m}\\right)$$\n\n当 n 为素数时，所有 $1\\leq k &lt; n$ 均有效，$\\phi(7)&#x3D;7-1&#x3D;6.$\n当 $n&#x3D;p^k$ 为单一素数的幂时，, $\\phi(8)&#x3D;\\phi(2^3)&#x3D;2^3-2^2&#x3D;4.$\n\n欧拉公式便是上文 推论 6 的完整表述。略一思索也可以很快得出结论：『互素』其实就要求所有数都『避开』n 的所有素因数及其构成的合数集，这其实就是个变形的组合数与容斥问题，形式上类似于：\n$$\\phi(n)&#x3D;n -\\sum{\\frac{n}{p_i}} + \\sum{\\frac{n}{p_ip_j}} - \\sum{\\frac{n}{p_ip_jp_k}} + \\cdots + (-1)^{m-1}\\frac{n}{p_1p_2\\cdots p_m}$$\n整理便可得到通项公式。\n\n另外值得注意的是，欧拉公式中并没有显式地使用到幂数 $k_1 \\cdots k_m$，实际上是因为 $n&#x3D;p_1^{k_1}\\cdot p_2^{k_2}\\cdot \\cdots \\cdot p_m^{k_m}$ 中已经包含了所有的 $k$。\n\n整数环与有限域在模运算 $\\ mod\\ n$ 中，所有余数相同的整数都被视为等价的，即 $a+kn \\equiv a \\ mod\\ n$，通常用最小非负余数 $[0],[1],[2],…,[n−1]$ 表示这些等价类。所有的余数类构成一个集合，称之为 n 的整数环，用奇怪符号 $\\Bbb{Z}&#x2F;n\\Bbb{Z}$ 表示。\n整数环也有类似一般逻辑的『加法』与『乘法』运算：\n$$[a]+[b]&#x3D;[a+b]\\ (mod\\ n)$$$$[a]\\cdot[b]&#x3D;([a] \\times [b])\\ (mod\\ n)$$\n\n从进制的角度也很好理解，大于 n 的部分『进位』上去了，无法影响最后一位余数的运算。尽管模运算本身没有提到进制，但进制本身就是模的一种应用，通过两者的相似性有助于理解问题。\n\n因为同余的是一类数而不是一个数，因此没法直接做除法运算，但可以定义一个 乘法逆元，当：\n$$[a] \\times [b] \\equiv 1 \\ mod\\ n$$\n时，$[a]$ 与 $[b]$ 就互为乘法逆元。\n同样地，和乘法中 0 类似，模运算也会出现 $a \\times b \\equiv 0 \\ mod\\ n$ 的情况，零因子没有逆元。出现零因子的原因也很简单，当 n 为合数时，a b 两个非零元素相乘后结果能被 n 整除。\n整数环仅仅是个称谓，任意整数 n 都有长度为 n 的整数环，并不能体现什么特殊性。但 n 不同会使得对应的整数环内部表现出不同的性质，则是深入探究的目标。\n前面也看到，有些整数环内部存在零因子，有些则没有。判断方法很简单，当 n 为素数时，其整数环内部没有零因子，所有非零同余类都有对应的乘法逆元。这就和上面的 推论 2 一致了。此时整数环获得了一个新名字：有限域。\n原根、欧拉定理与阶当我们在关注循环小数的循环节时，本质上是对其不断循环取除的过程，将余数乘以进制，除以 n 以后再取余数，如此不断循环。如果将这个过程抽象一下，其实就是如下表述：\n\n在模 n 的整数环中，对整数 $r$ 的幂次 $(r^1, r^2, \\cdots, r^k)$ 不断进行模运算，则其或落入零因子，或者在一或多个非零同余间循环。\n\n——实际上就是 r 进制下 1&#x2F;n 的循环节计算过程，或者被整除，或者处于某个循环。\n在数论课本中，对上述内容做了展开，有更严谨而完备的表述与证明过程：\n欧拉定理\n若 a 与 n 互素，则 $a^{\\phi(n)} \\equiv 1 \\ mod\\ n$\n\n欧拉定理的证明过程大致分为四步：\n\n设模 n 的简化剩余系为 $S &#x3D; {r_1, r_2, \\cdots, r_{\\phi(n)}}$ 满足 $gcd(r_i, n) &#x3D; 1 $，且任意两项不同余，即 $r_i \\not\\equiv r_j$。\n\n将 $S$ 每个元素乘以 a，得到 $a\\cdot S&#x3D; {a\\cdot r_1, a\\cdot r_2, \\cdots, a\\cdot r_{\\phi(n)}}$。此时若 $a\\cdot r_i \\equiv a\\cdot r_j \\ mod\\ n$，则因 a 与 n 互素可消去，得到 $r_i \\equiv r_j$，矛盾。 故 $a\\cdot S$ 仍为简化剩余系，与 $S$ 包含相同的剩余类，仅顺序不同。\n\n由于两者同余，$S$ 和 $a\\cdot S$ 的乘积相等：\n $$\\prod_{i&#x3D;1}^{\\phi(n)} r_i \\equiv P\\ mod\\ n \\equiv a^{\\phi(n)} \\cdot P\\ mod\\ n \\equiv \\prod_{i&#x3D;1}^{\\phi(n)} (a \\cdot r_i) $$\n\n由于 $P$ 是乘积，$r_i$ 与 n 互素，故 $P$ 也与 n 互素，两边同乘 $P$ 的逆元 $P^{-1}$，得到 $ a^{\\phi(n)}\\equiv 1 \\ mod\\ n$\n\n\n阶与原根由欧拉定理，可以定义 阶 与 原根：\n\n\n$a$ 和 $n$ 为互素的正整数，则 $a$ 模 $n$ 的阶是满足 $a^k \\equiv 1\\ mod\\ n$ 的最小正整数 $k$。\n若整数 a 与 n 互素，且其模 n 的乘法阶数等于 ϕ(n)，则称 a 是模 n 的一个原根。\n\n\n或者使用另一个等效表述：\n\n在模 n 的整数环中，若存在整数 $a$ 使得 $(a^1, a^2, \\cdots, a^{\\phi(n)})$ 能够遍历所有与 n 互素的剩余类，则 $a$ 称为模 n 的一个原根。\n\n一次能遍历所有可能的余数，也就是循环节达到了最大值，这个最大值就是欧拉函数 $\\phi(n)$。存在原根和最长循环是一体两面的。\n应用进一步地，若要 $\\phi(n) &#x3D; n-1$ 则 n 必须是素数，也就是说，走马灯数的分母 n 必须是素数。而当 $n&#x3D;p $（素数）时，$\\phi(n)&#x3D;p-1$，欧拉定理简化为：$a^{p-1}\\equiv 1 \\ mod\\ p $，这就是费马小定理！\n到这里，就和前文的推论 2, 6, 7, 8 都对上了，甚至进一步地和 1, 4 也都能对上，一切全联系起来了！甚至我们还发现了之前没有注意到的 推论 10：n 可能有多个原根，则 1&#x2F;n 可能在多个进制下有循环小数，并且所有可能的进制下，循环节的长度都是一样的。\n接下来就是在欧拉定理的指导下，科学地判定走马灯数了：\n\n当 $n &#x3D; 1, 2, 4, p^k, 2p^k$ 时存在原根，且阶为 $\\phi(n)$。但只有 $\\phi(n) &#x3D; n - 1$ 时才能称为『走马灯数』，所以 n 必须是素数。\n当且仅当 $a^{n-1} \\equiv 1\\ mod\\ n$ 时，a 即为原根，对应的 n-1 即为循环节长度。\n只需排查任意 $n-1$ 的真因子 $d$ 是否会使得 $a^d \\equiv 1\\ mod\\ n$，如果有，则 $a$ 不是 $n$ 的原根。\n\n程序优化\n添加 n-1 的真因子 d 的计算过程，这是个因式分解过程。考虑到我们之前已经计算出了素数表用于 n 的选择，这里可以复用。\n在实际计算中，$a^{\\phi(n)}$ 仍然是个巨大的数，容易有溢出风险，但模运算支持乘法，因此可以把 $a^b\\ mod\\ n$ 的指数$b$拆分求模：$$((a\\ mod\\ n )^{b_1} \\times (a\\ mod\\ n )^{b_2} \\times \\cdots \\times (a\\ mod\\ n )^{b_k})\\ mod\\ n$$\n只验证所有 d 下 $a^d \\not\\equiv 1\\ mod\\ n$，有 false 直接退出。即排除推论 4 描述的情况。\n\n据此我们写出了最终的走马灯数快速算法，直接应用欧拉定理，分解 n-1 的素因数，代替原来的试除法进行验证，并使用模运算的乘法分解式来计算 $a^b$ 以避免大数问题。这个算法在 n 较大时的效率比原来有了很大提升。旧算法搜索 100 万以内的走马灯数约需 20 分钟，新算法不到 1 秒，提升了 1000 倍。\nfunction searchCarousel(n, radix = 10) &#123;    let primes = [];    let eularboard = new Array(n + 1).fill(true);    let result = [];    // 去重列举 n 的所有素因数    function primeFactors(n) &#123;        const factors = new Set();        let i = 0;        while (n &gt; 1 &amp;&amp; primes[i] &lt; n) &#123;            while (n % primes[i] === 0) &#123;                factors.add(primes[i]);                n = n / primes[i];            &#125;            i++;        &#125;        if (n &gt; 1) factors.add(n);        return Array.from(factors);    &#125;    // 计算 a^b mod n 的值    function modExp(a, b, mod) &#123;        let result = 1n;        a = BigInt(a) % BigInt(mod);        b = BigInt(b);        mod = BigInt(mod);        while (b &gt; 0n) &#123;            if (b % 2n === 1n) &#123;                result = (result * a) % mod;            &#125;            a = (a * a) % mod;            b = b / 2n;        &#125;        return Number(result);    &#125;    // 判断是否为全循环质数（原根验证法）    function isCarousel(p, radix) &#123;        const phi = p - 1;        if (modExp(radix, phi, p) !== 1) return false; // 费马小定理        const factors = primeFactors(phi);        for (const factor of factors) &#123;            const d = phi / factor; // 因为 factor 是独立最小素因数，使用对应的 d 可以最大化否决。            if (modExp(radix, d, p) === 1) return false;        &#125;        return true;    &#125;    // 欧拉筛获得素数表    for (let i = 2; i &lt;= n; i++) &#123;        if (eularboard[i]) &#123;            primes.push(i);            if (isCarousel(i, radix)) &#123;                result.push(i);            &#125;        &#125;        for (let j = 0; j &lt; primes.length; j++) &#123;            if (i * primes[j] &gt; n) break; // 上限判断            eularboard[i * primes[j]] = false;            if (i % primes[j] === 0) break; // 跳过本轮后续筛选        &#125;    &#125;    return result;&#125;console.log(searchCarousel(1000000));//[ 7, 17, 19, 23, 29, 47, 59, 61, 97, 109, 113, 131, 149, 167, 179, 181, 193, 223, 229, 233, 257, 263, 269, 313, 337, 367, 379, 383,// 389, 419, 433, 461, 487, 491, 499, 503, 509, 541, 571, 577, 593, 619, 647, 659, 701, 709, 727, 743, 811, 821, 823, 857, 863, 887,// 937, 941, 953, 971, 977, 983, 1019, 1021, 1033, 1051, 1063, 1069, 1087, 1091, 1097, 1103, 1109, 1153, 1171, 1181, 1193, 1217, 1223,// 1229, 1259, 1291, 1297, 1301, 1303, 1327, 1367, 1381, 1429, 1433, 1447, 1487, 1531, 1543, 1549, 1553, 1567, 1571, 1579, 1583, 1607, 1619,//...29400 more items]\n\n进一步地，搜索非 10 原根即非 10 进制下的走马灯数时，除了 n 质数这一条件不变之外，其它也有一些应用定理可以优化的点：\n\n若 $g$ 的阶为 $\\phi(n)$，则 $g^k$ 的阶为 $\\frac{\\phi(n)}{gcd(k,\\phi(n))}$\n当且仅当 $gcd(k,\\phi(n)) &#x3D; 1$ 时，$g^k$ 的阶仍为 $\\phi(n)$\n\n故，假设 $g$ 是模 n 的一个原根，则所有其它原根可表示为 $g^k\\ mod\\ n$，其中 $gcd(k,\\phi(n))&#x3D;1$\n所以算法上，应当从 $g&#x3D;2$ 开始搜索第一个原根，先与 n 做互素判定，再应用上文的 isCarousel() 函数。找到 $g$ 后，再寻找 $k$ 令 $gcd(k,\\phi(n))&#x3D;1$，则其它原根即为 $g^k\\ mod\\ n$。gcd() 函数的计算比 modExp() 函数更高效。\n\n以 n &#x3D; 7 为例，$\\phi(7) &#x3D; 6$，\n搜索到第一个 $g&#x3D;3$，$3^6 \\equiv 1\\ mod\\ 7$，且验证了 $3^2 \\not\\equiv 1\\ mod 7$ 和 $3^3 \\not\\equiv 1\\ mod 7$，所以 3 是原根。\n搜索 $k$ 使 $gcd(k,6)&#x3D;1$，且 $1&lt;k&lt;6$，有唯一解 $k&#x3D;5$，计算 $3^{k&#x3D;5}\\ mod\\ 7$，madExp(3,5,7) == 5，即 5 为第二个原根。注意 $g_2&#x3D;5$ 与 $k&#x3D;5$ 是两个独立的计算过程，虽然值一样。\n对于其它进制，例如 7 应当在 10 进制下也是 6 位循环，是因为 $10\\ mod\\ 7 \\equiv 3\\ mod\\ 7$。若要在程序的输出结果上体现出来更大的进制，只需要输出前加个循环即可。\n\n// 代码略\n","categories":["硬用数学"],"tags":["循环节","1/n"]},{"title":"圆周率：从割圆法到级数展开","url":"//calcaulate-the-pi/","content":"\n     .red{color:red}\n     .s1{font-size:12px}\n     .s2{font-size:10px}\n     .s3{font-size:8px}\n     .s4{font-size:6px}\n     .s5{font-size:4px}\n \n\n今天是 3.14，写写圆周率怎么算。\n割圆术一开始的思路很简单，既然是『圆周』的比值，那就寻找一个方法计算圆周的长度就完事了。\n\n首先准备一个圆内接正六边形，每边长是 r，周长是 6r，如果把六边形周长当作圆周长，圆周率就是 $\\pi&#x3D;\\frac{6r}{2r} &#x3D; 3$。别笑，历史上确实有以 3 当作圆周率的，『周三径一』曾在多处典籍出现。\n \n\n以正六边形的边作中垂线，构造一个正 12 边形，则正 12 边形的边长即 $x&#x3D;L_{\\overline{A_2A_8}}$。\n \n $\\overline{A_2A_8}$是直角三角形 $\\triangle A_2A_8C$ 的斜边，$\\overline{A_2C} &#x3D; \\frac{r}{2}$，$\\overline{A_8C} &#x3D; r - \\overline{OC}$。而$\\overline{OC}$又是直角三角形$\\triangle A_2OC$的直角边。因此应用两次勾股定理，容易得到：\n $$x &#x3D; \\sqrt{\\left(\\frac{r}{2}\\right)^2+\\left(r-\\sqrt{r^2-(\\frac{r}{2})^2}\\right)^2}$$\n\n进一步在正 12 边形基础上继续作中垂线变为 24 边形、48 边形……类推。\n \n 局部放大：\n \n 在 n 次迭代操作后，可以得到圆的内接正 $6\\cdot2^n$ 边形，其边长为可由$6\\cdot2^{n-1}$ 边长递推而来：\n $$l_n &#x3D; \\sqrt{\\left(\\frac{l_{n-1}}{2}\\right)^2+\\left(1-\\sqrt{1-(\\frac{l_{n-1}}{2})^2}\\right)^2}$$\n 根号内的平方展开，公式化简后得到：$l_n&#x3D;\\sqrt{2-\\sqrt{4-l^2_{n-1} } }$。所以：$\\pi\\approx3\\cdot2^n\\cdot l_n$\n\n尽管可以将 $\\pi_n&#x3D;6\\cdot2^n\\cdot l_n$，$\\pi_{n-1}&#x3D;6\\cdot2^n\\cdot\\frac{l_{n-1}}{2}$ 代入得到 $\\pi_n$ 的直接递推式，但结果反而会增加计算难度，没有意义。\n\n 编程验证一下割圆法的递推公式：\n from decimal import Decimal, getcontextdef print_pi_iterations_csv(n_iterations, precision=50):    getcontext().prec = precision + 2    r,k,s = Decimal(1),Decimal(6),Decimal(1)    pi_approx = (k * s) / (2 * r)    print(f&quot;0,&#123;s:.&#123;precision&#125;f&#125;,&#123;int(k)&#125;,&#123;pi_approx:.&#123;precision&#125;f&#125;&quot;)    for n in range(1, n_iterations + 1):        s = (Decimal(2) - (Decimal(4) - s**2).sqrt()).sqrt()        k *= 2        pi_approx = (k * s) / (2 * r)        print(f&quot;&#123;n&#125;,&#123;s:.&#123;precision&#125;f&#125;,&#123;int(k)&#125;,&#123;pi_approx:.&#123;precision&#125;f&#125;&quot;)print_pi_iterations_csv(n_iterations=100, precision=200)\n\n 计算结果：\n\n\n\nn\n$\\pi$ （红色开始为误差项）\n边数\n边长\n\n\n\n0\n3\n6\n1\n\n\n1\n3.106\n12 \n0.517638090205041524697797675248096656698137802639861027628006414630\n\n\n2\n3.133\n24 \n0.2610523844401031830968124557909780203874814096234645037812338966702656504596472\n\n\n3\n3.139\n48 \n0.1308062584602861336306311175503508828812646078901080356639753014926938148927779305724160345230399815\n\n\n4\n3.14103\n96 \n0.0654381656435522841273198526345762522299252545033923937561917675146374704265347854596049670897283379849162629786820274103417801265169\n\n\n5\n3.14145\n192 \n0.03272346325297356328594384696834610047132981567239244974814148723774665964804514057084743346984975274224223378392101609252042560186228338473297730652077981634239188734083635448788894004614630671707971\n\n\n6\n3.141558\n384 \n0.01636227920787425857039824658921801844533529416452341952057948786939579165064652866066255648348084605099544845686188429947694545964114075255218686278984440383734161800789305756187065766408033033714294\n\n\n7\n3.141584\n768 \n0.00818120805246957918924210834302383685031261696817992854723965236122383489144687206840513659491152519677943407736541665751720319595526819838604319161259091076464007027427841057546918033121536463776576\n\n\n8\n3.1415905\n1536 \n0.00409061258232819022882611784626426005671130508942161074227241896916750309821831955224474466566072674889796524473684900214896944666772227172928706453876775835266189348091823621540235396623950175141037\n\n\n9\n3.14159211\n3072 \n0.00204530736067660908238592229206387848510904769203534158371388824527333132200776714283048062007265192348301163404334423074239806419254304223189361723602246795475702449971333535955495781000908587365137\n\n\n10\n3.14159252\n6144 \n0.00102265381402739500247163869946902080272386682694276940575245689833248716463240037650358826374003409375522080937566141783691027096707879199337571242973168314629930390958384129075647765179770735929993\n\n\n11\n3.141592619\n12288 \n0.00051132692372483462812329904167729802119501834726478547125933748209551655293273596409563162021982192636730703620007115215205194042178721769005805718824184735509920188172391787369176696970438736673964\n\n\n12\n3.141592645\n24576 \n0.00025566346395130948052344901602532864686870304453467621730677964075264727555486053435606907311636775837244640506715770965493389536029465573114161194846506354894597613066543370721104363861111432890423\n\n\n13\n3.1415926515\n49152 \n0.00012783173223676626186947646649138260988152781056255781673371926384916560262546013047471577662181934711832084928074633138426333635453646621891256820530408464072964170436390615844992513167973181884419\n\n\n14\n3.14159265306\n98304 \n0.00006391586615102207116070807251821846928420566418226833293283142812113254271150192259083632846234511443992999462757190341371764220822115850525439907961017619817497180269701854339121002598869952981899\n\n\n15\n3.14159265346\n196608 \n0.00003195793307959090310938154255793333263503358446685194730153233192952836577298952906771466453949596139067707595400480370347309422927398029140060759615402672879750656729406381857083342148916810946482\n\n\n16\n3.141592653556\n393216 \n0.00001597896654030543499584362445350196006406104280692607674654698067095823491466166283932166777919474862554088504872494049081442239324689977187654126144557724034900570345338497245798640501861199132473\n\n\n17\n3.1415926535814\n786432 \n0.00000798948327021646542806668183879235631019681169477246348191864536472108682476590250406902878002067011109537606200591443120881102952774587693884967039607068647393920042977032508672304529703548793507\n\n\n18\n3.1415926535877\n1572864 \n0.00000399474163511620120530147346356461485004455676682492653080263097961031568786521018546178449577827905058028155793726100684082116620490208586760128562326052355254999492341178495600442520229714214498\n\n\n19\n3.14159265358927\n3145728 \n0.00000199737081755909666405925404488658903363571572547377195911130767842215943514172624435772225406061136635761994565450768012986355225672804758813211799003989963368820258474934638028323690684853391208\n\n\n20\n3.14159265358966\n6291456 \n0.00000099868540877967283970569170986518056233278254800139575240199441413157386950268773547426918651144098773169103279081732332903382750784965462242767295874351578603227570190990894498209480288483175579\n\n\n21\n3.141592653589761\n12582912 \n0.00000049934270438985198331235394158794637574452005163238561622949160536438778783833013780076841949385532244297830798431363949646238115306391824299463536681672767037675392104288262525145523660499757185\n\n\n22\n3.141592653589785\n25165824 \n0.00000024967135219492793708861548164863083528480050429414620649761964010850031010937136302482094374335613839348636992034690138588360189467559359010796462784072115098350334154845172067404838766858926926\n\n\n23\n3.1415926535897912\n50331648 \n0.00000012483567609746421172336255468185819030616389052416717182657674416467433744424882377430722467888793107943167913990376778051086967167245591527296295705271015718603906188572436811955215249723929612\n\n\n24\n3.1415926535897927\n100663296 \n0.00000006241783804873213625906312907314414694658977754689172890296684927941714902639547605794720789562158704287228431191826831833465509516927936598151213605097619366385055651234305254691020971269767748\n\n\n25\n3.14159265358979311\n201326592 \n0.00000003120891902436607192920429600309964886031266085579006387133906218733474982304042661535174860729942309322597890450240486561656308496161043473084985788277410293815655336611240206071283718092142279\n\n\n26\n3.141592653589793207 \n402653184 \n0.00000001560445951218303643956123943486579303830946734590076137071151382758546729017465867897056956871062577565687205469967325499101603554656770693413534572719717163479597830054400212066111172965038686\n\n\n27\n3.1415926535897932305 \n805306368 \n0.00000000780222975609151827915050614659739327282312314419213435000540384209982803362747958675796558062042982475357489548994098448825732511259496703453493157075790296236194140478050246191004140967384875\n\n\n28\n3.1415926535897932365 \n1610612736 \n0.00000000390111487804575914699648887694425875179664923589163142535332766643652227643640373038294224713031271130104996335321398963832881871591336387327721771031647629833578335173087223319866660377209223\n\n\n29\n3.1415926535897932380 \n3221225472 \n0.00000000195055743902287957442589891392782464098322741904183452748558916604225809692973822374008478147095680240506129083134376023950655446505210288531412793791591047020932205873679944497150982204577829\n\n\n30\n3.14159265358979323834 \n6442450944 \n0.00000000097527871951143978732890626639587422864790677350546878071113342307743900198686359140290355881550128722580828503965413131817775505376202266065797748836863198053672189794374120960822078454085167\n\n\n31\n3.141592653589793238432 \n12884901888 \n0.00000000048763935975571989367894773437693235284413627643353924138657991875227166863658134592478609629063235498679155112391032958494770696135492336364934405252910218154894519718632749329296292232873980\n\n\n32\n3.141592653589793238455 \n25769803776 \n0.00000000024381967987785994684128569233584058123711119494820572430372864962831541128412896710085186107246109239553239175349774989214200004231103228126374017973510217647145205395451425934862543903141874\n\n\n33\n3.1415926535897932384607 \n51539607552 \n0.00000000012190983993892997342086932431134209122043661067557410939165547834271901397817958184287679899746954872366931517378432756277219608864154084676071873439013814578810008899659458297578644652102792\n\n\n34\n3.14159265358979323846216 \n103079215104 \n0.00000000006095491996946498671046297192359877068545345171015976479731683080387882390963230448827617887470480541069715613284937281391527142769874265021378174567842463712478657447014329047907537025078812\n\n\n35\n3.14159265358979323846252 \n206158430208 \n0.00000000003047745998473249335523502468279035097713111976794487129248565177626429377675630894324491318143281681108283621034037740658494844040637391634904185368756479826080968237471660797772242533971580\n\n\n36\n3.141592653589793238462613 \n412316860416 \n0.00000000001523872999236624667761795468151904619286610914234050926206938980743255828792757021971394828021509269854954204203807365348514101443729223110438242704353620510969922222720558589696914162834932\n\n\n37\n3.141592653589793238462636 \n824633720832 \n0.00000000000761936499618312333880903263327500693447062322906813727064108287401977495862480364165191892572722821805378076342708109786024478510267128305685288129822216150408530005053668788474754596314193\n\n\n38\n3.1415926535897932384626415 \n1649267441664 \n0.00000000000380968249809156166940452322820193894699000769679011251019721704206004157069165212410810544026360243081562173175012380943710784819833158848148454305274178869725472055344941764738359510503432\n\n\n39\n3.1415926535897932384626429 \n3298534883328 \n0.00000000000190484124904578083470226247804652390846434085867764950648712663131010933239756397504390127793843615009932381929180666667653837973866688861742752372542199845768295329289064647703956013271496\n\n\n40\n3.14159265358979323846264326 \n6597069766656 \n0.00000000000095242062452289041735113134701645625860333755562416727738678225630409133726241388412271419693280728455731432240919779384123153580275368398924018623402760598689881472309873103129157256079637\n\n\n41\n3.141592653589793238462643354 \n13194139533312 \n0.00000000000047621031226144520867556568700737741734806466859775202820253268876017605259802738752786993037186448547714104069276714403847492681351960293481403671057123207625030082320476025045525187921347\n\n\n42\n3.141592653589793238462643376 \n26388279066624 \n0.00000000000023810515613072260433778284519108236967983182064708458072713526423819809929748745762233445722522915255220218907083199050851571707542444274694226267953634788865545023196916578383333271638065\n\n\n43\n3.1415926535897932384626433814 \n52776558133248 \n0.00000000000011905257806536130216889142280646539246564084611706836175233956662580323924238486502823822095273623016740503242823293473322752826943406712212347816633161124743887015182230112651127795772707\n\n\n44\n3.1415926535897932384626433828 \n105553116266496 \n0.00000000000005952628903268065108444571142959822218603604003272493981728309761137840677254857193124035843137902790456916465278946093378200973737232257810799457850600559768648334606507173483923226798148\n\n\n45\n3.14159265358979323846264338316 \n211106232532992 \n0.00000000000002976314451634032554222285571809480183716997213813631477682811379565938813807352206137928266371922361967513628494303350752813837220533755077556277267010508481067708258272280581697116368445\n\n\n46\n3.141592653589793238462643383251 \n422212465065984 \n0.00000000000001488157225817016277111142785945936226160398008428988799695448379353411048669540675105529201156255393239241815105795960193162958466509541845372039556076088358306744001667409563608755116413\n\n\n47\n3.1415926535897932384626433832723 \n844424930131968 \n0.00000000000000744078612908508138555571392978117629867936429404766032454532982972879927442015100333573102539703125512303180592336739443426803028897653497323464198804132243445293300830649524734564338552\n\n\n48\n3.1415926535897932384626433832777 \n1688849860263936 \n0.00000000000000372039306454254069277785696489702504532435392851166970303119261182832676543366635866770056075491914594374169492690139868978298367458617935594850996354453930203928999116673294818087014542\n\n\n49\n3.14159265358979323846264338327905 \n3377699720527872 \n0.00000000000000186019653227127034638892848244931713466026093694181479411041279007664518388039250219394917520581289134362666072356238423046393393267507079270873999818256870264565851827569558246606719889\n\n\n50\n3.14159265358979323846264338327939 \n6755399441055744 \n0.00000000000000093009826613563517319446424122475914382989096505665488987955847187244503302737899350870943426865862471134189914127942916634993896055484923272330147659367044182796913164438902451505300070\n\n\n51\n3.14159265358979323846264338327947 \n13510798882111488 \n0.00000000000000046504913306781758659723212061239214397741554460154588154282324605029445339776664665126602561797118126889216645671298658718824327096087054775868599403253919720208550301571372348300608040\n\n\n52\n3.14159265358979323846264338327950 \n27021597764222976 \n0.00000000000000023252456653390879329861606030619764349651653005992524534679212430533767605152357040947956551476686121907768168532165192866105014965558860008759203488559386437922131721340234005270487190\n\n\n53\n3.1415926535897932384626433832795011 \n54043195528445952 \n0.00000000000000011626228326695439664930803015309901818673435974985666074531862481319050223365839744480599681889753061151021039333721394536374942994115768269838484630595034485522996445808917007449174018\n\n\n54\n3.14159265358979323846264338327950244 \n108086391056891904 \n0.00000000000000005813114163347719832465401507654953364817669171491508513164963273917601720652929341974206876005338536255726570022549748804281781239796629797911615377845161799814839230123476900245597338\n\n\n55\n3.14159265358979323846264338327950277 \n216172782113783808 \n0.00000000000000002906557081673859916232700753827476989343953483745588691069860641116109055396819036476750547363087511217529594767943500465379157613992458109310350412218037800653716796508005520240576783\n\n\n56\n3.141592653589793238462643383279502857 \n432345564227567616 \n0.00000000000000001453278540836929958116350376913738533038866604122773649845852696077719571424363288354984560163404176381957147290806540633568741458332329570497135696625855744102793092493269403397306521\n\n\n57\n3.141592653589793238462643383279502877 \n864691128455135232 \n0.00000000000000000726639270418464979058175188456869271315294534842634237961791644978817963657368349018018547073553645174721809397062791589612692380420980430418549727383863300796950010128713119835412810\n\n\n58\n3.1415926535897932384626433832795028825 \n1729382256910270464 \n0.00000000000000000363319635209232489529087594228434636257129921518973045610753984606903755555565090225823497728933861097425510012445275500660856570420314377959077737522021138499361073229058057856525305\n\n\n59\n3.1415926535897932384626433832795028838 \n3458764513820540928 \n0.00000000000000000181659817604616244764543797114217318203500292521693513634109262568138724540009302627880665664054547671442602629245985300233979583099822160020500500483475659543003887476852580099590637\n\n\n60\n3.14159265358979323846264338327950288409 \n6917529027641081856 \n0.00000000000000000090829908802308122382271898557108659111117062731122630670646165067155218116731953598635420518712225579467900141661189798523079951316477341015481355037440868192797508134947832305112068\n\n\n61\n3.141592653589793238462643383279502884170 \n13835058055282163712 \n0.00000000000000000045414954401154061191135949278554329556729395924345799567022024256463341039252169509758470379152247370308692670281380402226420303760039400738209142733170889955014305024957720733537028\n\n\n62\n3.1415926535897932384626433832795028841904 \n27670116110564327424 \n0.00000000000000000022707477200577030595567974639277164778511056032020960312473379843592387017238273841336013772018156620620139714636784838886552346958522729508544287095924157656559328774743942058403501\n\n\n63\n3.1415926535897932384626433832795028841955 \n55340232221128654848 \n0.00000000000000000011353738600288515297783987319638582389273822774741487722356985886216283070820704775151719320297692305771229984585552789478670272471592185318112305923135816186725549723401189399465139\n\n\n64\n3.1415926535897932384626433832795028841967 \n110680464442257309696 \n0.00000000000000000005676869300144257648891993659819291194639198232212119806943529938660652730685549751219967936668777898522258006789613584548518548947517399518980753460579735453010148010561666852518465\n\n\n65\n3.14159265358979323846264338327950288419706 \n221360928884514619392 \n0.00000000000000000002838434650072128824445996829909645597319884971711231896692394593774390264752174589247798884844188386097084317662800257999539949531820854021372973920212589123057484043038413386480875\n\n\n66\n3.141592653589793238462643383279502884197143 \n442721857769029238784 \n0.00000000000000000001419217325036064412222998414954822798659978217806262447498775999942703119802262260178073225171594371672767039910395837746754883514554387355534428542490502843047419903699298900650460\n\n\n67\n3.1415926535897932384626433832795028841971628 \n885443715538058477568 \n0.00000000000000000000709608662518032206111499207477411399329993575396962036143460337853290058329403000825478551622790184696278207177431648889605252409000436176691963484486508085164556906087635528463600\n\n\n68\n3.1415926535897932384626433832795028841971678 \n1770887431076116955136 \n0.00000000000000000000354804331259016103055749603738705699664997346010209869620989211161887341468235484256112337447060013347246770025475017772545318040100499719527221982164346924474197203014536962384233\n\n\n69\n3.1415926535897932384626433832795028841971690 \n3541774862152233910272 \n0.00000000000000000000177402165629508051527874801869352849832498742794071041254151985860348959772059490108518983279739396677937494271519282335856564782606593038161921464824045057141901255243934791698939\n\n\n70\n3.14159265358979323846264338327950288419716930 \n7083549724304467820544 \n0.00000000000000000000088701082814754025763937400934676424916249380120656283932533165465100141015772463551818630392263099429490062385425702670489272777099615392845908043683470262540481687443753631387209\n\n\n71\n3.141592653589793238462643383279502884197169374 \n14167099448608935641088 \n0.00000000000000000000044350541407377012881968700467338212458124691150780737379448729299415778149104071588104247756832825705434634711181057142482354004448463241253905615654192091803661550138349834925883\n\n\n72\n3.1415926535897932384626433832795028841971693929 \n28334198897217871282176 \n0.00000000000000000000022175270703688506440984350233669106229062345711696943116372132970566102529704265770576491705274450503252719017657177675877691511013902854190096207806219192633888747260021845335379\n\n\n73\n3.1415926535897932384626433832795028841971693978 \n56668397794435742564352 \n0.00000000000000000000011087635351844253220492175116834553114531172872886793361517037525390327946746161632353791870268554275183884754782486331603778813068233615174199226884022215799223710907726838045600\n\n\n74\n3.1415926535897932384626433832795028841971693990 \n113336795588871485128704 \n0.00000000000000000000005543817675922126610246087558417276557265586438573186906174890142708573558609834409560089188565508087950401784329091801122048811978107497632868024621903259103783240092289033277638\n\n\n75\n3.14159265358979323846264338327950288419716939927 \n226673591177742970257408 \n0.00000000000000000000002771908837961063305123043779208638278632793219552817231264491493855962977459511403952943751000011500970438591506577337745170668333578535599951979023667877352456919294462872091966\n\n\n76\n3.141592653589793238462643383279502884197169399350 \n453347182355485940514816 \n0.00000000000000000000001385954418980531652561521889604319139316396609809686587904376549740691013499079976873084270090861482240887454217130109700888814980605677101995723614993166563461344604800739186474\n\n\n77\n3.141592653589793238462643383279502884197169399369 \n906694364710971881029632 \n0.00000000000000000000000692977209490265826280760944802159569658198304909003040486204625221934197345705522798618684369325162265879229605485469678366255030178352556066002693178577047232466989525115469101\n\n\n78\n3.1415926535897932384626433832795028841971693993735 \n1813388729421943762059264 \n0.00000000000000000000000346488604745132913140380472401079784829099152455021488559854356404915684997373453194568910850150554234743333323887169027810355721265754992488889043086125818785113193573919393452\n\n\n79\n3.1415926535897932384626433832795028841971693993747 \n3626777458843887524118528 \n0.00000000000000000000000173244302372566456570190236200539892414549576227575740319521183676701415789251813071691901508261310331929140249243806985456612550895329193795879589953572603154100824544871464065\n\n\n80\n3.14159265358979323846264338327950288419716939937501 \n7253554917687775048237056 \n0.00000000000000000000000086622151186283228285095118100269946207274788113795994664709842522631154555946542345146881514528910460810254597164342807858892835620795414037008213423109321081194546364822645740\n\n\n81\n3.14159265358979323846264338327950288419716939937509 \n14507109835375550096474112 \n0.00000000000000000000000043311075593141614142547559050134973103637394056899012895473577596850633110638350648736057102314237177980400366216536052889102776078611695252923253860326700438854434523571599969\n\n\n82\n3.14159265358979323846264338327950288419716939937510 \n29014219670751100192948224 \n0.00000000000000000000000021655537796570807071273779525067486551818697028449633393126620840367198534402310258888355594288341333553345644955268599269768840268037991033640132662622651219876868571667511013\n\n\n83\n3.1415926535897932384626433832795028841971693993751043 \n58028439341502200385896448 \n0.00000000000000000000000010827768898285403535636889762533743275909348514224832564737039425426334514586546996259218677535573509881948390470781402228825989395273182032651008058458132368741640505896617496\n\n\n84\n3.14159265358979323846264338327950288419716939937510544 \n116056878683004400771792896 \n0.00000000000000000000000005413884449142701767818444881266871637954674257112418265890235838368509163216447481481489448816712110330223715773980089907117859221939072724239797636078782671271242814072375971\n\n\n85\n3.14159265358979323846264338327950288419716939937510573 \n232113757366008801543585792 \n0.00000000000000000000000002706942224571350883909222440633435818977337128556209380885332434891172319848620488659729738164471724588802112783671406082911480437965024962904042577987603085039013447608945929\n\n\n86\n3.14159265358979323846264338327950288419716939937510580 \n464227514732017603087171584 \n0.00000000000000000000000001353471112285675441954611220316717909488668564278104721435193031908950877204359837819737995801750320972363402779838300917945572908652501006153003542085374325991604412869361661\n\n\n87\n3.141592653589793238462643383279502884197169399375105815 \n928455029464035206174343168 \n0.00000000000000000000000000676735556142837720977305610158358954744334282139052364591662367762396028262186118096103138740814467820927027954854394810262789410419235082714217186525080075111982148174778001\n\n\n88\n3.141592653589793238462643383279502884197169399375105819 \n1856910058928070412348686336 \n0.00000000000000000000000000338367778071418860488652805079179477372167141069526182780089415357188087838593833946330836975399647327306680837620194187065419258155122989250888415010712734684797608033073625\n\n\n89\n3.14159265358979323846264338327950288419716939937510582060 \n3713820117856140824697372672 \n0.00000000000000000000000000169183889035709430244326402539589738686083570534763091450576986613092803132734513835450326938323875340758736308820974542462674391428058499844637478820265381488838988104029032\n\n\n90\n3.14159265358979323846264338327950288419716939937510582088 \n7427640235712281649394745344 \n0.00000000000000000000000000084591944517854715122163201269794869343041785267381545732855028173358746468046956525510777025489944130017542641677057978947214406421351026331982610650978815836832879531168973\n\n\n91\n3.141592653589793238462643383279502884197169399375105820952 \n14855280471424563298789490688 \n0.00000000000000000000000000042295972258927357561081600634897434671520892633690772867373330945030916346733440713728590207285972872463543131778575672519330342530762911803363811511058158186027795432290378\n\n\n92\n3.141592653589793238462643383279502884197169399375105820969 \n29710560942849126597578981376 \n0.00000000000000000000000000021147986129463678780540800317448717335760446316845386433804892579809401062455465663235945315460611537163618042257785088658544266429819636249671110253420808746597446520573378\n\n\n93\n3.1415926535897932384626433832795028841971693993751058209735 \n59421121885698253195157962752 \n0.00000000000000000000000000010573993064731839390270400158724358667880223158422693216917224678316443392363825994914428934207508906198289830674985682660949635821384192403281631922844526642413278832413310\n\n\n94\n3.14159265358979323846264338327950288419716939937510582097458 \n118842243771396506390315925504 \n0.00000000000000000000000000005286996532365919695135200079362179333940111579211346608460459637709689553823924642869271501663404845301205016530755451802616306227467630540663683104068369613595989640792411\n\n\n95\n3.14159265358979323846264338327950288419716939937510582097485 \n237684487542793012780631851008 \n0.00000000000000000000000000002643498266182959847567600039681089666970055789605673304230460731173778259117213777111142880151658721675860020914535582465972145418673451986278984778163602362579726077072294\n\n\n96\n3.141592653589793238462643383279502884197169399375105820974922 \n475368975085586025561263702016 \n0.00000000000000000000000000001321749133091479923783800019840544833485027894802836652115259229626755814834263320515134831240823898216087199538412524249058018818246139798994424707318178321345945256457982\n\n\n97\n3.141592653589793238462643383279502884197169399375105820974939 \n950737950171172051122527404032 \n0.00000000000000000000000000000660874566545739961891900009920272416742513947401418326057633222818361243076588714252512839516036266280313248404349353781084532268698995350740374253514900417876053020966349\n\n\n98\n3.1415926535897932384626433832795028841971693993751058209749432 \n1901475900342344102245054808064\n0.00000000000000000000000000000330437283272869980945950004960136208371256973700709163028817062409803538495726488875624597744971172786690330281567563348535035541670308629447817987552336482887802186116224\n\n\n99\n3.14159265358979323846264338327950288419716939937510582097494423 \n3802951800684688204490109616128\n0.00000000000000000000000000000165218641636434990472975002480068104185628486850354581514408587579979633867542260906483321120854716349161878400707892481545467979558812567504614518139663047436054484489897\n\n\n100\n3.141592653589793238462643383279502884197169399375105820974944503\n7605903601369376408980219232256\n0.00000000000000000000000000000082609320818217495236487501240034052092814243425177290757204300836874550011231007511825538341473499419058028357844460091683379454395130967959953704622673261060242184507762\n\n\n\n在圆的外切正六边形上不断向内收缩也可以用来计算 $\\pi$，与内接多边形的逻辑基本一致，但值是从大往小推的，和内接多边形共同构成了对 $\\pi$ 的双向逼近。\n\n外接六边形的边长由 ${L_0}^2 &#x3D; {\\frac{L_0}{2}}^2+r^2$ 得到，即 ${L_0} &#x3D; \\frac{2}{\\sqrt{3}}$。\n边长递推公式由半角公式推得：$$t_n&#x3D;\\frac{2t_{n-1}}{1+\\sqrt{1+t^2_n}}$$两者相夹：$$ 3\\cdot2^n\\cdot l_n \\lt \\pi \\lt 3\\cdot2^n\\cdot t_n$$\n\n\n\n无穷级数割圆是个效率很低的算法。当然，最初除了割圆别无他法，自然无所谓效率问题。直到有一天，人们发现了无穷级数：\n$$\\frac{\\pi}{4} &#x3D; 1 -\\frac{1}{3}+\\frac{1}{5}-\\frac{1}{7}+\\frac{1}{9}-\\cdots &#x3D; \\sum_{n&#x3D;1}^\\infty\\frac{(-1)^{n-1}}{2n-1}$$\n这个公式称为莱布尼茨级数，最早由印度数学家马德哈瓦发现并应用。\n\n※ 你没看错，真正的先驱往往成为无名的先烈。这个公式据称是莱布尼茨独立重新发现的。\n\n严格来说，莱布尼茨级数的计算效率并不高，甚至比割圆法还低，每增加一位精度需要多计算 10 项。但公式本身启迪了人们，计算 $\\pi$ 还有割圆术不断乘方开方以外的其它方法。同时，级数更方便并行计算，不受递推公式约束，每一项的计算也更简单，因此具有重大的历史意义。随后越来越多的 $\\pi$ 级数被研究出来：\n\n马德哈瓦级数，每项精度约 1.4 位：\n$$\\pi &#x3D; \\sqrt{12}\\sum_{k&#x3D;0}^\\infty\\frac{(-1)^k}{3^k(2k+1)}$$\n\n最早实用于级数法计算 $\\pi$ 的公式。\n\n\n欧拉级数：\n$$\\frac{\\pi^2}{6} &#x3D; \\sum^{\\infty}_{k&#x3D;1}\\frac{1}{k^2}$$\n\n任何一本高数书里都会有的公式。\n\n\n牛顿级数：\n$$\\pi&#x3D;24\\left(\\frac{\\sqrt{3}}{8}+\\sum^{\\infty}_{k&#x3D;0}\\frac{(2k)!}{(k!)^2(2k+1)16^{k+1}}\\right)$$\n\n牛爵爷是大英帝国的雄狮。\n\n\n反正弦函数泰勒展开\n$$\\frac{\\pi}{2} &#x3D; 1 + \\frac{1}{3} + \\frac{1}{3}\\frac{2}{5}+\\frac{1}{3}\\frac{2}{5}\\frac{3}{7}+\\cdots &#x3D; \\sum_{k&#x3D;0}^{\\infty}\\frac{2^k(k!)^2}{(2k+1)!}$$\n\nMachin 公式：\n\\begin{equation*}\\begin{cases}\\frac{\\pi}{4}&#x3D;4arctan\\left(\\frac{1}{5}\\right)-arctan\\left(\\frac{1}{239}\\right) \\\\arctan(x)&#x3D;\\sum^{\\infty}_{k&#x3D;0}\\frac{(-1)^kx^{2k+1}}{2k+1}\\end{cases}\\end{equation*}\n\n高斯-勒让德算法：\n\\begin{equation*}\\begin{cases}\\pi \\approx \\frac{(a_n+b_n)^2}{4(1-\\sum_{k&#x3D;0}^{\\infty}2^k(a_k-b_k)^2)} \\\\a_{n+1}&#x3D;\\frac{a_n+b_n}{2} \\\\b_{n+1}&#x3D;\\sqrt{a_nb_n}\\end{cases}\\end{equation*}\n\n计算机出现前夜的成果。\n\n\n拉马努金级数：\n$$\\frac{1}{\\pi}&#x3D;\\frac{2\\sqrt{2}}{99^2}\\sum^{\\infty}_{k&#x3D;0}\\frac{(4k)!(1103+26390k)}{(k!)^4\\cdot396^{4k}}$$\n\n来自娜玛卡尔女神梦中的启示。\n\n\nChudnovsky 级数：$$\\frac{1}{\\pi}&#x3D;\\frac{12}{640320^3}\\sum^{\\infty}_{k&#x3D;0}\\frac{(-1)^k(6k)!}{(k!)^3(3k)!}\\cdot\\frac{13591409k+545140134}{640320^{3k}}$$\n\n目前最高效的级数，每项可以推进 14 位精度。\n\n\nBBP 级数：\n$$\\pi&#x3D;\\sum^{\\infty}_{k&#x3D;0}\\frac{1}{16^k}\\left(\\frac{4}{8k+1}-\\frac{2}{8k+4}-\\frac{1}{8k+5}-\\frac{1}{8k+6}\\right)$$\n\n这个级数具有革命性的意义：可以直接计算圆周率 16 进制（或 2 进制）下任意一位的值，而不需要从头开始逐项推进。因此尤其适合于分布式。\n\n\n\n随着计算机的应用，单项是否易计算不出错已经不再是问题，计算效率变为了各类公式中最重要的考核标准。目前应用得最多的就是 Chudnovsky 级数和 BBP 级数。\n一些豆知识\n祖冲之与刘徽\n虽然课本里多提到祖冲之，但实际上割圆法是魏晋时期刘徽提出的。祖冲之据推测应该是在计算方法上有技术创新，同时明确提出了疏率 22&#x2F;7 和密率 355&#x2F;113。\n\n东西方割圆\n前文演示的是通过内接圆和外切圆逼近 $\\pi$ 的方法，但实际上刘徽的割圆术是使用内接多边形的面积来计算的，因为他先证明了 $圆面积 S &#x3D; \\frac{圆周 R}{2}\\times半径 r$，面积计算有助于减少迭代时的计算量。纯靠线长计算是阿基米德干的。\n\n割圆术&#x2F;法的效率：\n$$k\\approx2nlog_{10}2+log_{10}36\\approx0.6n+1.56$$\n\n椭圆周长公式为：\n$$C&#x3D;4a\\int_{0}^{\\pi&#x2F;2}\\sqrt{1-{(1-\\frac{b^2}{a^2})}sin^2\\theta}\\ d\\theta$$\n$C$ 与其长轴 $a$ 短轴 $b$ 有关，但并不存在固定的比值。该积分没有简化形式，需要通过数值方法计算。但拉马努金提出了两个近似公式可以简化计算：\n$$(1), C \\approx \\pi\\left[3(a+b)-\\sqrt{(3a+b)(a+3b)}\\right]$$\n$$(2), C \\approx \\pi(a+b)\\left[1+\\frac{3h}{10+\\sqrt{4-3h}}\\right], h &#x3D; \\frac{(a-b)^2}{(a+b)^2}$$\n前者最大误差 0.05%，后者最大误差 0.01%。\n\n椭圆面积公式为：\n$$S&#x3D;\\pi ab$$\n面积与周长不同，面积是二维度量，在几何变换下的缩放是线性的，对形状的局部变形不敏感，因此公式就是如此简单直接。\n而周长是一维弧长的积分，依赖曲线每一点的曲率变化，因此需要专门的椭圆积分计算。\n\n\n","categories":["硬用数学"],"tags":["圆周率","割圆","无穷级数"]},{"title":"V8 引擎中的 Invalid array length bug","url":"//invalid-array-length-bug-in-nodejs-v8/","content":"在上一篇文章中，我提到了 V8 引擎存在的一个 bug，对于数组的长度计算有点问题，导致在部分算法执行过程中出现 Invalid array length 异常而退出。有趣的是，Object 也会出现同样的 Invalid array length，尽管 Object 本身并没有 length 属性。\n我写了个最简单的复现代码：\nconst n = 2 ** 24 - 1; // 16777215// const dict = Object.create(null) // same bugconst dict = [];for (let i = 0; i &lt; n; i++) &#123;    let key = i * Math.floor(Math.log(i));    dict[key] = i + 1;&#125;const maxkey = (n - 1) * Math.floor(Math.log(n - 1)); // 279097901console.log(dict[maxkey]); // should be 16777215\n\n在最新版本的 nodejs 和 chrome 控制台中，均出现相同的报错。但在 firefox 和 safari 的控制台中都可以正常执行，这两个浏览器都有自己的独立 JS 引擎。\n\nnode object-dict-test.js/Users/kaikai/Coding/object-dict-test.js:7    dict[key] = i + 1              ^RangeError: Invalid array length    at Object.&lt;anonymous&gt; (/Users/kaikai/Coding/hexo-blog/source/attach/2025/08/object-dict-test2.js:7:15)    at Module._compile (node:internal/modules/cjs/loader:1738:14)    at Object..js (node:internal/modules/cjs/loader:1871:10)    at Module.load (node:internal/modules/cjs/loader:1470:32)    at Module._load (node:internal/modules/cjs/loader:1290:12)    at TracingChannel.traceSync (node:diagnostics_channel:322:14)    at wrapModuleLoad (node:internal/modules/cjs/loader:238:24)    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)    at node:internal/main/run_main_module:33:47Node.js v24.6.0\n\n查了一下原因：\n\nV8 对 整数键（即符合数组索引规则的属性名）的 Object 有特殊处理。当普通对象使用整数作为 key 时，V8 通常会将其视作“类似数组”的元素：无论是 Array 还是普通对象，都有一个内部的 “elements” 存储空间来保存这些整数下标对应的值。这解释了 bug 为什么同时出现在了 Array 和 Object 上。\n\nV8 在管理大量元素时区分快速 Fast 和字典 Dictionary 两种存储模式。当数组规模较小并密集时，使用快速模式；若遇到稀疏或非常大的索引，就可能切换到字典模式。在快速模式下，向新索引赋值会自动更新 length 并尽量扩容底层数组；超过阈值后会退化到字典模式，用哈希表存储元素。同时 V8 为了优化性能，设置了多个内部变量用于判断数组下不同的数据类型并进行优化。官方博客\n\n在隐式转换过程中，V8 忘了对内部变量进行判断，于是一个原本合法的 key 值因为大于内部变量限制，而导致了 Invalid array length 异常。这个属于 V8 长期存在的 bug，至今没有修正。\n\n\n再深入的分析通过搜索已经找不到答案了，需要去查看庞大的 V8 源代码，超出了我的时间余裕和兴趣能力，就这样吧。\n","categories":["代码脚本"],"tags":["Invalid array length","nodejs","V8","隐式转换"]},{"title":"『孤独素数』的定义与搜索算法","url":"//lonely-primes-define-and-algo/","content":"问题在知乎上看见了个有意思的问题：\n\n孤独素数：一个素数 P 通常可以分为两个殆素数之和，其序数与对应的殆素数的素因子序数同时满足：\\begin{equation*}\\begin{cases}P &#x3D; \\prod p_i + \\prod q_i \\\\\\pi(P)&#x3D;\\prod \\pi(p_i) + \\prod \\pi(q_i)\\end{cases}\\end{equation*}例如 $11 &#x3D; 2*3 + 5$，同时有 $\\pi(11) &#x3D; 5 &#x3D; \\pi(2)\\pi(3) + \\pi(5) &#x3D; 1\\cdot2 + 3。$但也存在一些素数，任意分法均不能满足上述规则，称为孤独素数。\n\n看见这题我是懵逼的，懵逼树上懵逼果，第一步直接撞死在黎曼猜想了，想不到在 $\\pi(p)$ 还没有明确公式解的情况下怎么去判断孤独素数的规律。但至少这个看起来是个简单而有趣的编程练习题。\n// 欧拉筛法获得 n 以内的素数表function EulerSieve(n) &#123;    const primes = [];    let eularboard = new Array(n + 1).fill(true);    for (let i = 2; i &lt;= n; i++) &#123;        if (eularboard[i]) &#123;            primes.push(i);        &#125;        for (let j = 0; j &lt; primes.length; j++) &#123;            if (i * primes[j] &gt; n) break;            eularboard[i * primes[j]] = false;            if (i % primes[j] === 0) break;        &#125;    &#125;    return primes;&#125;const primes = EulerSieve(10 ** 6);// 计算殆素数的素因子序数乘积，并使用使用 dp 避免重复的因式分解const dp = [];function factorOrdersProduct(n) &#123;    if (n === 1) return 0;    if (dp[n]) return dp[n];    const init = n;    const sqrt_n = Math.floor(Math.sqrt(n));    let indices = 1;    for (let i = 0; i &lt; primes.length; i++) &#123;        const p = primes[i];        if (p &gt; sqrt_n) break;        while (n % p === 0) &#123;            indices = indices * (i + 1);            n = n / p;            if (dp[n]) &#123;                indices = indices * dp[n];                n = 1;                break;            &#125;        &#125;        if (n === 1) break;    &#125;    if (n &gt; 1) &#123;        const idx = primes.indexOf(n);        if (idx === -1) throw new Error(`Math crisis $&#123;n&#125;`);        indices = indices * (idx + 1);    &#125;    dp[init] = indices;    return indices;&#125;// 寻找孤立素数，将每个素数分解成两个殆素数，然后计算殆素数的素因子序数乘积const lonelyPrimes = [];for (let i = 0; i &lt; primes.length; i++) &#123;    const p = primes[i];    let lonely = true;    for (let m = 2; m &lt; p / 2; m++) &#123;        if (factorOrdersProduct(m) + factorOrdersProduct(p - m) === i + 1) &#123;            lonely = false;            break;        &#125;    &#125;    if (lonely) &#123;        lonelyPrimes.push(p);    &#125;&#125;console.log(lonelyPrimes);// 2, 3, 211, 277, 541, 631, 653, 1259, 2797, 2897, 4391, 5279, 5323, 5381, 5527,  6113, 6547, 7177, 7523, 7993, 8147, 8513, 9157, 9661, 10211, ...\n\n实测下来 Apple M1 上计算 $10^6$ 以内孤独素数约 3.5 秒，$10^7$ 以内约 180 秒。\n优化整体来看上述代码是清晰的，先用欧拉筛获得素数数组，再根据孤独素数的定义逐个验证。由于殆素数分解是必然有解的，实际上就是验证第二条件序列数的运算是否成立。通过 dp 暂存已经计算过的结果，可以大大提高效率。但直观来看，还有一些可以优化的小点：\n\n在规模不大的时候，可以使用字典对象储存素数与其序数的键值对，替代 primes.indexOf(n)。一个对象可以容纳 2^24 个键值对，即最大素数为 $p_{(2^{24})}$，查询得知 $p_{16777216}&#x3D;310248241$，足够大了。更大规模也可以使用若干个字典对象来应对。\n如果一个殆素数因子序数乘积已经超过了当前素数序数，可以提前结束。但需要考虑每次增加的判断带来的损耗是否小于节约的时间。考虑到：$\\pi(p) \\approx p &#x2F; \\ln p$，殆素数 m 大概率为合数， $\\pi(m) &lt;\\prod_i(m_i&#x2F;ln m_i), m &#x3D; \\sum_i m_i$，m-q 同理。而 $lnp$ 显然是大于 1 的，因此可以认为这种提前结束的情况几乎不存在。在极端情况下，m&#x3D;2，p 与 p-2 为孪生素数，也只是等于序列数的和。因此这一条更大可能是负面的。\n使用 UInt32Array 等定长数组优化，这个我不是很喜欢。我知道它有效，但总觉得将语言特性也视为算法本身的优化的话，汇编就是唯一可用的语言了。\n\n以及一个可能存在的大优化点：\n在欧拉筛获得素数的过程中，我们已经把所有的合数都计算过一遍了\n这意味着 factorOrdersProduct(n) 函数的计算过程，与筛法取素数的计算过程本身是有大量重合的。在题目的定义下，素数 p 的两个加数几乎就覆盖了从 1-n 的所有合数，也就是筛法求素数中被筛去的数，以及筛选这个动作本身也是有价值的。\n值得一提的是，在因数分解相关算法中有个 SPF(Smallest Prime Factor) 算法。它与欧拉筛是完美配合的。简单地说，SPF 分为两步：\n\n在筛法取素数过程中，保留合数而不是直接筛去，并记录每个数最小质因数。\n在因数分解过程中，使用类似递归的方法，根据最小质因数快速计算各合数的全部因子。\n\n在第 1. 步中将 SPF 与欧拉筛结合，并将第 2 步中的计算因子数组改为计算因子序数乘积，即可得到更高效的搜搜代码：\nconst n = 10 ** 6;const spf = new Uint32Array(n + 1).fill(0);const primes = [];const primeIndex = new Map();const product = new Uint32Array(n + 1);// 构建SPF和素数序号for (let i = 2; i &lt;= n; i++) &#123;    if (spf[i] === 0) &#123;        spf[i] = i;        primes.push(i);        primeIndex.set(i, primes.length); // 记录素数序号    &#125;    for (let j = 0; j &lt; primes.length; j++) &#123;        const p = primes[j];        const ip = i * p;        if (p &gt; spf[i] || ip &gt; n) break;        spf[ip] = p;        if (i % p === 0) break;    &#125;&#125;// 直接计算因子序数乘积product[1] = 1;for (let i = 2; i &lt;= n; i++) &#123;    const p = spf[i]; // 最小质因数    const prev = i / p;    product[i] = product[prev] * primeIndex.get(p);&#125;// 寻找孤立素数const lonelyPrimes = [];for (let idx = 0; idx &lt; primes.length; idx++) &#123;    const p = primes[idx];    const target = idx + 1; // primeIndex[p]    const half = Math.floor(p / 2);    let lonely = true;    for (let m = 2; m &lt; half; m++) &#123;        if (product[m] + product[p - m] === target) &#123;            lonely = false;            break;        &#125;    &#125;    if (lonely) lonelyPrimes.push(p);&#125;\n\n优化结果是 $10^6$ 以内约 0.8 秒，$10^7$ 以内约 52 秒，$10^8$ 约 8900 秒。\n\n在 JS 实现中，对于相同的查询请求，性能排序大约是 Uint32Array &gt; Array $\\approx$ Object &gt; Map。但 V8 引擎存在 bug，导致 Array 或 Object 在用作 primeIndex 时出现了预料之外的错误，不得不用 Map()。这就是为什么我不喜欢基于语言特有数据结构的优化。而相同的 python 代码虽然可以天然地支持更大的数字而无需考虑这些异常，也无需考虑默认 2GB 的内存上限，但代价是慢得多的计算速度以及单位计算量下更大的内存占用。在计算规模上升后还不如 nodejs 实用。\n\n观察在有了高效的孤独素数搜索算法以后，可以对其序列进行一些观察。\n\n分布。\n 从计算结果看，孤独素数很稀疏，且存在较大的波动。但计算到 1 亿，以 10 万为一段统计其出现的频率，发现和素数本身的分布趋势是大致一致的。\n \n\n绿色为素数数量分布参考线 $\\pi(p)&#x3D;p &#x2F; \\ln p$\n\n\n解的分布。\n 对于非孤独素数，第一个解往往在 m 较小时就出现了。一般地，对于 p &#x3D; m + q 的情况，上述算法是从 m &#x3D; 2 开始逐项验证的，等效于从 p 左边的所有数中取任意两个，使 $\\pi(p)$ 有解。先来看一下所有数的因子序数积的分布情况。\n \n\n前 1000 个整数的因子序数积的分布\n\n \n\n前 30000 个整数的因子序数积的分布\n\n 从图中我们发现，整数的因子序数积的分布出现了明显的原点出发放射状图样，最上面一条显然是质数和其对应的序列数。随着 x 轴放大点数密集，放射线变得更为清晰。因此我们进行局部放大并标注具体数据后如下：\n \n\n29000 到 30000 个整数的因子序数积的分布及数值标注\n\n 经过简单计算，就可以发现素数线以下的第二条线是 $3\\times素数$，再下面第三条线是 $5\\times素数$。\n 根据图像发现一个推论，若素数 p&#39; 与 p $\\frac{p&#39;}{p} \\approx \\frac{1}{3}$，则 $\\frac{1}{3} &lt; \\frac{\\pi(p&#39;)}{\\pi(p)} &lt; \\frac{1}{2}$，所以才有 $3\\times素数$ 线稳定在素数线下。\n 当 p 足够大时，$\\pi(p)\\approx p &#x2F; ln(p)$，假设存在一个与 p 几乎相等的殆素数 3p&#39;。则有： $$ \\frac{\\pi(3)\\cdot\\pi(p&#39;)}{\\pi(p)}\\approx \\frac{2p}{3ln(p&#x2F;3)} &#x2F; \\frac{p}{lnp} &#x3D; \\frac{2}{3}\\cdot\\frac{lnp}{lnp-ln3}$$ 令 $t&#x3D;lnp$, $c&#x3D;ln3$，则比值 $r(t)&#x3D;\\frac{2}{3}\\cdot\\frac{t}{t-c}$，其中$t&gt;c$ ，即$p&gt;3$。\n\n若 $r(t)&gt;1$，则 $2t&gt;3t-3c \\Rightarrow t&lt;3c \\Rightarrow lnp&lt;ln27 \\Rightarrow p&lt;27$\n若 $r(t)&#x3D;1$，则 $p &#x3D; 27$\n若 $r(t)&lt;1$，则 $p &gt; 27$\n\n 也就是说  在 p 足够大时，$\\pi(p) &gt; \\pi(3)\\cdot\\pi(p&#39;)$，因此殆素数 3p&#39; 构成的因子序数积的线一定在 $\\pi(p)$ 下方。\n 以同相方法，容易比较 2p&#39;、5p&#39; 等不同殆素数构成的线条的相对位置。进一步地，n 阶殆素数也可以以类似的方法确定相对顺序。\n 特殊地，因为$\\pi(2)&#x3D;1$，所以 $2^n$ 是最底部恒等于 1 的横线。\n\np &#x3D; m + q\n 根据上一条的结论，对于一个殆素数，每增加一个因子，它的因子序数积都是变小的，因为对任意 p 都有 $\\pi(p)&lt;p$。所以通常来说，其中一个值是较小的质数，会让等式成立的概率更大。\n 如果两个都是殆素数，最优情况也至少是 $p&#x3D;3p_1+5p_2$，如果 p 足够大，此时要求 $p&#x2F;lnp &#x3D; 2p_1&#x2F;lnp_1+4p_2&#x2F;lnp_2$，若 m 与 n 大小类似，容易导致 $p_1, p_2$ 过小。\n 也就是说，$\\pi(p)&#x3D;\\prod \\pi(p_i) + \\prod \\pi(p_j)$ 等式要成立，可以调节的空间大小就是 $p&#x2F;lnp - (p_i&#x2F;lnp_i + p_j&#x2F;lnp_j)$，这个当然没有稳定解，但从趋势上容易理解，m q 差异越大的，殆素数因子越少的，越容易得到解。\n\n特例与猜想\n\n孪生素数中较大的一个，一定不是孤独素数，这结论还挺文学的。\n有无穷多个孤独素数。\n指定 m 为任何 2 以上整数，都可以找到 p 与 q 使得公式成立。\n\n\n\n得不出什么普遍性的结论，思而不学民科一下。\n","categories":["硬用数学"],"tags":["殆素数","编程练习"]},{"title":"在春天的光影里喘息","url":"//in-breath-of-spring/","content":"博客第一篇。\n嗯，我把 WordPress 自带的程序员风格的“你好，世界”那篇给删了，从理论上那才是第一篇。\n我总觉得，好多低水平程序员毫无想像力的悲惨人生就是从无数次的 Hello world 中开始的。\n我必不能成为那样！——所以最终也没当成程序员……\n博客主标题不说了，\n副标题是自己小时候考试作文时自创的一首小诗的第一行。完整四行如下：\n\n在春天的光影里喘息在夏夜的摇曳中远行在秋夕的成熟间缔结在冬日的碧蓝中沉沦\n\n现在看来，幼稚、做作、伪小资……很多标签都可以往上贴。\n可是在当时，也曾是被专门拎出来表扬的，也曾是被抄在在当期教室后黑报上的，也曾是给一个孩子带来过无尽的幸福感与光荣感的。\n更重要的是，它是一个小孩开始练习在纸上向别人说话的起点，尽管那时，甚至不知道什么是读者。\n当然，读者是有的，二十岁的自己，三十岁的自己，四十岁的自己，五十岁的自己，六十岁的自己，七十岁的自己，八十岁的自己，九十岁的自己，一百岁的自己。\n就像是现在的你，偶尔地整理过去的东西，而于幸运之中发现曾经写下的以为早已消失的青涩文字，总会细细地读，度过温暖的一天。\n所以至今依然记得。\n如果说博客是自己的小黑板，那么\n用这首小诗作为开篇，很合适，对么？\n","categories":["文艺青年"],"tags":["小诗","博客","第一篇"]},{"title":"妙用 QR 码容错性添加可读内容","url":"//robust-qr-code/","content":"QR 码现在是越来越流行了，由于它可以嵌入相当长度的自定义内容，并且算法公开还有现成的库可用以自动生成，在互联网的某些领域得到了很好的应用。比如 App 下载链接、网站自我宣传、寻宝活动等。\n\nQR 码是二维码的一种，二维码又是条形码的新一代强化版本。二维条码把普通条形码的直线变为黑白矩形图案来表示二进制数据，扫描后可获取其中所包含的信息。一维条码的宽度记载着数据，而其长度没有记载数据。二维条码的长度、宽度均记载着数据。\n\n还陌生的可以看这里：http://zh.wikipedia.org/wiki/QR 码还有这里：http://zh.wikipedia.org/wiki/QR 码\n关于 App 下载链接可以看这里：Using QR Codes to link customers directly to your apps（英语）。\n不过 QR 码也有缺点：这块奇怪的黑白像素色块，不规不则，非得拿专门的程序去扫描才能看出其中写了些什么画了些什么。第一次第二次，你可以利用用户的好奇心，达到很好的宣传效果，但是十次八次以后，用户好奇不再，QR 码就容易陷入窘境。这时除了在必定使用手机的特定情景下，放置二维码链接都会成为浪费版面的元素之一。\n但实际上 QR 码在设计之初，就设计了一种特性：容错性。也就是说，对于一切类型的二维码，在设计当中就要考虑二维码在使用过程当中的磨损，扫描过程的识别程度等因素造成的部分色块消失或者识别错误的可能性。容错性设计，保证了即使有一部分损毁，设备依然可以正确识别出其中包含的信息。\n虽然这个功能本意是为了增加可读性，不过既然是容错的嘛，所以我们可以故意往里面加点料。比如……\n兔斯基！？\n\n看起来效果不错，只要关键的三个角落大方块没有被覆盖，大约有四分之一的 QR 码被兔子挡了依然不影响识别。（识别不出来就换个 App 吧）\n不过更常用的是宣传自己的网站，比如加入风格一致的像素化文字链接：\n\n如果纯黑白不合你口味，那就再改改：\n\n思路已经讲得很清楚了，更多的就靠你的时间和 PS 技巧了。当然如果你就经营着一个在线 QR 码生成器网站，不妨也考虑一下增加一个“加料”功能来体现差异化。毕竟在网络上，图片不会有磨损，容错性放着也是浪费，不如做点有意思的事情吧。\n\n方法：随便找个在线 QR 码生成器，把 ECC 指标调到最高，填入要包含的信息然后生成码。再 PS 上肉眼可识别的图片就 OK 了。遮挡的面积不能超过一半，尤其是三个角落回字广不能有任何一块被遮挡一半以上。最好随手准备一个手机实测，争取又能识别又能加入尽可能大的肉眼图片。\n\n至于像素化文字 PS 怎么做，回头再写吧。\n","categories":["软件使用"],"tags":["QR码","容错性","添加图标"]},{"title":"开开说成语（一）：胡说八道","url":"//kaikai-idiom-nonsense/","content":"相传，古人把天下一切知识、技能，一切人所知道和人所不知的东西，分为了九『道』：天之道、地之道、人之道，因果道、阴阳道、轮回道，神仙道、恶鬼道、宇宙道、百度知道……\n九道之识太过广阔，每一道都是截然不同，自成一体的庞大知识体系。例如『人之道』包含了现在一切被定义的社会运行、人情世故、法制律俗等等等等。而『因果道』则包含了一切可以被人类认识并且掌握利用的自然规律，一切遵循着因果关系演化的自然规律，无论是科学技术、演化发展，都是『因果道』的内涵。\n\n『世之九道，纵千年传承，亦不变化，此乃终极之真理，万物之教条也。』——开子。\n\n现代人类，终其一生，若能在一道之中有所成就已经非常了不起，若能擅长两道、三道之学识，便可称世之瑰宝，人间明珠。历史上的圣贤之人，半神之身，至多也只能浅浅涉足四道、五道，而纵使是上苍之天神，虽能熟知天地人之道，能看神仙、因果、宇宙之道，却也因神格之限，亦只能通晓六、七道之内。\n然而，总是有人能超越所有人的想像：一个姓『胡』的人，竟然通晓了世间九道之中的八道，成为了有史以来最为博学的人！他的名气变得如此之大，以至于人们已经忘了他的名字，只要说起『胡』，大家自然就会想起那位唯一能通晓九道之八的奇人。人们有时常在议论，这样的天才，他甚至比神仙还厉害，那他到底是人，还是神仙呢？胡 is who？Who is 胡？\n他们不知道，我们自然也不知道。然而『胡』却是个性格很好的人……神……Whatever。他时常开设露天大场，公开讲课，讲授八道之学识，解答人间之疑惑，一讲就是数个时辰。甚至连神仙们也时有腾云驾雾而来，半坐空中，听『胡』说的道理和自己知道的是不是一样。每每讲课，场地上都五彩祥云笼罩，地面也不断长出百样鲜花水果，听众可以边吃边听。尽管如此，听众们却往往听入神中，顾不上鲜花水果，忘了动弹，忘了眨眼，忘了呼吸、甚至忘了自己是谁。\n每逢『胡』开堂讲课，都会万人空巷。大家纷纷奔走相告，喜形之色甚于过节。是啊，还有什么能比听到八道之识更令人高兴的呢？同样是也古人说过，『朝问道，夕死可以』，那么，一下能得到八倍之所求，又该怎样地幸福到死去活来？由于听众众多，中央讲台也越搭越高，从席成为了台，从台成为了堆，从堆又成为了楼。于是人们又找到了能更亲切地称呼他的名字：『楼主胡』。\n于是在之后的几十年里，直到他去世为止。人们总是能时常听见无数的人齐声大喊：\n『楼主胡说八道了！楼主胡说八道了！』\n这就是成语『胡说八道』的来历。\n","categories":["二逼青年"],"tags":["开开说成语","成语新编","胡说八道"]},{"title":"开开入刷一周年——回忆（旧文重拾）","url":"//skate-for-one-year/","content":"（旧文重拾）\n这个日子在匆匆之间就莫名其妙的到来了。时光总是流逝得很快，而一样东西若能占据你活着的所有岁月的大约二十分之一，倒也是已经足够为此说很多话了。就像一个人对你说的那样，庆祝什么一周年的总是件很幸福的事情。你本是想就让这些日子这样悄悄的继续流过，可因为同样的理由，还是想写下一些东西。以便将来，无论是继续呆着还是早已离开，还能有些东西让你回忆起那些明灭的温暖的灯光与那么多可爱的人。就像是现在的你，偶尔地整理过去的东西，而于幸运之中发现曾经写下的以为早已消失的青涩的文字，总会重新细细的读，度过温暖的一天。\n你总是害怕开始回忆，因为那些过去的林林总总，总是会像光怪陆离的电影宣传片，那么多的碎片一下子冲出记忆的阀门，等缓和心情再想作细细的叙述时，却发现里面没有多少剩下的东西。你向来不擅于带着那种温和的语气，一点一点平静而深沉地叙述过去，像 Titanic 里老年 Rose 一样，止水一般的眼睛里看出过去的点点滴滴。却像是清澈的池塘与小溪，总是一眼便能看到底的浅薄，若一取水，便会干涸。只有干枯地再呆想很多个钟头，才能渐渐地看到于河床之中再慢慢渗出一些清水。小溪与池塘永远不会有江河湖海的浩瀚胸襟，可是也不会有江河湖海那样骇人的风浪，而更显得适合于现在这样的气氛。于是你便这样慢慢的开始回忆，并且不知道什么时候结束。一旦试图开始回忆，便不得不陷入嗫嚅，陷入无边的乏力感之中。你总是失语在真正想说话的时刻，并不是因为无话可说，而恰恰正是因为想说的太多，喉咙才会像被碎石堵住的玻璃颈口，再也说不出话来。\n你不知道应该从何开始叙述。可毕竟总是得有一个开头，之前铺陈感叹了半天，却愈发地不知道该怎样开头。然而你知道你其实是记得的，所有的一切你都记得。你记得你第一天穿上刷鞋的惶恐，记得第一次刷去天安门而后是三里屯的疲弊与兴奋，你记得午夜城隍庙的喧嚣场面，记得凌晨白颐路的静谧剪影，记得草坪的西瓜，记得湖畔的雨，记得元旦之夜的迷离焰火，你记得所有那些笑容和泪水，真实而又遥远，溶化在你的血液里。你甚至不忍去面对，但是你知道它们在那里，一直都在那里。\n现在你又要开始一次尝试，试着叙说过去的一年里你的刷刷的故事。你不知道自己能不能成功，因为这是过于艰巨的工程。在你的生活里刷刷不是一桩事情，不是一件任务，不是一样娱乐，不是一种心情，它渗透了你的生活的一切细节，对刷刷的回忆就是对你生活本身的回忆，这对你来说，有些过于沉重了。\n其实严格的说来，在很早之前，你便已经应该开始写下你的一周年的回忆文章。在某一个已经被日历忘却的日子，你拎着借来的刷鞋，听循同学的指点，怯怯地去了CC。那些情景现在已经模糊不清，你只记得在台阶上有一个人做着咖啡壶的动作，脚下是一溜黄色的小杯子。你于是惊讶而羡慕，站在一旁默默地看。\n然后人多了起来，每一个人的脸上都有着欢笑，像彼此认识很久很久一样。他们都坐在台阶上，彼此开始像久别重逢一样不停地聊天，爽朗地笑。你于是也坐在一边，看着他们。渐渐地有人开始跟你说话，并惊异于新人如你的出现。渐渐的他们神情开始专注，并无心地把你冷落在了一边。时光早已模糊了那些人的颜貌与身形，而回忆却把他们变成永恒，像雅各伯梦中梯子上上上下下的身影。\n你还记得，那一夜每个人都很高兴。因为有个人告诉你一件事情：\n轮滑协会将在明天的一早成立。\n那是你与Skate的第一次擦肩而过，可这是你对CC的刷子们的最初印象。那个遥远的夜晚，CC被地灯笼罩上一片明亮的金黄。你看见自由来去的人影在梯子上上上下下，你听见爽朗的笑，那是你曾经拥有而后失去过的。你被打动了，那一瞬间你艳羡不已。\n也许这并不算是擦肩而过，而只是你还没有准备好，让Skate改变你未来的生活轨迹。因为事实上在几天以后，当别的社团都招新结束而ROSS开始匆匆地在农园门口招新时，你便悄悄地跑去报上了名。当你看着那张浅浅黄的卡片爱不释手时，旁人的善意的笑声甚而让你觉得有些脸红。可你知道你是珍惜它的，你小心翼翼地把它收进了自己的皮夹。\n可是这次便真的擦肩而过了，让你事后回想时，总会有一些淡淡的后悔。\n你总是喜欢很多东西，Skate并不是你唯一喜欢的。而至少在当时，你还并没有懂得如何去准备，或者说并不想努力地成为一个刷子。你买了电脑，那是以课程的上机和作业的方便为借口向父亲要来的。当然你其实明白，并且你的父亲也明白，这样一个玩艺儿并不会被拿来作什么正经用途，除了虚伪地放上几个学习相关的东西并且永远不去碰它直到下次删除以外，剩下的必然只是终日的联网消磨时光。于是你便开始如此理所当然的离开Skate，并且将那张浅浅黄的卡片遗忘在抽屉之中。你偶尔也会去SecondHand版求购刷鞋，然后放着等积灰以后加价卖掉，理由不外乎是太大或者太小，当然这些理由通常确实是真的，但更重要的，还是你并不知道，如何学习融入一群陌生人。\n时光便是这样匆匆的流过，园子里的角落渐渐把你熟悉，枝头的鸟儿一批批地南迁，银杏叶由绿变黄，一片片地飞落于地上，毫不留恋地弃枝头而去，留下光禿而灰黑的树干枝丫。然而甚至是这些，那时的你也并没有在意，而只是沉迷于显示器前漠然的眼神。你偶尔也会因为寒冷，而注意到时光的流逝，可是你也仿佛已经完全忘却了那张浅浅黄的存在，甚至连偶尔的想起也不复存在。\n但你其实明白，你是不会忘记的。你只是缺乏一个契机，缺乏一个能让你能准备好接受改变的时刻。就像大多数时候生活的轨迹的改变，往往只是事后看来并不怎么重要的小小事件，就像每个人都经历过的那样。\n于是在去年的今日，那一个本应是很平常的晚上，你对无边的枪炮声开始感到厌倦。你并不知道自己应该干什么，但是寻求改变的种子已经在过去的很多个日子里渐渐地积累了起来。虽然你自己并未察觉，可是你其实已经准备好了。在百无聊赖中你想起了 Skate.bdwm.net，那个印在浅浅黄卡片上的一串 URL，于是你决定去看看。\n你是幸运的，并且你将为当时的举动永远地感到庆幸。在八点四十的时候你看到当晚九点的活动通告。你知道自己想去，并且立刻便起身穿戴停当，踩着刷鞋，步履不稳地走向CC。你是个并不会顾虑太多的人，于是便跟着那么多人一起出发，第一次穿上单排刷鞋，就开始了自己的长途马刷。而你之前的所有经验，只限于初中为止的双排滚轴溜冰场而已。你并不知道路途有多么漫长，于是便更显得无畏。而无论如何，那次你坚持到了最后，跟着大家一起去了北展，去了天安门，去了三里屯，你还认了两个师父，这让你对Skate有了更多的归属感。你以后经历过了无数的马刷，单独的，集体的，可是再没有那次那样刻骨铭心。\n那一夜是2003.12.5的晚上。\n你正式成为了一个刷子。\n一年的时间总是很快会过去，无论是怎样的桃红柳绿花开花落。你与时间一样在一点一点的改变，你跟着你的两个师傅去 FB，去K歌，你结识的人越来越多，你开始习惯于半夜的活动和白天的沉睡。你可以告诉别人你是 vivivivi 和 PPL 的徒弟，而后你自己的名字也渐渐开始变得为人所熟悉。你开始学习进阶的刷刷技术，虽然那些在现在看来还是有些简单。你开始体会到欢乐并渐渐地一发不可收拾。你知道世界在变得闪光，虽然有很多时候你依然要为刷刷以外的事情费上很多时间。\n其实你明白，如果不是刷刷，那段日子对你而言本不是快乐的。渐渐地同别的刷子们熟了，你也便发现别人其实也是如此，每个人都有自己的故事，有自己的旧欢惆怅，自己的困顿沉吟。然而当大家在一起的时候，只需要一人一点热情的付出，就会点燃像火炬一般的欢乐，让每个人觉得温暖。那是哭的日子，也是笑的日子。再苦的酒也会让人沉醉，再悲伤的情感也会因为尽情的释放而变得浓烈动人。刷刷究竟在多大程度上改变了你？这是个难于回答的问题，但是你知道，这种改变必然强烈而持久。你以前从未如此习惯于熬夜做事，从未如此习惯于和半生不熟的朋友们腐败聊天，从未如此强烈的接受别人对你言谈和处事方式的影响，从未如此自然地觉得自己融洽地归属于北大的某个学生群体。可是现在，一切都是那么的自然，仿佛除了这样，便别无选择一般。\n然后便又是一年离别的日子的到来。奇怪的是你并没有被那弥漫的情绪感染，也许这并不奇怪，你早已习惯了别人的离去。你只是静静地看着别人哭，看着别人笑。你能体会别人的悲伤，却不会同样的感到悲伤。但是你依然会感到伤感，你知道自己将作些改变，你要开始一些转变，以适应那些可爱的人儿的离开。\n于是你开始学习平花，你开始向一个沉迷于刷刷本身而非之外的事物的刷子进发。你开始整夜整夜地练习，独自一人或者是很多人一起。你还参加了比赛，然后你曾经也想着离去，却最终还是回到了Skate。你开始愿意为Skate做事，就像很久以前你见到的那些明亮的笑容一样。你开始努力向他们靠近，做你能够做的事情，虽然有时候甚至很难做到差强人意，直到现在。\n在即将到来的日子里你仍然会常常去CC，但是你终究要渐渐远离，直至消失。你明白这一点并且无可奈何。可是你已经为CC所改变，永远不会再回到过去。CC有它自身独特的性格和灵魂，同你相互影响，相互纠结。你的生命里有CC的烙印，正如你也在CC留下了你的印记一样。\n然而人生便是如此地无法琢磨，你永远无法去考量生活的机会成本。倘若你不在这里，在另一个时空的你是否还是会如此快乐，或者是如此伤心。相遇和离别，是生命中的偶然，却也是必然。你常常会迷惑于那因缘际会背后的风云流转，那让你觉得神秘和无力，觉得不知所措。那么多刷子们在你的生命里留下了或深或浅的印记，有些成为挚友，有些只是过客。一个种子可以长成参天大树，一次相遇可以衍生成一个悲欣交织的故事，事前既无从预期，事后亦无可挽留。所谓命运，大概便是如此。而无论如何生活是如当下一样演绎的，你满怀感激于你能遇到的所有的人，他们是你的一切。\n我企图想像并描写一场魔杖下华丽的演出与落幕，可最后毕竟只能写成这样。\n谢谢大家。\n","categories":["文艺青年"],"tags":["一周年","回忆","轮滑"]},{"title":"故园（旧文重拾）","url":"//that-lan/","content":" （旧文重拾）\n（一）\n5月11日夜，在flami相陪下，偶回CC遇见刘欢、孙伟奇、任妍等——认识了几个新朋友——约我写一份过去任ROSS会长时的东西，大约是任时协会概况、事务之类的事情。我当时推辞了，理由大约也是我早已写不出东西来，那么多年那么多事以后，我也已经忘却了那时的很多细节。但是，在那晚通宵的四人闲谈之后，在清晨的路上阳光勾起了很多过去的回忆之后，在我重读完自己当年入刷一周年时写下的文字后，现在，我还是坐了下来，安静地开始写。\n写这篇文字的理由，和那时依然是一样的，——“你本是想就让这些日子这样悄悄的继续流过，可因为同样的理由，还是想写下一些东西。以便将来，无论是继续呆着还是早已离开，还能有些东西让你回忆起那些明灭的温暖的灯光与那么多可爱的人。就像是现在的你，偶尔地整理过去的东西，而于幸运之中发现曾经写下的以为早已消失的青涩的文字，总会重新细细的读，度过温暖的一天。”——我依然觉得自己写不出那些细节，但这其实并不重要，我要记下的，其实只是自己的回忆。\n我将强迫自己完成这篇文字，无论要花费多长时间，作为致旧友与新友的一份迟到了数年的礼物，也作为我找回曾经失去的旧友心愿的其中一步。我不知道这篇又要到什么时候才能写完，但至少已经开始。现在是09年5月13日午后2点34分，我坐在教室里，以我的方式来尽力找回过去。\n我的各奔东西的skate的朋友们，我终于敢鼓起勇气，满面尘土地回来了。我想找回过去的旧友，那些最为绚烂的年代中最亲的CC一家人。无论过去我曾多么令你们失望，还是希望你们，能原谅我的稚气固执暴躁与不辞而别，还是希望你们，依然愿意是我的家人。\n（二）\n那些日子已成了泛黄照片般的记忆，破碎到你不忍心再去碰它。你在无数个黑夜里感到害怕，你害怕回忆起那些，你害怕着一旦触碰便会消散，再无踪影，宁可把它细细珍藏于心底，任其积上金色的温暖的尘埃。你当然知道这是为什么，你害怕那些绚烂辉煌与你的当下联系起来，那时的日子太过旖丽，遥远到变得仿佛不再真实。正因为如此，更不敢触碰，你深知那些遗失的美好，如女子晶莹的泪，会刺痛你的内心。当你试图开始回忆，便不得不陷入嗫嚅，陷入无边的乏力感之中。而总会有某些地方，突然地让你心悸到落下泪来，那些痛，是真真正正的，物理上的痛。你惧怕于这些疼痛，那是对自己的恐惧，你，并不相信自己。\n但是你终于发现，那一切只是因为你的懦弱。旧友的渺茫的行踪，仿佛往事在褪色的素笺上，淡忘的却只是你自己的心。于是，尽管你依然不擅于带着那种温和的语气，一点一点平静而深沉地叙述过去，平静的眼睛里看出过去的点点滴滴，尽管你依然失语在真正想说话的时刻，喉咙像被碎石堵住的玻璃颈口，然而，这一次你不再犹豫于是否述说。你曾经年少无知，而后变得青涩，再后变得困顿而疲乏，眼中一度失去了世界的色彩，但是这一次你不再迟疑。过去有意义，是因为当下的继续，你决定面对自己的回忆，并尽力去找回。对你而言，刷刷从来不是一件任务，不是一样娱乐，不是一种心情，它渗透在你的生活的一切细节之中。当刷刷曾经成为过你的生活本身时，你永远无法从身体中剥离出来。不是因为痛疼，而是因为，它就融化在你的生命里，无论你是否觉得自己已经忘却或者封存，其实，一切都还在那里。\n（三）\n我还能回想起来的，大约都是一些大致的事情。我不会再为他们排好时间的次序，那对我而言已经过于艰难了。然而我想我还记得，尽管回忆中的一张张画面也许已经破碎不堪，可是总能将它们补缀起来。我将叙述我记忆中的真实，尽管，它也许未必是完全的事实。\n幸运的是，因为着个人文集和版面保留文章的存在，我还是能找到一些过去的文字，这使得回忆变得简单了不少。对于协会成立最初的日子，以及更早之前的日子，有小贝曾写下的文字，《刷协以前的日子》，在我的个人文集x-4-1里还有收藏。\n他写到了04年2月21号，那我，就从这里开始续写吧。\n（四）\n那时你依然是个懵懂的新人，单纯享受于skate带来的欢乐。然而对于一个社团来说，那是一个快速的上升期。因非典而奠定的极为广泛的群众基础，让北大轮滑开始展现出它无与伦比的魅力与辉煌。当你还跟着两个师父还有一群即将毕业的刷子们进行着骊歌式的疯狂腐败并醉心于此时，CC正在进行着又一轮新老交替的轮回。即使是你自己，也是这轮回中的一员，只是当时，并不自觉而已。\n多年以后，当你现在坐在这里，依然觉得那时的时光是最醉人的。CC的每一个人每一代人，倘若沉浸进去，总会有自己难以忘怀的最美时光。也许你的与他们的并不完全一致，但是，每个人都会以自己的方式来融入这个群体并接受别人对你生活的影响。每个人都强烈地改变着自己并且相互改变着对方。一切都是那么的自然，仿佛除了这样，便别无选择一般。那时你们喜欢别人称呼你们的id，仿佛那才是真正的自己，而名字，反像是一层厚厚的面具，在skate被众人抛弃。这是一个最不需要心机与防备的地方，每个人因着id而更为真实与坦诚。\n但是再浓烈的美酒，也有甘甜味尽之时；再华美的宴席，也有宾朋散去时；再是不舍的骊歌，也有曲终之时。你记得每一次K歌之时，那些人笑着笑着，便生生地落下泪来；你记得每一次马刷后回校时，总有人希望慢一点，再慢一点；你记得每一次CC倘若聚了几人，便会有短信飞向各处，召来更多的刷子，回去的时间，也越来越晚，通宵西瓜与聊天的次数，却越来越多。你记得一切细节，一切细节你都记得。而你却宁愿淡化那些，仅以华美的辞藻来浮浅地描述。你知道那一切不忍卒读，更不愿那一切被文字玷污。\n终于，曲终。\n（五）\n我已经完全忘了自己是从何时开始练习平花的，大约就是那年的暑假，我本要去参加一个支教项目，因而呆在了学校，然而项目却因为意外而中止，于是，便有了足够的时间去练习平花。那时已经有很多的老刷子各奔东西，有些因着还没开始工作，于是还暂留着在学校。\n每个人初练平花时都有过一段疯狂的时间，我也不例外。那时买了一双旋风一号，因着之前的几月到处马刷的基础，顺风顺水地练了起来。因为着平花，我熟悉了很多同在CC却原本并不能算熟悉的人，最后却成了可以肆无忌惮相处的好友。真的，当你们都热爱一样东西到丧心病狂时，什么客套礼仪辈份，都仿佛成了虚伪。\n那时我大概第一次接触到了协会的概念。因着skate特殊的历史原因，在异常庞大的轮滑群体后，却只有一个瘦小到几乎不能察觉的小小协会。这些原因，你们都知道，我不再细说，然而同样是这些原因，在以后的很长一段时间内，在无形地影响着整个社团的发展。\n然后便是军训。是的，那时我还大一。军训之后，我只有十天的时间来准备一个轮滑比赛。9.11，我还记得那个比赛的日期。当时并不知道，这会是我唯一正式参加过的轮滑比赛。无论如何，我尽力了。之后，我需要一些时间养伤休息调整，便短暂地离开了skate。\n（六）\n在封存你的刷鞋以后，你仿佛离开了skate。可是，这却是一种血统，在身体里流动。当你第二次又看见轮滑协会在农园前面招新时，你还是停下了脚步。去年的浅浅黄的会员卡，还依然呆在你书桌上伸手可及的地方。你知道自己不愿离开，或者说，你根本就未曾离开。\n你看着那些孩子认真的笑脸与努力的叫喊，看着他们踩着轮子穿行于人群间向每一个人分发传单，看着新会员加入时的他们兴奋与欢迎，看着他们坐于台阶上擦拭着额头的汗水，看着他们最后收拾东西时的落寞眼神，看着他们离去时的疲惫身影，你想起了曾经的那些明亮的笑容，你想起了初去CC时金黄的台阶与陌生而热情的问候……\n你终于明白，这里，是你的家。\n你开始愿意为Skate做事，就像很久以前你见到的那些明亮的笑容一样。你开始努力向他们靠近，做你能够做的事情，你决意坚持到最后。\n（七）\n我能想起的第一件耗费了时间与脑力去设计的事情便是色标制度。我很高兴这个制度能延续到现在，并一直在不断改进与完善。\n看起来似乎比较简单明了的色标制度，在建立之初还是颇费了一翻周折与讨论。当时还是马刷兴盛的年代，我们便以此为基础，来设计这一切。我们曾讨论过以什么样的形式来代表级别，一说颜色，一说形状，一说数量，我们也讨论过分多少级，我们更讨论过如何区分水平。\n最后，基本的框架在欢乐声中确定下来。我们确定了三级制度，避免无休止的RPG式升级；我们决定以不同的颜色和统一的形状来表示级别，我们决定使用背胶贴纸制标，贴于每双鞋的鞋刀上，无论远近都易于分辨；我们确定了考核的方式与成绩的限定，以确认水平而不鼓励极限为准；我们又出于私心，设计了第四级蓝标，来奖励协会自己的孩子们。\n最后，我们实测了几个项目能达到的成绩，制定了一个宽松的标准。黄标原器，现在还在美国读书。这个标准虽然后来遭到了应试之法的侮辱，但是后话。\n第一代的标志，是翅膀。用的是交通用贴纸，数年不会褪色。当贴满四张时，色彩令人目眩。可惜，我已忘了是谁设计的了。\n第二代，是ROSS的四个文字，每帖一个，便是一级。XhuhuX设计了它。然而因为形状复杂，适应不了所有的刀架，而最终只能昙花一现，回到第一代标志上。\n之后，我便不知道了。\n第二件事情，是北戴河的旅游。\n轮滑社之前没有以社团的名义组织过出游，关于出游本身也遭遇了很大的争论。大致归结于两方，一是体育类的社团，自应有体育类的相关项目活动，而不应该学习其它社团的方式，另一方面，则认为，无论什么样的形式，总要提供一个让新人易于融入的机会。\n那时，恰逢北戴河举办全国轮滑邀请赛，以及一系列公众娱乐活动，并不完满地统一了这两方面的争议。因为是第一次活动，而格外正式地预先了一个多月开始准备。我们分两步完成了人员的统计与组织，我们花了两周多来寻找合适的地方，虽然，最后还是因为小贝的班级春游而找到了渤海宾馆。我们花了一星期来最终反复论证行程，反复叮嘱大家。我们欣喜于最后成行的人数，我们沉醉于北戴河的美景，我们疯狂于轮滑节的隆重。那么多的共同付出以后，终得成行。\n至此，春游，甚至几乎就是北戴河春游，也成了ROSS的一个固定活动。这个活动对于社团而言是促进或者是伤害，难有定论。但至少，因为着这个活动，确实有更多的人留了下来。\n第三件事情，是一直有心却没能完成的，资源库的建立。我使用会费购买了一块硬盘，并开启了FTP服务，放上了足够的轮滑视频，仿佛一切都变得很完美。但是，问题是，那里面没有我们自己的足迹，没有我们自己的呼喊，没有我们自己的喜怒哀乐，直到我离开时，这一切也没有完成。\n其它的，还有一些琐碎的事情。比如TerryFox义跑，对我们而言，便是义刷；比如常规的轮滑鞋的团购——幸运地因为着xfox的轮滑器材店，这一点变得极为简单——比如央视来时的某个献演节目；比如与其它学校社团的偶尔的交流活动；这一切都太简单了，早已模糊不清，就此停笔吧。\n（八）\n在你还单纯地沉迷于轮滑本身时，你从末想过做一件看似简单的事情也可以如此困难。那时你还太年青，不懂得妥协与坚强，不懂得期望也可以伤害别人与自己。你跟着那时的会长完成了初步协会的对内建设后，自己开始成为会长带领着走向前方，尽管，你自己也还是个孩子。\n那时你满心美好的愿景，构筑着轮滑社张扬的未来，而后尝到了事实的无情。有些事情你依然无法在这些文字里述说，然而你终于明白，那些明亮背后的困顿。你终于明白轮滑社的成立并不全是爱，却也有着并不相衡的无奈。作为一个爱好者，你自然很清楚你们的水准，无需指摘，你也清楚老手对新手的爱护和指导有多么的细致入微。\n可是有些人并不明白，也不屑于去明白。\n在几次挫折以后你终于无奈地接受了一切。你至今还记着你在走出办公楼门口时心底的悲凉，记得那时的风，记得那时，仰着头，模糊的眼，雾气氤氲。\n你开始收敛于内心，开始重新审视你的责任与期望。你又一次回忆起那些明亮的笑容，你想起一直在不断试图向他们靠拢，也越发地理解他们的坚强。你终于明白，你要做的，不是张扬，不是讨好，而是去保护那些笑容，那些才是你真正的财富，才是你真正的责任所在。\n你放弃了一个正统的期望，而是尽力地去维护那些快乐，并收获了更多。你明白为什么skate是如此的令人迷恋，明白了为什么那么多人，即使已经离开很多年，却依然忘不了这里的原因。\n能做自己，便是幸福。\n你开始推托那些无聊的邀请，开始尽力脱出义务的束缚。你决定保护并且等待，你决定尽力独自完成所有不得不完成的事情，将这些快乐与自由维续下去，直到有一天，也许你已不在，但会有更多的人，有足够的人，终于能大声喊出他们的梦想与憧憬，讲述他们的泪水与委曲。而且那时，再不会有那些无奈的束缚。你希望看见孩子们快乐的笑颜，就如当年他们看见你的笑颜。\n你知道，你是会长，你可以骄傲地带领着往前走，即使，那不是所谓正道。\n（九）\n我的所有日子就此结束了，因为一些意外我突然地结束了任期。风林不得不临时而毫无准备地接过这份责任，继续走下去。我知道他其实做得很好，只是他自己不满意。\n回读前文，确实没写什么实际的东西。也许，负了你们的期望。然而我写得很累，有些事情我知道但我不想说，那些事情早已过去；有些东西我以前不知道，现在知道了，可也不知道该怎么说；还有些东西，我已忘了怎么说。\n然而请明白，能述说的是因为骄傲，不能述说的，也是因为骄傲。\n（终）\n人生是如此地无法琢磨，你永远无法去考量生活的机会成本。倘若你不在这里，在另一个时空的你是否还是会如此快乐，或者是如此伤心。相遇和离别，是生命中的偶然，却也是必然。你常常会迷惑于那因缘际会背后的风云流转，那让你觉得神秘和无力，觉得不知所措。那么多刷子们在你的生命里留下了或深或浅的印记，有些成为挚友，有些只是过客。一个种子可以长成参天大树，一次相遇可以衍生成一个悲欣交织的故事，事前既无从预期，事后亦无可挽留。所谓命运，大概便是如此。而无论如何生活是如当下一样演绎的，你满怀感激于你能遇到的所有的人，他们是你的一切。\n一代人都有一代人难以忘怀到痛苦的日子。当你终于回到CC，看到每一块砖都健在时，当你骄傲地向新的孩子感叹与夸耀当年的璀灿绚烂时，其实你明白，他们必然也会有他们不忍正视的美丽，独属于他们自己。也许经历与你的并不相同，可是在心灵深处，柔软的地方，有些东西，永远是一样的。他们从他们的师父那里继承了刷刷的技术，也原封不动地继承了对刷刷，对刷版的热爱，就像你的当年。\n他们憧憬的未来，正是你们留恋的过去。\nCC一家人。\n（补）\n这篇文字断断续续，终于在5月14号17点27分写完。\n生活中的琐碎，总是会把人生生地卡在那里。\n五年了，我的文字只有倒退，一点长进也没有。\n然而，感谢你们能读完。\n","categories":["文艺青年"],"tags":["回忆","轮滑","五年半","故园"]},{"title":"Tomorrow is another day（旧文重拾）","url":"//tomorrowday-in-highschool/","content":"（旧文重拾•高一之作）\n东方的天空微微地泛出一丝鱼肚白。太阳吝啬地把清雾般的白光投进宿舍里来。寝室里仿佛充满着梦境般的雪白的烟。在这梦幻般的烟雾之中，依稀可以看清寝室里的模样……\n窗玻璃上凝结着一帘挤得齐齐的晶莹的水珠，这正是玻璃夹杂在寒冷与温暖之间而流出的痛苦的眼泪。窗台上排着很多东西：中间是一只老式的带日历闹钟，因为昨晚难得一次上紧了发条，所以现在正在卖力地走着；左边是装了半杯水的一只水杯和几本书，右边还是半杯水的水杯和几本书——只不过多了副眼镜。地上爬满了似蛇一样的电线，各自伸向一只只收音机。空中也张满了电线，上面晾着一双双昨晚换下而没来得及洗的臭袜子。正如五线谱般的停着小鸟的高架输电线——所不同的是，小鸟音符是在线上面的，而臭袜音符则是在线下面的。与窗户相对的门边的一片狼籍的桌子。共计有半块渍水的饼干、一碗漂着凝固的油星的方便面的汤、两只可乐罐和几十只果冻壳。整个寝室弥漫着一股袜子发出的臭味与墙角橱旁的垃圾篓里发出的酸味的混合气味，伴随着六个寝室主人的若有若无的眠鼾声……\n突然，整个宿舍楼的广播一如既往地准时响起了那刺耳的闹铃声，接着大大小小的闹铃都仿佛大梦初醒般大叫起来。一时间，寝室里充满了喧嚣，有沙哑的钟声，有尖锐的哔哔声，也有“懒虫起床”的叫声，唯有那卖力地走的老式闹钟，还在不声不响地爬着，以显其身份的尊贵典雅。\n于是六个人中的五个便像沉睡五千年的古埃及法老王一般苏醒过来，不约而同地揉揉红肿的眼睛，然后再不约而同地看看闹钟，接着不约而同地大叫：“要迟到了！”最后再不约而同地穿好衣服，冲出寝室去洗脸刷牙——正如长久以来的习惯。\n五个法老王洗刷完毕，陆续回到寝室。像往常一样，拉掉唯一还睡着的小宇的被子，然后把他扔到地上。于是小宇也醒了，同样地揉揉红肿的眼睛，同样地望望他的那只心爱的老式闹钟。然而小宇一般是不大叫的，只是平静地说：“又迟到了。”偶尔叫一次，也与众不同：“神了，居然这么早！”然后不管早也好迟也好，慢悠悠地穿好衣服，再踱着老人步慢慢地去洗漱一番。\n待小宇洗刷完毕回到寝室，五个法老王早已出发吃早点去了。小宇理好代替书包的一只旅行包，然后楞楞地看着闹钟发呆，半晌，忽地冒出一句：“今天26号了啊。”这才发现时间已决不允许他再有机会吃早饭了。于是他从抽屉里抓起早已预备好的一箱饼干果品“军火库”中的一包“超光速”牌饼干，一路小跑奔向教室。\n就在迟到的极限时刻的前30秒，小宇及时地冲进了教室，填满了教室里倒数第二排那个唯一还空着的位子。管纪律的值周班长看看小宇，又看看教室后面的那只壁钟，又看看小宇。正好看见小宇正对着自己挤眉弄眼地笑着，于是老大不高兴地把早已写好的扣分表“迟到”栏里小宇的名字给划去了。却总觉得心有不甘，于是再一次看了看小宇，却刚好看见小宇从包里拿出一包饼干大口嚼起来。于是把小宇的名字重新写在扣分表上，只不过罪名由“早自修迟到”变成了“早自修吃东西”，约莫估计扣起分来也差不多了，这才心满意足地开始朗读起课文来。\n小宇可管不了这么多了。他正在咀嚼着与早饭处于同等地位的那包饼干，却发现这饼干的牌子确实名符其实——根据爱因斯坦相对论的观点，物体运动速度越快，时间变得越慢；当物体达到光速时，时间将停止前进。由此推出如果一旦超过光速，那时间就会倒退。小宇对这些希奇古怪的也许连下辈子也用不上的也根本无从感受的东西极度爱好，为此从小就被老师们教训，质问他哪里有这种事，纯粹是在宣扬封建迷信思想。现在他总算是实在在地感受到了相对论效应，因为做好的大半饼干已经倒退回到了做好以前的状态——面粉状态。小宇没想到自己苦思大半生而无从解决的问题现在却只牺牲了一餐早饭便真实地感到了答案的存在，真不知是该哭还是该笑。不过有一点可以肯定：饼干和面粉虽然化学成分相同，但饼干能吃，面粉是断然吃不得的。小宇只好极心痛地把相对论饼干进了垃圾筒，再像动物园里的狮子望着隔壁笼子里的那只肥硕的山羊一般痛苦地最后望一下已不能再做早餐的饼干牌面粉，然后失望地回到座位上。\n这时小宇再一次开始真切地感受到西方神话中那个把睡粉吹到人的鼻子里让人睡觉并以此为乐的人的化学水平的高超绝伦。于是小宇偷偷地瞅瞅四周，然后趴在桌上想把昨晚残余的那些睡粉消化掉。却没料到平常一般在这个时候，班主任总是要来溜一圈的，今天自然也不例外。人们常说人要为自己所犯的错误付出代价。为了这个错误，小宇付出的代价是不得不顶着十月底的寒风在教室外彻底清醒一个早自修，直到上课才被允许进入教室。\n上课铃响了。就在走进教室的前一秒，小宇心里还十分敬佩，心想班主任真的堪比诸葛亮，知人善任。自己在外面站了半天，虽然给冷风吹得鼻涕横流，瞌睡到底是醒了，也许是鼻中残留的睡粉已被鼻涕冲走了。——这可真有点《长江之歌》里的那句“巨浪荡涤着尘埃”的味道了。进了开着暖空调的教室，小宇才发现原来班主任别的没学，诸葛亮错看马谡的本领倒学来了。寒冷不过降低了睡粉的活泼性罢了。一走进教室，睡粉反而更加活泼了。小宇只觉得睡浪一阵高过一阵，又想诸葛亮错看马谡因而失了街亭，班主任错看睡粉总也得失去点什么吧！况且马谡怎么说也自我夸耀了一番，而自己可是一句话也没说啊！想着想着，便开始大梦周公了。任课老师皱了皱眉，继续讲课。\n如此昏昏沉沉地过了一上午。其间，小宇也曾确想好好听几节课，为此还特意跑到厕所里冒着被别人当傻瓜的危险用冷水冲了一个头。却没有料到睡粉的威力如此强大，不一会儿，小宇的水冲后粘在一起的头发便像的把扫帚似地盖在了课本上……\n终于挨到了中午放学时间。小宇刚想冲到食堂填满空了一上午的肚子，却被班主任给叫住了，问小宇说你平常晚上什么时候睡觉。小宇含糊地回答说当他躺在床上一看见月亮就睡觉。班主任一楞，心想这也不算迟啊！又因为自己的肚子也实在饿得慌，见抓不住什么把柄，就让小宇去吃饭了，却没料到小宇的寝室那扇小小的窗户是向南开的，而小宇的床却是在东边的，更要命的是小宇睡觉时头是放在床的靠近窗户的那一端的，所以当小宇一看到月亮，就已是后半夜了，更何况小宇又没说阴天没月亮怎么办。\n小宇回答完班主任的审问，三步并作两步地跑到食堂，却发现“军机”已被延误：买菜的队伍已经拉得老长了。再加这时睡粉又开始发挥残余的影响，所以小宇觉得还是去寝室先睡一觉再来吃饭比较合适。于是便去睡了。\n一觉醒来，却发现还有十分钟就要上课了。食堂里饭菜自然不会再卖了，所以还是再拿一包饼干，一路小跑进入教室。然后又开始大嚼起来。值周班长于是又心满意足地把“午自修吃东西”的罪名加在了扣分簿上小宇的大名后的一长串“上课睡觉”的字眼之后。饼干倒不是面粉状的了，只不过味道与价格都实在不敢恭维——价格高得离谱，味道也差得离谱。\n中午的一段高质量的睡眠把剩余的睡粉全部吸收干净了，所以小宇下午上课精神特别饱满。班主任花了一个中午时间破译了小宇睡午觉前随口留下的密语，正怒气冲冲地想教训小宇一顿。看见小宇上课如此认真，虽然罕见，想想还是饶了他算了。却不知道这一节课的认真是牺牲午饭换来的。\n小宇可不知道自己躲过了多大一场灾难。这节正是语文课，讲的是鲁迅的《记念刘和珍君》。小宇正在默背课文，忽地发现鲁迅写的这句话“我不知道这样的世界，何时是一个尽头。”相当地万能。可以拿来形容一切不顺人意的事情。小宇于是兴奋异常，立刻摸出一本抄满诗词的本子记了下来。又觉意犹未尽，又陆续找出了很多句子。由此得出结论：鲁迅的文章是要一句句拆开来读的。\n终于到了晚饭时间，小宇吃上了一天来的第一顿饭。\n经过了三个钟头夜自修的睡眠，小宇彻底恢复了精神与体力。小宇是一个彻底的无可救药的夜猫子。当淡黄的月亮轻快地爬上东边高楼的楼顶，俯视着一个个疲惫的身影从夜自修教室步履蹒跚地出来时，正是小宇最兴奋的时候。寝室里他在熄灯前花了半个钟头做完了所有的作业，然后急忙拿出厚厚的一本小说，书名是《飘》。最近小宇正开始对小说逐渐感兴趣起来，每晚必读四个钟头以上的小说书。这本《飘》已被小宇攻灭了八百多页，还剩下最后二百多页。小宇打算在今晚读完它。于是小宇便从床下拿出一只充了一整天电的矿灯，放在床上，用棉被盖住，然后把头钻进去看书了……\n很长时间以后，当小宇看完小说的最后一句，当命运乖戾的斯佳丽忍受着极度的痛苦而说出那句传世名句：”Tomorrow is another day.”时，小宇发现月亮悄悄出现在了窗前。皎洁的月光照在小宇的脸上，显出一副若有所悟的样子——\n“是的，明天又是一天。”\nTomorrow is another day.\n后记：\n小宇不是一个学生。我是说：”小宇不是一个学生。”当然，我不能说小宇代表了所有的高中生，甚至连说他代表了一部分中学生也不能，但至少，小宇是一小群学生的缩影。日子写的也只是一天，却同样有很多天的影子。小宇是一个实实在在的人，是一个学生——尽管可能不算是一个“好学生”。他有自己的爱好，有自己的生活习惯，但正因他的特殊，却不能很好地适应集体与社会，这也算是那一小群人的感受吧。\n","categories":["文艺青年"],"tags":["住校","作文","高一"]},{"title":"魔兽世界历代 CG 及翻译一览。","url":"//wow-cg-chronicles/","content":"熊猫人之迷：国服这次翻译实在是屌暴了～网友蛋疼二次翻译版……\n\n操吴戈兮缘为何，秋叶落兮为之过，唯天性兮不可夺，问天公兮解之惑\n\n国服：熊猫人之迷\n\n战火为何而燃秋叶为何而落天性不可夺吾辈心中亦有惑\n怒拳为谁握护国安邦惩奸恶道法自然除心魔战无休而惑不息吾辈何以为战\n\n台服：潘达利亚之迷\n\n世人何以征戰不休秋葉何以凋零飄落天性使然也許可以找到更好的理由\n我族因何而戰保衛家園護親人守衛平衡創和諧對我們而言真正的問題是什麼才值得一戰\n\n美服：Mist of Pandaria\n\nTo ask why we fightis to ask why the leaves fallit is in the natureperhaps there is a better question\nWhy do we fightto protect home and familyto preserve balance and bring harmonyfor my kindthe true question is what is worth fighting for\n\n","categories":["游戏中心"],"tags":["CG 视频","台服","台词","对比","熊猫人之迷","魔兽世界"]},{"title":"秋","url":"//when-the-leaves-fall/","content":"\n你知道自己并不如认为的那样文思泉涌，你知道你需要花很多时间去捕捉那些稍纵即逝的心心念念，但是你还是希望，若已落笔，终有完结。\n\n","categories":["默认分类"]},{"title":"后来倒闭了……","url":"//then-it-bankrupted/","content":"小时候，每当过生日那天，就打理得干干净净，然后去一个影楼照一张周岁纪念照。按年分，开开一周岁，开开两周岁，开开三周岁，开开四周岁，开开五周岁……\n后来，这影楼倒闭了……\n所以没有六周岁的了……\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n小时候，是像女孩子一样留长头发的，因为素不喜欢楼下的理发店，手劲特别大，大人不觉得什么，可我孩子一个，总是疼得被弄哭。大人们老是以为我是不喜欢理发，于是也就由着我。\n只有当过生日时，会去一家国营大理发店理发。而且也总是同一个老大爷理发师给我理发，粗着嗓门，特别和善。把我从一个小女孩弄回小男孩。然后开开心心去照生日照。\n在孩子的世界里，全世界只有两家理发店，那家是地狱，这家便是天堂。\n后来天堂倒闭了……\n当然，地狱后来也倒闭了……\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n然后长大一些了，喜欢看书。那时有一家“孔乙己書屋”，特别合我的口味，本本书都是我爱看的。我现在家中一成的书，都是那里买来的。因为志趣相投，还和老板成了朋友，于是就有了免费看书的机会。每天早早起来，就跑去看书，直到中午老爹来找我。如此過了很幸福的一段時光。\n后来书店倒闭了……\n都叫孔乙己了，能不倒闭么……\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n再后来，喜欢上了游戏机房与网吧，为避免各种内鬼告密、校方查抄，基本都是在全市的各种居民区黑网吧黑机房打游击。各点还有专门暗号，只有经过加 V 认证的小伙伴才会获准由“老手”带他们去的资格，很不幸，我就是那个制定加 V 方案的小兔崽子。靠着这种实名 SNS 方案，几个核心小伙伴过了很长一段时间无法无天的逍遥岁月。\n后来，全国都在闹电子海洛因的事，我们去的几十家，统统倒闭了……\n直接一个行业就毁灭了……\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n（未完待续，待续即是不续）\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n所以，现在我做着一份还算喜欢有所成长的工作，领着还能养活自己和捡来的流浪小猫买来的长不大小鼠的工资，可是心里总是很忐忑……\n","categories":["二逼青年"],"tags":["倒闭了","后来"]},{"title":"Favicon.ico 添加","url":"//add-a-favicon/","content":"最默认的设置，没玩什么花。\n一分钟完成，这次没有遇到任何意外。\n一般都认为，考虑到最大的兼容性，favicon.ico 最好使用 16×16 分辨率，以最大程度地提供兼容性。但实际上即使在 IE6 下，使用 32×32 图标也没有任何问题。在需要小图标场合的时候会自动调整大小。而放在桌面上等情况也会自动使用相应大小，我甚至在想是不是要用 256×256，或者更考究点的多层图标……\n.ico 并非是个统一标准的格式，多种实际不同的格式定义都被命名为.ico，跟平台有关。这点与 .jpg、.png、.gif 之流不一样。不过实际使用时问题不大，通常不会直接对 .ico 文件进行编辑，都是 .bmp 编辑完成以后再通过特定平台下的工具转成所需的 .ico 文件。以前需要知道转换可能会造成颜色失真，因为当时 Win 下的图标文件最多只支持 256 色，如果从漂亮的真彩色图片直接转过去很可能贼难看。不过现在图标也支持真彩色了，所以连这个问题也不存在了，更新一下转换软件就放心用吧。Win 7 还支持使用 PNG 作为文件夹图标。\nMac OSX 和 iOS 下也一样，App 们已经直接使用 .png 作为图标，更不存在这个问题。\n浏览器也可以通过代码定义特定图片为图标，Firefox 甚至还支持定义 Gif 动画图标。\n理论上随便玩。\nSo，问题出来了，当时为何要用专门格式？我猜应该是性能方面的原因吧，不作考证了。\n","categories":["默认分类"],"tags":["favicon","图标"]},{"title":"Kaikai on wheels.","url":"//roll-in-beijing-0928/","content":"The Route of Kaikai’s Free-Skating，2012-09-28，全程 17.5 km，总时略小于 2 小时，包含一段 3km 的折返跑（跑错方向了……），大量闲逛拍照和休息时间。——没有体力一次直接跑完全程。\n减肥良方，体重至少减 1.5kg，到家还累得吃不下东西直接洗洗睡了……不吃就不会反弹，你懂的。\n\n\n\n天安门 \n\n\n天安门广场 \n\n\nOn the Road \n\n\n晚上八九点交通还挺忙，路口等了好一会 \n\n\n快到家了，央视大裤衩 \n\n","categories":["轮滑少年"],"tags":["轮滑","行程记录"]},{"title":"吉原哀歌（吉原ラメント）","url":"//yosihara/","content":"非常有感的一首歌。吉原是日本最古老的红灯区，调调定的就是柳永般的红粉哀歌，MV 首段黑屏文字也提示歌词有性描写……所以，你懂的！\n不过，作为一个外骚内纯的文艺青年，显然我是不会把一曲艳歌挂博客的（放硬盘就可以了），之所以放上来，是觉得，你若能听完，至少也会把它归在“好听的歌”那一类里。而在我这里，这是能归到“洗脑循环反复听”级别的。\n于是来兴趣去查了一下：\n这首歌是 UTAU 制作的电子音乐，如果你知道 Vocaloid 系 初音未来 曾红极一时的江南 Style 甩葱歌，你就知道这歌也是类似的电音合成人声歌曲了。Vocaloid 本就设计为代替人类演唱，以降低音乐制作成本，这为那些无名新人的音乐制作人提供了极大的方便。事实上，在 iTunes 日本商店里，就能购买到原版电子音乐合成唱声版，只要 150 円哦。\niTunes 链接：https://itunes.apple.com/jp/album/yoshiwara-lamento-single/id570906509\n与甩葱歌不同，这首歌是原创歌曲，作者在 MV 里也露了个名：亚绘。而另一位在 MV 里写为小山乃舞世的，则是一位非常技术宅的少女，活跃于动漫网站，至今也只有 19 岁。她一手包办了 MV 的绘画、动画，包办了 UTAU 的电音制作，（事实上 UTAU 的配音也是她……）最后才有了这个神级的 MV。自始至终，两人而已。\n于是万般皆备，唯缺唱腔。相比于漂亮的旋律，唯美的 MV，机器发声的歌词就显得非常单薄了。不过，要知道优秀的东西永远不会被埋没，自从这个 MV 被公布到 niconico 上，便立刻引发了各大牌小牌的翻唱风，终于让它近乎完美。巧合的是，公认最好版本的翻唱者 96 猫，也是个 19 岁少女。\n96 猫 翻唱版\n\n众头牌混音合唱版（ 2 分 45 秒你懂的！）\n\n上歌词：\n\n阴郁天空下 吉原的店家白色提灯点亮 夜幕垂下端坐镜前梳妆 红唇描画有求必应 逆来顺受那朵闪亮 橙红光芒的花我曾如此憧憬 渴望着她不知不觉变成 青蓝的花即便如此 我也并不廉价\n[其实我本想要做一朵 只为你一人独自绽放的花][然而 命运却夺取了我的自由][它的车轮将我无情地碾压]\n明知是充满虚假的恋爱你也要拥抱着我吗逢场作戏的哀伤呀今夜吉原 雨在下这位大人您喜欢的话可否就这样将我买下屋檐外朵朵盛放伞花湿透的我心中 雨在下\n车水马龙行人 各自嬉笑怒骂姐妹互相安慰 轻舔伤疤其实我的心中 只有一个想法有谁能够带我 离开这鸟笼吗\n其实 我早已失去了可以回去的家在这鸟笼里 看到的风景不知何时却成了 我心里唯一的慰藉\n即便这恋爱充满了虚假也一定要这样买下我吗在我身上盛开的花朵啊露珠滴落 如雨下大人请你与我沉醉在这仅限一夜的云雨吧伤痕一道一道刻下心中一曲哀歌 无处洒染上忧郁颜色的花渴望着 枯萎了\n[欢迎光临] \n玩着恋人游戏的那些夜喘息着「啊啊」做回答逢场作戏的哀伤呀今夜吉原 雨在下\n明知是充满虚假的恋爱你也要拥抱着我吗逢场作戏的哀伤呀今夜吉原 雨在下\n这位大人您喜欢的话就请这样将我买下吧屋檐外朵朵盛放伞花湿透的我心中 雨在下\n\n","categories":["动漫边缘"],"tags":["吉原哀歌","MAD","UTAU","96 猫","混音"]},{"title":"Zen Coding 外一篇","url":"//about-that-zen-coding-blo/","content":"博客使用了 Crayon Syntax Highlighter 插件实现代码框的一些高级功能，不光光是 Highlight。这个插件提供了不少自定义功能和数个预置配色方案，如果还不满意，就自己调整源码 css 和 js。\n这也是目前唯一启用的插件。\n关于 Zen Coding：\n其实还有很多没有解决的 Zen Coding 写作问题，比如：\n\n如何写出 &lt;a href&#x3D;”http://kaikai.men/”&gt;&lt;/a&gt; 形式\n\n使用 a:link 可以生成&lt;a href&#x3D;”http:&#x2F;&#x2F;”&gt;&lt;&#x2F;a&gt;，虽然感觉上这个应该可以比较简单地实现，但目前能想到的唯一办法也还是 a[href&#x3D;”http://kaikai.men/\\]。\n\n如何快速生成包含多个不同内容且不能用 $ 通配的形式\n\n比如：\n&lt;table&gt;    &lt;tr&gt;        &lt;td&gt;周一&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;周二&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;周三&lt;/td&gt;    &lt;/tr&gt;&lt;/table\n\n目前实现的 ZC 代码是 table&gt;tr&gt;td{周一}+td{周二}+td{周三}，尝试使用 table&gt;tr&gt;td*3{周一}{周二}{周三} 和 table&gt;tr&gt;td{周一}{周二}{周三}*3 均无法获得想要的效果，不知道还有没有其它的好办法。\n","categories":["代码脚本"],"tags":["Crayon Syntax Highlighter","Zen Coding","attached"]},{"title":"Zen Coding 简易教程（六分钟学 Zen Coding）","url":"//how-to-zen-coding/","content":"读了一遍 Zen Coding 相关内容，写个教程当作给自己的回顾。\n使用的是 Sublime Text 2，安装了 Package Installer 插件与 Zen Coding 插件。Windows&#x2F;MAC 下均使用 Ctrl+Alt+Enter 调出 Koan（即 Zen Coding 的专用输入框）输入需要的内容。有兴趣的还可以去查一下 Koan 的意思，挺有内涵。\n先看下面这段代码：\nhtml&gt;body[FONT-SIZE=12px]&gt;((table[border=1 cellSpacing=0 cellPadding=2]&gt;tbody&gt;(tr&gt;td[rowspan=8]+(td&gt;str)*3)+(tr&gt;td*3)*7)+br)*2+table[border=1 cellSpacing=0 cellPadding=2]&gt;tbody&gt;tr&gt;td*2\n\n这段代码等于下面这段代码：\n&lt;html&gt;\t&lt;body FONT-SIZE=&quot;12px&quot;&gt;\t\t&lt;table border=&quot;1&quot; cellSpacing=&quot;0&quot; cellPadding=&quot;2&quot;&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td rowspan=&quot;8&quot;&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t\t&lt;br&gt;\t\t&lt;table border=&quot;1&quot; cellSpacing=&quot;0&quot; cellPadding=&quot;2&quot;&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td rowspan=&quot;8&quot;&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t\t&lt;br&gt;\t\t&lt;table border=&quot;1&quot; cellSpacing=&quot;0&quot; cellPadding=&quot;2&quot;&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t&lt;/body&gt;&lt;/html&gt;\n\nLet’s begin.\nLesson 1：首先是一个网页文件的最基本结构： &lt;html&gt;、&lt;head&gt; 和 &lt;body&gt; 标签：\n\n这节课我们学了：\n\n元素会自动扩充为对应的两个 html 标签\n&gt; 代表下级结构\n\n代表同级结构\n\n\n\nLesson 2：我们继续扩充结构，在 &lt;body&gt; 下添加了两个 &lt;div&gt; 块，分别放进了一定数量的段落。\n\n这节课我们学到了：\n\n复习 + &gt; 的作用\n学习了括号的作用。\n\nLesson 3：我们继续添加内容：\n\n这节课我们学习到了：\n\n# 设置该元素的 id，用于 css 表\n. 设置该元素的 class，用于 css 表\n* n 可以用来代替 n 个重复元素 +++ 的操作\n\nLesson 4：我们重新来一遍，这次插入了表格，充分玩了一次花活，还加了点新东西：\n\n这一课我们学到了：\n\n充分利用多层括号和乘法来快速生成大量代码\n{} 代表往该元素内填充可见内容\n$ 作为数字通配，一个 $ 代表一位数字\n\nLesson 5：我们发现，表格的边框很不好看，我们需要加一些 Style：\n\n这节课我们学到了：\n\n[] 添加元素属性，可以加很多属性哦\n\nLesson 6：重复代码太多了，我们应该用 css 精简代码，用页内 css 吧，然后我们还要把 html 再规范一下：\n\n这节课我们学到了：\n\n对于部分元素（style），代码扩充会参照给定的特殊规则\n: 用来选择部分元素的分支，比如 html:4t、html:xml 等\n{}、[] 等都可以嵌套多层，最外层为 Zen Coding 功能符，里面的均为普通字符，所以你可以直接插入 {}、[] 到生成的 html 代码里\n\n六分钟六课时，到此结束~~~\n更多内容，参见 Zen Coding Cheat Sheet\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 我是困死了的分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n最后，Zen Coding 实际上对于需要填充内容的 HTML 文档的语法还不是很完善，比如我希望填入 “周一” 到 “周日” 的序列，就必须通过写七次 “td&gt;str&gt;{内容}” 完成。当然，作为练习 Zen Coding 的技巧而言，一切都是可以接受的。下面，其实也就是文章抬头 Zen Code 的更完整版，是我每周要写的工作周报的 html 源代码，你能写成 Zen Coding 格式么？（正确答案翻到底即可）\n&lt;html&gt;\t&lt;head&gt;\t\t&lt;style type=&quot;text/css&quot;&gt;table &#123;border-collapse: collapse; width: 800 px; font-size: 12 px;&#125; table td &#123;border: 1 px solid;&#125;&lt;/style&gt;\t&lt;/head&gt;\t&lt;body&gt;\t\t&lt;table&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td rowspan=&quot;8&quot;&gt;本周工作&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;日期&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;工作内容&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;完成情况&lt;/strong&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周一&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周二&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周三&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周四&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周五&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周六&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;周日&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;完成&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t\t&lt;br&gt;\t\t&lt;table&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td rowspan=&quot;7&quot;&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;计划工作&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;优先级&lt;/strong&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;strong&gt;预计耗时&lt;/strong&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t\t&lt;br&gt;\t\t&lt;table&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;产品心得&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t\t&lt;br&gt;\t\t&lt;table&gt;\t\t\t&lt;tbody&gt;\t\t\t\t&lt;tr&gt;\t\t\t\t\t&lt;td&gt;小卖部&lt;/td&gt;\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\t\t\t\t&lt;/tr&gt;\t\t\t&lt;/tbody&gt;\t\t&lt;/table&gt;\t&lt;/body&gt;&lt;/html&gt;\n\n正确答案：\nhtml&gt;(head&gt;style&#123;table &#123;border-collapse: collapse; width: 800 px; font-size: 12 px;&#125; table td &#123;border: 1 px solid;&#125;&#125;)+body&gt;(((table&gt;tbody&gt;(tr&gt;td[rowspan=8]&#123;本周工作&#125;+(td&gt;str&#123;日期&#125;)+(td&gt;str&#123;工作内容&#125;)+(td&gt;str&#123;完成情况&#125;))+(tr&gt;(td&#123;周一&#125;+td+td&#123;完成&#125;))+(tr&gt;(td&#123;周二&#125;+td+td&#123;完成&#125;))+(tr&gt;(td&#123;周三&#125;+td+td&#123;完成&#125;))+(tr&gt;(td&#123;周四&#125;+td+td&#123;完成&#125;))+(tr&gt;(td&#123;周五&#125;+td+td&#123;完成&#125;))+(tr&gt;(td&#123;周六&#125;+td+td&#123;完成&#125;))+(tr&gt;(td&#123;周日&#125;+td+td&#123;完成&#125;)))+br+(table&gt;tbody&gt;(tr&gt;td[rowspan=7]+(td&gt;str&#123;计划工作&#125;)+(td&gt;str&#123;优先级&#125;)+(td&gt;str&#123;预计耗时&#125;))+(tr&gt;td*3)*6)+br+(table&gt;tbody&gt;tr&gt;td&#123;产品心得&#125;+td)+br+(table&gt;tbody&gt;tr&gt;td&#123;小卖部&#125;+td)\n\n\n","categories":["代码脚本"],"tags":["Zen Coding","Emmet","六分钟","六课时","简易教程"]},{"title":"吉原哀歌 外一篇（ WordPress 引用 Bilibili.tv 视频方法）","url":"//quote-content-on-other-website/","content":"\n今天，我学会了如何用 &lt;div&gt; 配合 &lt;iframe&gt; 剽窃别人网站上的内容并且只显示所需，隐藏掉不需要的内容&#x3D;。&#x3D;\n\n\n引用方法更新，请到 &lt;这里&gt; 查看。\n\n对于提供了引用代码的网站来说，无论想把所需的内容引用到微博、校内甚至自己博客上都是非常容易的。之前写的 Warcraft 历代视频那篇博客也作了尝试，非常简单。\n但对于没有提供这一功能，且页面功能比一般视听类网站复杂些的网站内容来说，要想引用就显得有点困难了。比如 Bilibili.tv。\nQ： 如何把 Bilibili.tv 的视频引用到自己的博客上，且保持弹幕特色完整？尝试一：显然是找站点自身的对外分享功能了，结果似乎证明他们的 PM 就是不想提供这样的功能……\n尝试二：通过关键词找到 KnH 曾经做过一个 KnDanmakuWP v1.0-BETA 的 WP 插件，兴冲冲地下载安装完按说明，在文章中插入吉原哀歌视频的引用代码，结果……失败。再仔细一看，发现该插件自 2011 年 8 月 5 日出道以后就再没有更新过，估计是 bilibili 网站的代码已经更新而插件没有跟上。\n尝试三：考虑到插件还有另外一种方式，即引用 B 站弹幕功能同时引用新浪视频，即文字内容和视频内容分开引用的方式。这一方式要求用户自行解析出 B 站视频源的真实地址，于是问题又化归到查看 B 站网页端源代码上了。经搜索后……又失败了。网页代码中标示视频的 cid 无法还原成真实 id，网上有的老教程也都只解释了针对 bid、uid、ykid 等的反演算。显然，B 站为了保持自己的竞争特色（弹幕字幕评论系统），走了一条与通常视听类网站相反的方式，并不追求共享，反而力图通过加密等方式把用户聚到自己的网站下，绝不为他人做嫁衣装。\n尝试四：直接 Copy B 站网页源代码。定位播放器代码段以后，把整个 &lt;div&gt;……&lt;&#x2F;div&gt; 内的所有内容直接复制到了博客文章的源代码下。结果……还是失败。原因任何一个前端工程师甚至只要对代码有点理解的小朋友可能都很明白，但以我的这点知识，真的不知道为啥。\n尝试五：于是祭出大杀器 —— &lt;iframe&gt;\n部分引用不行，那我就把整个网页都搬过来就行了！思路是：\n&lt;iframe style=&quot;width: 569px; height: 440px;&quot; scrolling=&quot;no&quot; src=&quot;http://www.bilibili.tv/video/av337840/&quot; position = x: 460 px; y : 0 px&gt;\n\n—— iframe 引用整个页面，设置成指定大小，并定位到所需的位置。 当然最后一段 position 那个是假的，因为第五次失败的原因就出在这里。iframe 是没有办法定义内部引用页面的显示位置的。不过到这里，离胜利已经很接近了，因为思路是正确的。\n尝试六：（内事问百度，外事翻墙也要问 Google）果然在 Google 上找到了答案。代码如下：\n&lt;div style=&quot;width: 569px; height: 440px; overflow: hidden; position: relative;&quot;&gt;&lt;iframe style=&quot;position: absolute; top: -460px; left: 0px;&quot; src=&quot;http://www.bilibili.tv/video/av337840/&quot; scrolling=&quot;no&quot; width = &quot;1000 px&quot; height = &quot;1000 px&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;\n\n简单地说，既然 iframe 无法定位内部位置，就让它全部展现（我设置了 1000*1000 px），然后再在外面套上一个指定长宽的 &lt;div&gt;，然后设置遮盖方式，最后再调整 iframe 与 div 之间的相对位置，使得需要显示的部分恰好位于 &lt;div&gt; 之下，如图。当然，中间还涉及一些像素级的长宽位置调整，有个像素尺软件会好很多。\n\n至此，剽窃成功，大功告成回家吃饭。\n","categories":["代码脚本"],"tags":["bilibili","iframe","wordpress","引用","页面内容"]},{"title":"Sublime Text 2 ANSI 格式中文支持插件","url":"//sublime-text-2-ansi-plugin/","content":"如果安装过 Installer ，直接 Command(Mac)&#x2F;Ctrl(Win)+Shift+P → install → GBK 即可\n直接下载地址为：\nhttps://github.com/akira-cn/sublime-gbk\n嗯，纯搬运党。\n","categories":["软件使用"],"tags":["sublime text","中文支持","插件"]},{"title":"Zen Coding 教程补充","url":"//zen-coding-lesson-vii/","content":"今天搞定了如下形式的 Zen Coding：\n&lt;div&gt;\t&lt;p&gt;&lt;a href=&quot;&quot;&gt;Goodbye my lover&lt;/a&gt;&lt;/p&gt;\t&lt;p&gt;&lt;a href=&quot;&quot;&gt;You are Beautiful&lt;/a&gt;&lt;/p&gt;\t&lt;p&gt;&lt;a href=&quot;&quot;&gt;Stay the Night&lt;/a&gt;&lt;/p&gt;\t&lt;p&gt;&lt;a href=&quot;&quot;&gt;No Tears&lt;/a&gt;&lt;/p&gt;\t&lt;p&gt;&lt;a href=&quot;&quot;&gt;If time is All I have&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n\n即之前文章中提出的，当时搞不定的基于指定内容，而非基于通配符 “$” 的多重扩写。\nLesson 7：在 Sublime Text 2 下，由于其 Koan 输入框只输入一行，貌似必须先写好对应需要的文字内容，按行写： ——是的，我这里用了“貌似”两字。\n然后全选文字：\n\n在全选文字的基础上，Ctrl+Alt+Enter 写入 Zen Code：\n\n注意那个乘法，后面并没有跟上数量。因为数量是由所需内容的行数决定的。\n这节课我们学习了：\n\n一个称之为 缩写包裹 的技巧，用以解决特定内容下的多行代码生成。\n与 $ 生成的编号共存的方法。\n\n至此，差不多 Zen Coding 的内容就完成了，剩下的时间翻翻 CheatSheet 就可以应付绝大部分需求。毕竟 Zen Coding 只是一种快速完成常规工作的方式，对于复杂内容，还是需要工程师借助更强大的软件完成。\n总结一下知识图：\n\nOver。\n","categories":["代码脚本"],"tags":["Zen Coding","Emmet","How to","教程","Extra"]},{"title":"[转帖] 据说真的音乐发烧友连换个保险丝都能听得出来","url":"//zt-god-ears/","content":"1、用火电的力度大点，声音偏暖；用水电的声底偏冷，但解析力很高。 水电中，以葛州坝的电音色最好；火电中，以北仑电厂的电音质最好（因为烧的无烟煤的比例最高）\n2、同一套器材，晚上8点到10点的时候音色就感觉有点偏冷，晚上11点之后声音明显偏暖。 后来才发现高峰电用的是外省的水电，低谷电以本地火电为主，铁证如山！\n3、风力发的电层次感很差，听感朦胧，听柴可夫斯基的A大调B小调，音场明显收缩，小提琴部都混在一起。\n4、风力发电的单机功率在500w以下的音色都偏薄。\n5、电是三相和两相和音色关系不大，关键是平衡感。 三相电播放大编制的交响乐阵脚明显比两相的要稳！核电适合播放《终结者》之类的大片伴音。 但遗憾水、火、风、核电都并在了国家电网上了，所以放什么声音都是混论一片。\n6、有位烧友为此从上海搬家到广州，声音好很多。 因为南方电网以大亚湾核电和两广水电为主，音响既有力度，又比较清澈。 最近准备投资建设独立不并网的雅鲁藏布江水电站，高山雪原的天水将使音响脱胎换骨，但科研报告遭到印度的反对。\n7、太阳能发电有何不同？声音偏向温暖，不冷，但是有点薄。\n8、不久前，我一位朋友，国内最资深的耳机发烧友，一日试听铁三角AT-HA25D耳放配AD2000耳机，听着听着突然摘下耳机说今天没法听了，一定是水电站的水位又涨了，令在场其他烧友目瞪口呆！第二天果然报道山洪爆发，小丰满水电站水库水位暴涨，达到1953年来的最高水位，要知道辽宁电网只有1％的电力来自小丰满！\n四座皆惊，以为神耳！\n","categories":["二逼青年"],"tags":["转载","发烧音乐","水电","火电"]},{"title":"Emerald","url":"//emerald/","content":"\n“它是一种具有魔力的宝石，\n它能显示，\n立下誓约的恋人是否保持真诚。\n“恋人忠诚如昨，\n它就象春天的绿叶，\n要是情人变心，\n树叶也就枯萎雕零。”\n——摘自：《宝石学》 中国地质大学出版社出版 周国平 主编 p366\n\n\n她，青翠悦目，各个时代的人都为之着迷，在自然界中还没有那一种翠绿能与她相比，她的颜色代表当春来时，大自然的美景和许诺的标记。同时，她也是忠诚、仁慈和善良的合适象征。她——就是祖母绿。很久以前，祖母绿是用于给 Venus 女神作奉献的祭品，恋人们则认为它具有揭示被爱者忠贞与否的魔力。\n祖母绿是绿柱石家族中最珍贵的成员，也是最珍贵宝石中的一种。它是一种硅酸铝铍的结晶体。所呈现的颜色，归根于所含的铬或钒的氧化物。绿柱石（beryl）其名称源起于希腊语，又转经拉丁语 beryllus 演变而来。祖母绿的名称则起源于古波斯语，后演化成拉丁语 smaragdus，又讹传成 esmeraude、emeraude 或 emeralde。而成为现代的英语拼写形式，则可回朔到十六世纪左右。\n今天，祖母绿的主要产地在哥伦比亚，巴西和赞比亚，祖母绿原石被琢磨成各种不同的形状，从传统的阶梯形琢形，即：“祖母绿琢形”到圆形、椭圆形、正方形以及素面。作为最令人敬畏的宝石之一，祖母绿长期以来被看作是自然界中绿之精粹。多数天然产出的祖母绿具有包裹体，这些包裹体被看作是天然产出的。\n作为五月的生辰石及双子座的护身符，祖母绿是获得再生与年轻的象征。古代人相信拥有祖母绿的人具有超自然的预言未来的能力。还认为祖母绿能增强其持有者的记忆和雄辩能力，使他才思敏捷，并变得更忠实。他们还深信祖母绿能使浪费的人变得节俭起来，因而多半也使他们变得更为富裕。它还被用作预防药来防病：人们相信一个妇女只要佩戴祖母绿就可以免受羊角疯和其它严重疾病的滋扰。\n古迹寻踪:祖母绿的历史是一个由传说和迷信纠织在一起的网，既丰富又迷人。世界上还没有另一种宝石享有过它的色彩的荣光。与有些玉石不同，即使是一个最无知的野人，在潮湿密林中他的脚趾绊到祖母绿上时，他也会明显地感觉到这颜色鲜艳的晶体的美。古代人留传下关于这种华贵宝石的奇异故事，是因为他们把这种宝石的美视同奇迹一般。\n也就是在南美，找到了世界上最美的祖母绿。南美的（Cxolombia）哥伦比亚矿有其引人注意的历史。早在十六世纪，在西班牙人占领印加时，他们就在那里发现了许多优质的祖母绿，这些都是现称为哥伦比亚的地方出产的。为刀尖所迫，印加人交出了他们未能藏起的宝石。但是，这并不能使那些患“珍宝饥渴症”的占领者感到满足（尽管他们己经比自己最高的奢望还要富得多），他们希望获悉祖母绿的矿源，但对于这一点，印加人即使在酷刑拷问之下也缄口不语。所以，掠夺者们只能由他们自己去发现这些值钱的宝石的矿源。但是，印加人己经十分细心地去掉了所有的进入祖母绿地下矿穴的隧道状开口的痕迹，并且，生长的灌木很快就把通向开口的路径掩藏起来。这样，使西班牙人一个矿也没有找到。\n没过几年，就在 1555 年，哥伦比亚 Muzo 矿由于偶然的机会被发现了。西班牙人开始在那里开采祖母绿。起初，西班牙的王室勒索要以西属美洲获得的五分之一的矿产财富作为贡物，其中就包括祖母绿，然而在这些矿的早期开发过程中，偶尔也将特殊的祖母绿开采特许权授予别的人。\n有一个故事，谈到一个西班牙爵士，因报效王室得到了一处这种极好的矿床的专有特许权作为酬报。虽然地段上的露头己经显示了能找到丰富的祖母绿矿床的诱人前景，但实际上，他己耗尽了全部财产而毫无所获。授予他的特许权行将到期，抱着最后一线希望，他采纳了一个劳工的建议去挖一处估计没有什么价值的岩层（因为它没有祖母绿生成空穴的地表显示）。但使他大为惊奇的是，他竟从那里开出一处颇为壮观的矿床，在短短的几天里，他采到的祖母绿的价值超过了他的全部投资。他选了一大包这样的宝石乘船到了英国，想把它们卖给伦敦、布鲁塞尔和阿姆斯特丹等地的宝石商。在伦敦的一家旅馆里装修了间房间后，他把未来的顾客邀请来参加盛大的宴会。会后，他在一张大桌子上展览了他所采集的祖母绿，然后充满信心等着立即成交。\n这批各形各样的宝石的量和质使宝石商也吃惊不己，他们出于谨慎，问起究竟在他的矿里是否找到了更多的祖母绿。他一时失策，吹起牛来说，所有这些宝石都是在短短几天里工作的收获，还有更多的留着没有开采。买主们深感吃惊，并设想还会有一大批祖母绿要投入市场。于是他们拒绝出价。卖主试图收回说出的大话，终未成功，在买主们满意地获悉这些宝石是该地区几乎仅有的产品之前，他的祖母绿，在近两年的时间里都无人问津。\n如果，这个极好的矿床不是由西班牙爵士所发现，而是由英国人所发现，那样的话，时至今日，祖母绿会像钻石一样被详细的分级以及畅销的。\n\n\n与许多有名的钻石不同，祖母绿很少个别命名，虽然有些祖母绿也有其惹人注意的历史经历。最有名的两块祖母绿是 Devonshire 祖母绿和 Patricia 祖母绿。Devonshire 祖母绿是一块未切割的美丽的绿色的哥伦比亚晶体，重 1383.95 克拉。它是 1891 年时退位的巴西皇帝 Dom Pedro 一世赠给第六代 Devonshire 公爵的礼品，现藏于纽约美国自然历史博物馆。Patricia 祖母绿是一块重 630 克拉的晶体，也具有美丽的颜色。另外，还有 5 块未命名的大祖母绿晶体，它们分别重约 1796 克拉、1752 克拉、1492 克拉、1100 克拉和 220 克拉，都是 Muzo 出产的。在 Los Angeles 州自然历史博物馆还有一块重 1965 克拉的俄罗斯祖母绿晶体。\n或许世界上最有名的单件装祖母绿的首饰要算是 Andes 皇冠了，在其上还镶有以最后一位印加皇帝命名的 45 克拉的Atahulpa 祖母绿。皇冠本身是在 1593 年用整块纯金制做，装在哥伦比亚的 Popayan 大教堂的圣母塑像上的。1650 年它曾在短时期内归劫夺它的英国海盗所有，而在 1812 年又成了 Simon Bolivar 从西班牙人手中解放南美奴隶的革命战争的战利品。Andes 皇冠上总共镶有 453 块宝石，总重 1521 克拉。听到的皇冠的最后消息是 1968 年，一个辛迪加巨头从纽约珠宝商处把它买走了。这皇冠现在落在何处则不得而知。\n\n\n产地划分:无论如何，祖母绿仍然是倍受关注与爱戴的宝石中，最值钱的宝石之一。一直以来，销量都在彩色宝石销量排行榜中排名第四位，预计今年将保持其销量第四的排名。它一直跻身于少数“珍贵宝石”之列而不衰。具有中亮到中暗色调的绿色绿柱石被称为祖母绿，而亮绿色或强亮绿色的宝石则通常称之为绿色绿柱石。按照沿用多年的习惯，将根据地理原产地，作贸易分级如下：\n1.哥伦比亚（Colombia）祖母绿\n最优质的祖母绿总是来自这个南美国家。哥伦比亚祖母绿相对来说是清澈的，呈纯绿色、稍稍带黄的绿色或稍稍带蓝的绿色。典型的产自 Muzo Chivor（发音 SHE-vor）、Cosguez（发音 Kos KWEZ）和 Gachala 诸矿，各不相同，且每一种均有其质量范围。对于质佳的祖母绿也可以不问其产地，就称它为哥伦比亚祖母绿，否则应专称为 Muzo 祖母绿、Chivor 祖母绿了。Muzo 产品颜色最美丽，而 Chivor 出产的则瑕疵较少。总的来说,只有大约 1&#x2F;3 的哥伦比亚祖母绿值得切割,大于坚果大小的原石常常质量很低或破损很厉害。\n2．巴西出产的祖母绿颜色较哥伦比亚出产的浅，多数为黄绿色，但很少有杂质，主要出产地在 Bahia, Goias 和 Minas Gerais. 自二十世纪八十年代开始以来的新矿的发现，巴西逐渐变成供应最好色质的祖母绿的最重要的供应国之一。\n3．自二十世纪五十年代后半期，非洲辛巴威发现了祖母绿的矿藏，最重要的是其南部的 Sandawana 矿，出产的晶体很小但是质量非常好。\n4．南非的特兰斯瓦尔北部，Cobra 和其他一些矿藏使用机械开采祖母绿，优质的只有 5%，其余的颜色或浅或杂质多只适合于做素面。\n5．乌拉尔山北部的 Yekaterinburg 在 1830 年发现了祖母绿的矿藏，开始的时候产量很高，但近期只零星出产很少的矿石，优质的很少，多数晶体不透明，颜色上游一些黄绿色。其他的一些产地还有阿富汗，澳大利亚，莱纳，印度，马达加斯加，马拉威，莫桑比克，纳米比亚，巴基斯坦，赞比亚，坦桑尼亚和美国（南卡罗莱纳）。\n绿柱石形成的模式：因为铍元素几乎都只是在火成的原生花岗岩里才能找到，那末最常见的含有铍元素的矿物绿柱石，也一定是与这类岩石直接或间接有关的。最大数量的绿柱石产生于一种花岗质岩枝之中，是我们称为伟晶岩或巨粒花岗岩的岩枝，后一名称意味着在其中单个晶体具有巨大的尺寸。例如，在伟晶岩中找到的绿柱石晶体有宽达几英尺、长度超过 12 英尺的。多数这类大晶体是“冻结”进伟晶母岩里的，也就是说它们完全为长石和石英这些其它矿物包围着。这种封闭的结果使它们成为连绵的碎片，并且很少含有适于用作宝石的洁净区域。然而在伟晶岩中生有气体空穴或矿袋时，在它们里面形成的绿柱石晶体成为透明和少瑕疵的，也常是具有宝石质量的了。\n世界各地有着数以百计的伟晶岩矿区，但仅只有少数象巴西、阿根廷、阿富汗、非洲、印度、马达加斯加、中国和美国的那些矿区才含有绿柱石矿化的伟晶岩。尽管己从这些矿区开采了数千吨普通的，也即“矿物”绿柱石，但与之相比，所生产的宝石绿柱石却是微不足道的。因此，宝石绿柱石是稀罕的，并且随着易于接近的伟晶体露顶被发现和采完，这种宝石更为稀罕了。\n漂亮的绿柱石晶体、多数海蓝宝石和金色绿柱石，也产生于脉络状岩体内，这种岩体不能列为伟晶岩，虽然可以推论它们的矿化也来自相似的原生花岗岩源。有时，这些矿脉是沿围岩的裂缝形成的，但另外一些时候矿化是沿着围岩的细裂纹发生的，替代后者形成我们称之为云英岩的岩体。\n伟晶岩中很少有祖母绿产生。它倒是最常见于变质岩中，特别是在金云母——黑云母——滑石片岩里。片岩型的祖母绿通常只能是小块的、形态不佳和破裂的，并充满包体的。由于片岩型矿床远多于下面将要讲到的哥伦比亚型矿床，所以，尽管在前者的矿物中，宝石级材料的采收率小得可怜，世界上宝石级祖母绿仍多数是由片岩型矿床提供的。\n第一流的祖母绿矿床类型是哥伦比亚型，它举世无双。在别的矿床里绿柱石是在高温与高压下形成的，而哥伦比亚矿床典型的地质条件，却是较低的温度和压力，在此期间，这种矿床还将不断地被发现，还不至于枯竭。\n鉴定中的问题：\n交易现状:\n\n\n市场中存在很多的双层石主要是由岩石晶体,海蓝宝石,绿柱石或无色的祖母绿粘合绿色祖母绿表层组成，有时下层石也用玻璃或合成尖晶石来替代。鉴定的风险在于已镶好的首饰中，因为一旦被镶好根据上层宝石的硬度和内含物会较容易被误认为是天然祖母绿而实际上其下部的替代品因为已镶好而较难被鉴定出来。\n1848 年制造出第一颗人造祖母绿晶体。二十世纪初期各种理论被发展起来，自 1950 年以来，市场开始出现商业级优质的祖母绿产品。较为重要的区分人造与天然祖母绿的方法是通过紫外荧光法，较之天然祖母绿人造祖母绿传送更多的紫外荧光。\n\n\n通常的处理方法：\n油浸法是通用的掩盖祖母绿的内部缺陷的方法，也有用在真空中注入人造树脂的方法。这些修复工作往往在宝石的原产地就已完成。\n祖母绿的价值衡量：\n祖母绿的价值是依据颜色，纯净度和大小来定，最好的颜色是很浓的颜色。大多数人喜欢蓝绿色，但也有人喜欢浓绿色； Sibeian (西伯利亚)和 Muzo (木佐)这两个词通常用来指颜色的最高等级，尽管西伯利亚祖母绿很少被发现。罗德西亚（津巴布韦），差赛姆和印度的一些祖母绿通常是很浓的颜色，但颗粒很小。在小于 5 克拉的宝石中有一些裂纹，但不常见；大小在此之上的宝石通常存在一些裂纹。非常小的包裹体型裂纹要比断口型裂纹美观的程度小，因为后者裂纹对光线折射。优质祖母绿的价值将随大小从 1 克拉到 6 克拉而逐渐升高，通常超过钻石和红宝石，但从 6 克拉再往上，随着重量的增加价格变得平缓，而最好质量的红宝石每克拉价值将变得更大。最好的木佐蓝绿色无暇级 1 克拉至 8 克拉的价值从 1200 美金至 20000 美金不等。一般的则依颜色与瑕疵的轻重从几十美金至几千美金不等。\n人造祖母绿的价值根据裂纹的有无每克拉的价格从 20 美金到 200 美金不等。\n转载自：\nhttp://www.bbgems.net/color-culture/emerald-1.htm\n","categories":["文艺青年"],"tags":["emerald","祖母绿","五月","生辰石"]},{"title":"纳兰性德","url":"//nalanxinde/","content":"\n【采桑子】\n谁翻乐府凄凉曲风又萧萧雨又萧萧瘦尽灯花又一宵\n不知何事萦怀抱醒也无聊醉也无聊梦也何曾到谢桥\n\n\n【长相思】\n山一程 水一程身向榆关那畔行夜深千帐灯\n风一更 雪一更聒碎乡心梦不成故园无此声\n\n\n【木兰词·拟古决绝词柬友】\n人生若只如初见何事秋风悲画扇等闲变却故人心却道故人心易变\n骊山语罢清宵半夜雨霖铃终不怨何如薄倖锦衣郎比翼连枝当日愿\n\n\n【南乡子·为亡妇题照】\n泪咽却无声只向从前悔薄情凭仗丹青重省识盈盈 一片伤心画不成\n别语忒分明午夜鹣鹣梦早醒卿自早醒侬自梦更更 泣尽风檐夜雨铃\n\n\n【采桑子】\n而今才道当时错心绪凄迷红泪偷垂满眼春风百事非\n情知此后来无计强说欢期一别如斯落尽梨花月又西\n\n\n【蝶恋花】\n辛苦最怜天上月一昔如环昔昔长如玦若似月轮终皎洁不辞冰雪为卿热\n无那尘缘容易绝燕子依然 软踏帘钩说唱罢秋坟愁未歇春丛认取双栖蝶\n\n\n【浣溪沙】\n谁念西风独自凉萧萧黄叶闭疏窗沉思往事立残阳\n被酒莫惊春睡重赌书消得泼茶香当时只道是寻常\n\n","categories":["文艺青年"],"tags":["纳兰性德","词"]},{"title":"0525 kaikai&#8217;s skating journey.","url":"//0525-kaikais-skating-journey/","content":"  \n[View Larger Map](https://maps.google.com/maps?f=d&source=embed&saddr=Bailatu+Coffee+Hall,+69%E5%8F%B7+Chengfu+Road,+Haidian,+Beijing,+China&daddr=39.99216664658017,116.31587751209736+to:39.957327010247035,116.32334545254707+to:39.923522288692226,116.32588114589453+to:39.92354568695829,116.35546926409006+to:39.90710707780728,116.35669469833374+to:39.90716494451629,116.35294396430254+to:39.90811498029683,116.4621014893055+to:%E5%91%BC%E5%AE%B6%E6%A5%BC%E5%8C%97%E8%A1%97&hl=en&geocode=FSQ-YgId3PvuBik18PKbAlTwNTGAORSji2KB5A%3BFWY7YgId5dbuBintkUCarlbwNTG8g0tY9rlsEQ%3BFU-zYQIdEfTuBil7n37qYlHwNTFMDVdga8yWUA%3BFUIvYQId-f3uBilZSvnOH1LwNTG-AdSqpdDN7g%3BFVkvYQIdjXHvBinzdVLCQ1LwNTEGPACrt5RxlQ%3BFSPvYAIdVnbvBind2F8FcVLwNTG0kYCez7SsKA%3BFV3vYAIdsGfvBinjfrXgc1LwNTGnfEYhC4Izfw%3BFRPzYAIdFRLxBimPsECxBq3xNTFzV4NaTJrsMQ%3BFQYsYQIdvCHxBg&aq=&sll=39.916912,116.443663&sspn=0.058918,0.126686&dirflg=w&mra=dvme&mrsp=7&sz=14&via=1,2,3,4,5,6,7&ie=UTF8&ll=39.916912,116.443663&spn=0.058918,0.126686&t=m)","categories":["轮滑少年"],"tags":["轮滑","行程记录"]},{"title":"切绳子/割绳吃糖果 (Cut the rope) 全部 19 画作 (19 Drawings All) 列表 [更新至 Box 15]","url":"//cut-the-rope-all-drawings/","content":"# update：更新至 Box 15\n# update：更新至 Box 14\n# update：更新至 Box 12\n从 Toy Box 开始，Cut the Rope 更新了一个小玩艺，小怪兽的画作。在玩关卡时，从某些关卡的背景盒底上可以找到隐藏的画作，找到以后就存到了画廊里贴几张图大家就明白了，就是墙上糊了几张不显眼的纸而已，仔细找找也不难找到。\n以下就是 Cut The Rope （原版） 全 18 张涂鸦画作的关卡及位置截图。图用的是 iPad 版，iPhone 版位置一致可以照搬。\n&lt;Cut the rope&gt; has some little secrets for you to find: the Drawings.\nUntil now there are 18 drawings in some of the levels, sometimes it’s hard to find.\nHere is the total list below.\n1. 纸板盒 1-16\n\n2. 布盒 2-18\n\n3. 铝箔盒 3-3, 3-20\n \n4. 魔盒 4-3, 4-21\n \n5. 情人盒 5-7\n\n6. 玩具盒 6-17\n\n7. 礼物盒 7-14\n\n8. 宇宙盒 8-1, 8-15\n \n9. 工具盒 9-21\n\n10. 嗡嗡盒 10-15\n\n11. DJ 盒 11-16\n\n12. 幽灵盒 12-14\n\n13. 蒸汽盒 13-9\n\n14 灯笼盒 14-13\n\n15 奶酪盒 15-13\n\n最后一张也很明白，点一下 Facebook 的 赞  即可，尽管点不通但涂鸦是拿到手了。\nClick “Like” of facebook to get the last drawing.\n","categories":["游戏中心"],"tags":["All Drawings","Cut the rope","涂鸦画作"]},{"title":"iCut Deluxe 全 1008 关攻略 (iCut Deluxe Walkthrough All 1008 Levels)","url":"//icut-deluxe-walkthrough/","content":"iCut Deluxe https://itunes.apple.com/us/app/new-icut-deluxe/id550305783?mt=8\n一个挺好玩的益智游戏，目标是把一大块板切分成若干个形状一致的小块。小块可以角度不同，甚至还可以翻转，但必须形状一致。\n以下是全部 1008 关的攻略，做成了一张图片。\nHere’s an fully walkthrough of all 1008 Levels of iCut Deluxe.\n\n","categories":["游戏中心"],"tags":["1008 关","iCut Deluxe","Walkthrough","攻略"]},{"title":"Lazors（光线解谜/激光反射）全攻略，All Level Walkthrough。","url":"//lazors-walkthrough/","content":"#Update Lazors 有了不少更新，后续关卡地址为：\nhttp://www.wterry.net/2014-04-15/lazors-solutions/\n感谢 pingback\n#update：Add the “Darkroom” chapter.\n链接： https://itunes.apple.com/en/app/lazors/id386458926?mt=8\nLazors 是个光线反射解谜游戏，以下是详解攻略：\n1-2. Tutorial, Friendly\n\n3-4. Vertices, Tricky\n\n5-6. Braid, Mad\n \n7-8. Yarn, Tiny\n \n9-10. Showstopper, Diagonal\n\n11-12. Crossed, Crystal\n \n13-14. Prismatic, Diamond\n \nAdd: Darkroom\n\n","categories":["游戏中心"],"tags":["Walkthrough","攻略","Lazors","光线解谜","激光反射"]},{"title":"Types &#8211; Windows 7 下简单而强大的文件类型关联编辑工具","url":"//types-file-association-tool-in-win-7/","content":"Types→ 下载地址\nWindows 7 开始没有了 XP 时代方便的对文件类型关联（主要是关联图标）的修改了。通过 Windows 打开方式\n\n指定始终用某程序打开该类型文件以后，默认会关联一个很丑的图标，一个白底上带打开程序的图标：\n\n在 Windows XP 时代，可以通过文件夹选项里的文件关联方式来指定图标，但 Windows 7 不知道为何取消了。于是花了一些时间找到了这个软件： Types。Types 可以方便地在 Win 7 下管理文件关联，包括关联打开的程序、分别设置“打开”与“编辑”使用不同的程序、更改图标、文件描述等，简单高效专注。\n \n我们把文件图标设置成和主程序图标一致即可：\n\n在退出程序时，Types 自动刷新系统图标，于是图标就变成了程序自带的 ，任务就初步完成了。\n\n如果你想再考究点，就单独指定程序图标，比如：\n\n————————————–完——————————–\nTypesTypes 其实是绿色软件，安装包仅用于生成开始菜单等快捷方式。\n官网地址：http://izt.name/apps/types/\n下载地址：http://izt.name/apps/types/Types.Setup.exe\n官方简单中文包：http://izt.name/apps/types/tongue/cn.tongue\n下载以后把 cn.tongue 放到 Types 的安装目录里，启动 Types，按 F1 即可选择语言。\n\n","categories":["软件使用"],"tags":["Types","Windows 7","关联图标","文件关联"]},{"title":"我的 Ascend P1 特别毁 TF 卡","url":"//my-ascend-p1-destroys-tf-cards/","content":"去年九月买的机器，京东买的新机器，到现在十个月，已经毁掉两张 TF 卡了。一张是 KingMax 32GB SDHC Class-10，另一张就是今天的 Kingston 8G Class-4。\n在第一张坏掉时，我查一了下，KingMax 的差评里确实有坏得快的评价，大约 1% 的差评。我以为是卡的质量不行，就另买了一张。\n今天又坏了。每五个月坏一张，都不用平均。\n只能认为是手机问题了。\n换了第三张卡，弄了个最小的 4G。五个月 30 块钱，比彩铃什么的略贵一点。\n","categories":["唠唠叨叨"]},{"title":"0713 Kaikai&#8217;s skating journey","url":"//0713-kaikais-skating-journey/","content":"  \n[View Larger Map](https://maps.google.com/maps?f=d&source=embed&saddr=%E9%87%91%E5%8F%B0%E5%8C%97%E8%A1%97&daddr=39.91364107772047,116.47696193307638+to:39.908549615987944,116.4675148576498+to:39.90855990318983,116.44529208540916+to:39.90980567191711,116.44103240221739+to:39.91774678639785,116.44314799457788+to:39.91947992537143,116.44589994102716+to:39.925979577199904,116.44608031958342+to:39.93007709024804,116.4437997713685+to:%E5%91%BC%E5%AE%B6%E6%A5%BC%E5%8C%97%E8%A1%97&geocode=FUMrYQIdXTXxBg%3BFakIYQIdIkzxBikN7Q49UqzxNTFsEqbzNjXE2A%3BFcX0YAIdOyfxBikLOaNpqq3xNTFh7fQvBzgUzw%3BFdD0YAIdbNDwBikv4KE7GK3xNTGarz9jgSWYhg%3BFa35YAIdyL_wBinxbZbDIq3xNTEoL2-7Gvjj-w%3BFbIYYQIdDMjwBimn6cYGIK3xNTG4dftnqUhsAw%3BFXgfYQIdy9LwBin1f0VT4KzxNTEvzl4as6c_3g%3BFds4YQIdgNPwBimFCQ5L5qzxNTGe--fGf28hKA%3BFd1IYQIdl8rwBil1iGEy6KzxNTHToMYJo0KxXg%3BFcUrYQIdci7xBg&sll=39.920335,116.469755&sspn=0.041405,0.090895&hl=en&mra=mrv&via=1,2,3,4,5,6,7,8&ie=UTF8&t=m&ll=39.920335,116.469755&spn=0.041405,0.090895)","categories":["轮滑少年"],"tags":["轮滑","行程记录"]},{"title":"Github wiki 链接规则","url":"//github-wiki-rules/","content":"Github 为每个代码库提供了一个附带的 wiki。这个 wiki 其实也是个独立的代码库，可以用 git 进行管理，还是挺方便的。不过 Github wiki 在文件结构上有特殊的设计，一开始会觉得有点摸不着头脑。于是就花了点时间做了个实验，得到以下规则：\nGithub wiki 规则：文件链接\n每个 Github wiki 文档至少需要一个标题，否则跳转链接会自动转到 raw.github.com 上去。用若干个 # 来标注一个标题。\nGithub wiki 会把该库里所有的 .md 文件都提到同一个虚拟的 &#x2F;wiki 目录里。所以无论你目录结构如何复杂，在引用其它 .md 文件时，只需要直接链接到文件名即可。不过这样在使用 Mou 写作预览时可能反而不方便了，所以最简单的办法是把所有 .md 文件都放在根目录里。\n仅 .md 如此特殊处理（也许还有其它 Markup 文件），对于图片等其它附件，均保持自己相对路径。\n尽管如此，home.md 却属特例。它在虚拟的 &#x2F;wiki 目录的上一层。所以由它引用到别的文件，均需要加上 &#x2F;wiki\n\nGithub wiki 规则：锚点\n任意用 1-6 个 # 标注的标题会自动被添加上同名锚点。在链接中写入锚点即可跳转，比如： [显示文本](wiki&#x2F;sample#anchor) 对应 sample.md 内的某个标题： ### Anchor\n锚点中英文皆可，使用中文（或其它文字）会自动 Encode 和 Decode。但只有英文（可能有其它语言）可以大小写通用。\n由于 .md 本身写链接的限制，多单词锚点的空格用-代替。比如#regist-github对应###Regist GitHub\n即使页内锚点，也必须写上文件名，如果不写，锚点链接会自动添加 “wiki-” 前缀，比如： [显示文本](#anchor) 对应的是 #wiki-anchor。\n如上，如果对应的标题名真的就是 wiki-Anchor，那么锚点也还是能正常工作的。\n\nGithub wiki 官方说明：https://github.com/features/projects/wikis\n","categories":["软件使用"],"tags":["Anchor Rule","Github wiki","Link Rule","链接规则","锚点规则"]},{"title":"发个招聘（产品经理）。","url":"//recruit/","content":"发个招聘。\n嗯，这个是我替自己招小弟，不是帮转，所以如果你有兴趣，可以直接发信给我。只要过我这关，虽然还有 VP 的终面，不过 99.99% 过。\n先讲职位： 助理产品经理。再讲待遇： 五险一金，无户口。 大致收入在后文写。再讲公司： 参见以下影片。\n\n公司是做商业性互联网营销数据监测与分析的。有点拗口，不过如果你谷歌以后还是读不懂的话就正好筛掉，这里每个词都是能读懂的。\n关于什么是产品经理，大家可以查一下百度百科之类的。不过更简单的方法是，如果你像我一样，自己做过一样或者几样什么东西（真的什么都可以），能讲清楚以下几点：\n* 你为什么做的，你做这个是想解决什么问题 —— 不是 “想获奖” 之类的理由，而是真正的想去解决问题。* 你怎么去分析你遇到的问题的，于是你怎么设计你想做的东西的。* 你花了多少时间、金钱和其它成本去做出来这个东西。\n如果你能清楚的回答这些问题，你把你想做的东西跟别人一讲，别人也由衷地同意并且愿意帮助你一起做。那么这个职位你就满足了 60%。\n对的，60%，你直接就及格了，可以找我聊聊。\n你要知道，有时候一个人真正的闪光点，经常会是那些他觉得理所当然的地方。\n当然，很可能你没做过。或者你还不满足于去做一个勉勉强强的职位，所以以下是一些更详细的内容。如果你会，那就太好了。如果你不会，但你愿意学，也行。限于保密性我无法实际地描述业务信息，不过我保证以下这些问题，一定都是与你的工作有关的内容：A1. 都有1班到10班共十个班级的两个学校，甲校每个班的女生比例都比乙校相同班级高，为什么甲校整体女生比例反而不如乙校？A2. 甲乙两人要打赌，但手头只有一颗特殊硬币，已知该硬币正面出现的机率为4&#x2F;5，反面出现机率为1&#x2F;5，要怎么样操作才能保证甲乙公平对赌？B1. 如果我给你足够多的预算，让你花三个月时间调查一下全北京 iPad 拥有率，你打算怎么做？（大胆假设，注意可行性，最好多准备几个方案）B2. 已知钢铁侠 III 在中国卖出了一千万张电影票，一百万份包括蓝光、DVD 等的实体拷贝，三百万次在线观看。问，大概有多少人看过这部电影？（同上，你需要假设你可以获得你可以得到的数据，对不对我不管，但你得先有做出来的想法）。\nC.附加必答. Google 最大的收入来源是什么？\n你看，我把题发网上来，肯定无法阻止你去检索一些必要信息，对不？\n以上那些，如果你能 A、B 各答一题，那就不光是你满足，而是我满足了。\n记得写一篇文字发给我： &#121;&#111;&#117;&#x72;&#x6b;&#97;&#x69;&#x6b;&#x61;&#105;&#x40;&#103;&#109;&#97;&#x69;&#108;&#46;&#x63;&#111;&#x6d;。 看我的招聘写得这么有诚意，你写的篇幅，至少不应该比我少吧。\n谈到手收入的话，主要看你的能力与努力。做得好的话，一年内收入乘 2 再乘 2 也没问题。我们的实习起薪也不比你做过的任何一份实习低，正式的你可以自己大致估一下。当然，我不养闲人，你需要去努力，努力生活，努力学习，努力工作。——在一个 Hard 模式的国家，没有亲爹罩没有干爹靠，想做事都不容易。\n你打 Dota，进一个队，发现队友全是猪，你除了退队也没什么好办法吧？我也是。\n所以希望你，有理想，没道德，有文化，没纪律。\n你看，我们是相互选择的，所以我设置了个不那么容易的坎以减少我的筛选量，而这对你也是个机会，你有一切充足的理由把价码提高，对么？\n附上行文化的招聘需求：\n工作职责：\n* 负责商业人口样本应用软件的运营与内部协调，收集汇总并提炼需求，统计日常使用情况* 理解用户需求，参与或主导将业务需求转化为产品逻辑* 参与或主导设计软件新功能，推动功能迭代与更新* 与工程师团队紧密配合，快速高效推动产品研发与上线流程\n要求：\n* 数学本科或同等能力* 学习过统计类课程，了解相关软件* 逻辑思维优秀，表达清晰，善于分析* Geek，对互联网产品有深度爱好和兴趣* 有责任心、协作能力和时间观念\n优先：\n* 发表过数学科普文章，或拥有数学类博客的优先* 曾做过自己的项目，自负盈亏，受同学欢迎的优先* 学习过编程、参加过 ACM 或有自己代码项目的优先* 在某项或者数项大众游戏中获得公认排名全球前 0.1% 的优先* 成为过某个互联网产品测试用户，并提过被采纳意见的优先\n","categories":["产品经理"],"tags":["Recruit","招聘"]},{"title":"WordPress 引用 Bilibili.tv 视频方法更新","url":"//bilibili-quote/","content":"update：现在 bilibili 官方已提供分享链接功能，这篇文章已经过时。\n从业产品经理一年有余，虽非主业，前端知识也多少了解了下。今天发现有人评论老文章《吉原哀歌 外一篇（ WordPress 引用 Bilibili.tv 视频方法）》，反映开启 Adblock 以后会有错位现象。这个我当时也是知道的，使用&lt;iframe&gt;也确属无奈，但在当时而言没有什么好办法，就在 Adblock 给自己的博客加了白名单。\n现在再回过头来简单看了一下，发现有更简单的办法，不知道是 Bilibili 更新还是当时看不懂，总之…… 先 Test 一下。\n\nTest 通过\n——————\n讲方法，一句话：\n&lt;embed src&quot;http://static.hdslb.com/miniloader.swf?aid=337840&amp;page=1&quot; width=&quot;569px&quot; height=&quot;440px&quot;&gt;&lt;/embed&gt;\n\n其中 337840 为视频地址中数字代码，也就是视频 id。从浏览器地址栏就可以得到。\nBilibili 的播放器原始分辨率大小为 569*440，等比例可选大小为 620*480 或者 640*495。比如我博客就是 640 像素宽的。\n——————\n讲过程，也是一句话：\n在页面原代码里搜索 .swf 就发现了以下代码——\n&lt;div itemprop=&quot;video&quot; itemscope itemtype=&quot;http://schema.org/VideoObject&quot; style=&quot;display:none&quot;&gt;&lt;meta itemprop=&quot;name&quot; property=&quot;media:title&quot; content=&quot;【96猫】吉原哀歌&quot; /&gt;&lt;span property=&quot;media:type&quot; content=&quot;application/x-shockwave-flash&quot; /&gt;&lt;meta itemprop=&quot;duration&quot; content=&quot;T3M56S&quot; /&gt;&lt;meta itemprop=&quot;thumbnailUrl&quot; rel=&quot;media:thumbnail&quot; content=&quot;http://i0.hdslb.com/user/1330/133076/1345197165138bc03361556fb3.jpg&quot; /&gt;&lt;meta itemprop=&quot;embedURL&quot; content=&quot;http://static.hdslb.com/miniloader.swf?aid=337840&amp;page=1&quot; /&gt;&lt;meta itemprop=&quot;uploadDate&quot; content=&quot;2012-08-17T17:52&quot; /&gt;&lt;/div&gt;\n\n其中有效的其实也就是\n&quot;http://static.hdslb.com/miniloader.swf?aid=337840&amp;page=1&quot;\n\n这一句了。static.hdslb.com 很明显是静态资源的 CDN 服务器域名，后面自然就是参数了。那么 aid 就是视频 id，page 猜想可能是合集第二页吧，试了一下，果然。http://www.bilibili.tv/video/av672893/index_2.html\n于是直接&lt;embed&gt; 到网页原代码里就可以执行了。Wordpress 会自动把它整理成更符合规范的代码，不用管了。\n以上，大功告成。\n——————–\n更新：\n使用 &lt;embed&gt; 嵌入 Flash 视频是因为我博客有自动转码，如果你没有，以下是真正的完整代码：\n&lt;object width=&quot;569px&quot; height=&quot;440px&quot; classid=&quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot; codebase=&quot;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0&quot;&gt;&lt;param name=&quot;src&quot; value=&quot;http://static.hdslb.com/miniloader.swf?aid=337840&amp;page=1&quot; /&gt;&lt;embed width=&quot;569px&quot; height=&quot;440px&quot; type=&quot;application/x-shockwave-flash&quot; src=&quot;http://static.hdslb.com/miniloader.swf?aid=337840&amp;page=1&quot; /&gt;&lt;/object&gt;\n\n——————–更新\nBilibili 作了少量调整，现在即使非合集&#x2F;剧集的孤立视频，也必须添加 &amp;page&#x3D;1 参数了。\n","categories":["代码脚本"],"tags":["bilibili","外链"]},{"title":"Oh-my-zsh 自带的 git aliases 挺好用的","url":"//oh-my-zsh-git-aliases/","content":"免去了自己配置的麻烦。对我这样的对 git 不熟的人，还可以帮助作为 git 命令一览的一种手段。比如我现在就开始用 gg 来代替 git commit 了……\n在 ~&#x2F;.oh-my-zsh&#x2F;plugins&#x2F; 下可以找到大量的预置文件。\n# Aliasesalias g=&#x27;git&#x27;compdef g=gitalias gst=&#x27;git status&#x27;compdef _git gst=git-statusalias gd=&#x27;git diff&#x27;compdef _git gd=git-diffalias gl=&#x27;git pull&#x27;compdef _git gl=git-pullalias gup=&#x27;git pull --rebase&#x27;compdef _git gup=git-fetchalias gp=&#x27;git push&#x27;compdef _git gp=git-pushalias gd=&#x27;git diff&#x27;gdv() &#123; git diff -w &quot;$@&quot; | view - &#125;compdef _git gdv=git-diffalias gc=&#x27;git commit&#x27;compdef _git gc=git-commitalias gc!=&#x27;git commit -v --amend&#x27;compdef _git gc!=git-commitalias gca=&#x27;git commit -v -a&#x27;compdef _git gc=git-commitalias gca!=&#x27;git commit -v -a --amend&#x27;compdef _git gca!=git-commitalias gco=&#x27;git checkout&#x27;compdef _git gco=git-checkoutalias gcm=&#x27;git checkout master&#x27;alias gr=&#x27;git remote&#x27;compdef _git gr=git-remotealias grv=&#x27;git remote -v&#x27;compdef _git grv=git-remotealias grmv=&#x27;git remote rename&#x27;compdef _git grmv=git-remotealias grrm=&#x27;git remote remove&#x27;compdef _git grrm=git-remotealias grset=&#x27;git remote set-url&#x27;compdef _git grset=git-remotealias grup=&#x27;git remote update&#x27;compdef _git grset=git-remotealias grbi=&#x27;git rebase -i&#x27;compdef _git grbi=git-rebasealias grbc=&#x27;git rebase --continue&#x27;compdef _git grbc=git-rebasealias grba=&#x27;git rebase --abort&#x27;compdef _git grba=git-rebasealias gb=&#x27;git branch&#x27;compdef _git gb=git-branchalias gba=&#x27;git branch -a&#x27;compdef _git gba=git-branchalias gcount=&#x27;git shortlog -sn&#x27;compdef gcount=gitalias gcl=&#x27;git config --list&#x27;alias gcp=&#x27;git cherry-pick&#x27;compdef _git gcp=git-cherry-pickalias glg=&#x27;git log --stat --max-count=5&#x27;compdef _git glg=git-logalias glgg=&#x27;git log --graph --max-count=5&#x27;compdef _git glgg=git-logalias glgga=&#x27;git log --graph --decorate --all&#x27;compdef _git glgga=git-logalias glo=&#x27;git log --oneline&#x27;compdef _git glo=git-logalias gss=&#x27;git status -s&#x27;compdef _git gss=git-statusalias ga=&#x27;git add&#x27;compdef _git ga=git-addalias gm=&#x27;git merge&#x27;compdef _git gm=git-mergealias grh=&#x27;git reset HEAD&#x27;alias grhh=&#x27;git reset HEAD --hard&#x27;alias gclean=&#x27;git reset --hard &amp;&amp; git clean -dfx&#x27;alias gwc=&#x27;git whatchanged -p --abbrev-commit --pretty=medium&#x27;alias gf=&#x27;git ls-files | grep&#x27;alias gpoat=&#x27;git push origin --all &amp;&amp; git push origin --tags&#x27;alias gmt=&#x27;git mergetool --no-prompt&#x27;compdef _git gm=git-mergetoolalias gg=&#x27;git gui citool&#x27;alias gga=&#x27;git gui citool --amend&#x27;alias gk=&#x27;gitk --all --branches&#x27;alias gsts=&#x27;git stash show --text&#x27;# Will cd into the top of the current repository# or submodule.alias grt=&#x27;cd $(git rev-parse --show-toplevel || echo &quot;.&quot;)&#x27;# Git and svn mixalias git-svn-dcommit-push=&#x27;git svn dcommit &amp;&amp; git push github master:svntrunk&#x27;compdef git-svn-dcommit-push=gitalias gsr=&#x27;git svn rebase&#x27;alias gsd=&#x27;git svn dcommit&#x27;## Will return the current branch name# Usage example: git pull origin $(current_branch)#function current_branch() &#123;  ref=$(git symbolic-ref HEAD 2&gt; /dev/null) || \\  ref=$(git rev-parse --short HEAD 2&gt; /dev/null) || return  echo $&#123;ref#refs/heads/&#125;&#125;function current_repository() &#123;  ref=$(git symbolic-ref HEAD 2&gt; /dev/null) || \\  ref=$(git rev-parse --short HEAD 2&gt; /dev/null) || return  echo $(git remote -v | cut -d&#x27;:&#x27; -f 2)&#125;# these aliases take advantage of the previous functionalias ggpull=&#x27;git pull origin $(current_branch)&#x27;compdef ggpull=gitalias ggpur=&#x27;git pull --rebase origin $(current_branch)&#x27;compdef ggpur=gitalias ggpush=&#x27;git push origin $(current_branch)&#x27;compdef ggpush=gitalias ggpnp=&#x27;git pull origin $(current_branch) &amp;&amp; git push origin $(current_branch)&#x27;compdef ggpnp=git# Pretty log messagesfunction _git_log_prettily()&#123;  if ! [ -z $1 ]; then    git log --pretty=$1  fi&#125;alias glp=&quot;_git_log_prettily&quot;compdef _git glp=git-log","categories":["命令行"],"tags":["git","oh-my-zsh","alias"]},{"title":"小贼物语(Tiny Thief)通关了~~","url":"//tiny-thief-finished/","content":"攻略就不写了，网上到处都是小贼攻略。\n全部隐藏道具集齐还有奖励的 “花絮” 视频，就像电影的片尾片花一样。\n\n宛而一笑。\n","categories":["游戏中心"]},{"title":"所以说翻译永远是个被原作者坑死的","url":"//translation-tragedy/","content":"弹丸论破中，作为主角反派之一的黑白熊，其名字来自于日文モノクマ (monokuma) 。\nkuma 好理解，就是熊。但 mono 略奇怪一点，因为 mono 直接对应词汇是“物” 也就是 “东西”。具体而言比中文的“东西”意义更广泛一点，是构成各种词的常用结构。比如 bakemono（怪物），monogatari（物语）等。\n宫崎骏有部电影叫《Mononoke hime（幽灵公主）》，其中 mononoke 的本意也是 “事物的灵魂”，基本上，日本人把大到自然灾害、小到头疼的一切无法解释的事情都归咎于 Mononoke。Mononoke 可以是像轮子那样非生命体的灵魂，死人的灵魂，活人的灵魂，动物，小妖精，怪物的灵魂，或是一个自然的妖精。所以中文译成了幽灵。\n但 monokuma 为什么不是 “物熊” 而是黑白熊呢？\n这事要说起来就更扯了…… 因为这个 mono 是英文 ╮(￣ ▽ ￣)╭\n看一下这个单词吧：\n\nmonochrome\n英 [ˈmɔnəˌkrəʊm] 美 [ˈmɑnəˌkrom]n. 单色画，单色照片，黑白照片adj. 单色的，黑白的\n\nMonochrome reproductions of natural daylight scenes are totally unnatural in appearance.天然光照射下的景物若以黑白方式来重现，看起来总感到不够自然。\nIn monochrome maps, of course, colour variation cannot be employed at all.当然，单色地图根本不可能采用颜色的变化。\nThe sun was down and the room fading to monochrome.夕阳西下，房间黯淡下来，周围变成了一幅单色画。\nFew monochrome television engineers found it necessary to be knowledgeable about the subject of “light”.在从事黑白电视工作的技术人员中，很少有人感到必须具备有关光学方面的知识。\nMonochrome machine belongs to the overprinter of wet-dry stack.单色机属于干叠潮套印。\n\n\n然后再看一下人物形象：\n原意是单色熊，形象又是黑白，其实翻译作单色熊反而不太正常，毕竟黑与白都是颜色，叫单色熊会被吐槽致死吧。英文的 mono 再理解一下，确实应该是单一、唯一的意思，但在光学成像上，它的意义更多地是 “单色着色&#x2F;染色”，所以，在不染时，是有另外一个“底色”存在的。mono 描述的，是着色唯一，和中文的 “单色” 有那么点容易忽视的细微的差别，所以翻译成 “黑白熊” 确实更好一些。\n无一不符合 信 达 雅 俗 四字，大巧不工，至高境界。\n境界，也就撑了不到半年。\n因为弹丸 2 又出来一新货，名叫 monomi。mi 这个尾缀也是个正常的日文，比如多啦 A 梦（doraemon）他妹就叫多啦咪（dorami），所以你从这个名字上就直观地能知道这货是黑白熊他妹，简称黑白妹。\n但是——\n这货的形象是这样的：\n\n这个新形象把前文提到中英之间细微的差别给暴露出来了。monomi 的名字是 monochrome + mi，也就是说，monomi 的名字意思是 “单色妹” ，而不是 “黑白妹” 。\n因为它是白底上的『单一的粉色』的，而不是『单色』，更不是『黑白』的。对应的，它哥的名字应该叫『单色熊』。\n这种情况在翻译中经常会遇到，尤其是在跟随地翻译一些还在连载出新的作品时。作者在后面的作者品中加入了与前面相照应的内容，但当初翻译时没有料到会有这种照应。\n办法也是有的：\n\n就叫粉白妹，在这个例子里也可以接受。找一个译后也能保持这种照应的新词，这种情况可遇不可求。\n如果你能改旧作，就把旧作中的译法改了，继续保持前后的统一。但这种情况若再三发生，读者仍然会十分混淆。\n加入旁白注释，以解释这种照应的关系。\n弃疗，用音译。注释？什么注释？用爱发电也要讲 ROI 的。\n\n","categories":["动漫边缘"],"tags":["monokuma","monomi","名字","弹丸论破","翻译","黑白熊"]},{"title":"XAMPP 和 VMWare 的冲突&hellip;&hellip;","url":"//xampp-vmware-conflict/","content":"确切地说，是对 443 端口的占用。\n21:51:59 [Apache] Attempting to start Apache app…21:52:03 [Apache] Problem detected!21:52:03 [Apache] Port 443 in use by “”C:\\Program Files (x86)\\VMware\\VMware Workstation\\vmware-hostd.exe” -u “C:\\ProgramData\\VMware\\hostd\\config.xml”” with PID 3304!21:52:03 [Apache] Apache WILL NOT start without the configured ports free!21:52:03 [Apache] You need to uninstall&#x2F;disable&#x2F;reconfigure the blocking application21:52:03 [Apache] or reconfigure Apache and the Control Panel to listen on a different port\nXAMPP 的原因给得很清楚，就是 VMWare 的 hostd 占用了 443 端口。\n443 端口是 HTTPS 服务所使用的端口。所以第一反应是去编辑提示给出的 config.xml，希望能修改默认的 443 到其它指定端口上。结果发现不可行，Config.xml 中的内容很多，直接搜索 443 也搜不到。\n于是转换思路，从 VMWare 的产品设计思想入手，为什么 VMWare 要给这么一个系统启动就会自启动的服务去占用 443 端口。按照这个思路，果然发现了原因：\n\nVMWare 有一个功能是 Shared VM，就是基于网络的共享虚拟机，换成人话就是，真实机器不在你身边，架在真实机上的各虚拟机当然也不在你身边，但肯定又有操作虚拟机的需求。于是就提供了一个远程操作虚拟机的功能，这个功能当然需要加密连接，安全啊。\n所以就占用了 443 端口。\n当然，我是本机安装所以用不到这个功能，Disable 掉就行了。然后 XAMPP 就正确启动了。\n","categories":["软件使用"],"tags":["vmware","443","XAMPP","冲突","comflict"]},{"title":"硬用数学（二）：博客的流量又下去了 &#038; APP 限免好处？","url":"//you-can-never-know-the-next-choc/","content":"硬用数学（二）\n你问硬用数学一去哪了？在草稿箱里呢\n\n不说废话，直接上图。\n嗯，在八月底九月初这个博客有了一个访问量的小高峰，原本一天十来出头的 UV，那几天涨到 100 左右，后来直到现在，又稳中有降了。\n原因很简单，另外来几张图就知道了：\n\n也就是说，切绳子所有画作这一篇文章，占掉了博客全部 85% 流量。\n\n所有靠搜索引擎搜索过来的，前十位都是为了搜切绳画作攻略的。\n\n在百度、Google 搜索 “Cut the rope 画作”，那篇文章都是排第一位的。\n嗯，还有一件事。\n有史以来从未限免过，被誉为节操最足硬通货的最原作版 Cut the rope，自发布三年多大卖无数月始终占据畅销榜的 APP 之一，在 8.31 限免了。\n所以博客流量涨十倍。\n考虑到之前的 Cut the rope 访问都是基于付费用户和破解用户造成的，而这些用户在限免时不会有大变化。\n同时另一方面，我也没有对博客作任何用心的、实质性能增加流量的动作。\n于是认为每天平均 10 个的量在限免期间也没有变化。\n也就是说，增加的那部分，应当是由一天限免造成的大约持续三周的波峰。\n也就是说，这段波峰的面积，减去 “日常” 数据，比上一天 10 UV 基础数据的比例，大约就是热门 APP 一天限免的下载量与收费时下载量的比例。\n计算了一下：\n从 8.28 到昨天（9.21），约 27 天。期间总 UV &#x3D; 1337。\n根据 8.28 前数据，每月大约 400 个 UV。所以净余 UV 也就是 937。\n由于:\n1. 这些净余 UV 几乎全是冲着 Cut the rope 去的。\n2. 由破解、技术方面发生实质变化的可能性极小。\n所以净余 UV 可以完全认为是 Cut the rope 限免造成的。\n又因为：\n1. Cut the rope 只限免了一天。\n2. 在未限免时平均日 PV &#x3D; 13\n所以，限免造成的下载暴涨倍率约等于 937&#x2F;13 &#x3D; 72 倍。\n而且目前看来，这些余量还会继续涨一些时间，所以认为总体在 90-100 倍左右没有太大问题。也就是我们得出结论：\n对于一个优质 APP，限免一天造成的新用户数量可以相当于 90-100 个收费天。也就是全年四分之一的销售量。\n当然，Cut the rope 确实也属特例。包括以下几点：\n1. 三年从未免过。这是很重要一的点，常免将军会让大家有预期，效果也就不如它好了。\n2. 获得了 App Store 当周最优秀 APP 首页推荐。通常来说，APP 限免的目的之一也就是为换一个苹果优惠&#x2F;免费提供的广告位，但对于 Cut the rope 这货还是给特殊优待了。别家 APP 免完还要等排期，它一免直接上首页大 Banner 了。\n3. 第三方网站各种大推特推。这消息要是错过，还做什么苹果 Fans 站啊。\n4. 归根结底，还是品质出众，愿意买单。\n但是，我们打个巨大的折扣，不是对折，而是脚背折。10 倍，总是正常的吧。\n这能解释为什么很多品质 APP 都喜欢搞限免，甚至先提价再搞限免了吧。\n嗯，这算是硬用数学第二篇吧，随便扯个淡，怎么一些数据推另外一些数据。中间因果关系说硬，也不是那么硬，说牵强，其实也挺靠谱的。 那个脚背折除外，有些烂 APP 能打成鞋底折的。\n","categories":["硬用数学"],"tags":["Cut the rope","切绳子","数据分析","硬用数学","限免","博客流量"]},{"title":"产品经理为什么需要学习打架","url":"//why-do-we-fight/","content":"通常情况下，做技术的，尤其是做程序开发的，最期望的事情就是写完一套代码，能一直高效率地用很长时间。“用很长时间”包括两种情况，一是全然不动的，二是只需要小修小补的。而最害怕的，就是今天刚按产品经理的要求写完代码，明天他过来说，“嗳哎唉~~，还需要添加什么什么功能”，甚至是“我们要推倒重来”。\n比如说，你是一个工匠，一位顾客过来，想要一个家用烤面包箱。于是你发挥自己的才能，按顾客的家庭人口、住宅大小、生活习惯等设计了个完美的烤面包箱。它不大，因而不占空间且易于清洗；它火力适中，能耗少而依然有足够的热力；它外观精美，与其它家俱协调一致。\n等到你在交付时，顾客突然说：“等等我还要拿这个烤蛋糕。”\n你满腹牢骚，考虑到自己的工匠名声与招牌技艺，答应了。\n然后你重新打造了一个更大的烤箱，兼具烤面包与蛋糕的功能，可以设定两种不同的温度与时间，分别适应两种需求。为了外观你绞尽脑汁，拆掉并抛弃原来的外壳，重新制作更大的外壁隔热材料——由于更大的火力使得原来的隔热材料已经无法胜任存在火灾隐患，你不得不费了巨大的精力去重新选择合适的材料，更大的箱子已经没法放在原来那个地方了，配套的管道也要切割移动。而这次工期变得非常紧……\n终于，你还是完成了顾客需要的东西，不负工匠之名。粗粗算来，这个烤箱几乎有一大半的东西都重新制作了，尽管如此，你只是默默地交付了结果，而没有向顾客作任何的抱怨。在顾客看来，你似乎只是很简单地，花了几天时间，把箱子扩大了一圈。\n于是顾客提出了新要求：“那你再顺便帮我加个功能，让它能烧水吧”\n你考虑到板材需要重新制作，以提供密封防水蒸汽能力。又不能完全密封得留口泄气以防爆炸，于是结构也需要重新设计。为防水烧干，你需要增加一个探测水沸而后停止加热的阀门。这个阀门需要自动控制系统，所以需要一个复杂结构。阀门与输热管道连通，于是管道也需要防水。……\n……你回忆起你的家族，历代均以精湛的手艺自豪，家族几代人通过智慧与勤劳，赢得了无数的声名与赞誉，获得了乡坊的认同，终于在这片土地扎根。每一代人，都恪守制作每一件精品的家训，从未改变过。……太多的历史，太多的荣耀，推动着你不断地往更快、更高、更强的道路上前进。你知道，在工匠的道路上，你永不放弃！\n于是你胖揍了他一顿。事情就解决了~\n附此文的更新：\n\n迟到的感谢信\n\n","categories":["产品经理"],"tags":["产品经理","学习","打架"]},{"title":"这博客快长草了","url":"//not-easy-to-write/","content":"实在是半途而废的文章太多了。\n其实博客的草稿箱里的文章数量都近乎是发布数量的四五倍了，至于连草稿箱都没进的就更多了。\n灵光一闪想写点什么的时候倒是经常有，也很快就能在脑中组织出一篇文章的大致脉络来。\n对于由某事而发的感悟文章最是简单，无非是事例加抽象一下的所谓哲理，但是这样的文章自己都觉得没什么价值，对于我这种其实挺懒，做点什么事情都要按时间折算成本的人来说，总是一到真想提笔的时候就不想写了。\n而要讲一下技术学习的话，略难一点，要花不少时间去思考如何才能写得清晰明了，不少时候还得配上相应的说明图片。有时写着写着，就会发现这也不是自己现在能驾驭的题材，就只好中途放弃了，而另一些时候，则是因为时间拖得太长，或者自己做图片难看让自己不满意，文章也就束之高阁了。\n至于文青类文章，真的很难。最近几年都没有阅读那些华美辞藻的空洞文章，“词感”的下降极度明显，很多显得文艺的词汇都忘光了。而且这类文章总是要花很大的心思去修整每一句话的表达，如果不是时之所至，或者有什么外界因素的强烈刺激，就会沦为“憋”的状态，写出来也过不了自己那关吧。\n至于其它的杂七杂八的文章，还是受限于时间因素，觉得没什么价值，也就这么放过去了。\n总还是觉得，写东西不如读书。\n所以你看，为什么会有轻博客、微博，为什么它们会红火。\n真的是因为这些东西消解了“文章的价值”，让很多人不再局限于写作一篇合乎篇幅的文章所必须的时间和脑力的投入。反正能写长也不让你写长，写长了也没人仔细读，那何不如就来那么一两句话呢。\n轻博客也是类似，把外观弄好看，把排版弄整齐，把篇幅搞短，方方的豆腐块里最适合放几句话的小感悟，还有图片。对的，图片，所以大量的轻博客都沦为了相册、贴图集、图片游记、美女柜等等。\n我觉得我也得开始写短篇了。\n要不也弄个轻博？\n","categories":["唠唠叨叨"]},{"title":"VPN 提示错误 711 的解决办法","url":"//vpn-711-error/","content":"今天连 VPN 时遇到了 “错误 711 无法加载远程访问服务连接管理器。”\n上网查了一下，说是要启动以下三项服务:（通过开始→运行→输入 services.msc →回车）\n\nTelephony\nRemote Access Auto Connection Manager\nRemote Access Connection Manager\n\n查看了一下服务，果然如此，三项都属于未启动状态。虽然不知道怎么就停了，大概也许可能说不定又是安装过的某个软件搞的，不管。\n但我一点重启，提示\n\n1067: 依赖的服务未运行。\n\n我擦……(；°д°)……继续查看依赖服务，发现 Secure Socket Tunneling Protocol Service 这个服务没有运行。启动之，提示：\n\n因为依赖的服务都没有运行所以我运行了一下就停了。\n\n我了个大去！！！\n(；°д°)！(；°д°)！！(；°д°)！！！  \n卖萌不带这样的。\n按网上文章的后续，把 C:\\Windows\\System32\\LogFiles\\WMI 这个文件夹 “管理员获得所有权” 就可以了。但重启系统以后依然不行。\n怒了，不断地查依存和被含依存关系，把 ICS、WMI 等服务全查出来。查了一下微软文档，罗列了一下目录，发现system32 下 wbem 有重点嫌疑。同样添加管理员取得所有权以后再次重启，VPN 就可用了。\n嗯，标准的程序员调试技巧。\n“坏了，为什么呢？”\n“还是坏的，为什么呢？”\n“哎~ 好了。但是为什么呢？”\n就这么记一笔吧。\n","categories":["软件使用"],"tags":["vpn","711 Error","WMI","未启动","管理员取得所有权"]},{"title":"迟到的感谢信","url":"//thanks-note/","content":"博客一直保持将近一月一篇的低频度更新，其中的干货更是少得可怜，也一直坦然接受于每天十几二十个 IP 的访问量。\n甚至连留言也没有好好回复，真的是非常随意的状态，甚至到了考虑要不要继续续费的情况，因为前段时间 hellohost 的速度一直不是很正常。\n本来就是自娱自乐，如是而已。\n不过今天必须专门发一封感谢信，致谢那些依然愿意成为读者的人——无论你是不是被搜索引擎带过来的，也无论你是否收藏或者订阅，那都不重要。\n事情起因是这样的。\n今天闲来无事，我又查看了一下 Google Analytics，原意是查看公司新上的一个小网站的推广流量情况。顺便突然好奇，想看一下 2014 全年我这个博客的流量，结果发现了这个：\n2014 年上半年博客访问量曲线，小荷尖尖角\n一个异常的高峰发生于 3 月前的某一天，具体是 2.26 号。\n首先考虑的是否是那天某个事件正好与我某篇文章关联了，就像之前发生过的那样：\n硬用数学（二）：博客的流量又下去了 &amp; APP 限免好处？\n于是 GA 定位到 2.26 这一天，具体查看了这一天的流量：\n这是用户访问分小时曲线\n当然，更能说明问题的是这几张：\n大部分来源都是 Referral，也就是引荐\n点入 Referral，结论已经很清楚了：\n明显是有人把我的博客文章转载到了 v2ex.com\n所有的引荐来源都是 v2ex.com 这个国内专业的前端开发们聚集的网站。最后：\n引荐文章的具体路径\n所以，事实就是，有人把我随兴写的一篇酱油文：产品经理为什么要学习打架 转发到了 v2ex，造成了平凡日子中一次甚至都没有被立刻发现的意外。\n啰嗦半天，以下是感谢信正文。\n一、感谢我博客的所有读者们，我发现，真的有人在默默地读，还是让人心底挺温暖的一件事情。尤其是这种闲碎文章。\n二、感谢转载者 geew，至少今天有了一次小小的意外惊喜。你当然也是读者之一。\n三、感谢 v2ex 管理的严谨。因为这行字：[全文转载已删 @[GordianZ]]\n四、感谢 Google Analytics，牛逼的产品。\n","categories":["唠唠叨叨"],"tags":["转载","v2ex","流量高峰"]},{"title":"去掉 google font 引用，提高 wordpress 打开速度","url":"//remove-google-font-in-wordpress/","content":"有很多种原因导致 wordpress 载入缓慢，其中最冤的一种就是引用了一些导致请求超时的网页资源。\n最近这例比如 font.googleapis.com 上的网页字体文件。（原因你懂的）。\n超时啊！整整一分钟以后才能见到页面。\n而且这玩艺跟主题基本无关，所有的主题几乎都调用了 wordpress 的 wp_head(); 函数，换主题基本不管用。\n解决方法：\n打开 wordpress 目录下的 wp-include&#x2F;script-loader.php，查找\n$open_sans_font_url = &quot;//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,300,400,600&amp;subset=$subsets&quot;\n\n（对于最新的 wordpress 版本，代码在第 602 行附近）\n直接注释掉，如下：\n//$open_sans_font_url = &quot;//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,300,400,600&amp;subset=$subsets&quot;;\n\n（多了两划 &#x2F;&#x2F; 而已）\n把修改后的 script-loader.php 上传到服务器，或者可以登录的话直接在线修改。\n完成以后重新打开 wordpress，享受酸爽吧。\n","categories":["软件使用"],"tags":["wordpress","google font","loading","speed","加载速度"]},{"title":"黑板报第二期：相关性","url":"//board-paper-2-correlation/","content":"前东家任研究院 PM 期间做的一些黑板报，主要目的是普及基础数学概念。离职了，只出了短短五期，第六期写到一半，回头把已经成文的也贴上来。\n嘛，这个作者就是我自己……\n第二期：相关性（2.8MB)\n","categories":["硬用数学"],"tags":["斐波那契数列","独立事件","相关性","黑板报"]},{"title":"黑板报第五期：无穷","url":"//board-paper-5-infinity/","content":"前东家任研究院 PM 期间做的一些黑板报，主要目的是普及基础数学概念。离职了，只出了短短五期，第六期写到一半，回头把已经成文的也贴上来。\n作者写了 A C 两部分，B、D 及小黑板报是我写的。\n第五期：无穷（3.0MB)\n","categories":["硬用数学"],"tags":["势","大数表示","希尔伯特","无穷大","比较"]},{"title":"黑板报第三期：递归","url":"//board-paper-3-recursion/","content":"前东家任研究院 PM 期间做的一些黑板报，主要目的是普及基础数学概念。离职了，只出了短短五期，第六期写到一半，回头把已经成文的也贴上来。\n作者提供了述事题材，内容全部重写。小黑板报自己写的。\n第三期：递归（3.0MB)\n","categories":["硬用数学"],"tags":["黑板报","分形","归纳法","德罗斯特","递归"]},{"title":"黑板报第七期：约瑟夫斯环","url":"//board-paper-7-josephus-ring/","content":"前东家任研究院 PM 期间做的一些黑板报，主要目的是普及基础数学概念。离职了，只出了短短五期，第六期写到一半，回头把已经成文的也贴上来。\n作者一气成文，一字未改。\n第七期：约瑟夫斯环（2.8MB)\n","categories":["硬用数学"],"tags":["黑板报","历史","约瑟夫斯环"]},{"title":"黑板报第一期：算法的起源","url":"//board-papers-etymology-algorithm/","content":"前东家任研究院 PM 期间做的一些黑板报，主要目的是普及基础数学概念。离职了，只出了短短五期，第六期写到一半，回头把已经成文的也贴上来。\n主文章作者一气完成。小黑板报我写的……虽然没啥内容。\n第一期：算法的起源（2.1MB)\n","categories":["硬用数学"],"tags":["黑板报","历史","算法的起源"]},{"title":"自己写 UI 的几点总结：","url":"//conclusion-for-the-ui-experience/","content":"自己写 UI 的几点总结：\nCSS2.x 很简单，更接近于图像处理软件的设计思路。CSS3 引入不少逻辑化与动画式的表达，想来会逐步考验设计人员的技术功底。CSS 3D……算了不提。\nHTML5 则进化&#x2F;退化到“语义标签”了，相应的样式控制越来越少。不过语义定义逻辑还不是很完善。\n如果一个html标签完全没有和外观相关的属性，八成是个HTML5新增标签。\nJQuery很好用，能不用就不用。这句话不是病句。\n懒惰是人类进步的原动力，所以学 less 代替 CSS，用 Emmet 写 html，找各种代码补全和片段插件。\n事前规划很重要，但下笔成章更多出现在胸有成竹的大牛身上。我这种需要的效果还要现查的新手，只能靠着自动刷新一点点慢慢调。\n尽管只能慢慢调，还是得事前规划，事后重构。所以新手写代码要写两遍，一遍实现，一遍重构。重构才是程序员的良心。\n好的前端，必须是又能抠图，又能抠腚。\nAxure、UIDesigner、Mockup、Sketch、Photoshop、Illustrator、CorelDraw、Briefs、BluePrint、Flinto、OmniGraffle、XMind……以上这些一个没用到。工具只是工具，用哪个只取决于习惯与熟练。\n自己设计自己实现，纸笔最趁手，不服来决斗。\n好书值得付费购买，好软件也是。\n95% 以上的时间在查找和学习实现办法，实际生产时间不到 5%。所以大牛和新手的薪资差 20 倍只是起步价。\n时间和质量永远是难以平衡的矛盾。\n大屏显示器比笔记本小屏提升 20% 效率，双屏提升 50% 效率，如果桌子够大就放三屏，左屏查资料，中屏写代码，右屏实时预览。四屏就再加一屏资料，五屏就再加一屏资料，六屏就再加一屏资料……想想都醉了。\n快捷键提升效率，固态硬盘提升效率、Everything 提升效率、关掉不用的窗口提升效率，其实每样都只提升几秒钟，关键是不再打断思路。\ngitk 是个好东西。\n践行 U Can U Up, No Can Learn Up，多学点东西，转头忘也没关系。反正不 Up 也是躺尸床上玩手机。\n想不出来的时候打两盘星际虐虐疯狂电脑，二十来分钟。打完就可以睡觉了，反正还是想不出来。\n“做出来”这个过程还是很爽的，根本停不下来。\n我恨 IE。\n\n","categories":["前端新手菩萨保佑"],"tags":["CSS","html","自学心得"]},{"title":"网页布局设计脑图","url":"//mindmap-for-web-draft/","content":"点击查看原图。\n\n","categories":["前端新手菩萨保佑"]},{"title":"编辑 /etc/motd 添加 SSH 登录留言","url":"//edit-motd-to-ssh-message/","content":"Linux 奇技淫巧编辑 &#x2F;etc&#x2F;motd 可以为 SSH 登录添加留言。任何用户通过 SSH 登录时都会看到这个留言。\n\n理论上是支持任何语言，因为能否正常显示完全取决于终端，而非系统自身。比如 Ubuntu 本机登录就会显示乱码：\n\n而在 Ubuntu-desktop 环境下，由于加载了中文支持，终端就又能正常显示中文了。\n\n","categories":["命令行"],"tags":["linux","/etc/motd","message","登录留言"]},{"title":"写了个 Mac 键盘当练习了","url":"//html-css-mac-keyboard-practice/","content":"围观地址： https://github.com/kaikaiiiiiii/mac-keyboard 用了一些简单的 CSS，最后看起来效果还不错。\n缘起是想给自己写个在 mac 下通过 alt&#x2F;shift+alt 加内容键可以直接输入的符号列表，后来想想要不就做个键盘得了。最后效果就如下图了。\n1. 功能键区的图标用的是 http://fontawesome.io ，不过依然有些图标找不到，暂空。F8 的图标是两个 fa 图标拼的。F1&#x2F;F2 的图标比较写意，也不是完全一致。\n2. 通过 :active 伪类添加了按键点下时的效果，包括：\n(1) 底色变全黑 #000; （默认颜色是#333;）\n(2) 位置右移 2 像素，下移 2 像素。\n3. 通过 Transition 添加了“回弹”的效果。\n4. 通过两个像素的 Border-bottom 效果，强调了按住 alt&#x2F;shift+alt 后可以直接输出的字符。\n5. Transition 在表现“回弹到原位时”，必须明确地添加 left:0px; top:0px; 以使得动画的计算有终点，否则 transition 是不起效果的。这个坑了半个多小时，遍查不到，突然自行顿悟。\n6. 通过 -*-user-select: none; 让按钮在双击时，上面的字符不至于被选中。\n7. css 的类还是分得很细的，键长、宽、upper、lower、keyname、altkey、shiftaltkey 等都是单独的类。当然 .space 的 width 就只能单写了这个没办法。\n8. jQuery 还在学习中所以这个项目到这里就结束了。\n\n","categories":["前端新手菩萨保佑"],"tags":["CSS","html","Mac keyboard","苹果键盘"]},{"title":"Ubuntu 安装 Oh my zsh","url":"//ubuntu-install-oh-my-zsh/","content":"&gt;&gt;这里&lt;&lt; 写了如何在 Ubuntu 桌面版下安装 oh-my-zsh 的命令行，但经实验以后发现最后几步存在问题。作个笔记：\n1. 首先安装必要的软件包：\nsudo apt-get install wget git zsh\n\n2. 下载别人写好的 oh-my-zsh 安装脚本并自动执行安装\nwget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | zsh\n\n3. 更换终端 Shell 到 zsh (其实这里开始就有问题了，我这步用的别的办法，简单好用，疗效显著）\nchsh -s `which zsh`\n\n4. 重启，显然只是为了让系统保存设置。\nsudo shutdown -r 0\n\n问题在于，第三步时经常会出现什么 PAM 未验证之类的问题。网上查的原因五花八门，解决方法也各异，挨个试过来，有时有效，浪费时间。\n我用的办法很简单。\n\n终端 – 菜单 – 编辑 – 配置文件首选项 – 标题和命令 – 运行自定义命令而不是 Shell(N) – 自定义命令：zsh\n\n如图：\n\n补充:开始使用服务器后，这种方法就无效了。如果 sudo chsh 依然无效的话，可以 vim &#x2F;etc&#x2F;passwd，然后搜索 bash，并替换为 zsh，算是暴力解决方案。\n补充：禁用升级提示You have to add DISABLE_AUTO_UPDATE=&quot;true&quot; on your .zshrc before the source $ZSH/oh-my-zsh.sh line. By doing so, oh-my-zsh will just skip the update checking script.\n","categories":["命令行"],"tags":["oh my zsh","PAM未验证","ubuntu","解决方案"]},{"title":"vmware下ubuntu虚拟机与宿主机共享文件夹","url":"//vmware-sharefolder-to-ubuntu-desktop/","content":"0.已经安装 VMware Tools。这个不写了。\n1. 在 VMware 里开启共享文件夹，指定主机的共享目录。图为 Windows 宿主机，Mac 类似。\n\n2. 在 Ubuntu 终端下进行 mount，mount 的目标最好选择容易通过文件管理器能够到达的目录。毕竟这个共享文件夹的 mount 和光驱之类的硬件 mount 不太一样，顺手最重要。我用的是 ~&#x2F;vmshare 目录。输入代码：\n$ cd ~$ md vmshare$ sudo mount -t vmhgfs .host:/ ~/vmshare\n\n\n这时候打开文件管理器，就已经可以看见主文件夹(home)下已经有一个 vmshare 的目录了。\n3. 鼠标拖动该目录到桌面，先不要放手。按住 Alt 键，光标会变成一个带问号的小手，这时再松开鼠标，会弹出一个菜单询问你的操作。选择 “链接到此处” 项，如图：\n\n这样，共享文件夹就在桌面建立了一个快捷方式。你在 vmware 里设置宿主主机共享目录，在 Ubuntu 虚拟机下也可以方便地看到了。如果主机没设置，这个目录里就为空。\n\nPS：要去掉这个共享目录（虽然我想不明白为啥要去掉），使用命令：\nsudo umount ~/vmshare\n\n就可以了，~&#x2F;vmshare 就是你自己挑选的路径。\n","categories":["软件使用"],"tags":["vmware","ubuntu","mount","共享文件夹","虚拟机"]},{"title":"新浪微博图片缩略图规则","url":"//weibo-pic-resize/","content":"新浪微博在用户上传图片后，会对图片进行处理，生成不同版本的缩小图，以适应各种客户端的需求。图片分为 large、bmiddle、small、thumbnail、square 五种尺寸，在需要相应大小图片时，只需要对图片 url 的该段进行替换即可：\n\n&#x2F;large&#x2F;：原图。\n&#x2F;bmiddle&#x2F;：当原图宽度&gt;440 像素时，则按比例缩小图片使得宽度&#x3D;440 像素。当原图宽小于 440 像素时，则直接原图。高度无关。\n&#x2F;small&#x2F;：规则类似 thumbnail，尺寸为 200 像素。最小断点未测试，猜测为 60 像素。\n&#x2F;thumbnail&#x2F;：1. 当长宽比例&lt; 120:35.5 时，以比例缩小到长和宽均不大于 120 像素，即：竖长图缩为高 120 像素，横长图缩为宽 120 像素；\n2. 当比例 ≥ 120:35.5 时，即当按比例缩放时，一边满足 120 像素另一边尺寸小于 36 像素，则进行特殊处理；\n2.1 竖向图片，缩放为宽 36 像素，然后从顶部往下截取 120 像素的部分作为 thumbnail 图；\n\n2.2横向图片，则重新缩放，以120像素为高度，截取左边的120像素作为宽度，形成一个 120×120 的正方形 thumbnail 图。\n\n3. 当原图片长宽均小于 120 像素，不处理。\n&#x2F;square&#x2F;：按比例缩小到长宽中的较小值等于 80 像素，然后再对另一边进行居中裁切，使得两边都等于 80 像素。\n\n\n","categories":["前端新手菩萨保佑"],"tags":["尺寸","微博","缩略图","规则"]},{"title":"故纸堆：[你说我说] 我的父亲/母亲/长辈与电脑","url":"//parent-and-computer-stories/","content":"在 tdrd.org 上翻出旧时发起过的一个话题。突然发现，我偶尔还是需要这种恋旧般的温暖。\n\n发信人: kaikaiiiiiii (开开·莫让眼泪，花了妆容), 信区: NetResource标 题: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 06:26:50 2009), 站内（一）\n我的父亲终生保持着学习的习惯，幸运地，学习电脑的基本操作对他而言不是太大的问题。\n他也会标准的普通话与拼音方案，因此，汉字输入对他而言也不是什么问题。\n可是在他学习电脑时，还没有手写板，也没有那么发达的手写汉字识别软件，所以，他只能靠对着键盘打字。\n那时我还小，站在一边看他握着双拳，伸出两个食指，费劲地在键盘上找半天，然后按下一个按键，抬头看一下屏幕，又按一下按键。\n那时还是DOS，还是WPS。\n一直如此。\n很多年以后的现在，在我已经长高而他老得甚至已经矮下去的现在，他依然用着两指禅在打字，依然是陈旧的微软拼音，虽然熟练地不需要在键盘上找字母了，可是因为无法盲打，还是要低头看键盘，然后抬头看屏幕，再低头看键盘……\n你也知道，这样一会儿脖子就会很疼，是的，我在自己房里看书时，经常能听到父亲打字然后站起来走动的声音。这走动的声音让我安心，真的，很安心。\n就是这样，父亲坚持着写出了三本书，两本出版，一本正在联系。听他说，第四本的腹稿也已经完成。而我，虽然会着盲打与五笔，号称拥有国家二级打字员的速度，却什么都没有做出来，一事无成。\n最近父亲的手腕出了些问题，我正在找，有没有好的手写板可以替代父亲十几年的二指禅。\n（二）\n父亲的近视一直不深，只有我的一半，可是加上了老花，看电脑的屏幕就不是很舒服了。\n我从未注意过这个问题，直到某年寒假回家，发现父亲把19寸液晶显示器的分辨率调到了最低的800×600。\n如果你对电脑略有了解，或者在自己的电脑上试试，就会发现，这是个非常难受的分辨率。\n字体大而扁，笔划不清，屏幕容纳的空间小，边缘也软乎乎毫不锐利。\n我以为父亲只是不会设置，于是调回了19寸默认标准的1440×900。\n可是第二天晚上，发现父亲坐在电脑前打字，屏幕又调回了800×600，我才好奇的问他缘由。\n“因为大，看得清。”\n那时我才明白这个问题。我才发现父亲使用电脑是如何的一个艰难适应的过程。我不知道他是从何处得知可以依靠缩小分辨率来放大视图，更不知道他是如何忍受而后习惯这种变形、模糊并不舒服的图像——仅仅是为了看得清。\n我试图通过系统自身的设置放大图标、文字，可是，并没有效果，笔划还是那么细，父亲还是要眯起眼睛才能分出戍与戌，分出舆与興，分出茶与荼。液晶的无辐射保护了父亲的眼睛，可是固定的细象素与分辨率却在另一方面伤害着他的眼睛。\n对此，我无能为力。\n我跑遍了整个市区，我搜了很多网站，液晶厂商们都在拼命地做大尺寸，做细象素，做出更高的分辨率，却全然忘却了还有这样一群人，只需要看得清的显示器。\n我在中关村跑了很多年，可还是找不到，父亲也依然在家里忍受着800×600的分辨率。\n我到现在还一直在找，谁知道哪款液晶显示器的点距在0.5mm的，请告诉我。\n\n\n发信人: sunnyloving (Sunny|Dearest), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 09:10:24 2009), 站内\n我老爸老妈不太识拼音，所以，不要说电脑，就连手机发短信目前而言都是不现实的。虽然老妹有启动过叫我老妈拼音的计划，还很规整的在小纸条上写着a o e i u ü，不过学了一段时间效果不佳，计划中止。所以，我打算从手写手机开始，从发短信开始，让他们慢慢接触这些东西。如果喜欢的话，让他们一步一步了解和掌握该如何写字，如何上网，如何让老爹把闲时绉的打油诗用0101记录下来。\n他俩现在生活悠闲，每天俩人一起吃饭，出门在河边走，然后回家看电视睡觉。但是两个人做这些事情有意思，剩一个人就很没意思了。这次老爸出门帮朋友忙，经常不回家，老妈一个人在家里确实很无聊，一个人守着个偌大的屋子看电视到12点，这在我的认知中除了春晚时有可能出现其他时间是不可能出现这种情况的。所以，过年时第一件事情就是给我妈买一个手写的短信，让她无聊的时候能给老爸以及我们打打电话，给我们发发短信。电脑的话，在实现了手机之后再慢慢教之吧。\n\n\n发信人: Rickman (天然蚊香), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 11:03:01 2009), 站内\n我家的电脑基本闲置。。。。\n因为没装宽带 上网也不很方便\n我用的时候偶尔上网看看网页当年我爸要考试的时候帮他下载模拟题复习题之类的让他去打印出来\n我弟用来玩单机游戏 但是也没多长时间\n我妈是我们家唯一一个会五笔的人也是很早以前上了一个培训班学的但是她也没有什么用处\n我爸只会qq\n电脑应该是给生活带来方便的如果没什么大的需要的话也不用了我们家人都比较传统电视远比电脑用的多我妈认为新潮的网上购物之类不一定真的能便宜方便多少\n\n\n发信人: davidstven (老毕), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 12:42:24 2009), 站内\n我给家里买过手写板，但是老爸老妈坚持不用，还是愿意“二指禅”，他们的解释是，用那玩意儿以后会变傻的，连最基本的拼音都拼不出来了。。。\n\n\n发信人: bluebluesky (羽喵喵), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 13:07:54 2009), 站内\n家里的电脑的老爹老妈的游戏机，最多再加上个和我的视频用具~\n老爹打祖玛，老妈宠物连连看。两个人还为这大打出手~汗。。。\n\n\n发信人: vivid0203 (盖世太宝), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 15:20:51 2009), 站内\n我的父亲，是我的偶像！\n以前，他不会拼音，说普通话也不是特别好，更没有用过电脑，可是他拿着一张声母表和一张韵母表，加上一本字典，在年近五十岁时，靠自己敲打键盘把博士论文写好了，拿到了博士学位。\n虽然我是对自己要求非常低的人，老不上进，但是看到父亲，我觉得，只要是肯付出努力，大部分知识和基本技能都并非难事，都在我们的手掌中，只是有时候，我们自己摊开了掌心，放弃了！\n\n\n发信人: arikado (单身公害·NB教|大护法), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Sun Dec 27 23:10:04 2009), 站内\n老爸自从过了单位的计算机打字考试之后就基本不碰电脑了，偶尔我回去会下老电影或者老电视剧给他看，或者介绍他到youku&#x3D;。&#x3D;不过他嫌不清晰&#x3D;。&#x3D;老娘时常拿着字根表打字儿，额，多用于网银和炒股~至于QQ，MSN还有开心这种东西。。。。。我不打算介绍给他们。。。。。。多危险呀~~\n\n\n发信人: taugulua (给点阳光就灿烂), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Mon Dec 28 09:09:02 2009), 站内\n我家老豆\n上网，偷菜，聊qq，玩百度贴吧，我老娘还搭讪陌生人，\n看电影（虽然都是我下的），打牌，看新闻，\n恩恩，有时候我怀疑他们快会人肉了……我的公务员面试名单他们都找的到……\n一度我娘发飙，说我爹天天盯着80-90年代那些香港捉鬼片录像频道不放手，吓到她了……\n后来用baidu视频搜视频多了，就不太用pplive\n然后有一天，告诉我说，央视前几年那个内部晚会很好看……我吓得，你们从哪翻出来的……都会看东方红时空了……\n\n\n发信人: katherine117 (笑笑), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Mon Dec 28 10:36:40 2009), 站内\n我还是挺佩服我老妈的..我还没上小学时刚刮来一阵电脑热,我妈好像就是第一批单位去培训电脑的人,每天苦练五笔..等到我上小学背字根表还是在家老妈教的..不过后来我用拼音还是比她快..逐渐上初中高中学习忙了,没那么多时间上网,然后就见着我妈电脑玩的是越来越熟练,MP3流行后我下载歌都是老妈下的,在PP还没流行时在某个网站包月看电影..后来学着做电子相册,混论坛,查资料…现在他们单位工作联系都不打电话了,直接在QQ群里发布信息..上班要挂着电脑,下班回家还是上网…她比我电脑玩的还熟练,经常说她网龄比我的大多了…qq到现在都两个太阳了..还每天定时收菜种菜…恩 昨天还说看什么乞丐王子的偶像剧…\n\n\n发信人: shulina0426 (奈奈), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Mon Dec 28 13:56:28 2009), 站内\n偶妈只乐衷于用PPLIVE搜索各种偶像剧……有一次惯例的每周电话中，我妈自豪地问我，你猜我这周都干了啥，我说，啥呢~她说，我这周看完了，流星花园的，台湾版第一部第二部，韩版流星花园，日版流星花园，还有那个湖南卫视的一起去看流星雨！！！\n\n\n发信人: qqwwmb (qqwwmb), 信区: NetResource标 题: Re: [你说我说] 我的父亲&#x2F;母亲&#x2F;长辈与电脑发信站: 天地人大BBS站 (Mon Dec 28 14:40:35 2009), 站内\n我老爸是教师，也正是因为这个关系，他接触电脑很早，家里很早也就有了一台486，很早就用wps来做教案，也是学校里最早用powerpoint的老师，也因为此很是在学校里风光一把。\n我老爸是个很有危机感的人，所以面对新事物，他的接受程度和速度甚至比我都快，当年很早就用调制解调器（那个咯吱咯吱的猫）上网了，很早就有了yahoo.com的邮箱，也很早就申请了MSN，甚至还有ICQ和AIM，至于qq和uc老爸也是很早就有了号，他的qq号好像还是六位的，也是因为英语老师的关系，还交了一帮老外网友，网上有个笑话说，学十年语文，不如聊一年qq，这件规律用在我老爸身上再合适不过，当年也就是聊了几个月，打英文的速度 就简直是神速，甚至一度盲打的速度比我都快多了。至于拼音，更不在话下了，当年在教育局培训老师打字的时候，我老爸在他们单位可是翘楚，搞得后来我老爸都成了培训老师，这件事情让他得意了好长时间。\n老爸用电脑，另一件事情就是泡论坛，老爸是个HKC，对于党和国家绝对忠贞不移，所以在天涯上对有人攻击党和政府，我老爸很义愤填膺的，不过碰到没办法HKC的时候，我老爸老是念叨，明天会更好之类的酸词，很是被我鄙视。\n有这么个老爸，其实有时候还真不方便，因为他晓得我的msn和qq号，甚至连我的三个gmail邮箱和我的博客他都晓得，每次偷懒上个qq或者msn，总会发现他老人家闪烁的亮眼，博客里时不时有人警告我要好好学习之类，基本上每个星期都要求qq视频一下还，有时候我正和某女生在qq上狂喷呢，老爸不时跳出来问我上线没，真是煞风景得很。\n不过老妈在老爸的带动下，也学会用电脑，大概是晓得了qq视频不要钱，每次说起话来，还真是没完没了，不过有时候我老妈也懒得理我，因为老妈忙着玩qq游戏，什么斗地主，扎金花，升级之类的无所不通，而且我老妈还超级迷连连看，每日都要爽上几把牌，玩上半个小时的连连看。不过我老妈的水平也就局限于此，所以每每我在网上为非作歹的时候，基本上只防着我老爸。\n不过两个人有一个共同点，就是爱上人大的主页，还有事没事跟我讨论一下人大的最新动态，搞得我是人心惶惶呀。生怕不小心挨个处分，给挂到网上，估计我回家就没什么好果子吃了。\n不过这老两口在家相依为命，不养狗，不养猫，天天在网上，也算是乐子。倒是也解了我不少心愁。\n\n","categories":["文艺青年"],"tags":["回忆","父母","电脑"]},{"title":"星际争霸2建造与修理详解","url":"//starcraft2-repair-build-detail/","content":" 修理（人族 SCV&#x2F;矿骡）\n一个可修理的单位，从 1 滴血修到满血的花费是它生产费用的 25%。（极限地说，应该是 0 滴血修理到满血，也就是完整 100%的血量，但 0 血就死了所以实际无法存在这种情况）。\n一个可修理的单位，由一个 SCV 从 1 滴血修到满血的时间和生产这个单位的时间相同。\n也就是说，不同单位的修理速度并不一致。地堡 100 矿，建造花费 40 秒 400 血，那么一个 SCV 每秒修理 10 血，消耗 10&#x2F;400*100*25%&#x3D;0.625 矿。而兵营 150 矿 1000 血 65 秒，一个 SCV 每秒修理 1000&#x2F;65&#x3D;15.3846 血，消耗 150*25%&#x2F;65&#x3D;0.577 矿。补给站 100 矿 400 血 30 秒，每秒修 13.333 血，耗 0.8333 矿。\n所以要强攻人族路口时，如果没有地堡，则攻击补给站比攻击兵营合算。攻击输出相同的情况下，补给站修理慢还费钱，总血量也少。\n多个 SCV 可以同时修理同一个建筑，效果累加。单位时间的回血量和花费与 SCV 数量成正比，总花费不变。\nSCV 在修理或建造时不能采矿。而 16 农高效采集时每个 SCV 每分钟采 42 矿，故算总帐时需要额外计算每秒 0.7 矿的未采集成本。\n人族建筑在低于 33% 血量时会着火，实战中修理起火建筑需要额外修理火烧掉的那些血量。\n起火掉血为每秒 3 点。但没建造完的建筑反而不会起火。比如一个完成度 99% 的指挥中心因敌方骚扰只剩 1 血，依然不会起火。但如果另派一个 SCV 建造完成，则完成的一瞬间将起火。因为指挥中心总血量为 1500，1% 完成度有 15+1 滴血，可以烧 5.333 秒钟。理论上你可以造出一个完成一瞬间就烧掉的建筑。\n轨道控制基地和行星要塞的费用基数包含指挥中心的花费。也就是说星轨费用 550 矿 135 秒，要塞 550 矿 150 气和 150 秒。所以要塞每个 SCV 每秒修理 10 血。\n尽管矿、气、血量、能量等数值最终显示为整数，但在游戏内部其实是高精度计算的，到结果时再根据需要取整。\n修理费是“先扣款后维修，多不退少补”的扣费办法。也就是说，你修理一个掉 5 血 &#x2F; 10 血 &#x2F; 15 血的地堡都花费 1 矿，但修理掉 20 血的地堡就得 2 矿。从条目 3 我们知道地堡每 5 血修理费是 0.3125 矿。\n但如果派两个 SCV 去修掉 15 血的地堡，则反而需要花费 2 矿，还是因为“先扣再修多不退”，每个 SCV 在开始修理时都需要扣掉一矿，各自修了七八滴血，也不会再还你半个矿了。\n修理过程中，矿和气的扣费是分开的，随着血量回升到各个扣费临界点，逐步分别地一矿一气扣除。\n如果你只剩 1 点矿，那么你可以修理地堡 16 滴血。\n如果你只剩 1 点矿 1 点气，你的矿可以修理行星要塞 1500&#x2F;550*4 &#x3D; 10.91 向上取整 11 点血，你的气可以修理 1500&#x2F;150*4 &#x3D; 40 点血。合起来你只能修理 11 点血，之后就因为矿物不足而停止了。此时气实际上仍有 3&#x2F;4 未用，但也不会还给你。\n传说中的雷神修理时间是生产时间 130% 的情况已经被修正了。现在雷神修理和生产时间同样是 60 秒。\n铁鸦召唤的 自动机炮 和 定点防御靶机 以 100 矿 50 秒作为修理基准费用，也就是修到满血要 25 矿 50 秒。（谁会去修这个啊……)*\n矿骡的修理能力和 SCV 完全相同。\n矿骡也可以被修理，修理基准费用为 60 矿 17 秒。（未验证）\n开启自动修理的 SCV 在地堡&#x2F;医疗艇里面可以修理同乘的其它机械单位，但不能修理搭乘的地堡&#x2F;医疗艇本身。SCV 可以进地堡，SCV&#x2F;坦克&#x2F;寡妇雷&#x2F;恶火&#x2F;恶蝠&#x2F;落地维京可以进医疗艇，这些单位可以仓内修理。\n尽管雷神也是机械单位，但雷神需要独占一只医疗艇，没有仓位再给 SCV，无法实现“仓内修理”。\n尽管雷神是挂在医疗艇下面的，但地面上的 SCV 却只能修理医疗艇，无法修理视觉上明明是挂在医疗艇下方的雷神 (づ￣ 3 ￣)づ。这是智商问题。\n技能优先级修理高于攻击，A 地面时如果附近有掉血机械单位会优先修理。结合前述的修理扣费逻辑，不应当让 SCV 和部队一起走 A，如果部队里有掉血机械单位的话，每次走 A 操作都有可能会浪费一次修理费。\nSCV 可以修理星灵队友的机械单位，但不能修理星灵建筑。SCV 不能修理虫族的任何单位和建筑。\n星灵机械单位包括：探机、追猎者、机械哨兵、不朽者、巨像、侦测器、折跃棱镜、凤凰、先知、虚空辉光舰、风暴战舰、航母、拦截机、母舰核心、母舰。\n星灵护盾不能修理，但能靠护盾充能器快速恢复。\n修理只恢复血量部分，因此修理星灵单位速度非常慢。例如侦测器 30 秒生产时间 40 血 20 盾，则 SCV 每秒只修理 1.333 血。\n航母的拦截机是个不可选中单位，但开启自动修理的 SCV 确实可以在飞过头顶的一瞬间修上那么两下。\n尽管没有被修理能力，但星灵建筑的等离子护盾一定程度起到了类似修理的作用。等离子护盾在脱离战斗 10 秒后以每秒 2 点的速度恢复。\n尽管没有被修理能力，但虫族建筑自有回血能力，速度为每秒 0.27 点。同时虫后拥有哺液技能，可以为建筑回血，消耗 50 能量，回 125 点血，瞬发，CD 1 秒。哺液同样可为单位回血。\n女王哺液可以给友军生物单位回血，主要是人类单位，但不合算。虫族外只有火车侠是血量高于 125 的生物单位，为 135 血，是相对最合算的回血对象。其次是劫掠者 125 血。从单兵价值角度来讲，也可以考虑给幽灵回血。\n实战来讲因为人类有医疗兵 &#x2F; 医疗救生艇，由人族给虫族队友回血更靠谱一些。\n\n 建造&#x2F;折跃&#x2F;变异\n任何建筑在开始建造的一瞬间有 10% 的血量，之后全部时间匀速地完成剩下 90%。所以刚扔下的建筑靠少量兵并不容易打掉。\n建造完成的建筑默认有 1 点的的重甲，人类可以升级（+2），但建造过程中护甲为 0 点，属性依然是重甲。建造过程中劫掠者一枪会造成 20 点伤害，建造完成后一枪 19 点。\n所有建筑的建筑网格都分为 1×1、2×2、3×3、5×5 四种，其中，只有三族的主基地为 5×5 网格。只有感应塔和菌毯瘤为 1×1。\n角对角相接的建筑中间可以穿过 1 体积单位的兵种。要堵路口需要错开一格。5x5 网格需要错开两格。\n人类的建筑在建造过程中，若 SCV 被击毁则会中断。\n星灵建筑的建造过程不需要探机，虫族则会消耗掉工蜂，两族的建筑生产不需要靠工兵持续维护。\nSCV 需要持续工作，因此计算成本时还需要额外考虑损失的采集能力，约每秒 0.7 矿。因此人族基地相当于需要 470 矿，为三族最贵。\n虫族工蜂建造建筑后会消耗掉，需要补充相应数量的工蜂，相当于任何建筑都有 17 秒的采集能力损失（新生产一只工蜂），约 11.9 矿。此外还需要消耗一个虫卵，虫卵在虫族本身也是一种特殊资源。\n退掉正在建造的建筑返还 75% 的花费，采用的是“进 1 制”反还。比如对于一个 75 矿的精炼厂，理论上返还 75*75% &#x3D;56.25 矿，实际上返还 57 矿。\n建造过程中的星灵建筑同样有护盾，增长速度与血量同步。受攻击时先损耗护盾。\n所有的星灵建筑的盾和血量最大值都相同。\n星灵的建筑，除了星灵枢纽、吸纳舱、水晶塔以外，其它建筑都必须在能量场范围内开始建造，折跃棱镜的能量场也可以。只要开始建造了，在建造过程中能量场可以消失。（水晶塔被打，棱镜收起）。\n“在能量场内”指的是建造的建筑最中心点在能量场的圆弧范围内。也就是说，建筑边缘最多可以离开能量场略小于 1.5 格。\n水晶塔提供半径为 6.5 的能量场，由于自身为 2×2 建筑，所以实际的横向到边缘长度为 5.5 格，可以造 3 个光子炮台。棱镜提供半径 3.75 的能量场。\n所以两个相距 13 的水晶塔正好边缘相切，切线与两塔连线的交点上可以放下一个 2×2 的建筑，但放不下一个偏 1 格的 3×3 的建筑。（仔细思考“中心点必须在能量场内”的规则）。\n没有能量场的建筑的生产&#x2F;研发进度是冻结状态，重新供能以后进度条会继续，不重置。\n虫族建筑，除了孵化场、萃取房以外，都必须完全地建造在菌毯上，这与星灵只需要中心点覆盖的方式不一样。即使是处于行走状态的孢子爬虫和脊针爬虫，要重新扎根也必须在菌毯上。\n虫族建筑都相对便宜，显然是因为要消耗工蜂，所以变异建筑的价格是减掉工蜂的价格的。气矿尤其明显。\n但因此，取消正在建造的建筑，返还的是 1 只工蜂外加差价的 75%，因此虫族取消建造的成本比其它两族更低。以气矿为例，其它两族取消建造返还 58 矿，损失 27 矿。而虫族则是反还工蜂+19 矿，只损失 6 矿。\n这使得虫族退气矿成为一种战术和技巧。在初期偷人口赚一个农民（如果偷出的时间比采集一次的时间长就是赚的）、通过在对方家里造气矿，取消再造持续干扰对方运营发展等。\n孵化场默认提供半径 12.5 的菌毯，由于自身是 5×5 的占位，所以实际到边缘是 10 格。可以造 5 个 2×2 建筑。在画面质量较低时，菌毯边缘会更明显。\n取消建造的孵化场会残留一个 3×3 的菌毯，手速快的话可以放一个其它建筑。取消孵化场会损失 75 矿，同时新建筑会持续性的掉血。\n虫族建筑因故失去菌毯滋润后，会以每秒 3 点的速度损失血量，再加上自身回血，最后加成损血速度为每秒 2.73 点。无论是在建的或者已经建完的都一样，孵化场和萃取房除外。处于行走状态的孢子爬虫和脊针爬虫也不受影响。\n所有虫族的菌毯是共用的，即使是敌人的也可以，所以 zvz 可以在一开始就造个血池然后跑对方矿区造脊针爬虫。\n人类的建筑附件也是共用的，即使是敌人的也可以，不过通常没人会跑对方家里打掉主建筑然后抢对方的附件用……(￣ △ ￣；)。如果是队友之间可能存在某种战术。\n抢附件也可以成为“消灭所有建筑”的胜利条件。也就是敌方只剩下一个附件了，你飘个重工厂过去，一落地，胜利……\n除了自动机炮，任何人类或者星灵建筑都不可以建造&#x2F;降落在菌毯上。已经建成的建筑被菌毯蔓延包围不影响既有功能。这些建筑被摧毁后，原地空洞同样已经被菌毯覆盖，不需要再花时间生长补满。\n眼虫的污染只能冻结出兵和研发升级，不能冻结建筑的建造和修理，包括人类指挥中心的升级。不能限制水晶塔能量场和光子炮台的活动。也不能限制建筑的瞬发技能，比如扫描和空投矿骡。\n污染不能限制星灵的星空加速，不能限制菌毯肿瘤对菌毯的扩展，但却可以限制菌毯肿瘤的分裂。\n菌毯永远不覆盖瓦斯气泉。\n菌毯的生长计算另述。\n\n部分翻译自 http://wiki.teamliquid.net/starcraft2/Repair\n* 该文写铁鸦两个召唤物的修理时间为 60 秒，根据我 50% 和 40% 血量的多次实验，认为实际上是 50 秒。\n","categories":["游戏中心"],"tags":["修理","建造","数据","时间","星际争霸2","Starcraft II","计算","费用"]},{"title":"Cos交易酱搜索优化计划","url":"//cos-jiang-optimize-plan/","content":"COS 酱的核心功能是促成 cosplay 交易信息的交换流通，所以对信息的采集、整理和优化是最重要的部分。\n经过一段时间的数据积累，目前数据库中已有 60000 多余条微博数据，过滤掉的垃圾信息已经有 20000 多条。我们使用最简单的规则过滤掉了三分之一的无用信息，这些信息绝大部分来自于机器控制的僵尸帐号微博。但目前而言，过滤完的信息依然有不少可以定义为重复、垃圾的信息，所以接下来准备对过滤规则进行一些改进。\n1. 微博中有“微话题主持人”这样一种角色，我完全不知道有什么存在意义。他们做的唯一的工作就是把同话题下大量的微博重新转发一下，并在转发时再次添加同一个话题，比如 #cos 二手#。由于本站对微博采集就是基于话题、关键词等方式进行的。因而这些无用的微博也会被搜索到。接下来打算通过帐号黑名单方式过滤这一类需求。\n2. 热门微博的多次转发。在最初设计这个网站时，考虑过是否采集转发的，最后确定是包括转发也采集。因为存在二手信息发布者通过转发微博的方式提供一些补充信息，比如 “xx 已经出售，还剩 yy、zz” 等。但当初考虑不周的是，某些粉丝众多的红人 cos 的微博存在大量转发，会导致采集到的数据也出现 “刷屏”。另一种是专业转发号在某一时段大量转发，也会出现类似的情况。基于此，接下来需要添加一些入库规则过滤。\n2.1 如果一条转发微博的原微博不在库内，则转发微博和原微博都入库。2.2 如果原微博已有，转发微博用户和原微博用户相同，则视为对原微博的“补充说明”，也入库。2.3 如果原微博已有，转发用户非原博用户，则入库标记为垃圾微博。2.4 如果原微博已有，转发微博用户和原微博用户相同，且转发内容为“转发微博”，则入库标记为垃圾微博。\n——以上：原则是，对于搜索引擎而言，多条相同信息是无意义的，只需要保留确实有意义的内容即可。\n3. 对于搜索请求，由于动漫这个特定领域的分词非常难做。目前网站的搜索是没有分词的，于是导致“火神毛”的搜索请求并没有表达用户本来的意思 “火神+毛”。接下来会研究一下如何变通地实现这个需求。\n","categories":["动漫边缘"],"tags":["cos","cos交易酱","搜索功能","采集"]},{"title":"COS 交易酱的简易分词算法","url":"//alpha-word-segmentation-algorithm-for-cosjiang/","content":"http://cosjiaoyi.com 是个针对 cosplay 交易信息的搜索引擎，目前基本完成了对新浪微博特定信息的采集和入库，以及基于拼接 mysql 查询语句的搜索功能。\n接下来还有很多要做的事情，包括扩展采集来源、改善垃圾信息过滤、优化前端等工作。不过今天先来讲一下打算做的自制分词算法。\n对于动漫这一特定领域，很多常规的分词算法没有多大意义了。因为动漫圈存在大量的仅仅因为“好玩”而产生的各种昵称、诡称、简称。比如 “身陷” 指的是衣服的尺码，包括身高、三围等数据；比如 “穹妹” 指的是动画《缘之空》中的女主角兼主角他妹；比如 “面交” 当然是指当面交易的简称；比如 “炮萝” “秀萝” “叽萝” “咩萝” “丐萝” 都是网游剑网三里的职业人物角色的简称，哦，剑三又别称 “基三”，等等等等……还有一大现象是中英文数字合并成为一个词汇，比如 “PO 主”。另外，又因为拼音输入法的原因，会出现“身限”&#x3D;“身陷” 等现象。由于本来这些词汇也就是圈子生造词，也难以适用词汇纠错的方法。\n普通分词算法结果\n对于业务场景而言，这里面的很多词汇都是没有多大意义的。而“黑猫”、“弹丸”、“小天使”之类的词能成为高频词，也仅仅是因为它们更接近于“普通词汇”，可以被常规的分词算法认出来。而剑三当中的 “X 萝” 系列，甚至剑三这个词汇本身，都因为被分词算法切分，而没有进入这个图表中。\n当然，技术上来说，只要有合理的分词词库，辅以相应的参数调整，还是可以做出一套适用于动漫分词的，但考虑到分词算法往往有几百个核心词汇、几千个附加词汇，每个词汇还都有词性标注，想想就算了……\n在之前没考虑过这个问题，一是因为没有实际的业务数据积累，其实也没有考虑到这个问题，经过一段时间的推广和数据积累，现在可以研究了。二是因为对于 mySQL 的 like %…% 语法，尽管效率不高，但在目前的场景下，也没有遭受到多少压力。三是因为，呃，忙，呃，之前没时间做，呃，之后其实也不一定有时间做……\n那简易分词打算怎么做呢？\n现阶段的核心目的，还是在尽可能减少时间的前提下，能正确理解用户输入的“穹妹旗袍” 是指 “穹妹”+“旗袍”，这两个词汇不一定需要放在一起，只要在同一条微博中出现即可。\n\n只考虑对 QueryRequest 的 wordstring 进行处理，而不考虑入库数据。内部查询在没有遇到性能问题前，依然使用 like %…%。目的仅仅是为了正确理解用户输入的查询，不至于因为用户输入“剑三的炮萝” 因为无法整串匹配到而搜不到结果，这种情况下应当可以正确处理为“剑三”+“炮萝”\n只分析已经记录在服务器的 SearchQuery 表，不考虑对正文文本的分析。\n和普通分词一样，还是基于词汇表，以及替代词汇表。先考虑分词，再考虑戳憋字。\n基于业务，其实有大量的词汇是不需要的，比如“小天使”、“帮扩”等。对于用户而言，进入到本网站，场景就是搜索需要的东西，因而都是以具像物名词为主。没人会在搜索框里填 “小天使”、“随便” 这类词汇。甚至 “二手” 这个词都基本不会出现。\n\n所以简易规则如下，可以覆盖 99% 的实际需求，计算量很小。\n\n先对 querystring 根据 devide-word-list 进行切分，devide-word-list 包括 “ ”（半角空格）、“ ”（全角空格）、“的”，可能还会添加。但注意，没有“和”。因为在动漫中，“和”字会经常作为成词字或者人物姓名字出现，不能定义为分隔符。“日和” “和服” 等。由于并不是真的基于语义的分词，所以无法判断是成词字还是分隔字，根据历史搜索统计，只有 4% 的“和”是分隔词，交给用户自己调整没有问题。由于 devide-word-list 的数据量非常少，添加也很谨慎，所以可以直接写进代码里。\n对结果的 querystring[] 根据 known-word-list，切分为 已知词块 和 未知词块 的数组。known-word-list 的生成办法下述。\n对于未知词块，根据词块长度，反复循环，进行简单切分，直到最细：\n词块中有英文串的，当英文串字母小于等于两个时，视为一个汉字，不切分。\n当英文串大于两个汉字的，视为一个词，对其前后切分，分为三段。\n当有数字现出时，视为一个词，对其前后切分，分为三段。\n对大于等于四字的词块，直接按两个字一词进行切分。（注意之前把 1&#x2F;2 个英文字母视作一个汉字，这里和中文等同视之）。\n\n\n将结果的 querystring[] 数组，按每词之间 and 关系，对数据库进行查询。\n\n比如：求黑子的篮球的火神大我红毛 私信 po 我。\n\n变为 [求黑子,篮球,火神大我红毛,私信 po 我] （“的”和“空格”为分隔词）\n变为 [求,黑子,篮球,火神大我红,毛,私信 po 我]（“求”和“毛”为定义的已知词。\n变为 [求,黑子,篮球,火神,大我,红,毛,私信,po 我]（“po”视为一个汉字）\n实际 Search Request 即 求+黑子+篮球+火神+大我+红+毛+私信+po 我\n\n当然，通常没有这么长的需求，更多的是如下的：\n剑三定国炮萝 160 包邮\n\n还是 [剑三定国炮萝 160 包邮]，因为没有分隔。\n[剑三,定国炮萝 160,包邮]，剑三和包邮应该会加作已知词。\n[剑三,定国炮萝,160,包邮]，160 是数字单独成词。\n[剑三,定国,炮萝,160,包邮]，“定国炮萝” 四字切分为两字两字。这就是最后的搜索请求词组了。\n\n当然，在这种规则下，“雪露女武神”，会变成 “雪露”、“女武”、“神”，但又有什么关系呢，如果一个词汇真的必须是三字词，我使用两字“女武”+一字“神”，依然可以搜到库中的正确结果，这就足够了。\n接下来说说怎么做已知词汇表。\n\n人工整理，优先满足历史搜索词汇表。\n暴力分词法：\n直接把采集数据的正文部分全部提取。\n把空格串、数字串、大于两字的英文串、符号串、链接地址、转发标志、“的” 等都视为分隔符替换掉，形成最初的文本块。\n暴力地把所有文本块全部循环切分成两字一组，然后统计相同词汇并排序。注意是循环切分，比如“小天使”块应当切分成“小天”和“天使” 两部分。\n再暴力地把所有文本块全部切分成三字一组，然后统计相同词汇并排序。\n人工筛选排序最前的 1000 组词汇，足够了。\n\n\n\n这个当然也有缺点，但在具体的场景下也已经够用了。动漫词汇尽管创意繁多，但基于交流之用，最常用的词汇还是排名比较靠前的。再通过人工筛选过滤掉通用但无用的词汇，就可以获得有效的 know-word-list 了。这种暴力切分法并不是我第一个用，http://www.guokr.com/blog/76814/ 这篇文章就讲到了用暴力切分法去切分古文词汇。其实还是挺实用的，毕竟我这里最后有个人工筛选过程。\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;下面是严肃的分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n其实中文分语无非两个部分：\n\n句子匹配已登录词时，多种匹配方式如何选取最优？\n未登录词如何鉴别词性？这中间又细分为如何通过大量文本收录未登录词，转为已登录词；以及在某段文本中确切出现的未登录词，如何进行处理两种情况。\n\n而以上方案，按分词原则来看，其实都有些反其道而行：\n\n故意适当缩小已登录词，相对扩大未登录词范围。——这个是由业务实际情况经取舍后决定的。确实业务中只需要登录掉大部分 “专属通用词” 即可达到需要的效果。\n未登录词一律视为双字词。——这个是实际统计结果后决定的。\n把输入的正确性，以及由此导致的结果的正确性，责任全部交给用户自己去解决。——也是业务实际，以及以上两项得到的。\n\n这些简化的前提，最重要的一点在于，Cos 交易酱并不需要真的去处理分词以后的结果，只需要确保分词结果能正确地，范围合适地在库中搜索到用户需要的数据即可。\n","categories":["动漫边缘"],"tags":["cos交易酱","基于业务","简易分词"]},{"title":"很是喜欢这个微信表情包：小哥斯拉么么","url":"//love-monmon-the-godzilla/","content":" ヾ(^▽^o)+特别喜欢这个微信表情包，然后就从微信安装包里弄出来了。么么的英文名叫 monmon，monster 的 mon。这是官方表情包解压出来时的文件夹名字。还有，难道只有我一个人注意到，流汗那张，么么拿直升机其实是拿反了？风是往反方向吹的。\n一开始觉得，这个粉红色小恐龙是个挺女性化的表情包，可是看得多了，忽然觉得这个小哥斯拉很孤单，非常孤独。\n没人陪伴，全套表情都是它在孤独地自娱自乐。\n想拥抱时，只有摩天大楼，看它紧紧抱着，脸一蹭一蹭，小嘴撅起，很用力的样子，那是得有多孤独；好玩的，是跑大桥上找两辆车玩对撞，一如小时候被关在家里的独子，围着满地的玩具一边哭一边告诉自己这些够玩了；它甚至还有一个专门的表情，叫作“自己玩”，这……无语言说的孤单，直让人心中一揪。\n天变冷了，别的表情包里，好冷的图案都是与亲朋的温暖相依，而它只能围着围巾戴上手套，给自己一个用力的环抱；在生病虚弱时，也只能自己裹着棉被含着温度计默默地忍受，有谁会去照看它？\n它看起来无忧无虑，那真是不懂有朋友陪伴时心中的温暖。或者其实它懂，只是既不能他解，就只好孤单自解。它把所有想要的温暖，都寄托在周围的环境中，寄付在人类的创造物中，如此，大概能缓解一些它的孤单。\n可是人类会不会因为它的破坏行为而攻击它逼迫它离开，大概是一定会的吧。真的是难以想像，最后当它被无数武器攻击而被迫离开时，得有怎样的泪水和委屈。连最后那点自娱自乐的场所，都不被允许拥有。\n我叙述这些，是因为这些都是童年的孤单。在一个人成长的过程中，太多东西在不经意间失去，或者是从未拥有过。孩子的心灵并不是感受不到，只是不懂得怎么去叙说痛苦，每每回忆起那些片段，总是泪满盈眶。\n只希望么么不要长大，大概能减轻一些它的痛苦，无心无肺地坚强着。\n\n\n\n抱紧\n好崇拜\n不会吧\n泪流成河\n\n\n\n\n\n\n\n\n\n流汗\n发呆\n自己玩\n开心\n\n\n\n\n\n\n\n\n晕倒\n嘤嘤\n怒吼\n好冷\n\n\n\n\n\n\n\n\n飞吻\n真好玩\n呼呼\n虚弱\n\n\n\n\n\n\n\n\n我在网上查了不少时间，但一直找不到这个套图的作者是谁。也找不到相关的版权出处，或者更多的衍生作品、产品等。我想，把系列作品免费提供给微信表情，通常也是希望有一定影响力以后，通过其它相关衍生品赚钱吧，如果有谁知道，请告诉我。\n","categories":["文艺青年"],"tags":["么么","喜欢","孤独","表情包"]},{"title":"水平且垂直居中 CSS 详解","url":"//css-vertical-horizontal-center/","content":"\n.containerblock1 {\ntext-align: center;\nbackground: #b9f9ff;\nheight: 360px;\nborder-radius: 16px;\nborder:1px solid #45c3ce;\n}\n.containerblock1:before {\ncontent: ' ';\ndisplay: inline-block;\nheight: 100%;\nvertical-align: middle;\n}\n.containerblock1:after {\ncontent: ' ';\ndisplay: inline-block;\nvertical-align: middle;\n}\n.specialcentered1 {\ndisplay: inline-block;\nwidth:80%;\nmax-width: 300px;\npadding: 20px;\nvertical-align: middle;\nborder: #ffca65 solid 1px;\nbackground: #fffdc6;\nbox-shadow: 0px 0px 2px #ccc;\n}\n## 自适应的水平垂直居中\n\n旅行商人罗伦斯在马车货台上的麦束堆里，发现沉睡中的少女——自称是丰收之神赫萝的美丽少女，有着狼的耳朵及尾巴。\n「虽然奴家长久以来被尊为神，不过，奴家就是奴家，奴家是赫萝。」\n相比于水平居中用 margin:auto; 的简便，CSS 没有直接的垂直居中属性，必须通过各种诡异的技巧去实现，确实让人很头疼。以上算是一种实现方式，核心的代码如下：\n\n&lt;style type=&quot;text/css&quot;&gt;.outer &#123;  text-align: center;  background: #b9f9ff;  height: 300px;&#125;.outer:before &#123;  content: &#x27;&#x27;;  display: inline-block;  height: 100%;  vertical-align: middle;&#125;.inner &#123;  display: inline-block;  width: 300px;  vertical-align: middle;  background: #fffdc6;&#125;&lt;/style&gt;&lt;div class=&quot;outer&quot;&gt;  &lt;div class=&quot;inner&quot; &gt;    &lt;p&gt;水平垂直居中&lt;/p&gt;  &lt;/div&gt;&lt;/div&gt;\n\n这段代码中，最重要的是 .outer:before 这个伪元素。它起到了连接内外元素以及垂直对齐的作用。  \n需要明白的是，对一个 div 而言，它的伪元素会放在这个 div 包含的任何内容元素的前面，默认为 inline-block 元素（即“行内元素”或者“内联元素”）。示例：\n&lt;style type=&quot;text/css&quot;&gt;.outer &#123;  background: #b9f9ff;  height: 120px;  width: 300px;  margin: auto;&#125;.outer:before &#123;  content: &#x27;:before 伪元素&#x27;;  border: 1px solid;&#125;&lt;/style&gt;&lt;div class=&quot;outer&quot;&gt;元素内容&lt;/div&gt;\n\n执行结果：\n\n.containerblock2 {\nbackground: #b9f9ff;\nheight: 120px;\nwidth: 80%;\nmax-width: 300px;\nmargin: auto;\n}\n.containerblock2:before {\ncontent: ':before 伪元素';\nborder: 1px solid;\n}\n元素内容   \n当元素内容为其它元素，尤其是块级元素时，则有内容的 :before 会在最顶上。\n&lt;p&gt;元素块级内容&lt;/p&gt;   \n\n再强调一遍，:before 其实是一个元素的子元素，永远排在其它实际子元素的前面，比如：\n&lt;style type=&quot;text/css&quot;&gt;p &#123;  border: 1px solid;&#125;p:before &#123;  content: &#x27;:before&#x27;;  background:#fffdc6;  color: #f00;&#125;&lt;/style&gt;&lt;p class=&quot;special&quot;&gt;是特殊的子元素&lt;/p&gt;\n\n的实际执行效果如下：\n\np.special1 {\nborder: 1px solid;\n}\np.special1:before {\ncontent: ':before';\nbackground:#fffdc6;\ncolor: #f00;\n}\n 是特殊的子元素\n\n可以看到，对于 p 元素添加的 border，连 :before 这段文字也被包含在内。  \n现在再回头来看原始代码，如果把 :before 的部分修改一下，给 :before 元素加个边框，修改内容，使得识别更简单：\n.outer:before &#123;  content: &#x27;B&#x27;;  border: 1px solid;  display: inline-block;  height: 100%;  vertical-align: middle;&#125;\n\n\n.containerblock4 {\ntext-align: center;\nbackground: #b9f9ff;\nwidth: 80%;\nmax-width: 300px;\nheight: 200px;\nmargin:auto;\n}\n.containerblock4:before {\ncontent: 'B';\ndisplay: inline-block;\nheight: 100%;\nborder: 1px solid;\nvertical-align: middle;\n}\n.specialcentered4 {\ndisplay: inline-block;\nmax-width: 240px;\npadding: 20px 40px;\nvertical-align: middle;\nbackground: #fffdc6;\n}\n垂直居中\n\n这样这段代码的原理就非常清楚了。首先，:before 伪元素和内部元素（通过 display:inline-block 设置为行内元素）共同构成了“一行文字”。其次，所有的行内元素都利用 vertical-align:middle 进行了垂直居中对齐。最后，再设置 :before 的高度使得它上下都顶到父元素的边框。这样，同一”行”内的其它元素在视觉就都相对父元素垂直居中了。其实它们在逻辑上真正对齐的对象是 :before。而 :before 自己，则被“卡”到了正中间的位置。  \n   \n最后，由于 :before 在没有实际内容（通常用 ” ” 空格填充 content 属性）时其实也有宽度，所以在父元素上使用针对文本的 text-align: center; 虽然可以把左右居中也一起做掉。不过还是用常规的 margin:auto 更精确一点。解决办法是对 :after 伪元素也设置 content:” “。\nPS：因为 ie6 不支持伪元素，所以……要不还是用 table 吧。\n","categories":["前端新手菩萨保佑"],"tags":["CSS",":before","伪元素","垂直","水平","对齐"]},{"title":"羞羞的招募","url":"//recruit-cosjiaoyi-com/","content":"这段时间来，我逐渐认识到一个道理。\n要做好一件事情，最不能的就是藏着掖着。曝晒在阳光下，让众人评判，让有兴趣的人一起努力，才是最好的办法。靠着私下时有时无的业余时间，没法快速推进。\n讲道理都会，真落到自己身上，还是要花费许多时光去接受。即使是现在，也还是有很多担忧。\n如果招募连一个回应都没有怎办？如果主意被别人抄走了怎办？付出了辛苦却回报不了大家怎办？如果做不成辜负了大家怎办？如果理解不同争执冲突怎办？如果做得不够完美到不了自己的预期怎办？如果期望太高伤害了大家怎办？如果最后连朋友都做不成怎办？……\n有太多不能保证的东西，让人害怕承诺。我总能侃谈构思想法，却每每在盈利模式前语塞。并不是因为没有想过，只是在通往终点的路上有太多太多可能的变数，让我自己都觉得吐出口的，都会变成谎言。\n你要知道，有 99% 的项目都会以失败告终，我只能保证我会坚持到最后。\n所以请原谅我，然后请帮助我，最后，请再原谅我。我甚至不能保证你们的劳动会有相应的物质金钱回报，我只能说，希望一起来做一件我自觉有趣、有希望、也许还有那么一点点前途的事情。我想靠这个就把你们骗上船，希望能成功。\n关于现状：http://cosjiaoyi.com 现在版本http://bs.cosjiaoyi.com 未上线版本的 HTML+CSS 原型，还在一点点添加。\n使用 Github 管理代码库（私有库），使用 trello 管理任务，使用 SSH 公私钥登录服务器。\n目前是淡季，每月大约 5000 PV，高峰也曾到过 600pv&#x2F;d。新访:回访为 7:3。对一个只有微博转发简单推广，无抽奖无大V互动无漫展现场挂易拉宝的个人小站来说，我觉得已经不错了。这个网站真的是有人在用的，我们也已经真的小小做到了一些事情。这已让我欣喜不已，因此也更加迫不及待。\n现在在做的是 Cosplay 服装与周边二手信息的采集与搜索。整体定位是 cos 同好者手边的一个“好用的工具”。作为工具，不需要什么消磨时间的特性，只要需要时被想起就够了。\n就像见到雨雪想起的折伞，见到脑残想起的板砖。\n我需要后端、前端、设计师、推广：\n你喜欢动漫，现在还喜欢。或者你喜欢我，ヽ(✿ﾟ▽ﾟ)ノ，也行。\npython、node.js、php，MySQL，Ubuntu。网站已备案，个人。暂时没注册公司，没有必要，但也不是问题。\n我只会完成基本的 HTML+CSS，速度很慢，也不会 js 和各种框架。我需要前端。\n产品经理也是我。动漫爱好者，理科生，少年时不学无术却想改变世界，现在努力学习只希望能做成一样事情。选择 Cosplay 二手搜索只是切入点，最终梦想不止于此，希望能看它慢慢递进。\n算法常用伪代码，有时也用文档。用 HTML+CSS 写原型，只因无前端。常用 Axure 和 Sketch，但最喜欢还是纸与笔。\n绘画是我曾满心向往而后最终放弃的，所以我明白完成设计稿的辛苦。\n穷是推广的大敌。我们暂时打不过敌人，战略性躲着走。(￣△￣；) 但漫展门票钱传单印刷钱还是有的。\n我花了很多时间学这学那，最终也只是为了去理解别人编码画稿伏案写作的困难与辛苦。而很多人的才能我甚至无法想像，只能仰仗他们的自荐。我相信奇遇，希望你也是。\n\n关于时间安排：\n希望你一周有四小时的闲余时间想找事打发，考虑到沟通不畅、理解有误、bug 返工等意外，可能会再占用一周四个小时的生活时间。也就是，预计四小时，能接受极限八小时。\n当然，不是每个任务都能拆得那么细，很多还是需要几个周期才能完成。\n因为是业余项目，我们一周的周期会从周六开始。\n我们都希望进度尽可能快，但也请接受松散业余小团体的各种意外与延误。\n进入随意，退出随意，请告诉一声。如果你已经接了一个任务但有急事没时间做也没关系，希望你不介意我把同一个任务再请别人来做。\n即使失联几个月，依旧欢迎随时回归。如果不好意思，暗示我一下，我来个喜迎苏武。\n\n交流方式：主要是 QQ 群交流。之前需要实时语音时，会在 YY 开房间。对的，就是上市公司欢聚时代的里面有好多美女妹子半夜不睡觉卖萌吼歌的著名语音视频聊天工具 YY ——当然，我们不需要视频。不过 YY 用得真的很少，不装也没事，我会打电话给你。\n每两周周日晚聚餐一次，聊聊近况，我买单。这个属于每周四小时的部分。也就是说，如果你时间有限，请先安排给聚餐。\n每隔一周，我都为找好吃的店头痛不已。这句话的意思是地点每次都会变，不是说一定有多好吃。\n如果你不在北京，我会在幸运的日子去找你，无论你在奥兹国，还是在永无岛。\n关于回报“我希望你能为我白干活，还不损害我们的交情，也没法给什么对结果的承诺。”\n居然胆敢真的提出这样的要求，实在还是惶恐忐忑，纠结不安。\n希望读到这文字的每一个你，都能给我一个机会，让我彻彻底底地忽悠你一次。(*￣3￣)╭ 这样，也许你会想着“反正闲着也是闲着，听着还算靠谱，干吧”。如果你觉得累了，决定彻底退出以前，也麻烦务必再让我忽悠一次，也许就能多坚持两周。\n说不定呢，谁知道呢，阿里都搞出史上最大 IPO 了。\n但还是希望你能把它当成是像同好社团一样的玩艺儿。我们会有贡献名单，会有定期的聚餐。更重要的是，会有偶而打开看看，咦，现在做得不错了的小小感叹。这样的微小的愉悦，我想我还是能坚持着保证的。当然，万一真的搞大了，自然会尽量让大家更满意。只是在我自己也看不到终点时，还是诚实地说，但尽其事，莫问前程吧。\n每个想做一些事情的人都必须有自己的忽悠风格，我把我的风格称之为“诚实的忽悠”，希望你能上当。\n我曾发起过一些公益性项目，大多惨淡收场，但也偶有成功。\n虽然这次不算公益，但还是希望运气也能不错。\n上船吧，水手。\n联系方式开开\n企鹅：151493994\n微信：kaikaiiiiiii\n","categories":["动漫边缘"],"tags":["cos交易酱","Cosplay","动漫","招募"]},{"title":"Adobe 研发中心退出中国","url":"//adobe-dev-left/","content":"Adobe 公司宣布研发部门撤离中国，仅保留销售部门。不过这篇写的不是新闻评论。新闻只是个引子，想写的……可以认为是评论的评论吧。\n老有人以 Adobe 各系东西卖得太贵为借口，总说如果能减个零或者减两个零就好了。\n……别傻了，好像卖几十块他们就真会买似的。\n定价策略这东西，很复杂，但也很简单。简单在于，最后的收益无非是售价乘以销量减掉成本，让收益最大化就行了。而复杂则在于，定价到底在多大程度上会影响销量，进而影响到最大收益，则是要靠商业智慧与决断的。Adobe 的全系列产品不是免费（Flash、Adobe Reader、Creative Suite 2），就是死贵，看起来似乎不合理，但实际上这个定价差不多已经是最优的策略了。\n我们通常说的薄利多销，其实并不一定正确 。这句话有一个先验的假设，就是薄利会引发销量的成倍增加。这在传统实物生产中，在某些场景下可能是正确的。在这个成语产生的年代，大部分商品都是小规模作坊式生产的生活必须品。这使得第一对顾客而言，生活必需品是一定需要经常购买的，自然会在过得去的情况下选择更便宜的。第二是对具体的某个商家而言，市场是近乎无穷大的，更便宜意味着有更多顾客会选择他家的商品，只要产量跟得上，他总能卖出去。第三是，更大的产量意味着基于规模效应，单件成本也更低，依然可以腾出足够的利润空间。\n也就是在个人作坊向产业规模化集约化发生的过程中，某个商家通过降低售价，一方面扩展自己的市场范围，一方面惠福顾客。这确实是经济学意义上，也是生活意义上的社会改善。……除了那些被竞争挤倒破产的其它商家以外。\n但这几点在 Adobe 身上都不存在。\n首先，其实对大部分人而言，Adobe 系列软件都称不上是必须品级别的软件，它的市场并没有大家想像的那么大，相反，是个很小的市场。\n并不是因为你在家用了盗版 Photoshop，你就也能被计算为市场份额之一。比如假如苹果手机也能盗版，五块一个，那么大街上肯定差不多也是人人都拿着肾6+，可你能就此认为苹果的市场是 99.99% 么？\n不是的，因为定价在那里，苹果的市场就是 3 成左右，这是他利润最大化的定价方式。再降，它的市场就算扩大，也比较有限，还不如降价造成已占市场收入减少的损益大。Adobe 软件实际上是“生产力软件”，简单地说，是拿来做生产的工具之一。影楼、设计所、出版业，这些才是 Adobe 家软件瞄准的市场。对于这些市场的用户而言，几乎是固定而没有选择的。反过来就是说，Adobe 的市场真没有大家想像的那么大，那些鼓吹如果便宜就买的，最后只有两种选择，用盗版，或者不用。他们是不会成为 Adobe 家正版用户的。对真正的市场用户来说，Adobe 家的软件真不贵，几千块钱，还没一个相机镜头贵，没一次书籍制版费贵，没一次比稿的路费贵，真心不贵的。\n其次，它已经是市场上的王者了，占据了几乎所有的中高端出版软件市场，实际上并不存在可以被挤倒的“其它商家”以让他成倍地扩大市场份额。\n有句话是说，所有你觉得 Photoshop 不好用的功能，都是因为你不会用。——这句话依然阐述的是同一个事实：大部分人并不需要 Photoshop 这样级别的软件，没一点臂力，牛刀使起来还不如指甲刀。而另一个事实则是，在针对的市场里 Adobe 则是毫无疑问的王者，他已经把能拿到的市场差不多都拿到了。\n最后，软件成本几乎完全是固定成本，少量边际成本也主要出在营销费用、光盘、下载带宽这类上面。也就是说，单纯的销量带不来规模化导致的成本节约。软件的特殊就在于，它的利润完全就等于销量乘以单份售价，那么在市场容量固定，市场份额近乎百分百的情况下，降低售价只能导致更多的损失。你以为￥5000降到￥50，销量就能提升 100 倍？真要降到 ￥50，那帮人依然会抱怨说别的软件都是免费了，为什么 Adobe 要收费，然后依然用着他们的免费盗版。WPS 就是个活生生的例子，坚持到最后也只能靠免费广告流氓手段来推动。\n额外一点，如果 Adobe 真在中国降价，你打算让别的国家市场如何推动？Adobe 是序列号授权，并不是云服务，几乎很难以国别定出悬殊的价格差。如果真这样，最后结果只会导致其它国家的用户通过互联网购买最便宜国家的序列号。只会导致 Adobe 的损失更大。现在它退出一个赚不到钱的国家，顶多通过不出对应的语言版本就可以解决（其实也解决不了，因为新加坡用的也是简体中文）。他也想推过云服务，估计也是想做差别定价（比如暴雪就给中国大陆单独架服务器单独定价，其它国家通过信用卡等方式差别定价），但显然正版用户们并不太接受。\n无奈。\n软件盗版已经是个老生长谈的话题了，而且观点已经趋向一致，即如果没有那么严重的盗版，中国的软件环境和互联网环境也不至于像现在这么恶劣。盗版伤害的不光是大型软件厂家，更是直接导致中国软件梯度被抹杀，没有了中小企业的生存空间。在这种情况下，依然有那么多人把 Adobe 给出的 “收益不及预期” 的原因，归罪到 Adobe 定价太贵上面，有时候真觉得刁民两字，用得不假。\n题外话：即使 WPS 目前已经如此，我依然尊敬珠海 WPS 小组，稻壳儿是我在软件相关费用中第三大的一项，仅次于山口山和 App Store。\n","categories":["唠唠叨叨"],"tags":["Adobe","photoshop","退出中国","定价策略","盗版"]},{"title":"http://chocolatey.org/ Windows 下的包管理器","url":"//chocolatey-win-pack-manager/","content":"chocolatey 是 Windows 下的包管理器，类似于 Linux 下的 apt，mac 下的 homebrew。\n没错，windows 下的。\n官方网站是 http://chocolatey.org/ ，已经写在标题里了。\n虽然其实大部分可以 choco install 的包都是像 notepad++、Filezilla、Putty 等本身就可以下载安装包或者本身就是绿色软件，但也许也有一些像 Python、Ruby、Nodejs 之类让从 Linux&#x2F;Mac 转过来的程序员们倍感亲切的软件包。不过要注意的是保持网络畅通，也就是说你还是需要一个 VPN，而不像 linux 那样可以方便地寻找到镜像源。\n说实在的我在用了一段时间以后觉得有点行为艺术……o(￣ε￣*)，其实最大原因是 CMD 窗口本身并不能提供太多的功能，不像 Linux&#x2F;Mac 那样通过 ln 可以自定义命令，添加 Path 也比 linux 麻烦。\n在图形操作系统下，用命令行去管理一大堆本身就有安装包有图形界面，可以双击图标调用关联程序打开，这些关联程序也大多有图形界面，实在有点违和。\n所以最后我的结论是，如果你非要在 Windows 下尝试一下包管理器，Chocolatey 是个不错的选择。\n安装方法：用管理员权限打开 CMD，输入以下字符（CMD 窗口的粘贴操作是 Alt+Space→E→P）\n@powershell -NoProfile -ExecutionPolicy unrestricted -Command &quot;iex ((new-object net.webclient).DownloadString(&#x27;https://chocolatey.org/install.ps1&#x27;))&quot; &amp;&amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\\chocolatey\\bin\n\n很有可能会开始下载一个 .msu 的安装包，应该是 PowerShell，安装完以后重启系统，用管理员权限打开 CMD，输入以下字符（CMD 窗口的粘贴操作是 Alt+Space→E→P）\n@powershell -NoProfile -ExecutionPolicy unrestricted -Command &quot;iex ((new-object net.webclient).DownloadString(&#x27;https://chocolatey.org/install.ps1&#x27;))&quot; &amp;&amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\\chocolatey\\bin\n\n…… 没错我写了两遍，实践证明确实需要两遍……ㄟ( ▔, ▔ )ㄏ\n如果已经安装了 PowerShell，可以在 PS 里输入以下命令：\niex ((new-object net.webclient).DownloadString(&#x27;https://chocolatey.org/install.ps1&#x27;))\n\n恭喜你，蛋疼去吧。\n","categories":["命令行"],"tags":["Windows","Choco","Chocolatey","包管理"]},{"title":"将图片信息写入 HTML 和 CSS","url":"//put-image-into-html-or-css/","content":"通常来说 HTML 和 CSS 中引用图片都用的是 &lt;img src&#x3D;”…”&gt; 和 url(…) 的引用办法。有时为了节约连接数，在诸如图标库等特殊用途 css 中，也会使用一张大图片通过 position 定位到不同位置的办法，来把所有图标放在同一张图片上。\n不过还有一种办法是直接把图片通过 base64 编码以后写到文本中。对于非常静态化的需求，比如电子书、自制在线简历、email 投递、网络隐私安全病患者等等，或者各种原因在输入端只支持文本的场合，有时也是一种不错的选择。\n这种办法其实很简单，就是把原来写 url 的位置替换成图片 base64 编码以后的文本。\n比如我有一张图片，，把它用 base64 编码以后就成了一长串文本：（编译工具用百度一搜就行，在线的，本地的多得去了，在 Github 上还能搜到完全基于 JS 的。）\n/9j/4QTyRXhpZgAATU0AKgAAAAgADAEAAAMAAAABAZoAAAEBAAMAAAABAZoAAAECAAMAAAADAAAAngEGAAMAAAABAAIAAAESAAMAAAABAAEAAAEVAAMAAAABAAMAAAEaAAUAAAABAAAApAEbAAUAAAABAAAArAEoAAMAAAABAAIAAAExAAIAAAAeAAAAtAEyAAIAAAAUAAAA0odpAAQAAAABAAAA6AAAASAACAAIAAgALcbAAAAnEAAtxsAAACcQQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykAMjAxNDoxMDowNyAxMzowMTo0MwAAAAAEkAAABwAAAAQwMjIxoAEAAwAAAAH//wAAoAIABAAAAAEAAAAwoAMABAAAAAEAAAAwAAAAAAAAAAYBAwADAAAAAQAGAAABGgAFAAAAAQAAAW4BGwAFAAAAAQAAAXYBKAADAAAAAQACAAACAQAEAAAAAQAAAX4CAgAEAAAAAQAAA2wAAAAAAAAASAAAAAEAAABIAAAAAf/Y/+0ADEFkb2JlX0NNAAL/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAwADADASIAAhEBAxEB/90ABAAD/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwDtqsU5HSS5g/SUvfA8RMuCq44cHAt+fgtno4jHePzS8lo+4FAyMRuNfo39FcfaewP7itjJ6pxPex+1zpYPRjyDsIy/7mTWfdqR+KAWl7jpp4o+S1rRAGqjigGSeB2TxoLDFIEy4SUFg2DXQBRpa+909gr12Ox7JGviE+LQ1jdzToOUvcHD4q9k8YH6L//Q9E6XYTRSdsB5ePmDP8FetrZawseJaVTxmFuE0jmp+6Pgfd/0VfT8nzEjuWLCPQInX0j8nnc6rJxbNtvvrd9Czx8nfy1XbkPGgC6eyuu1hZY0OYeQVjX4VVdhbW7e38nkVPjyiQqQ1amfl5QPFE3E9/mi0zmWDgfNJvULwCCwa+GiP9l8k32byUlw7MHDl7l//9H1Chgawt7T+VSHsbB/N0ClHglARJtAFBr2b7NCYb4BD+zhXNoS2hETrZYcd6nVp+j5JvRVzaEtoR40e0H/2f/tDHxQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAADxwBWgADGyVHHAIAAAIAdAA4QklNBCUAAAAAABBUynYVGk6PKJPX/se4pRnCOEJJTQQ6AAAAAADXAAAAEAAAAAEAAAAAAAtwcmludE91dHB1dAAAAAUAAAAAUHN0U2Jvb2wBAAAAAEludGVlbnVtAAAAAEludGUAAAAASW1nIAAAAA9wcmludFNpeHRlZW5CaXRib29sAAAAAAtwcmludGVyTmFtZVRFWFQAAAABAAAAAAAPcHJpbnRQcm9vZlNldHVwT2JqYwAAAAVoIWg3i75/bgAAAAAACnByb29mU2V0dXAAAAABAAAAAEJsdG5lbnVtAAAADGJ1aWx0aW5Qcm9vZgAAAAlwcm9vZkNNWUsAOEJJTQQ7AAAAAAItAAAAEAAAAAEAAAAAABJwcmludE91dHB1dE9wdGlvbnMAAAAXAAAAAENwdG5ib29sAAAAAABDbGJyYm9vbAAAAAAAUmdzTWJvb2wAAAAAAENybkNib29sAAAAAABDbnRDYm9vbAAAAAAATGJsc2Jvb2wAAAAAAE5ndHZib29sAAAAAABFbWxEYm9vbAAAAAAASW50cmJvb2wAAAAAAEJja2dPYmpjAAAAAQAAAAAAAFJHQkMAAAADAAAAAFJkICBkb3ViQG/gAAAAAAAAAAAAR3JuIGRvdWJAb+AAAAAAAAAAAABCbCAgZG91YkBv4AAAAAAAAAAAAEJyZFRVbnRGI1JsdAAAAAAAAAAAAAAAAEJsZCBVbnRGI1JsdAAAAAAAAAAAAAAAAFJzbHRVbnRGI1B4bEBywAAAAAAAAAAACnZlY3RvckRhdGFib29sAQAAAABQZ1BzZW51bQAAAABQZ1BzAAAAAFBnUEMAAAAATGVmdFVudEYjUmx0AAAAAAAAAAAAAAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAAAAAAQY3JvcFdoZW5QcmludGluZ2Jvb2wAAAAADmNyb3BSZWN0Qm90dG9tbG9uZwAAAAAAAAAMY3JvcFJlY3RMZWZ0bG9uZwAAAAAAAAANY3JvcFJlY3RSaWdodGxvbmcAAAAAAAAAC2Nyb3BSZWN0VG9wbG9uZwAAAAAAOEJJTQPtAAAAAAAQASwAAAABAAIBLAAAAAEAAjhCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTQQKAAAAAAABAAA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAAAMAAAADAAAAAEAGIAbwBhAHQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAAwAAAAAFJnaHRsb25nAAAAMAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAMAAAAABSZ2h0bG9uZwAAADAAAAADdXJsVEVYVAAAAAEAAAAAAABudWxsVEVYVAAAAAEAAAAAAABNc2dlVEVYVAAAAAEAAAAAAAZhbHRUYWdURVhUAAAAAQAAAAAADmNlbGxUZXh0SXNIVE1MYm9vbAEAAAAIY2VsbFRleHRURVhUAAAAAQAAAAAACWhvcnpBbGlnbmVudW0AAAAPRVNsaWNlSG9yekFsaWduAAAAB2RlZmF1bHQAAAAJdmVydEFsaWduZW51bQAAAA9FU2xpY2VWZXJ0QWxpZ24AAAAHZGVmYXVsdAAAAAtiZ0NvbG9yVHlwZWVudW0AAAARRVNsaWNlQkdDb2xvclR5cGUAAAAATm9uZQAAAAl0b3BPdXRzZXRsb25nAAAAAAAAAApsZWZ0T3V0c2V0bG9uZwAAAAAAAAAMYm90dG9tT3V0c2V0bG9uZwAAAAAAAAALcmlnaHRPdXRzZXRsb25nAAAAAAA4QklNBCgAAAAAAAwAAAACP/AAAAAAAAA4QklNBBEAAAAAAAEBADhCSU0EFAAAAAAABAAAAAY4QklNBAwAAAAAA4gAAAABAAAAMAAAADAAAACQAAAbAAAAA2wAGAAB/9j/7QAMQWRvYmVfQ00AAv/uAA5BZG9iZQBkgAAAAAH/2wCEAAwICAgJCAwJCQwRCwoLERUPDAwPFRgTExUTExgRDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBDQsLDQ4NEA4OEBQODg4UFA4ODg4UEQwMDAwMEREMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIADAAMAMBIgACEQEDEQH/3QAEAAP/xAE/AAABBQEBAQEBAQAAAAAAAAADAAECBAUGBwgJCgsBAAEFAQEBAQEBAAAAAAAAAAEAAgMEBQYHCAkKCxAAAQQBAwIEAgUHBggFAwwzAQACEQMEIRIxBUFRYRMicYEyBhSRobFCIyQVUsFiMzRygtFDByWSU/Dh8WNzNRaisoMmRJNUZEXCo3Q2F9JV4mXys4TD03Xj80YnlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vY3R1dnd4eXp7fH1+f3EQACAgECBAQDBAUGBwcGBTUBAAIRAyExEgRBUWFxIhMFMoGRFKGxQiPBUtHwMyRi4XKCkkNTFWNzNPElBhaisoMHJjXC0kSTVKMXZEVVNnRl4vKzhMPTdePzRpSkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2JzdHV2d3h5ent8f/2gAMAwEAAhEDEQA/AO2qxTkdJLmD9JS98DxEy4KrjhwcC35+C2ejiMd4/NLyWj7gUDIxG41+jf0Vx9p7A/uK2MnqnE97H7XOlg9GPIOwjL/uZNZ92pH4oBaXuOmnij5LWtEAaqOKAZJ4HZPGgsMUgTLhJQWDYNdAFGlr73T2CvXY7Hska+IT4tDWN3NOg5S9wcPir2Txgfov/9D0TpdhNFJ2wHl4+YM/wV62tlrCx4lpVPGYW4TSOan7o+B93/RV9PyfMSO5YsI9AidfSPyedzqsnFs22++t30LPHyd/LVduQ8aALp7K67WFljQ5h5BWNfhVV2Ftbt7fyeRU+PKJCpDVqZ+XlA8UTcT3+aLTOZYOB80m9QvAILBr4aI/2XyTfZvJSXDswcOXuX//0fUKGBrC3tP5VIexsH83QKUeCUBEm0AUGvZvs0JhvgEP7OFc2hLaEROtlhx3qdWn6Pkm9FXNoS2hHjR7Qf/ZOEJJTQQhAAAAAABVAAAAAQEAAAAPAEEAZABvAGIAZQAgAFAAaABvAHQAbwBzAGgAbwBwAAAAEwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAgAEMAUwA2AAAAAQA4QklNBAYAAAAAAAcACAAAAAEBAP/hDXpodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcFJpZ2h0cz0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3JpZ2h0cy8iIHhtcE1NOkRvY3VtZW50SUQ9InV1aWQ6RUNGQzc3Mjg4MDQxREMxMUJDNDVBODNDNjIyRTJGRTkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjU2RTNBMDhERjRERTQxMUI5OTJDQzc3NTY4MTA1MkUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0idXVpZDpFQ0ZDNzcyODgwNDFEQzExQkM0NUE4M0M2MjJFMkZFOSIgeG1wOkNyZWF0ZURhdGU9IjIwMDctMDgtMDNUMTM6MDk6MjUrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE0LTEwLTA3VDEzOjAxOjQzKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE0LTEwLTA3VDEzOjAxOjQzKzA4OjAwIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzIgV2luZG93cyIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiBwaG90b3Nob3A6TGVnYWN5SVBUQ0RpZ2VzdD0iMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6RjU2RTNBMDhERjRERTQxMUI5OTJDQzc3NTY4MTA1MkUiIHN0RXZ0OndoZW49IjIwMTQtMTAtMDdUMTM6MDE6NDMrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+4ADkFkb2JlAGRAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQEBAQEBAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAMAAwAwERAAIRAQMRAf/dAAQABv/EAaIAAAAGAgMBAAAAAAAAAAAAAAcIBgUECQMKAgEACwEAAAYDAQEBAAAAAAAAAAAABgUEAwcCCAEJAAoLEAACAQMEAQMDAgMDAwIGCXUBAgMEEQUSBiEHEyIACDEUQTIjFQlRQhZhJDMXUnGBGGKRJUOhsfAmNHIKGcHRNSfhUzaC8ZKiRFRzRUY3R2MoVVZXGrLC0uLyZIN0k4Rlo7PD0+MpOGbzdSo5OkhJSlhZWmdoaWp2d3h5eoWGh4iJipSVlpeYmZqkpaanqKmqtLW2t7i5usTFxsfIycrU1dbX2Nna5OXm5+jp6vT19vf4+foRAAIBAwIEBAMFBAQEBgYFbQECAxEEIRIFMQYAIhNBUQcyYRRxCEKBI5EVUqFiFjMJsSTB0UNy8BfhgjQlklMYY0TxorImNRlUNkVkJwpzg5NGdMLS4vJVZXVWN4SFo7PD0+PzKRqUpLTE1OT0laW1xdXl9ShHV2Y4doaWprbG1ub2Z3eHl6e3x9fn90hYaHiImKi4yNjo+DlJWWl5iZmpucnZ6fkqOkpaanqKmqq6ytrq+v/aAAwDAQACEQMRAD8A2idsdXz9k/Euor8JSody9d743/NDTMupqrCy1tNWZrHU7kPJ5hSJDPEARqeEoB6/eTW48yDl/wBz0hupD9BfWlsCRjS+krG58qatSt8m1fh6wF2Hkduc/YOa62+EHeNo3S+ZV/ih1q00SnJroCulOLJpA7ugM69grKOvp6vHgCMJGtQHI+0niOg2A4JZgbqfrYextvjRPbvHOatXB8wf9Xl1FvKcM9tdw3FqBoNNVfhIPlTz+R6GTN7xR5pqJtHjijJin8Z0Rsn64WfjTe3+Jt9PYUtNpoiS6SGJyK5pTj1I24cwgyS25ppQYIH/ABnoLqiiqMzWVTpT3ppYlMdTo0iVw664gF+iN+fobexKkyWkUamTvBOP8HQGktZdynmpEPCIwwGDnIr0wZ+nGHpS05FNTUsZlmCHxePT/m/GnIKuf1c8/n2tsm+qcKg1O2B5/bXor3S3/d0BMh0QoKmmKU4UHmK8emvZmMzO/a1JliPhpWEwKACEwRMCsjKBcvY8W4H+PtRu89vs0RVnpI2PnX5dIOW7LcuaLkSBD4aGuBigPH7ev//Q3Pvh5TtTbD3LEixJi6veOTqsXDpYSsiUlBQ5GWXVdXWWsp7gj6g8+5O91ZVl32yrq+pWzQOfLLMyAelFOR1AX3eoDDylu4UKLGTcZWjWhrhI0kJrjuda4/PoJ9+dU4vq7fhSlxsx2dv7J1E2JrI0U0uAy9QXqJ9uOBYQxE65aO9rw6oxcxcijY+ZbnmHZay3I/etjGPEXzkjGBMPU8Fk/pUb8WABzZyHZck800hs2/q5us7GJxlYJm7mtyBwUmrQf0dSCujIJdl4+gxUMkVHTqsySuBNYGOZVteKQC1jJbhufpb2MeXp57lg0rkqRw+3zHz6jPnO1tbFSlvABKCc+TU4g04V8j0ydWw0cvmqKzzGKCYyfavdliMgNzGo5aMfj/H6+1fMTTJpSGg1ClfXou5IW3k8Sact4at8J8if8nQkbv6+w2fxc1VRx/cJzLPTlA7spGol4CAWIt+OPZBte+XVjciORirDgf8AZ6F/MHKW3brZPNbLqAyQcmnzHnTyp+fUrq/ZGMwNBJXY2qApYDpnYhlBlJu1MqfVnN+Qfp7Z5j3e4vJlhuI6ynhny9fs6U8j8sWW12r3djN+inGuM/w0+f8AqHX/0dzT4w7jll2R15LJipaKHc2Q7IxrWlV0gqsfk1yVEZSFGo1NLQVWn8i3uT/cSxC77voFxreBLVvtDJpP7CydQB7Kbqz8qcpSNZmNL2W/T7GSXWtfXUsclP8AY6NPuXbeI3bhK7AZum+5x9fFofQxiqKeVTqgrKOoX9ylraSUCSKVfUjqCPceWF/dbZdwX1nJpuIzUeYPqGHAqRhgcEGnU17zs9hv223W1bnDrtJVofJlPFXRuKuhoyMMqwBHVQ/eW1Ox+p86+K3dF/eTamRnkG194wwPCuSiGp46DKCG8dBuKmiH7iG0dRbXFcalXJ3k/dtj5lshcbcRb7nGv60BPwerpX4omPA5ZfhbyJwC9yuXub+RN1O379H9bsE7n6a7VSDJ5iOQCoSdR8QwslC8eKqoSY3f+WpSsUNEiRgBA8irBIqD6BnjID2/4Lf2J5tpglBMkmrPDJ/Z0CLbmC7twEhjVY6UzQE+nD0+fTvP3FuOkIWjo55XjN1qEmKFT9LAEEyLz9Dxb23HyvZTLWZ1UHyIz9vSiXn/AHSDFtFIWAw1afs9R/h65UHfu9qOCqpp9u0kqVM3mDwOKRRMwsaqWNEdfMVHq0ABj9fep+StqleORb0gqKUPdj0qfL7evWvunzJbxzwttaPG7asdnd/EaAivrQCvX//S3TOtsHPielsJLSo5qdm7xqNyJDH6TLTUmanfKwk2JCy4SvqRxzc+5H5hu0uubrxZKaLq2WKp8maNQh/KRV6g7knbHsPbja2t1Pi7fuDXFBiqrOxlH5wvJ0apHWRVdGV0dQ6OpDKysLqysLgqwNwfcckEEgihHU4KysoZSCpFQRwI6ZdybcwO7MLX4Dc2Mo8vhMhCYq2hrkDwSICHVw11eGWF1DJIjK8bAMrAgH2qsb68227hvdvuGiu4zVWU5B/wEHgQQQRggjov3baNs33brrat4so7jbplo6OKqR/hBByGBDKQCpBAPVZm+uldt7e3FU47bOai3BiPVJC5HmqcZIz2TH5CsiVaaskiVuJYzqKj9wBuTkLsvN+4323xz7hZtBc8D5K/qyKcrXzU4/hNMDCvmn222faN4mstm3QXe3mpB+JojXEcjgaXI8mXNB3gHii5OsD6iKX0qFF9HpHJ5DWswYj+p9m68xeXi1P59Bt+SiKkQHSBxp1CfrVSpApTcaQTota/0NuSdXt0b8airCn29JTyaMkwkn7Ov//T3vtkYqOgw1Zi3iUwPV1DtGy3WSOrijEiup4YMQQfwfZxvFyZ7yO4Rzq0DPzBPDoM8tWK2m2T2ToChkao8iGAr/l6f6RkwuLSmmLumPQUtOB65Z6eMWo1UcXfwBVN/wAqST7QNqu7gstNbmp8gCeP5Vz+fRvDp26ySOUnw4xpXzJUYUAeZpQU+VeHQaZ9M1uQvFVzz02PckLjaR2jhKA8fdyLaSqZh9Qf2wfovsRWP0thR0QNOPxnJr/RHAD+fz6BG7Dc94LRyyvHZE4jU0BH9MjLV9MKPTz6Rw2HSxgJ4WUqtlRIwipwQSoFgL8ezk71I5J1V+ZPHoO/1WgQU8KgHoKU+zrkdoqgCrTI40AEvGXYHTpKh/qBp9t/vWtSZKZ9cda/q/pwkIK0pkZ9OoX9ywvCxlQBYDSBpB+o5U8H/e/bv73Nfiz9v+z0wOW6YEYp1//U38RAqH9q0erh7f0/Fh9L/wCPuzMWoWNadUVET4FA64GjgY3ZNTf6piWJP5JJvz72JGXAPWmhjeupak9dfZU/+oH+2H/FPe/Ff16a+kt/4OuP8Ppv+OY/23PvfjSDg3XvpLf+D+fXX8Opv9Rb/WAH+249+8aT+Lrf0sH8OOuBxlKf7A/2w/4p7348nqOmmsYGNadf/9k=\n\n这串文本很长，不过相比于图片本身的体积，其实并没有大多少。这种体积的变化详细涉及到信息论和压缩原理，这篇文章先不写了。\n然后我们在长串文本前再添加一些说明文字，供浏览器识别：\ndata:image/jpg;base64,\n\n然后就可以直接替换原 url 了，就像这样：\n&lt;img src=&quot;data:image/jpg;base64,/9j/4QTyRXhpZgAATU0AKgAAAAgADAEAAAMAAAABAZoAAAEBAAMAAAABAZoAAAECAAMAAAADAAAAngEGAAMAAAABAAIAAAESAAMAAAABAAEAAAEVAAMAAAABAAMAAAEaAAUAAAABAAAApAEbAAUAAAABAAAArAEoAAMAAAABAAIAAAExAAIAAAAeAAAAtAEyAAIAAAAUAAAA0odpAAQAAAABAAAA6AAAASAACAAIAAgALcbAAAAnEAAtxsAAACcQQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykAMjAxNDoxMDowNyAxMzowMTo0MwAAAAAEkAAABwAAAAQwMjIxoAEAAwAAAAH//wAAoAIABAAAAAEAAAAwoAMABAAAAAEAAAAwAAAAAAAAAAYBAwADAAAAAQAGAAABGgAFAAAAAQAAAW4BGwAFAAAAAQAAAXYBKAADAAAAAQACAAACAQAEAAAAAQAAAX4CAgAEAAAAAQAAA2wAAAAAAAAASAAAAAEAAABIAAAAAf/Y/+0ADEFkb2JlX0NNAAL/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAwADADASIAAhEBAxEB/90ABAAD/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwDtqsU5HSS5g/SUvfA8RMuCq44cHAt+fgtno4jHePzS8lo+4FAyMRuNfo39FcfaewP7itjJ6pxPex+1zpYPRjyDsIy/7mTWfdqR+KAWl7jpp4o+S1rRAGqjigGSeB2TxoLDFIEy4SUFg2DXQBRpa+909gr12Ox7JGviE+LQ1jdzToOUvcHD4q9k8YH6L//Q9E6XYTRSdsB5ePmDP8FetrZawseJaVTxmFuE0jmp+6Pgfd/0VfT8nzEjuWLCPQInX0j8nnc6rJxbNtvvrd9Czx8nfy1XbkPGgC6eyuu1hZY0OYeQVjX4VVdhbW7e38nkVPjyiQqQ1amfl5QPFE3E9/mi0zmWDgfNJvULwCCwa+GiP9l8k32byUlw7MHDl7l//9H1Chgawt7T+VSHsbB/N0ClHglARJtAFBr2b7NCYb4BD+zhXNoS2hETrZYcd6nVp+j5JvRVzaEtoR40e0H/2f/tDHxQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAADxwBWgADGyVHHAIAAAIAdAA4QklNBCUAAAAAABBUynYVGk6PKJPX/se4pRnCOEJJTQQ6AAAAAADXAAAAEAAAAAEAAAAAAAtwcmludE91dHB1dAAAAAUAAAAAUHN0U2Jvb2wBAAAAAEludGVlbnVtAAAAAEludGUAAAAASW1nIAAAAA9wcmludFNpeHRlZW5CaXRib29sAAAAAAtwcmludGVyTmFtZVRFWFQAAAABAAAAAAAPcHJpbnRQcm9vZlNldHVwT2JqYwAAAAVoIWg3i75/bgAAAAAACnByb29mU2V0dXAAAAABAAAAAEJsdG5lbnVtAAAADGJ1aWx0aW5Qcm9vZgAAAAlwcm9vZkNNWUsAOEJJTQQ7AAAAAAItAAAAEAAAAAEAAAAAABJwcmludE91dHB1dE9wdGlvbnMAAAAXAAAAAENwdG5ib29sAAAAAABDbGJyYm9vbAAAAAAAUmdzTWJvb2wAAAAAAENybkNib29sAAAAAABDbnRDYm9vbAAAAAAATGJsc2Jvb2wAAAAAAE5ndHZib29sAAAAAABFbWxEYm9vbAAAAAAASW50cmJvb2wAAAAAAEJja2dPYmpjAAAAAQAAAAAAAFJHQkMAAAADAAAAAFJkICBkb3ViQG/gAAAAAAAAAAAAR3JuIGRvdWJAb+AAAAAAAAAAAABCbCAgZG91YkBv4AAAAAAAAAAAAEJyZFRVbnRGI1JsdAAAAAAAAAAAAAAAAEJsZCBVbnRGI1JsdAAAAAAAAAAAAAAAAFJzbHRVbnRGI1B4bEBywAAAAAAAAAAACnZlY3RvckRhdGFib29sAQAAAABQZ1BzZW51bQAAAABQZ1BzAAAAAFBnUEMAAAAATGVmdFVudEYjUmx0AAAAAAAAAAAAAAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAAAAAAQY3JvcFdoZW5QcmludGluZ2Jvb2wAAAAADmNyb3BSZWN0Qm90dG9tbG9uZwAAAAAAAAAMY3JvcFJlY3RMZWZ0bG9uZwAAAAAAAAANY3JvcFJlY3RSaWdodGxvbmcAAAAAAAAAC2Nyb3BSZWN0VG9wbG9uZwAAAAAAOEJJTQPtAAAAAAAQASwAAAABAAIBLAAAAAEAAjhCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTQQKAAAAAAABAAA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAAAMAAAADAAAAAEAGIAbwBhAHQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAAwAAAAAFJnaHRsb25nAAAAMAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAMAAAAABSZ2h0bG9uZwAAADAAAAADdXJsVEVYVAAAAAEAAAAAAABudWxsVEVYVAAAAAEAAAAAAABNc2dlVEVYVAAAAAEAAAAAAAZhbHRUYWdURVhUAAAAAQAAAAAADmNlbGxUZXh0SXNIVE1MYm9vbAEAAAAIY2VsbFRleHRURVhUAAAAAQAAAAAACWhvcnpBbGlnbmVudW0AAAAPRVNsaWNlSG9yekFsaWduAAAAB2RlZmF1bHQAAAAJdmVydEFsaWduZW51bQAAAA9FU2xpY2VWZXJ0QWxpZ24AAAAHZGVmYXVsdAAAAAtiZ0NvbG9yVHlwZWVudW0AAAARRVNsaWNlQkdDb2xvclR5cGUAAAAATm9uZQAAAAl0b3BPdXRzZXRsb25nAAAAAAAAAApsZWZ0T3V0c2V0bG9uZwAAAAAAAAAMYm90dG9tT3V0c2V0bG9uZwAAAAAAAAALcmlnaHRPdXRzZXRsb25nAAAAAAA4QklNBCgAAAAAAAwAAAACP/AAAAAAAAA4QklNBBEAAAAAAAEBADhCSU0EFAAAAAAABAAAAAY4QklNBAwAAAAAA4gAAAABAAAAMAAAADAAAACQAAAbAAAAA2wAGAAB/9j/7QAMQWRvYmVfQ00AAv/uAA5BZG9iZQBkgAAAAAH/2wCEAAwICAgJCAwJCQwRCwoLERUPDAwPFRgTExUTExgRDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBDQsLDQ4NEA4OEBQODg4UFA4ODg4UEQwMDAwMEREMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIADAAMAMBIgACEQEDEQH/3QAEAAP/xAE/AAABBQEBAQEBAQAAAAAAAAADAAECBAUGBwgJCgsBAAEFAQEBAQEBAAAAAAAAAAEAAgMEBQYHCAkKCxAAAQQBAwIEAgUHBggFAwwzAQACEQMEIRIxBUFRYRMicYEyBhSRobFCIyQVUsFiMzRygtFDByWSU/Dh8WNzNRaisoMmRJNUZEXCo3Q2F9JV4mXys4TD03Xj80YnlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vY3R1dnd4eXp7fH1+f3EQACAgECBAQDBAUGBwcGBTUBAAIRAyExEgRBUWFxIhMFMoGRFKGxQiPBUtHwMyRi4XKCkkNTFWNzNPElBhaisoMHJjXC0kSTVKMXZEVVNnRl4vKzhMPTdePzRpSkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2JzdHV2d3h5ent8f/2gAMAwEAAhEDEQA/AO2qxTkdJLmD9JS98DxEy4KrjhwcC35+C2ejiMd4/NLyWj7gUDIxG41+jf0Vx9p7A/uK2MnqnE97H7XOlg9GPIOwjL/uZNZ92pH4oBaXuOmnij5LWtEAaqOKAZJ4HZPGgsMUgTLhJQWDYNdAFGlr73T2CvXY7Hska+IT4tDWN3NOg5S9wcPir2Txgfov/9D0TpdhNFJ2wHl4+YM/wV62tlrCx4lpVPGYW4TSOan7o+B93/RV9PyfMSO5YsI9AidfSPyedzqsnFs22++t30LPHyd/LVduQ8aALp7K67WFljQ5h5BWNfhVV2Ftbt7fyeRU+PKJCpDVqZ+XlA8UTcT3+aLTOZYOB80m9QvAILBr4aI/2XyTfZvJSXDswcOXuX//0fUKGBrC3tP5VIexsH83QKUeCUBEm0AUGvZvs0JhvgEP7OFc2hLaEROtlhx3qdWn6Pkm9FXNoS2hHjR7Qf/ZOEJJTQQhAAAAAABVAAAAAQEAAAAPAEEAZABvAGIAZQAgAFAAaABvAHQAbwBzAGgAbwBwAAAAEwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAgAEMAUwA2AAAAAQA4QklNBAYAAAAAAAcACAAAAAEBAP/hDXpodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcFJpZ2h0cz0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3JpZ2h0cy8iIHhtcE1NOkRvY3VtZW50SUQ9InV1aWQ6RUNGQzc3Mjg4MDQxREMxMUJDNDVBODNDNjIyRTJGRTkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjU2RTNBMDhERjRERTQxMUI5OTJDQzc3NTY4MTA1MkUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0idXVpZDpFQ0ZDNzcyODgwNDFEQzExQkM0NUE4M0M2MjJFMkZFOSIgeG1wOkNyZWF0ZURhdGU9IjIwMDctMDgtMDNUMTM6MDk6MjUrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE0LTEwLTA3VDEzOjAxOjQzKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE0LTEwLTA3VDEzOjAxOjQzKzA4OjAwIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzIgV2luZG93cyIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiBwaG90b3Nob3A6TGVnYWN5SVBUQ0RpZ2VzdD0iMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6RjU2RTNBMDhERjRERTQxMUI5OTJDQzc3NTY4MTA1MkUiIHN0RXZ0OndoZW49IjIwMTQtMTAtMDdUMTM6MDE6NDMrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+4ADkFkb2JlAGRAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQEBAQEBAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAMAAwAwERAAIRAQMRAf/dAAQABv/EAaIAAAAGAgMBAAAAAAAAAAAAAAcIBgUECQMKAgEACwEAAAYDAQEBAAAAAAAAAAAABgUEAwcCCAEJAAoLEAACAQMEAQMDAgMDAwIGCXUBAgMEEQUSBiEHEyIACDEUQTIjFQlRQhZhJDMXUnGBGGKRJUOhsfAmNHIKGcHRNSfhUzaC8ZKiRFRzRUY3R2MoVVZXGrLC0uLyZIN0k4Rlo7PD0+MpOGbzdSo5OkhJSlhZWmdoaWp2d3h5eoWGh4iJipSVlpeYmZqkpaanqKmqtLW2t7i5usTFxsfIycrU1dbX2Nna5OXm5+jp6vT19vf4+foRAAIBAwIEBAMFBAQEBgYFbQECAxEEIRIFMQYAIhNBUQcyYRRxCEKBI5EVUqFiFjMJsSTB0UNy8BfhgjQlklMYY0TxorImNRlUNkVkJwpzg5NGdMLS4vJVZXVWN4SFo7PD0+PzKRqUpLTE1OT0laW1xdXl9ShHV2Y4doaWprbG1ub2Z3eHl6e3x9fn90hYaHiImKi4yNjo+DlJWWl5iZmpucnZ6fkqOkpaanqKmqq6ytrq+v/aAAwDAQACEQMRAD8A2idsdXz9k/Euor8JSody9d743/NDTMupqrCy1tNWZrHU7kPJ5hSJDPEARqeEoB6/eTW48yDl/wBz0hupD9BfWlsCRjS+krG58qatSt8m1fh6wF2Hkduc/YOa62+EHeNo3S+ZV/ih1q00SnJroCulOLJpA7ugM69grKOvp6vHgCMJGtQHI+0niOg2A4JZgbqfrYextvjRPbvHOatXB8wf9Xl1FvKcM9tdw3FqBoNNVfhIPlTz+R6GTN7xR5pqJtHjijJin8Z0Rsn64WfjTe3+Jt9PYUtNpoiS6SGJyK5pTj1I24cwgyS25ppQYIH/ABnoLqiiqMzWVTpT3ppYlMdTo0iVw664gF+iN+fobexKkyWkUamTvBOP8HQGktZdynmpEPCIwwGDnIr0wZ+nGHpS05FNTUsZlmCHxePT/m/GnIKuf1c8/n2tsm+qcKg1O2B5/bXor3S3/d0BMh0QoKmmKU4UHmK8emvZmMzO/a1JliPhpWEwKACEwRMCsjKBcvY8W4H+PtRu89vs0RVnpI2PnX5dIOW7LcuaLkSBD4aGuBigPH7ev//Q3Pvh5TtTbD3LEixJi6veOTqsXDpYSsiUlBQ5GWXVdXWWsp7gj6g8+5O91ZVl32yrq+pWzQOfLLMyAelFOR1AX3eoDDylu4UKLGTcZWjWhrhI0kJrjuda4/PoJ9+dU4vq7fhSlxsx2dv7J1E2JrI0U0uAy9QXqJ9uOBYQxE65aO9rw6oxcxcijY+ZbnmHZay3I/etjGPEXzkjGBMPU8Fk/pUb8WABzZyHZck800hs2/q5us7GJxlYJm7mtyBwUmrQf0dSCujIJdl4+gxUMkVHTqsySuBNYGOZVteKQC1jJbhufpb2MeXp57lg0rkqRw+3zHz6jPnO1tbFSlvABKCc+TU4g04V8j0ydWw0cvmqKzzGKCYyfavdliMgNzGo5aMfj/H6+1fMTTJpSGg1ClfXou5IW3k8Sact4at8J8if8nQkbv6+w2fxc1VRx/cJzLPTlA7spGol4CAWIt+OPZBte+XVjciORirDgf8AZ6F/MHKW3brZPNbLqAyQcmnzHnTyp+fUrq/ZGMwNBJXY2qApYDpnYhlBlJu1MqfVnN+Qfp7Z5j3e4vJlhuI6ynhny9fs6U8j8sWW12r3djN+inGuM/w0+f8AqHX/0dzT4w7jll2R15LJipaKHc2Q7IxrWlV0gqsfk1yVEZSFGo1NLQVWn8i3uT/cSxC77voFxreBLVvtDJpP7CydQB7Kbqz8qcpSNZmNL2W/T7GSXWtfXUsclP8AY6NPuXbeI3bhK7AZum+5x9fFofQxiqKeVTqgrKOoX9ylraSUCSKVfUjqCPceWF/dbZdwX1nJpuIzUeYPqGHAqRhgcEGnU17zs9hv223W1bnDrtJVofJlPFXRuKuhoyMMqwBHVQ/eW1Ox+p86+K3dF/eTamRnkG194wwPCuSiGp46DKCG8dBuKmiH7iG0dRbXFcalXJ3k/dtj5lshcbcRb7nGv60BPwerpX4omPA5ZfhbyJwC9yuXub+RN1O379H9bsE7n6a7VSDJ5iOQCoSdR8QwslC8eKqoSY3f+WpSsUNEiRgBA8irBIqD6BnjID2/4Lf2J5tpglBMkmrPDJ/Z0CLbmC7twEhjVY6UzQE+nD0+fTvP3FuOkIWjo55XjN1qEmKFT9LAEEyLz9Dxb23HyvZTLWZ1UHyIz9vSiXn/AHSDFtFIWAw1afs9R/h65UHfu9qOCqpp9u0kqVM3mDwOKRRMwsaqWNEdfMVHq0ABj9fep+StqleORb0gqKUPdj0qfL7evWvunzJbxzwttaPG7asdnd/EaAivrQCvX//S3TOtsHPielsJLSo5qdm7xqNyJDH6TLTUmanfKwk2JCy4SvqRxzc+5H5hu0uubrxZKaLq2WKp8maNQh/KRV6g7knbHsPbja2t1Pi7fuDXFBiqrOxlH5wvJ0apHWRVdGV0dQ6OpDKysLqysLgqwNwfcckEEgihHU4KysoZSCpFQRwI6ZdybcwO7MLX4Dc2Mo8vhMhCYq2hrkDwSICHVw11eGWF1DJIjK8bAMrAgH2qsb68227hvdvuGiu4zVWU5B/wEHgQQQRggjov3baNs33brrat4so7jbplo6OKqR/hBByGBDKQCpBAPVZm+uldt7e3FU47bOai3BiPVJC5HmqcZIz2TH5CsiVaaskiVuJYzqKj9wBuTkLsvN+4323xz7hZtBc8D5K/qyKcrXzU4/hNMDCvmn222faN4mstm3QXe3mpB+JojXEcjgaXI8mXNB3gHii5OsD6iKX0qFF9HpHJ5DWswYj+p9m68xeXi1P59Bt+SiKkQHSBxp1CfrVSpApTcaQTota/0NuSdXt0b8airCn29JTyaMkwkn7Ov//T3vtkYqOgw1Zi3iUwPV1DtGy3WSOrijEiup4YMQQfwfZxvFyZ7yO4Rzq0DPzBPDoM8tWK2m2T2ToChkao8iGAr/l6f6RkwuLSmmLumPQUtOB65Z6eMWo1UcXfwBVN/wAqST7QNqu7gstNbmp8gCeP5Vz+fRvDp26ySOUnw4xpXzJUYUAeZpQU+VeHQaZ9M1uQvFVzz02PckLjaR2jhKA8fdyLaSqZh9Qf2wfovsRWP0thR0QNOPxnJr/RHAD+fz6BG7Dc94LRyyvHZE4jU0BH9MjLV9MKPTz6Rw2HSxgJ4WUqtlRIwipwQSoFgL8ezk71I5J1V+ZPHoO/1WgQU8KgHoKU+zrkdoqgCrTI40AEvGXYHTpKh/qBp9t/vWtSZKZ9cda/q/pwkIK0pkZ9OoX9ywvCxlQBYDSBpB+o5U8H/e/bv73Nfiz9v+z0wOW6YEYp1//U38RAqH9q0erh7f0/Fh9L/wCPuzMWoWNadUVET4FA64GjgY3ZNTf6piWJP5JJvz72JGXAPWmhjeupak9dfZU/+oH+2H/FPe/Ff16a+kt/4OuP8Ppv+OY/23PvfjSDg3XvpLf+D+fXX8Opv9Rb/WAH+249+8aT+Lrf0sH8OOuBxlKf7A/2w/4p7348nqOmmsYGNadf/9k=&quot;&gt;\n\n编码头的标准格式是\ndata:[&lt;mime type&gt;][;charset=&lt;charset&gt;][;base64],&lt;encoded data&gt;\n\n理论上方括号是可以省略的，同时也可以看到还有其它编码形式，比如base85、base16 等，尽管没有什么实际意义甚至有反效果。（比如有浏览器兼容性、超出合法字符区间等情况）。\n好处与坏处：\n更新：保证网页上的重要图片不会加载失败。当 HTML 加载完毕或 CSS 加载完毕时，图片一定可以正常显示。不会出现 HTML+CSS 加载成功，但图片没有显示的问题。特别适合于类似评分星级、打标等功能。\n节约连接数：http 协议下，每个单独资源在客户端都呈现为一个独立文件（在服务器端部分是），都需要握手协议开销和传输开销，而使用 base64 以后，就变成了 “文件内部” 数据，不需要额外开销。而在呈现上没有变化。这在某网页有大量小文件的静态资源时尤其有用。但随着 cdn 的发展，这种情况又少下去了。\n图片过滤无效：有时候用户因为某些原因会屏蔽网页上的图片呈现，这些屏蔽方式通常都是通过匹配 html&#x2F;css&#x2F;js 中的资源路径实现的，但在 base64 编码下这种方式会无效。但相应的，基于服务器代理转码的浏览器（UC 之类通常是手机端浏览器），以前也无法转换，现在应该改进了吧。是好是坏看具体场景了。\n不方便编辑：这个主要出现在常用的文本编辑器里，在成熟的 IDE 环境中则不存在这种问题，鼠标移到 base64 图片上同样会有预览。有些文件编辑器也通过插件来解决类似问题。\n其它：呃…… 少量增加整个网页体积，等。\n\n最后是 php 版的 base64 图片生成：\n&lt;?php$img_file = file_get_contents(&quot;img/logo.jpg&quot;);echo base64_encode($img_file);?&gt;\n\n用的也是现成库，别的代码版本就不写了。\n","categories":["前端新手菩萨保佑"],"tags":["base64","图片编码"]},{"title":"谈谈保险","url":"//talk-about-insurance/","content":"昨天下午，某银行信用卡给我打了半小时电话，推销他们的一项保险业务。一如所有的推销电话一样，最后都只能强行挂机，没办法礼貌地互相结束通话，唉，可怜那业务员。(ノへ￣、)\n这个业务很简单，每月交差不多 140来块钱，直接从信用卡上扣，全年 12 期，总长 5 年，可提前结束。价格据说是根据我的年龄、职业等测算出来的，每个人还不一样。小年青们会便宜一点，老头子们更贵一点。然后收益是什么呢，在业务员啰啰嗦嗦不断夸耀优点的情况下，我总结出来以下几项：\n\n如果是疾病性住院，则只要住院，无视原因无理由赔付每天 ￥200，提供医院帐单复印件、身份证复印件、信用卡复印件即可。有 500 天上限。\n如果是外伤性住院，则只要住院，无视原因无理由赔付每天 ￥400，提供医院帐单复印件、身份证复印件、信用卡复印件即可。有 500 天上限。\n如果一年无赔付，则反还 25%。\n小病小灾，不住院不算保险范围。\n\n其实就是个无理由住院额外险，无论是天上掉流星砸到脚，或者被加班逼到内出血，反正只要躺医院了，就按价赔偿。……不知道自残算不算。(￣△￣；)\n然后我拒了。在电话录音说您是否确认现在通过语音确认开通时及时地拒了。\n嗯，这个业务本身其实还可以，如果是我玩轮滑狂热的年代我还真就说不定买了，只不过在现在的境况下，核算了一下成本，基于我的逻辑，最后还是回绝掉了。\n首先，其实要知道，保险其实永远是越买越亏的。从逻辑上说，保险是以集合众人的付出，给一些人的损失兜底。如果保险运营不需要成本，理论上对于一个人来说，整体的付出大约等于各种损失乘以机率以后的期望值。但实际上，考虑到保险还要支付销售提成、运营成本、赔付审核、股东分红、物业建设等等，对于一个保险客户而言，单纯考虑支出和损失期望，是肯定不合算的。只有考虑到对损失赋以一个额外的权重，也就是考虑到 “损失超出了你的承受能力” 的情况时，购买保险才是一个合算的行为。\n换句通俗的话说，就是我明知道不出意外或者出点小意外都是亏的，出大意外，从概率乘以损失来说我还是亏的，但因为我实在承受不起大损失，万一呢？所以还是买点保险用小损失代替吧。比如汽车保险，其实出事的机率，乘以出事要赔的钱，整体而言还是比汽车保费低，但因为真要出点什么事几十万的钱还是会对个人造成极大的甚至是不能承受的打击，那就还是买吧。\n我们举另外一个极端的例子。大家在生活中经常会丢失钢磞儿，几毛一块的，积累下来也有不少，比如每年少则十块，多则一百。现在我推出一项保险，“钢磞丢失险”，每月交五块钱，只要丢钢磞就给你等额赔付。假如不考虑实际执行难度，就假设一点不麻烦，说赔就赔，也没有骗保，你会买么？\n如果你说，不买，丢了就丢了吧，说不定丢的还没保险费多，只丢钢磞再多也丢不成穷光蛋的。相信大家都完全能理解这种想法。\n事实上，大部分人从保险得到的赔付都是不及保费支出的。也就是说，丢的确实不及保费多的。你每月可能丢一个，可能丢五个，可能丢十个，但参保了就相当于稳定丢五个了。全年一统计，你最多的一个月丢了 8 个，有两个月没丢，大多丢三四个，你就发现自己明显赔了。明年就不必参保了。\n但假如我们加一个额外限制，『在丢到某一数量以后，这个巨大损失个人承担不了』。比如开开国国王规定如果国民某个月丢硬币损失超过 10 块要杀头。那显然这份保险就变成了买命钱了，五块？太便宜了。\n再举一个极端例子。如果你的全部收入全部交了保险，不管你当前交了多少，付给你的保费永远是固定值。过一两年你肯定就会发现亏大了，还不如自己存钱合算。你觉得呢？\n也就是说，保险主要针对的是你自己不能承受的重大损失，对于一些承受无压力的小损失，完全可以考虑自行承担，并不一定需要保险，当然也不是不可以考虑，还是看你的承受能力和损失厌恶度。\n所以土豪们是不需要常规保险的。是嘛，汽车三方险最多也就到一百万，对于豪车还是杯水车薪，基本都靠土豪自己兜。\n其次，这个险号称最长可达 500 天，20 万上限。其实吧……那是住院啊，谁能住院 500 天啊。就算 5 年 500 天，那也是每年住院三个多月啊……这种情况下，医疗保险、扩展医疗保险，甚至是亲朋好友都比这个保险靠谱。当然，两险是不冲突可以同时用的，但归根结底，这个保险反而更像是一种锦上添花而不是真正可以兜底保障的险种。在收益上其实比不上按比例赔付的常规保险类。\n那么如何核算支付与收益呢？很简单，每月不是扣 140 来块钱么？全年 1700 块，每年需要住 5-8 天院才能收回保费。这就是一个比较合适的可比较尺度了，就算出了轻伤车祸，在北京这种常规情况下也很难住够五天院，大多都会让你回家休养。而如果重伤到需要超过 8 天，无差别的每天 200-400 也是杯水车薪，我需要更强的保险覆盖。\n只有像我学生时代那样，经常没事出个小伤，进医院擦个药打个板，医生也好说话，总能腾出闲天住院的那种状态，才比较合算。而这个保险又是要审核职业、收入等等因素的，想找他们的 “优质客户”，估计在我学生年代就是劣质客户吧。如果我是他们的“优质客户”，那么他们基本就不是我的“优质保险”。\n在保险收益预估时，不能以最高保障额度计算，而是应该以个人实际和保险本身赔付方式决定的“常规”意外预期计算。保险公司算得比你精得多，但只要你从“可收回保费所需要的意外程度”进行反向计算，就比较容易得到可感知可衡量的收益标准了。\n再次，当然还有心理上的因素，人们对小概率事件的估计总是偏离常规的，我也是。唯一常见例外的也就是车险了，人们还是很认可驾车意外的概率的。\n人们对幸运的小概率总是高估，要不然也没有人大把大把地买彩票了。——你可以认为买小额是图个别的心理幸福感之类的，可幸福感不也是心理因素么？\n而对厄运的小概率却偏向于低估，就好比真的计算车祸概率，或大或小几十人里也能摊上一个，相当于一个班级、一个小公司、一个小团体中间总能遇上一项，但每个人都不认为是自己。我也是。作为理性青年，在作必要决策时会考虑到这种情况，而在改善性决策时，这种心理就又会占上风了。就好比我如果需要自费购买人生意外、大病医疗院，和需要自费购买这种改善性医疗险，在决策时的“意外概率”是不一样的……\n最后，我非常讨厌这种持续性延后性的扣款，利用的又是人们的遗忘心理和小额支付决策时的心理偏差。个人喜恶，冷暖自知。\n哦，在这里还有一个奇葩的部分，就是反还 25%。一开始我也被绕进去了。要注意这个反还只有在你不产生保费的情况下会出现，被推销员包装成了“实际保费仅 110几元”。\n别傻了，如果不出意外没有保险赔偿，多少钱都是白付给保险公司的，保险成本还是应该按出事的计算。换句话说，这个只有银行在核算净收入时有影响，对你核算出意外时的成本与收益是完全没有任何关系的。因为这项条款只有在“不出意外”的情况下才生效，而“不出意外”你拿不到赔付，多少钱都是白送给银行。\n而且反过来想想，如果真出了事要住一两天院，你如果去索保，虽然能拿到 ￥200-400，却失去了返还部分近 ￥400 块。这反而会导致你即使真的入院，在两天以内的也不会去找银行赔付，银行照样是净赚。这还真不如直接把保费降一点好呢。这跟车险动态调整保费还不一样，车险意外发生的概率和个人的驾车行为安全意识有很大相关性，而对于住院而言，个人可控制的因素则少很多。另一方面，车险是下一年费用变化，也不涉及历史费用的返还，并且各公司还通用。两者的差距巨大，从这个策略中我更多地看见的是恶劣的算计，而不是对客户的善意。\n其实话说回来，如果真的到了个人不能承受的意外，通常一个家庭也就完了。目前看见的保险制度，绝大部分也都有个吝啬的上限，或者有严苛的赔付标准。做得到锦上添花，却做不到雪中送炭。只有市场化的车险好点，医疗保险也只能说呵呵。农业险，包括农业期货，以我外行的角度看来似乎也不错。只是不知道农民兄弟们，身在此间多有经验，是会说哈哈，还是呵呵。\n今天刚看了知乎一篇文章，里面是从业人员吐槽人民没有保险意识。\n我呸。\n少几个推销，少几份算计，少几段夸张措辞，多来点真货。\n","categories":["唠唠叨叨"],"tags":["收益计算","保险"]},{"title":"C 酱近况通报","url":"//recent-report-cosjiaoyi-com/","content":"Hi, 我又来发文耽误大家阅读时间了。C 酱小组最近又有了很多进展，只是暂时还没有在界面上体现出来。正因为如此，更要好好地讲讲。\n运营数据国庆七天长假是秋天以下的又一波 cosplay 大高峰。C 酱作为 cosplay 的二手交易搜索站，也很直接地体会到了 coser 们『展前急求购，展后苦出售』的种种悲剧，对此 C 酱只能说……吃不上饭的都是真爱 (≖ ‿ ≖)✧\n言归正传。\n目前 http://cosjiaoyi.com/ 过去 30 天数据依然保持大约 5500 PV，UV 略有下降，900 多不到 1K。但回头客（回访率）有所上升，到了 31%。\n大致的结论是，我们『真正的』用户数依然在稳定增长。我一直在做一些简单的运营，也偶尔与用户有私下的交流，对网站的『有用』有比数据更直观的感受。这些大多来自于用户的直接反馈，有赞美，也有抱怨。每次我都很开心，那并不是罗列数据所能展现的，但却是更本质的东西……因为用户八成都是萌妹子……≖‿≖✧\n言归正传。\n因为 cosplay 本身的周期因素——也就是天气冷了、要考试了、漫展少了等因素，总访问量受到一些影响，没有如预期一样继续稳步增长。另一个因素是，用来做微博转发推广的帐号遭遇了一些小困难，导致大约半个月时间微博无法如以往一样进行常规推广，也损失了一些访问数。\n单从数据上讲，微博粉丝日平均增长量和日 PV 数较为相关。在微博帐号异常的那几天，粉丝数量停滞不前，日 PV 数也日渐下降，当重新开始转发后，PV 数也回升到正常情况。更详细的分析没有什么意义，毕竟一天一两百的 PV，随机波动影响较大，难说跟国庆后退潮期有什么关系。\n常规的每天半到一小时的微博转发，大致能带来的流量基本稳定。如果没有活动和奖励刺激，会保持一个稳定缓慢增加的状态。我一开始就有计划做一些活动，但目前网站已经上线的部分仍显单薄，强行推活动当然也会带来增长，只是未必能稳定留存用户，我们还是先来谈谈别的。\n社团人员从发过招募后，我又各处去拉了壮丁。现在算上神隐的已有九人，可以骄傲地称之为小团队了。如招募时所说，因为是业余社团性质，有团员暂时处于离线状态，主程战力三人，运营一人，外加酱油三人。当然，都是周末贡献一天时间。如前所言，每周预期四小时，最多八小时，如果忙，请先忙。\n凑几个人，做一点事情。我没有宏大理想和甚高逼格，只要能做好一个小站，让它可以自己循环养活自己，就够了。我觉得这是我的优点。有无穷多的资源，可以做无限大的事情，如果没有，我们也能做点东西出来。\n我们现在依然缺设计和前端，很遗憾地，虽然我鼓动过两三位，但也许是不得法吧，最后还是没了回应。所以设计还是我自己在做，(｀･ω･´)，前端小团队配合着做。摆在列表上的工作有：新版界面、网站 Logo、三大功能界面、手机版界面、网站吉祥物等等，顺序分先后，嗯。\n我在鼓动萌妹子、设计师、萌妹子+设计师方面实在是很手足无措智商捉急，所以如果你愿意来，能不能先教我一下怎么鼓动你，你会愿意来？我们的用户大多都是非常可爱的萌妹子，剩下的也都是非常可爱的伪娘妹子……我们小社团自己也有两周一次的女仆餐厅聚餐，我们还有……呃……我大概明白为什么木有设计师了(&gt;_&lt;｡)。\n哦对，我现在实在是没法提供全职工作机会，我真没想到会有朋友向我投简历求工作，(&#x3D;ﾟДﾟ&#x3D;)，非常抱歉，希望将来有缘。\n现在进展我们做了很多工作，只是暂时没有在界面上体现出来。\n\n我们花了很多时间改进了微博数据的处理，包括清理过期微博、过滤僵尸粉、改进链接速度、改善搜索结果等等；\n我们研究了如何扩大搜索源，已经通过了初步测试，未来可以搜索的源会更多一些；\n我们设计了一个新功能，帮助用户及时发现他想要的东西。这个功能分三个环节，第一个环节已经基本完成等待测试了；\n哦，还有另一个新功能带你勾搭带你飞，所谓的 C 酱三大功能的第三功能。也进展顺利；\n新的界面也已经在后台整装待发；\n为了让界面更好看，我们还在研究如何服务器端判断 UA；\n然后，我在尽力做着不擅长的事情，做设计，画 Logo，并学习手绘萌妹图；\n当然，每两周一次的聚餐依然尽力。\n\n基本资料\n网址： http://cosjiaoyi.com\n网站博客： http://bl.cosjiaoyi.com\n不断调整的未上线新界面： http://bs.cosjiaoyi.com\n社团招募帖：『羞羞的招募』\n联系微信： kaikaiiiiiii\n联系 QQ： 151493994\nC 酱同好组 QQ 群：（马赛克）\n\n我们做的，现在是 cosplay 二手服装道具的搜索，短期定位为『好用的工具』，中期是为 coser 服务的优质功能小站，长期不提。\n","categories":["动漫边缘"],"tags":["数据","cos交易酱","Cosplay","运营"]},{"title":"年终总结！？","url":"//year-2014/","content":"换了工作，搬了家。\n开始带小团队，产品经理入室。\n开始做一个动漫周边的业余项目，找小伙伴，找支持，用业余时间做点运营。也有了一些小小的成果。最初夸下的『两年内转行做动漫』，说不定真有实现的可能。\n学了 HTML CSS，在 JS 上遇到了一些小挫折。\n匆匆又是一年。\n","categories":["产品经理"]},{"title":"等我有空了，来做个“就选它吧”网站","url":"//just-choose-it/","content":"目录性质的软件推荐目录。网站目标是：“一个门类，只推一个软件，不给你选择”。\n纯手工编辑，美工弄好看一点，弄个邮箱然后装高冷只收不回。如果数量多了，数据库还是得要一份的。\n怎么推荐呢？\n当你需要一个软件实现某个功能时，我只推荐一项。\n比如 OCR 识别，就选 ABBYY 了，不需要考虑其它的；\n图像处理，就选 Photoshop 了，我不管你是怎么弄到 Photoshop，反正我就推荐它了。大而全，功能都能实现，其它都是小意思；\n自拍就美图秀秀了；\n邮件，嘛，Outlook 和 Foxmail 都挺好的，但如果只推荐一项，我就推荐 Foxmail 了；\n家谱软件，我看的最好的就是 Mac 下的 FamilyTree，再找找 Windows 下有什么好软件；\n架博客，就用 WordPress 吧，功能较全，架设方便，甚至也有 VPS+Wordpress+域名 的打包解决方案。什么 Ghost、PivotX、Jekyll 都让 Geek 们自己折腾去；\n等等。\n可以理解作软件推荐版的好 123。\n选择原则大概就是功能较全，或者效果最好。以不选择为前提，给出的就更倾向于较多功能的东西。效果好，指核心功能简单易用，上手顺利。\n原因有二：\n一、作为一个强迫症患者，我在需要软件解决一个问题时，往往会搜索该需求下的所有软件全部都试一遍，然后挑出我认为最舒适的一个软件，并为自己精妙的选择骄傲不已。后来发现，为了体验每一个软件，消耗掉的时间往往比实际使用软件能节约下来的时间更多。\n比如我尝试过至少十来款记账软件，或者是主打简洁，或者是主打同步，但用来用去实足半年，真正的记帐这事却每次换 app 都重来一遍。最后买了个随手记，就不再去关心别的软件了，管它有多少功能，反正我就按天记个帐就行。\n作为一个产品经理，去尝试很多软件，可以说是职业素养的一部分。但作为一个普通人，生活还是应当节省时间去做爱做的事情的。\n二、实际工作中经常扮演救火兵的角色，有时也需要去解决并不擅长的问题，使用甚至没有听说过的软件的。这种时候有一个合适的推荐就很重要了。\n所以这是一个“推己及人”的个人项目，虽然我一直说产品经理不是正常人，产品经理的自身需要往往不是正常需求。但在这个项目上，还是可以尝试一下普通人的角度看待问题的。\n所以你看，再怎么着，这也是一份主观的选单，反映的倒不一定是我的个人口味，而更像是通过一份软件的表单，反过来表达我在产品经理这个身份上的选择直觉。\n先记一笔，寒假大概就有时间去设计了。\n","categories":["产品经理"]},{"title":"星际争霸 2 攻防数值研究","url":"//sc2-battle-data-study/","content":"星际争霸里的数值平衡是挺有意思，值得仔细咀嚼的东西。\n预备知识： 虽然星际显示的所有数值都是整数，但在内部绝大部分则使用了更精确的小数计算形式。而只在结果上进行了向上&#x2F;向下取整处理。在不同场景下，这个计算特性也造成了一些数据结果的特性。比如：\n\n虫族的满血单位在受攻击后会立刻回一点血。\n取消建造返回 75% 资源但永远是整数。\n人类维修在一矿一气内是先扣款再维修。\n一次攻击最低造成 0.5 伤害。\n\n等等……\n攻击力，护甲值，血量对于战斗中的任意一次攻击行为，都是通过以上三项得到最后的伤害计算结果，计算公式为：\n\n伤害 &#x3D; max { 攻击力 – 护甲值, 0.5 }\n\n直观的公式，攻击力被护甲抵消掉一部分，剩下的对单位造成实际的伤害。\n\n\n人类枪兵默认 6 点伤害；\n人类地堡，默认 1 点护甲；\n\n\n则人类枪兵每次攻击对地堡造成 5 点伤害。\n当护甲值大于等于攻击力时，每次攻击至少造成 0.5 点伤害。\n\n\nSCV 攻击力 5；（战五渣）\n行星要塞，升级建筑护甲，护甲值 5。\n\n\n结果：SCV 每次攻击造成 0.5 伤害，由于显示数值均为向上取整的整数，所以实际上需要两次攻击以后才能看见 HP -1。\n虫族被动回血与向上取整虫族的所有单位均有一个持续的回血速率，为 0.27 血&#x2F;秒。个别兵种，例如飞龙，或者埋地蟑螂，会有更高的回血速率。这一回血不受任何外界因素影响，也与是否战斗无关，永不停止，直到满血。\n星际的血量计算是存在小数数值的，包括伤害下限的 0.5 血，包括虫族回血的 0.27&#x2F;秒。但这属于内部数据，对外展示出来的最终结果，依然是整数。从真实的小数值到实际呈现的整数值，中间的取数办法是向上取整。也就是说，在任何情况下，只要血量真实值存在小数点，则显示数值均向上取一位。\n例如虫族所有单位均有 0.27 血&#x2F;秒的回血速率（部分特殊兵种更高）。那么任何一个虫族兵种被攻击一次以后，只要不死，则会立刻启动回血过程，在小于半秒的时间内回复了 0.1 的血，在最终数值显示上便回了一点血。这也是那些初级数值研究文章里常说的，虫族在被攻击一次以后会回复一点血的原因。其真实原因如下：\n\n虫族单位的回血是任何时候只要小于满血量便永远存在的；\n虫族单位被攻击后进入不满血状态，该回血启动，回复 0.1 甚至更少的值；\n系统显示数值是向上取整而非四舍五入；\n故显示上是瞬间回 1 血；\n\n某些人认为的“1 点隐藏护甲”，则是完全完全错误的。尝试：\n\n\n零攻攻城坦克：攻城模式 35 点攻击力，重甲 +15；\n零防跳虫：35 血，0 护甲值，轻甲；\n一防跳虫：35 血，1 护甲值，轻甲；\n\n\n零防跳虫就是一炮死。因为来不及回血，也不存在什么隐藏护甲值。但是如果虫族升了一防，则坦克一炮轰上以后跳虫会有两格血，事实上是 35-1 &#x3D; 34 点伤害，剩余 1 血，同时虫族回血机制启动，极短时间回复 0.1 血（每秒是 0.27，开始回血时还不到 1 秒，几乎瞬间），由于数值向上取整，我们就会见到回复了 2 滴血。再尝试：\n\n\n一攻女妖：13×2 攻击力；\n三攻机枪兵：9 点攻击力\n零防跳虫：35 血，0 护甲值；\n\n\n则零防跳虫在经受了女妖和机枪兵的一轮攻击后，正好还剩下一点血。本来伤害量是正好 35 点的，但由于女妖和枪兵无法做到完全同时产生伤害，使得跳虫有短暂的时间回复零点几的血，从而在第一轮攻击中幸存下来。需要机枪兵额外一次攻击才能杀死。从这些数值可以明显地看出，虫族的 “第一次受攻击秒回一血” 只是一个结果，并不是原因，而 “隐藏护甲” 则简直是瞎扯。另外，虽然从结果上看 “受到攻击后立刻回 1 血” 有时候也正确，但由此衍生出来的什么 “回 1 血隐藏 CD” 也是错误的，单纯只是持续回血过程中是否正好巧合地遇上整数断点罢了。\n由于正常情况下伤害值都是整数，故虫族的小数点血量在实际效用上确实等同于整数 1 血。虽然真实血量是个斜线，但效用血量却是阶梯横线。\n除了护甲大于等于攻击情况，只有非零攻异龙的弹射攻击是小数点伤害数值，腐化者的腐化技能通过 debuff 加成可能产生大量的小数点伤害数值。奇葩都出在虫族。\n攻防升级每个种族都有针对绝大部分单位的攻防升级科技，可升级三次。攻防升级对已经在战场上的单位同样有效，因此可以利用刚升级完成的时间让大部队发动一次有攻防优势的进攻。\n三个种族的攻防升级具体影响的单位并不一样。人类分为生物部队攻防和机械部队攻防；星灵分陆军和空军攻防，另有所有单位的离子盾升级；虫族没有离子盾，但地面部队的近战攻击和远程攻击是分别升级的。\n此外，还存在针对个别单位的单独攻防升级项目。人类的建筑护甲升级（+2 甲），雷兽的硬化甲壳升级（+2 甲），人类的恶火对轻甲的伤害加成等。\n同一层攻击升级对不同单位的影响也不一。例如虫族地面近战攻击升级，跳虫是每层升 1 点，而雷兽则是每层 3 点。而三族所有防御升级却全是 +1，专项升级除外。因此三攻三防的枪兵内战，和零攻防的枪兵内战效果一模一样，但三攻三防的坦克对打起来却比零攻防的对打死得更快。高级兵种在攻防加成上享受到的比初级兵种更多一些。\n多重攻击在游戏中，“多重攻击”可以理解作“左右开弓”。也就是每次攻击有双份，每份独立进行攻防计算。游戏中除了星灵母舰是 6 重攻击以外，别的拥有多重攻击属性的都是双重攻击。\n大部分双重攻击的单位都可以从外观上直观地看出来，收割者是双枪党，显然是双重攻击；女妖导弹有明显的相互缠绕的轨迹，也是双重攻击，导弹塔也类似；狂热者是帅气的幽能双刀；巨像和凤凰的两道激光那么明显，女皇表示她也有两只爪子……\n例外的是行星要塞和不朽者。游戏中说明文字上写的行星要塞是加装了双管“伊比克斯”加农炮，外形上也很霸气，却不是双重攻击。不朽者的游戏背景资料写道，他们是仅存的龙骑士们加装了双重相位分裂炮，但实际游戏中也不是双重攻击。\n双重攻击意味着 “一轮攻击，两份效果”。通常来说，双重攻击的特性主要是为了数值平衡，“打了一半”的情况极少出现，但如果你刻意制造还是能做出来的，比如狂热者的两刀就是有先后的。\n在多重攻击下，伤害计算公式依然简单而符合逻辑：\n\n伤害 &#x3D; max { 攻击力-护甲值, 0.5 } x 多重攻击数\n\n例如：\n\n\n零攻收割者，攻击力 4×2；\n三防雷兽，护甲 4。\n\n\n每一轮攻击会造成 0.5×2 的伤害，也就是 1 点。而不是 0.5 点。通常来说，双重攻击在攻防优势时的收益更大，而劣势时的差距也更大。\n双重攻击存在完全同步的两次攻击（收割者），以及有先后的双重攻击（狂热者）两种情况，两者在极端情况下的表现会有微小的不同，但大致没有区别。\n特定属性加成很多兵种对特定属性的对象的攻击力会有额外加成。例如劫掠者的普通伤害是 10，而对重甲单位的伤害是 20。被加成的属性通常有轻甲、重甲、生物单位等。目前还没有兵种对两种以上的属性有加成伤害。攻防升级对加成伤害同样有效，升级变化数值有些高于基础伤害的增加值。\n但加成伤害的具体数量并没有明确的规律可寻，孢子爬虫对生物单位的伤害高达基础伤害的 3 倍。（15→45），而执政官则只加成约 40%（25→35）。通过特定属性加成并且分别微调，暴雪给自己留了个方便的平衡性改动的口子。\n这些加成的计算优先级最高，只和攻击者及被攻击者的属性有关，计算时可以直接视为基础伤害。这造成了非常明显的兵种相克的链条，使用针对性的兵种能有效扩大优势夺取胜利。\n攻击间隔每个可进行直接攻击的单位都有两次攻击间的时间间隔设置，数值也是游戏里的秒。不少资料简单理解为攻击频率，严格地说是不对的。频率定义的是每秒多少次，而不是两次间隔；\n\n攻击间隔是该单位两次攻击行为之间的最短时间间隔，这个时间被形象地称为 “Cooldown”，来源于工业机械的停机散热。并不是到时间就必须进行下一次攻击；\n对于分先后的多重攻击，攻击间隔严格描述的是多重攻击每轮攻击中 “第一发” 之间的时间间隔。例如狂热者的两轮攻击，两个第一刀之间的最短时间间隔为 1.2 秒。多重攻击内部间隙一般不考虑了；\n除凤凰战机以外，所有兵种在都要站定时才能攻击，也就导致了 “甩枪” 这一操作的出现；\n站定输出的实质在于产生一次攻击前有短暂的前置时间，随便理解成瞄准、深呼吸、扣扳机都行，这一时间各兵种有不同但都接近于零，实质上就是程序在判断输出时必须无移动指令；\n实战中，站定输出的前置时间长度确实存在，原因是网速。你网速越好，前置站定时间越短；\n站定输出的后置停止时间是装饰用的，打完了歇口气的感觉，可以通过手动移动指令覆盖；\n兴奋剂、肾上腺素等升级可以减少输出间隔，在相同时间内作出更多次攻击行为，提高伤害；\n射程相当时，在移动上有优势的单位可以通过操作把对方兵种的攻击频率拖到跟自己一样；\n巢虫领主、航母等附带单位的攻击间隙，主单位与附带单位的攻击间隙都是独立计算的；\n尽管攻击力除以攻击间隔就可以得到 DPS（每秒输出伤害）数值，但 DPS 数值并不能有效描述该类单位的实战输出强度；\n部分战斗系技能有冷却时间，不耗蓝技能的 CD 较长，而耗蓝技能出于平衡性因素也添加了一些 CD，比如灵能风暴的 2 秒；\n修理技能没有 CD，感染者扔异化作战体也没有 CD；\n\n距离与体积星际中的长度单位以“格”为基础单位，游戏中各种涉及到距离、长度、速度的数据，均以格为基础数据，用精确的小数衡量。“格”的范围在建造建筑时体会非常明显。\n尽管建筑占地为 2×2、3×3 之类，但建筑实际挤占的空间却略小于占地面积。在两个对角建造的建筑缝隙间，依然可以穿过体积小于 1 的兵种，比如机枪兵或者小狗。需要错一格才能严格封堵。对于 5×5 的主基地则更为特殊，错两格都依然能通过 1 体积兵种，错一格时甚至能通过一个追猎者。\n每个单位都有自己的体积，以指定半径的圆形描述，属于一个内部数据，与玩家选中单位时脚下的圆形没有关系，只能通过解析客户端数据获得。所有的占位、可穿过等与体积相关的特征，都与这个内部数据相关。当两个单位的圆形最近处宽度小于兵种自身直径时，寻路算法便不把两单位之间的缝隙视作一条通道了。部分单位在切换形态时，例如攻城坦克切换到攻城模式时，其体积会发生变化。另一个更实际的例子是星灵机械哨兵的力场，通过从某个特定坐标 “膨胀” 出一个圆形，从而对部队分布产生影响。\n而在建筑摆放时，则无视圆形体系这套系统，单纯以建筑网格判断是否可以建造。因此两个相邻建筑的碰撞体积圆周可能是相交的。所以有时候会出现攻城模式的坦克挡住了气矿，气矿无法建造的情况。\n空中单位也存在体积，区别在于空中单位并不强制碰撞，而是缓慢地相互分离，直到达到最后互不重合为止。\n视野每个兵种与建筑都有自己的视野范围，呈圆形，在视野内才能看见敌方的动静，视野外则覆盖有战争迷雾，只能看见地形：\n\n地面单位的视野受地形影响更大一些，会受到树、草丛、柱子等影响，而空中单位则不会；\n所有友方单位的视野共享，包括多人游戏时的盟友视野，可以借助友方单位的视野进行一些必须有视野才能操作的动作，比如投放矿骡或者挖虫洞；\n建筑也拥有自己的视野，大多都是 9，但主基地和防御建筑的视野会更大一些；\n感应塔的视野是 12，但额外拥有 30 的感应范围，可感知敌人位置，但不属于视野；\n不考虑感应塔的特例，视野最大的建筑是萨尔那加塔，为 22，单位是星灵母舰，14；\n雷达可以全图开视野，半径为 13，这个都知道；\n所有的工程兵视野均为 8；\n建造中的建筑视野为 5，包括自身占据体积，对人类而言，建造中的 SCV 也会实际扩大这一区域的视野。\n虫茧，即正在变异中的毒爆、眼虫、巢虫领主和幼虫孵化各兵种时的状态，视野为 5。\n埋地单位视野减少为 4，但感染者和毒爆不变，异化作战体减少为 5；\n反隐可以认为是一种特殊的视野，反隐单位的反隐距离永远与视野一致；\n虽然如此，但视野会被地形遮挡，反隐能力却不会。悬崖下光子炮台，地形受限视野无法覆盖崖上，但借助友军视野，依然能侦测到高地上范围内的隐藏单位；\n视野详细数据见：http://wiki.teamliquid.net/starcraft2/Sight\n\n射程有距离的衡量单位以后，射程也就可以确定了。在游戏中射程的重要性受操作的影响非常大，更经常与地形、视野配合，获取更大的战斗优势。\n\n射程的起止点是从攻击单位的体积边缘一直到受伤害单位的体积边缘，以确保两个不同体积但相同射程的单位在无额外操作的情况下可以相互攻击到对方。最典型例如地堡枪兵（5+1）对抗追猎者（6）；\n因此在视觉上，重形单位射程比实际数值更大一些。典型例子：光子超载的星灵枢纽、仲裁官；\n每个单位都存在体积，其边缘和视觉并不完全一致，有的大有的小。具体数值解析客户端可得，实际往往通过聚团时大小靠感觉判定；\n尽管异龙的射程只有 3，但由于弹射另有 2 的射程，再加上建筑较大的自身体积，异龙能打到 7 以上的距离。借助建筑弹射绕路的地面部队也是异龙操作技巧之一；\n近战兵种也是有射程的，数值上视为 0.1，但毒爆的触发范围为 0.25，确保毒爆对近战单位的优势。毒爆的伤害范围为 2.2，以爆炸中心点开始计算；\n升级冲锋的狂热者在冲锋追上敌人后必定至少造成一次伤害，这次伤害的 “近战距离” 可能大于 0.1，是某个补丁后添加的特殊设计；\n大部分兵种的远程攻击距离是整数，但并非必然。收割者（4.5）、巢虫领主（9.5）表示有话说。\n蔽目毒云造成的近战距离也为 0.1；\n人类攻城模式坦克和星灵风暴战舰是仅有的两个最大射程比视野还大的兵种，需要友军帮助打开视野才能获得最大攻击范围；\n人类攻城模式坦克是唯一一个有最小攻击距离的单位，距离为 2；\n星灵航母的射程分两段，8 点为派出拦截机的触发距离，14 点为拦截机的强制回收距离。 \n拦截机派出时间为 8 秒，8 秒后必须回到航母后再重新派出，因此以下内容在讨论距离为 8 – 14 范围时都假定在同一个 8 秒内；\n拦截机本身在动画上有射程，但该射程实际并无作用，拦截机有时在动画效果上会飞到接近 14 处，但依然不会攻击 14 以外的目标；\n在派出拦截机后，航母可以后撤，只要 14 范围内，拦截机在 8 秒内依然会攻击既定目标；\n拦截机也有视野，因此在攻击 8-14 范围目标时不需要额外开视野；\n在 8-14 范围内，目标死亡后，玩家可以手动点选一个新目标，拦截机可以不回舱直接转向新目标。此时航母会驶向目标，再次手动拖拽可以使它继续停在 8 以外，达到距离外切换目标的效果；\n但 8 为“派出距离”，也就是说如果敌方在 8-14 内时，尽管已经派出的拦截机会继续攻击，但新造的或者未派出的拦截机则不会继续派出；\n默认的 “派出间隔” 为 0.5 秒，4 秒全派出。可以通过升级提升到 0.125（前四）到 0.25（后四），1.5 秒全派出；\n拦截机的攻击间隔为 3 秒，基础攻击力 5×2 双重攻击，一次派出可以攻击三次；\n航母的攻击力完全来自于拦截机，相当于 5 点攻击力的 16 重攻击。因此敌方的护甲升级会产生巨大的影响；\n拦截机 25 血，虽然无法选中、无法手动点击，但可以被自动防御机制，例如防空塔、机枪兵、光子炮台等击中摧毁，因此航母需要时刻注意补充拦截机。友军人类开启 SCV 自动修理也可以修理拦截机；\n拦截机虽然不占用人口，但由于航母占用 6 人口，因此初始四架每架拦截机等效占用 1.5 人口，满载八架后每架等效占用 0.75 人口；\n空的航母在攻击指令下达后也会停在 8 格处，而不会飞到敌人脸上；\n\n\n\n移动速度移动速度是建立在游戏内距离和游戏内时间双重数值下的的一个兵种动态属性。速度的作用在于快速接近敌人、逃跑、追击、巡图、捡漏等，以建立整个对战过程中的战术优势。速度并不影响攻防数值，但却可能影响兵种相克。速度的衡量标准单位为 1 格&#x2F;秒，可以简写为 1。\n\n移动速度与攻击速度（攻击间隔）是分别的两个属性，例如时空折跃会将区域内敌方兵种移动速度降低到 50%，但并不改变其攻击速度，虽然从感觉上来说应该变；\n在较大部队行进时，每个兵种的速度是各自计算的，由于寻路与体积碰撞等因素，整个部队的移动速度会慢于组成兵种的移动速度；\n游戏中速度最快的是星灵航母的拦截机，速度为 7.5，但是考虑到拦截机属于特殊情况，而航母本身却只有可怜的 1.875 的速度，所以实战意义上的最快速度并不是它；\n可操作的最快速度是菌毯上的代谢加速跳虫，为 6.1088，其次紧随其后的是冲锋状态中的狂热者，速度为 6.05；\n那么显然问题来了，冲锋技术哪家强 冲锋狂热者能否追击到菌毯提速狗？\n答案当然是不能。事实上冲锋也是一个 BUFF，持续 3.5 秒，在此时间内差不多能冲过 22 格距离，相当于萨尔那加塔的视野，也差不多是一个屏幕的距离，然后就会慢下来；\n这与某次补丁的 “冲锋后至少能击中一下” 不矛盾，冲锋在两者距离小于 0.1 时会提前结束，当提前结束时，必然产生一次攻击。但如果是时间到结束，则相当于始终未曾接近，故不产生攻击行为；\n所以如果你够骚，可以尝试拿条跳虫把对方的狂热者带到一个屏幕外自己的大部队这里来消灭掉；\n速度第三是无菌毯提速狗，4.6991，所以穿狗入矿区必须靠建筑预防；\n并列第四的是推进器状态医疗艇、恶火和凤凰，均为 4.25；\n速度最慢的是未升级王虫，为 0.586；\n其它数据详见：http://wiki.teamliquid.net/starcraft2/Speed；\n\n弹道很多兵种发射的子弹都有明确的行进轨迹，人类的各种飞弹，星灵的蓝色激光，虫族的绿色喷吐。弹道并不仅仅是一个视觉效果上的设置，在数据方面也会产生一些变化。\n\n弹道类攻击从攻击方发射出来，到防御方受到攻击，中间存在一个时间差。这个时间差随着弹道长度会变化；\n随着目标的移动，弹道也会发生变化，最后总是会击中目标，即使目标已经移出自己的射程外；\n铁鸦的可以跑远躲开的自动导航炸弹是技能，不是弹道类普通攻击；\n子弹飞行时间的长短并不影响攻击兵种的攻击频率，间隔是按发射频率算的；\n弹道类攻击有更明显的发射前动作，而不光光是子弹的飞行时间。这使得 “甩枪” 动作需要停留的时间比机枪兵和收割者更慢一些；\n尽管常规移动并不影响弹道类飞行的命中，但确实可能通过某些手段回避掉已经发出的弹道类攻击。比如追猎者的闪烁，或者人类兵的快速上下医疗艇。原理是取消弹道类攻击的飞行终点；\n整个游戏唯一针对弹道类攻击的技能是铁鸦的定点防御靶机，但出于平衡性修正，个别视觉上属于弹道类的攻击也被排除在外了；\n所以上下医疗艇可以防御的弹道类攻击种类最多；\n弹道类攻击会出现很多子弹同时射向某个残血目标导致大量输出浪费的现象，原因也是弹道攻击的延时。尽管输出有先后，但在第一发子弹飞到目标前，大家都会认为目标还活着纷纷扔出自己的菜刀；\n在非常非常极端的情况下，瞬发技能也可能造成类似的输出浪费。这是因为星际在游戏机制上的最短时间间隔为 0.001 秒，即 1 毫秒，可以通过分析游戏录像包数据得到。这使得在同一个时间间隔内的动作变成 真•同时；\n\n星灵护盾（一）星灵护盾是星灵特有的属性，覆盖所有的建筑和兵种，甚至包括生产过程中的单位。在任何情况下，星灵单位受到伤害时，都优先扣除护盾值，到护盾为 0 时，再扣除 HP。星际 1 中存在蝎子毒血无视护盾直接伤害 HP，星际 2 不存在。\n护盾和护甲的防御是分别计算、单独升级的，所有单位的护盾防御初始值是 0，每级 +1。计算公式和护甲完全相同，即：\n\n伤害 &#x3D; max { 攻击力-护盾值, 0.5 } x 多重攻击数\n\n在最极端的情况下：\n\n\n零攻收割者，攻击力 4×2；\n机械哨兵，守护者之盾，使光环内友方单位受到的远程伤害减少 2 点；\n二盾狂热者，护盾防御 2 点。\n\n\n收割者每轮攻击为 (4-2)x2，而护盾防御也为 2，实际伤害为 0.5×2，即 1 点。当未开启守护者之盾时，则每轮实际伤害为 4 点。守护者之盾开启与否效果很明显。\n当护盾的总量不足以抵挡单次伤害时，则护盾防御与护甲防御同时起作用。比如：\n\n\n零攻掠夺者，对重甲伤害 20；\n一防一盾追猎者，护盾剩余 10 点，护盾防御 1 点，护甲防御 2 点，重甲；\n\n\n则掠夺的下一发伤害计算为：\n\n\n护盾防御减伤： 20-1&#x3D;19 点伤害；\n全部剩余护盾抵挡掉 10 点伤害，19-10&#x3D;9，剩余 9 点伤害传递给 HP 承受；\n9 点伤害被护甲抵消 2 点，剩余 7 点伤害实际作用于追猎的血量上。\n\n\n但当该临界点下的伤害被护甲完全防御时，并不造成额外 0.5 的伤害。比如：\n\n\n零攻狂热者，伤害 8×2；\n一防一盾机械哨兵，40 护盾 40 血，护盾防御 1 点，护甲防御 2 点；\n零防一盾机械哨兵，40 护盾 40 血，护盾防御 1 点，护甲防御 1 点；\n\n\n由于狂热者双重攻击有先后，则攻击过程为：\n\n\n前两轮打在护盾上，造成两次 (8-1)x2 &#x3D;14 伤害，哨兵剩余 12 盾 40 血；\n第三轮前一刀 8-1 点伤害盾完全吸收，后一刀 8-1 点伤害盾吸收 5 点，剩余 2 点打到护甲上；\n零防哨兵 1 护甲会损失 1 点血量，39 HP，一防哨兵 2 护甲则未损失血量，40HP；\n等待哨兵回复满盾后，再重复以上过程，零防哨兵再减 1 点血量，38HP，一防哨兵依然未损失 HP，40HP；\n两次过程积累后可看出，每次破盾后打在护甲上的伤害为 2 点，被护甲 2 点抵消后，不再产生额外 0.5 点伤害。\n\n\n零防哨兵的掉血曲线间接证明了狂热者双刀有先后，而一防哨兵未掉血，表明在临界点上，一次伤害如果已经对盾造成实际损伤，则即使剩余伤害被护甲完全抵消，也不会额外计算 0.5 伤害。理由大概是已经存在伤害，不需要再考虑伤害下限了。\n护盾会在最后一次伤害结算后 10 秒开始回复，回复速度为每秒 2 点。有些说明写的是脱战后 10 秒恢复，从语言表述上来说是不正确的。星际跟 WOW 不一样，并没有明确的“战斗状态”，也就没有进战脱战这种说法。只要 10 秒不受到伤害，在战头中也是可以回复的，下次用闪烁追猎记得多操作。\n建造中的建筑或折跃中的单位的护盾行为例外。建筑在放下的一瞬间就有 10% 的血量与护盾，而后按建造总时间与总护盾值匀速增长，没有 10 秒的结算时间，没有护盾防御加成，也没有额外的回复。例如：\n\n\n星灵枢纽：1000 血 1000 盾，建造时间 100 秒，放下的一瞬间有 100 血 100 盾，之后每秒增加 9 血 9 盾；\n零攻追猎者对重甲每次攻击 14 点伤害，1.44 秒攻击一次，100 秒攻击 69 次，造成 966 伤害；\n\n\n也就是说，只靠一个追猎者，在主基地建造过程中完全无法造成实质伤害……\n折跃兵种的过程也是一样，初始状态 10% 血量 10% 盾，因为折跃刷新的时间很短，兵种很快就会结束折跃满血满盾进入战斗。实战中不如集中火力打击水晶或运输船更合算。\n所有建筑的护盾和血量都相同，绝大部分的兵种血量都大于等于护盾，但黑暗圣堂和执政官除外。考虑到升级时间与升级费用，在对抗虫族时升级三防有时不如升级一盾更合算，尤其是队伍内有大量执政官时。对抗人类……因为有 EMP……还是算了吧。\n星灵护盾（二）：刚毅护盾刚毅护盾是星灵不朽者特有的被动技能，当护盾存在时，所有攻防结算伤害高于 10 点的攻击效果都降低为 10 点。这一上限是先由攻防结算后再作限定的，也就是说是 min{攻击力-护盾防御值, 10}。比如：\n\n零攻追猎者，普通伤害 10 点，对重甲伤害 14 点；三盾不朽者，重甲，护盾防御 3 点，护盾满，刚毅护盾有效。\n\n则追猎打不朽，以重甲结算，攻击力为 14 点，不朽护盾防御力为 3 点，则攻防结算伤害为 11 点，触发了刚毅护盾，减少为 10 点，所以最终结果是不朽减 10 点盾，并发出刚毅护盾视觉效果。当不朽的护盾不足 10 点时，刚毅护盾效果依然存在，将高于 10 点的攻击伤害降为 10 点，剩下计算和普通的分界线计算一致，再次受到护甲减免。因此即使只有 1 点护盾，也可以抵抗一次高攻伤害。\n但刚毅护盾对固定伤害的技能性攻击是无效的。尽管星际2是个科幻背景游戏，不过把以下这些技能理解作是“魔法攻击”，会更方便一些。\n“魔法攻击”（技能伤害）星际2是个科幻背景游戏，但把这些技能理解作是“魔法攻击”，理解上会更方便一些。\n\n聚变打击（幽灵） – 较大范围内 300 点伤害。\n大和炮（战列巡航舰）- 单体 300 点伤害。\nEMP（幽灵） – 范围移除 100 点星灵护盾与 100 点能量（如果有能量）。\n哨兵导弹（寡妇雷） – 对攻击主体造成 125 点伤害（有护盾单位额外 +35 点），并造成 40 点溅射伤害（有护盾单位额外 40 点）。\n猎杀飞弹（铁鸦） – 攻击主体及范围内造成最多 100 点伤害。\n狙杀（幽灵） – 对生物单位造成 25 点伤害，对灵能单位额外造成 25 点伤害。\n能量反蚀（光明圣堂武士） – 消耗目标所有能量，每点能量造成 1 点伤害。\n灵能风暴（光明圣堂武士） – 范围内 8 次伤害每次 10 点，共计 4 秒。\n霉菌滋生（感染者） – 范围内 4 秒造成 30 点（重甲 40 点）伤害，且无法移动。\n\n以上为伤害性技能，其特点是：\n\n伤害值不受攻防升级影响\n伤害值无视护甲、护盾防御值\n伤害值无视守护者之盾，但是会受到腐化影响\n伤害值无视刚毅护盾\n除聚变打击外，所有的技能施放都需要能量值\n\n基于这些特性，认为是“魔法攻击”也并无不妥。是的，毒暴的伤害并不属于此类，毒暴的伤害是受攻防加成的。\n能量能量值是大部分兵种和单位施放特殊技能的消耗性资源，在游戏中以紫色条显示。大部分有能量单位的能量上限为 200 点，并且永久地以每秒 0.5625 点回复能量，刚生产出来的单位初始拥有 50 能量，一些单位可以研发升级让初始技能变为 75 点。但有三个单位例外：\n\n\n星灵枢纽初始能量 0 点，上限 100 点；\n皇后初始能量 25 点；\n定点防御靶机初始能量 200 点，每秒回复 1 点能量。\n\n\n和血量相反，能量是向下取整的。\n没有任何方式改变能量的增长速度与技能消耗，但依然有两个技能可以影响敌方能量：\n\nEMP（人类，幽灵) ，范围内有能量的敌对单位减少 100 点能量；\n能量反蚀（星灵，高阶圣堂武士），清除敌对目标所有能量，并对其造成等量伤害。\n\n临时性攻防提升特定的技能也会影响伤害数据：\n守护者之盾：\n星灵机械哨兵的主动技能，展开一个范围为 4 的力场，范围内所有友军单位受到的远程伤害降低两点。守护者之盾属于临时的、有限制的防御提升。要注意的几点是：\n\n跟攻击单位的位置无关，只跟受伤害的单位是否在范围内有关；\n同样，无法防御“魔法攻击”，比如寡妇雷的哨兵导弹；\n自己也同样受益；\n对友方误伤也同样起效果；\n近战攻击不受减免，溅射伤害不受减免（未证实）\n蟑螂、刺蛇、宿主的蝗虫等，在与敌方贴脸攻击时，攻击动作会发生变化，属于近战，也不受减免\n\n腐化：\n腐化者主动技能，使目标在 30 秒内受到的伤害提升 20%。注意的点是：\n\n尽管腐化者是对空单位，但腐化技能也可以对地面单位释放；\n腐化后的伤害值是可能有小数点的，综合开篇讲的血量向上取整的特性，显示结果就是多次相同情况下的伤害值可能偏差 1 点；\n尽管它也属于技能，但并不直接产生伤害，而是依附于普通攻防，因此也受攻防升级影响；\n对技能伤害同样有加成，比如寡妇雷炸被腐化不朽伤害为 192 点。（未证实）\n\n定点防御靶机：\n铁鸦主动技能，在目标区域投放一个定点防御靶机，击落范围内所有向友方发射的弹道类攻击，每次防御消耗 10 点能量。防御机的工作原理是利用激光破坏飞向友方单位的弹道类攻击，包括人类导弹类攻击、星灵慢速弹道激光等等。注意点包括：\n\n与守护者之盾不同，无关攻击者的位置，甚至也无关友方位置，只要飞弹经过防御范围，定点防御靶机就有作用；\n与守护者之盾不同，靶机是直接免除某些类型的攻击，对不免的攻击则无影响，故不存在攻防值计算问题；\n与守护者之盾不同，靶机对友方误伤不防御；\n基于其工作原理，只对“有弹道、飞弹类”的远程攻击起作用，比如掠夺者、女妖、追猎者、凤凰，飞龙、腐化者，对瞬时远程攻击不起作用，比如机枪兵、不朽等。\n对航母的拦截机也有作用；\n同样基于其工作原理，雷神和落地维京的对地攻击也无法击落，只能击落雷神和维京的对空飞弹。\n所以靶机自身也是可以在不触发防御机制的情况下被击落的；\n对于多重攻击，每一重攻击都要消耗一份靶机能量；\n靶机能量回复速率比一般单位快，为每秒 1 点，故每存在 10 秒便可额外多击落一次弹道攻击；\n靶机属于建筑类型，工程站建筑护甲升级可以为靶机提供额外两点护甲，但它是轻甲，全星际唯一的轻甲建筑；\n因为是建筑，所以狙击、腐化、灵能风暴都无效；\n但你妈能量反蚀是有效的，一放一个准。50 血 200 能量初始还满能量的家伙……\n靶机在原理上属于攻击类，只不过攻击目标是弹道类子弹，所以工程站的研发项目“瞬时自动追踪”，也能让靶机的防御范围 +1，从 8 到 9。\n靶机的初始存在时间为 180 秒，最多可以防御 38 次攻击，可升级。升级后存在时间延长到 240 秒，至多防御 44 次攻击；\n可以被 SCV 修理，详见另一篇：《星际争霸2建造与修理详解》；\n幻像的攻击也会防御，一样消耗能量；\n攻防升级与靶机的防御能力无关，三攻子弹和零攻子弹一样防，所以越后期靶机减免的伤害越多，而守护者之盾则固定减伤 2 点，后期效果更弱；\n刺蛇、皇后等兵种在与敌方贴脸攻击时，属于近战，此时靶机不起作用\n多个靶机不会拦截同一发导弹，他们的防御能力总是累加的；\n特别注意：某个版本后，对巢虫领主也不起作用了；\n\n结算顺序参考以下事实：\n\n\n掠夺者，对重甲 20 点伤害；\n不朽者，重甲，拥有刚毅护盾，任何超过 10 点的伤害降低为 10 点，且站在守护者之盾范围内；\n掠夺者射出一枪，进入守护者之盾，对不朽造成 8 点伤害。\n\n\n关于腐化，也有类似的事实：\n\n\n掠夺者，对重甲 20 点伤害；\n不朽者，重甲，拥有刚毅护盾，任何超过 10 点的伤害降低为 10 点，但处于被腐化状态，受伤害增加 20%；\n掠夺者射出一枪，对不朽造成 12 点伤害。\n\n\n更复杂的：\n\n\n掠夺者，对重甲 20 点伤害，开兴奋剂增加 50% 攻速；\n不朽者，重甲，拥有刚毅护盾，任何超过 10 点的伤害降低为 10 点，但处于被腐化状态，受伤害增加 20%；\n附近的机械哨兵展开了守护者力场保护不朽者，所有的远程伤害减少 2 点；\n掠夺者射出一枪，对不朽造成 10 点伤害。\n\n\n根据这一事实，我们得出一个伤害结算顺序的概念：\n\n伤害值都是通过顺序，在一个最基础的值上根据条件进行数值修正或数值替换；\n首先计算永久性攻防值（兵种属性决定基础数值），在此基础上进行技能性攻防修正（兵种技能影响最终数值）；\n如果有多个永久性攻防值（兵种属性），先结算无附加条件的，再结算有附加条件的（护甲类型、兵种类型）；\n如果有多个临时性攻防修正（兵种技能），先结算无附加条件的，再结算有附加条件的（远程、弹道）；\n在以上四条确定的同一计算顺序内，先结算输出的伤害值（伤害别人的企图），再结算受到的伤害值（受伤害的企图）；\n\n比如上述例三：\n\n首先计算永久性攻防值（兵种属性）：掠夺者 10 点伤害，不朽者 0 盾防，伤害意图为 10 点；\n因为不朽者护盾防御值为 0，因此受伤害意图变为 10-0 &#x3D; 10 点；\n因为掠夺者有两个永久性攻击值，其中 “对重甲 +10” 属于有条件数值，攻击数值修正为 20，防御为 0，伤害企图为 20 点；\n因为不朽者没有针对远程攻击的有条件防御加成，因此受伤害图依然为 20-0 &#x3D; 20 点；\n判断掠夺者永久性攻击技能，有振荡弹，但对伤害数值无影响，因此伤害企图为 20+0 &#x3D; 20 点；\n判断不朽者永久性防御技能，有刚毅护盾，会产生效果，受伤害企图无视源伤害大小，强行修正为 10 点；\n判断掠夺者临时性技能，有兴奋剂，但对伤害数值无影响，伤害企图依然为 10 点；\n判断不朽者临时性技能，有两个，腐化和哨兵盾： \n首先结算无附加条件的腐化，受伤害企图修正为 10 x ( 1+20% ) &#x3D; 12 点；\n再结算有附加条件的，哨兵盾只对 “远程攻击” 有效果，使得受到的远程伤害减少 2 点，受伤害企图修正为 10 点；\n\n\n无其它条件，最后不朽受到 10 点伤害，进行盾数值、血量和护甲的计算。\n\n如果结算时是先哨兵后腐化，那么不朽的每次伤害只有 (10-2) x 1.2 &#x3D; 9.6 点，考虑到血&#x2F;盾的数值向上取整，我们就会见到单次伤害为 9 点，而非 10 点了。\n尽管未作测试，但可以大胆断言，在盾血边界的那次伤害上，星灵可以享受盾防御和护甲防御的双重减免，同时腐化也不会影响到转移到血量上的剩余伤害部分。因为在“伤害企图值→受伤害企图值”那次计算中，腐化的技能已经结算完毕。盾血边界的计算，其实是 “受伤害企图值” 与盾、血数值上的计算，而“受伤害企图值”本身已经包含了腐化的结算。否则就变成了一技能两次结算，属于 bug 了。也就是说三防 200 血 1 盾 4 护甲腐化不朽者，被三攻坦克轰了一炮以后，只也掉 7 滴血，而不会出现 (12-1) x 1.2 – 4 &#x3D; 9.2 血这种复杂的情况。\n","categories":["游戏中心"],"tags":["攻防","数值研究","星际2"]},{"title":"铯","url":"//cesium-name-reason/","content":"来源于一个钓鱼笑话：\n\n有一次，爱迪生把一个铯块交给来自中国的助手，请他算一算铯块的体积，助手拿直尺量了 又量，列出了一排排的算式，还是没有最终计算出铯块的体积。爱迪生等得不耐烦了，拿过 铯块，浸在水中，将溢出的水倒在了量杯里量出体积，就知道了铯块的体积。僵化的体制， 落后的思维，永远也培养不出伟大的科学家！\n\n笑话钓鱼钓得厉害。\n铯是钾系元素，最外层单电子，化学性质极为活泼。遇水则剧烈反应，生成氢气和氢氧化铯……这话很熟悉吧，高中做钠与水的实验就做过。\n铯的反应强度更大，实际上就是爆炸了。优酷搜了一下还真有视频：\n不过百科时有一条好奇的是，铯是金黄色金属，为什么其英文名 Caesium 或者 Cesium 却是来自于拉丁文 coesius，意为『天蓝色』呢？\n好奇查了一下，原来是因为铯极度活泼，人们是从光谱表上第一次发现铯这种元素的。而光谱是这样的：\n吸收光谱和发射光谱\n所以『天蓝色』的来源实际上是科学家的一个小浪漫，铯的光谱蓝色确实非常漂亮。\n","categories":["文艺青年"],"tags":["Cesium","Sky blue","来源","蓝色","铯"]},{"title":"关于好奇、兴趣与爱好","url":"//about-curious-to-love/","content":"我总是觉得，『好奇』是搜索来的蛋糕教程，你愿意去花时间寻找免费信息，仔细阅读，去了解它的真实内容；『兴趣』是西式糕点培训班。你愿意支付可以承担的费用，获得免费信息无法给予的进一步提升；『爱好』是一夜无眠后泛着倦意淡淡的笑容。你愿意牺牲生活中的其它东西，但仍乐在其中。\n你想知道美味的饭菜是怎么做的，你会挑选自己喜欢的若干个菜，去网上搜索免费食谱。你会拿纸笔把菜谱整理成购物清单，并找邻居老太太打听农贸市场的位置，去市场精挑细选，但忘了讨价还价被坑了一大波。然后你回来又去超市买了锅碗瓢盆油盐酱醋，回家看着一堆材料兴致勃勃照着菜谱做到了最后。\n可能焦了，可能没熟，可能你最后还是点了外卖，或者是忍着说服自己『这也挺好吃的』强咽下去。你可能更有兴致迫不及想明天再做一遍，或者意味索然从此打算仰仗外卖终身。\n但你最初的从未尝试，到最后完成了整个过程。你至少了解了真相，自己体会了过程和结果。\n这是好奇。\n你听过几次免费的钢琴课，看过免费的视频教程，你知道四分音节，你刚学了五线谱。尽管不熟练，但至少能在 88 键上找到那个音符的位置。你找了很多材料读，也有不少迷惑得不到解答，于是你愿意去参加一个培训班，你需要找老师解答一些疑惑，你需要专业的人帮你听听，确认你的水平，告诉你下一步的学习方向。\n你可能能进一步提升，也有可能仍然迷茫。但是至少你知道真相，知道横亘在面前的困难，但仍然，或者抱着随缘的心态去学习提升，或者跃跃欲试想更升一步。\n你愿意接受重复练习享受水平的提升，你愿意为此花费时间与金钱。\n这是兴趣。\n你喜欢轮滑，无论是短途、长程、花式、极限，你都愿意试一试。你越过了最初的好奇与兴趣的阶段，你已投入了很多，把水平提升到了一个身边人群中很高的层次。你必须参加专门的爱好者组织，才能找到与你水平相当的人。你越过了迷茫期，找到了学习与提升的路径。这路无限地长，但你知道是正确的路，只取决于你能走多久。\n或者幸运地在学业中找到方向，或者是从好奇中发掘出宝藏，总之你找到了一样你觉得值得投入，甚至可以不计回报地投入的事物。你愿意牺牲生活中的其它东西，不止是金钱与时间，仅仅是为了保证你在这样事物上能有令自己满意的投入。能让你享受的是练习与提高的过程，而能让你兴奋不已的是你有创造的能力。\n唯一能限制你继续提升的，也许真的只有天赋的上限。即使如此，你也并不视之为不幸，而是当作努力的目标。\n这是爱好。\n所以在我看来，很多人的生活中，其实连好奇都没有，更别提兴趣与爱好。\n","categories":["唠唠叨叨"],"tags":["好奇","兴趣","爱好"]},{"title":"深一步理解客户需求","url":"//one-more-step-to-demand/","content":"年前发过一个微信状态：\n\n事实上，用户要求，有时并不是用户需求。随口一提不费钱，或者别有意图不能直说。说没某功能就不买的，有了也不会买。说买去是干嘛的，改进了有时也起反作用。这很容易理解，如果你是学校对面小旅馆老板，因为每天少男少女们来开房『找个安静地方学习』夜夜爆满，会把旅馆改造成自习室？\n\n这是例行搞笑的。但用户需求却确实是件需要仔细琢磨的一件事情。他们说出口的，常是谎言。\n一，不好意思说真实原因的。这个是最常见的。上面的笑话是一例，生活中还有更多例子，大家可以自行琢磨一下。我这里先举个不那么常规的。\n日本动漫里的热门人物角色往往也会被制造成各种小人玩偶，做工相当精细，称之为『手办』。有些更会备有大量同比例可更换的衣服。手办通常都是价格不菲的，一个 30cm 高的手办有时就价值 RMB 数千甚至数万元，所以这一开始就是很小众的东西，也只在少数日本动漫专营店放着，作为店长的个人收藏品，兼『镇店之宝』。\n这些玩具店是要做生意的，而大部分生意都是几十块钱一件的大路货，卖得最好的通常也是卡片纸、印刷品之类。\n于是总有妈妈带着小孩来店里逛的，于是总有小孩眼尖发现了这个镇店之宝的，于是总有缠着妈妈要的，然后就有如下的对话了。\n\n『这个多少钱啊？』\n『抱歉，这个不卖的。』\n『不卖？』\n『嗯，不卖的，放着看的。』\n『你家的东西放店里还有不卖的啊，孩子要你就卖他呗。』\n『这位妈妈这个真的不卖的。』\n『奇了怪了，咋了怕我买不起啊。』\n『真不是这意思，这位妈妈，这是花了大价钱专门弄回来的限量版，就是吸引人气用的，真不卖。（真就是这个意思，太贵了你买不起）』\n『你不就说贵么，多少钱。你再进一个不就行了，三百顶多了吧。四百？五百？你说你这人摇什么头啊你倒是说清楚啊当我傻逼是不是？』\n『阿姨，这东西光每星期保养费就不止四百。我弄来就花了一万多。』\n『……』\n『…………』\n『………………』\n『你坑傻子啊，就这东西一万多？就这做工……（发现做工确实挺好）……手脚根本就不能动！哟！这姿势那么撩骚，这是要当鸡的样子啊。你开个玩具店放这么淫秽的东西还放小孩子进来？我要去举报你，趁早倒闭吧你个黑店！』\n\nor\n\n『你这东西还要每星期保养啊？哦哦，钱不是问题，但我家孩子玩劲大爱拆东西，玩两天就要买新的了，算了吧。看你也不是正经做生意的，以后不来了这种黑店。』\n\n你看，很常见吧，买不起时，就找一大堆理由，证明某样东西不值这个价，并试图向围观群众说明，她不是买不起，只是这个东西不符合她的需求，尽管可能旁边连个人都没有。她只是要找个理由说服自己，甚至要依靠打倒对方的人格、名誉，来证明自己『不选择』的正确性。\n在这过程中提出来的所有需求，都不是真正的需求。\n二，为了获得愉悦感。常见的无非是讨价还价的各种奇葩理由。\n我小时候，经常看大人们默契地合演一出戏。这边问多少钱，那边说多少钱，这边说好贵这么小，那边说这可新鲜了，这边说旁边那家店一样的才卖多少，那边说我这足斤足两，这边说多少钱，那边说真卖不了，这边转头走，那边喊回来回来，这边喜滋滋掏钱算着省了多少钱，那边装苦脸心里暗爽多赚了多少钱。\n完美配合演绎鸡同鸭讲+欲擒故纵+双簧。演出费两人各……两毛。\n虽然钱不多，但是开心呀。\n所以那一串理由都不是理由。买东西当然是需求，但讨价还价背后却不止于东西本身了。客户需要的还包括近身白刃搏杀后胜利的愉悦感。\n码农们有时就理解不了商务那边的兜兜转转。他们总觉得报个一口价就完了，为什么要扯那么半天皮呢。但在砍价这事上，固然有节约成本的因素，但也有砍杀以后的愉悦。如果你直接一步让到位，不但自己吃亏了，客户那边也没有享受到愉悦。他势必会继续往下砍，直到获得足够的愉悦感为止。\n扯会皮，满足了客户，自己也能多赚点，为什么不呢？\n三、他需要感觉到你的努力。这是比较隐形的需求了。\n首先，客户需要某种特性，是真需。比如需要产品能防水，那是真要。他需要在狂风骤雨的户外使用。因此防水是必须的。\n但仅仅有防水，很多时候还是不够。原因在于人的感知与认同。事实上，利用现在的纳米拒水材料，完全可以做出带很多细微网眼的防水材料，足以让产品放入水下依然能见到盒子内部漂亮而脆弱的电路，却如出水芙蓉，滴水不沾。\n透光不透水，见干不见湿，要逼格有逼格，要高端有高端。\n但是在防水设计上，未来很长一段时间都不可能用这种方案。原因就在于，你的客户并不这么想，而你却没有机会向他演示以改变他的观念。即使演示了，也会被认为是障眼法。或者用一个完全无法反驳的理由回绝：『现在不出问题，怎么保证以后不出问题。』\n正常来说，用一个带严实的橡胶密封圈的盒子，用卡扣紧紧卡上，发出的『啪』的一声，才能为客户带来足够的安全感。这比任何高科技都有效。如果说防水的成本有 5 块钱，大约有 3-4 块钱都是花费在让用户感觉上的。\n四、他需要感觉到自己的妥协，但希望选妥协尽可能小的。没有成本的东西不足以让人认真对待。别提互联网免费策略，这里的成本可不一定指钱。\n我们有两款产品，A 款非常美观，但缺乏某个特性。B 款拥有这个特性，价格还便宜将近一半，但美观性稍差一点。事实上 B 款的出现，也是因为所有的客户几乎都在抱怨 A 款缺乏的那个特性。但结果是，自从有了 B 款以后，A 款的销量反而更好了。\n如果你不理解，我再举一个《经济学人》杂志的例子。\n\n《经济学人》有三种定价，电子版 59 美元，印刷版 125 美元，电子版 + 印刷版 125 美元。印刷版的定价让人感到莫名其妙。便宜一点有 59 美元的电子版，付出同样代价又可以同时拥有电子版 + 印刷版，125 美元光购买印刷版，又是何必呢？\n看上去《经济学人》提供了一个无意义的产品和定价。但印刷版的定价起到了诱导消费者心理和行为的作用。丹·艾瑞里当时为了验证《经济学人》定价的作用，把学生分为两组人，进行对比测试。结果发现，如果没有 125 美元只购买印刷版的选项，84% 的人会选择购买 59 美元的电子版，只有 16% 的人购买 125 美元的电子版 + 印刷版。而如果价格表里，出现了 125 美元印刷版的选项，消费者的购买行为就发生了有趣的变化，只有 32% 的人选择购买电子版，而足足有 68% 的人购买了电子版 + 印刷版。\n\n当进行消费的时候，除非是这个领域的专业人士，否则一个东西应该值多少钱，其实我们不是很清楚的。这时候我们判断的依据就是做一个笼统的测试，粗陋的横向比较，根据结果来决定自己应该买哪个。第二个方案放在这里，它的用途是让第三个方案感觉超值。\n虽然产品设计可能和最后定价略有区别，但本质上，定价也是产品的一部分。\n五、他需要克服自己对你的不信任感，需要安全感。其实在商务中有很有意思的一点：一个客户对你的质问越多，往往就越愿意选择你的产品。\n原因其实也很简单，他作为一个非专业人者，如何去判断产品本身的价值？如何去判断产品是否有看不出来的偷工减料？他是没办法判断的。那么他就会转而通过其它外部信息作出判断，例如品牌、广告、其它人的使用评价等。\n很多东西都会指向企业的实力，而实力一定程度上代表着品质。在央视砸了几亿做广告，结果做出来的产品很烂，没人买，这损失可就大了。而街边小摊，顶多城管查抄了，也损失不到哪里去。这就是选择建立信任感的某种方式。\n而用户很多让码农觉得麻烦的行为，也正是因为建立双方信任感的需求。其中之一，就是将销售问到无言以对，或者问到自己问不出来。这时，他并不是追求愉悦感，而是追求安全感。他面对的销售有多深的知识积累，就意味着这个产品有多专业，从而产生多大的信任感。买过汽车的同学们可能感受会深一点，卖过汽车的大概已经在微笑了。\n而更日常化的最终用户的产品，信任感由更多地来自于品牌宣传、口碑、负面新闻等。因此除了对品控的高要求以外，大型品牌也都愿意每年花费巨资去经营、监测、预警网络上关于品牌的各种消息。舆情监测行业也早已是个水深如谷的行业了。\n六、人们需要的不是趁手工具，而是被赞美。少数 Geek 向的玩具，粗糙的质感与不完善的结构，反而可能引发那一小部分人的好奇心。但大多数产品，对大多数人而言，都不过是获得赞美的工具。所以人们才会用各种顶级品牌去标榜自己的品味，用各种先进工具去装饰自己的能力，用各种奇趣玩艺证明自己的知趣广博，用 PHP 去写世界上最好的程序。所以产品设计，要不能为人博得赞美，要不能为人带来赞美。前者靠的是优秀的做工、设计，后者靠的是巨大的人气与流量，比如社交软件。\n企业客户在这点上其实也没什么区别。企业客户，往细了分无非也就是建议者、决策者、执行者一系列角色。无论是哪一类，都希望自己做的事情是正确的，能获得上级的肯定，平辈的艳羡，下级的赞美的。这些，则是由内在的可靠性、优雅的外观、良好的服务、精心设计的流程和用户的充分参与，来一步一步完成的。\n七、用户不懒，只是缺乏动机。有些产品经理说的用户很懒，其实是不对的。你根本想不到很多人会为了装一个逼能做出多么匪夷所思的行为，根本不理解很多人会为了朋友圈向领导暗示勤奋有多么的勾心斗角，根本不懂得人们心底的欲望可以驱动他们去做多么奇葩的事情。\n啊，或许你能理解。\n\n以前我觉得学上网实在是太难了，但后来我发现网上可以下载免费 A 片，瞬间我就学会了。\n\n为了获得赞美，人们无所不用其极。苹果的 Keynote 用的是 『影院效果，彻底迷倒观众』。相比之下，微软用的『做出非凡演示，节约时间，随处访问』就差上一截了。\n\n我真的不在乎节约时间，更讨厌随处都得做 PPT，你再好用有毛用，我在家就想休息不想再碰什么 PPT 了。但如果观众们能惊叹，我能装个逼，那再难用的软件我倒也认了。\n————开开心声。\n\n我不认为微软的文案是傻逼，大企业内部的人际历练，对人心的洞察一点不少。但也是同样的原因，让他们在做文案的时候，选择的是讨好公司自己的文化，而不是讨好用户。\n用户不懒，只是缺乏动机。\n结束用户需求不是『我认为』如何的。每个人处于不同的环境，基于不同的利益，都有不同的诉求。生活中的，工作中的，个人的，家庭的，集体的。同一个人都会有诸多变化。\n甚至也不是数据分析能得出来结果的，诚然，数据分析有助于你发现问题，但揣摩背后的意思，还是需要有一颗又能正经又能变态的心。\n我品过甜美，也咽过苦涩，但依然觉得那些随口说出的谎言，包括自己的谎言，是世界上最美丽的声音之一。\n","categories":["产品经理"],"tags":["产品","深入理解","用户需求"]},{"title":"小怪兽么么表情包更新","url":"//monmon-the-godzilla-2/","content":"\n前文: &lt;很是喜欢这个微信表情包：小哥斯拉么&gt;\n\n么么出了第二个表情包，另外在 2015 贺年表情中也露了一次脸。现在她有了陪伴，体形也越发可爱，大概这是一个美好的结局吧。依然，我还是找不到作者，不知道哪里有卖衍生品。\n么么 2：\n\n\n\n肉肉哒\n陪着你\n抱抱\n不理你\n\n\n\n\n\n\n\n\n\n不要啦\n新年快乐\n我要减肥\n都怪你\n\n\n\n\n\n\n\n\n好无聊\n摸摸头\n嗨\n我错了\n\n\n\n\n\n\n\n\n亲亲\n点赞\n圣诞快乐\n没问题\n\n\n\n\n\n\n\n\n然后是新年萌物表情包，只有一部分是么么：\n\n\n\n恭喜发财\n身体健康\n福到\n发发发\n万事兴\n\n\n\n\n\n\n\n\n\n\n羊年大吉\n暖洋洋\n新春快乐\n元宵快乐\n\n\n\n\n\n\n\n\n\n\n剩下是同一表情包里无么么的表情：\n\n\n\n吃吃吃\n心想事成\n年年有余\n红红火火\n过年啦\n\n\n\n\n\n\n\n\n\n\n喜气洋洋\n十全十美\n发红包\n吉星高照\n恭贺新禧\n\n\n\n\n\n\n\n\n\n同乐\n万事如意\n抢红包\n财源滚滚\n一帆风顺\n\n\n\n\n\n\n\n\n\n","categories":["文艺青年"],"tags":["么么","表情包"]},{"title":"死对你也许是一种震慑，但未必对所有人都是","url":"//strange-logic-abduct-death/","content":"开宗明义：\n一、死亡对你也许是一种震慑，但对别人不一定是。\n二、贩卖人口在目前的量刑下已是重罪。\n三、法律适罪量刑，并不是保护罪犯，而是在保护受害者不遭受更严重的伤害。\n四，贩卖儿童的特殊之处，在于『孩子还活着』这点上，人贩和儿童父母的利益一致。这很别扭，但正是最能承载『找回孩子』这一希望的。如果一律死刑，那么孩子几乎是不可能找回了。\n\n突然之间被鼓吹『拐卖儿童一律死刑』的给刷屏了。\n在我的朋友圈里，要求拐卖儿童一律死刑的，一半是有孩子的，另一半是没孩子的。怎么说呢，有孩子的，多少可以理解爱子之情。没孩子还这样的，呵呵。善良得久了，脑子里只剩水和面了。\n『今亡亦死，举大义亦死，等死，死国可乎？』\n『民不畏死，奈何以死惧之？』\n归根结底，在于你们安生日子过久了，就以为死刑是种多么大的震慑，但事实上未必。死对你也许是一种震慑，但未必对所有人都是。为什么叫『亡命之徒』，正是因为那些人并不把死亡当成是件无限巨大的震慑，而只不过是利益天平上可以衡量的一种损失而已。而法律，也并不像你想像的那样，是人人遵守违者天罚的无上神圣规则。其实在我看来，法律恰恰是与这些突破底限的罪犯之间的讨价还价而已。\n『如果你做出怎样的行为，就可能会面对怎样的惩罚，』，这是法律的前半句，而更关键的是后关句，『如果你不做出怎样的行为，就不会有怎样的惩罚。』\n这才是法律的制定和执行中，更为根本和重要的一环，如果说前半句是在震慑犯罪者，那么后半句则是在拯救受害者。\n如果抢劫就是死刑，那么确实不会再有单纯的抢劫了，只是必然会有大量的受害人死亡。因为受害人活着，只会对抢劫犯不利。如果强奸一律判处死刑了，那么所有的强奸都会变成奸杀。如果贪污受贿一律死刑，那么所有的官吏一但开口，就会迅速巨贪并转移财产。如果驾车撞人一律死刑，那么一定会造成大量的撞人拖曳血肉模糊。如果盗版一律死刑，……哦，这时大概又会是同一帮人跳出来说，凭啥死刑。\n适罪量刑，是为了让罪犯每施加更多的伤害，就需要承担更重的刑罚，这样，当罪犯无论达到或者不达到目的时，都会出于利益考虑，不向受害者施加更重的伤害。\n且问，如果你的孩子正在人贩手上，警察正在追捕，并且很有希望抓住了。你是希望犯人逃跑无望束手就擒呢，还是挺而走险杀了孩子自己再轻身跑路呢？正常来说，你都希望无论犯人怎样都行，自己的孩子能平安归来吧。然而你支持的却是『一律死刑』，你觉得犯人会乖乖交人？还是会友善地扔下孩子自己跑路？\n你未免太过自以为是了吧。\n再说一遍，适度量刑，是在保护受害者不遭受更严重的伤害。\n再说两遍，适度量刑，是在保护受害者不遭受更严重的伤害。\n再说三遍，适度量刑，是在保护受害者不遭受更严重的伤害。\n那么，你为什么在拐卖，甚至是购买儿童上，就支持『一律死刑』了呢？除了伪善和杀人欲，我没看见别的。\n我真心觉得，之前无论转发多么脑残的东西，雾霾也好，炸鸡也罢，顶多是为那些认真工作的人平添一些麻烦，或者伤害一下他们的感情，虽然难受，但不至于伤筋动骨。\n但这次，你们这帮脑残，真的是想杀人啊。\n一，在转发这个观点时，你是否查阅过现行法律体系下的量刑尺度？是否已经存在死刑的可能性。事实上据我所知，拐卖妇女儿童情节严重的是确实可以处以死刑的。注意，是情节严重。\n二，你鼓吹过一律死刑，是否考虑过可能会造成的其它后果，比如犯人为了逃避罪责，直接把小孩弄死再逃跑的情况？\n三，你如何确定以死刑震慑，就会让拐卖的犯罪率下降。如何确保不因为刑罚上升，导致贩卖小孩的价格升高，有更多的人挺而走险？同时因为一律死刑的存在，而造成受害人更严重的伤害。\n这些事情，无法预测，也没法实验。\n从更广阔的情况来看，『一律死刑』是有类似的现实映证的。在我国，运输、贩卖海洛因等强成瘾性毒品，超过 50 克，一律死刑。然后，你再自己去查查辑毒人员为此付出的巨大代价，他们的家人为此付出的代价。但区别在于，毒品的受害人是间接受害人，并不在犯罪过程中出现，不会有毒贩『残忍杀害抛弃自己手上的毒品』，无论打击贩毒多严重，都不会造成毒品受害者更大的伤害。但贩卖儿童却真的可能存在更严重的恶行，因为儿童是在人贩手中的。\n事实上贩卖儿童最特殊的恰恰是，孩子活着才有利润，死了就什么都没了。在『孩子活着』这点上，人贩和孩子父母是利益一致的。这很别扭，但恰恰是这点，是最大的希望，也是我最反感『一律死刑』并叱之如此的原因。死刑只会割断最后的希望，把孩子的性命完全吊在人贩本已无几的同情心上，并让遇拐父母位陷于万劫不复之地。\n我们应该做的，是改善儿童找回的渠道，建立更好的防拐防丢体系，改进儿童领养的现状，甚至邪恶地说，还可以『创造供给』，从那些虐待亲生子女的父母身边剥夺他们的抚养权，然后交给那些想抚养孩子的父母。\n这才是正道。\n而当法律失去了『更重的犯罪，会有更严重的惩罚』的惩罚能力，如何阻止犯罪者的罪行升级？指望死刑解决一切问题么？指望死刑阻止犯罪么？横竖是死，发什么善心？\n死刑只会让人贩开出更高的价格，只会引来更多的亡命之徒拐带儿童，只会造成被拐卖的儿童非卖即死的惨况。\n还是那句话，本来他们就是把自己的性命当作成本，价格更高只能让他们更疯狂。\n\n观点：\n一，只有死刑才能遏制贩卖儿童。\n这条不解释了，社会运行自有规律，每个人都会选择最自己最有利的办法，键盘侠们也是，吹牛显正义，道德占高地，也不过是对自己的形象最有利罢了，哪管他人死活。\n第二，你不是被贩卖儿童的家长，根本无法体会那种痛苦。\n请问转发者们，你们是贩卖儿童的家长吗？我不想在这点上讨论。更可怕的是，还有真的孩子父亲评论说，『因为我不知道我孩子是生是死，如果被拐，相比于我无尽的搜索与痛苦，我宁可他死了』。\n第三，失去孩子对家长来说比杀了他们还痛苦，所以一定要判死刑。\n我不想在痛苦的程度上作辩解，这并无意义。\n重点在于，以这种理由判断贩卖者应该施加何种刑法无疑是将孩子当作父母的一种私人财产，这种私人财产的剥夺对父母产生的伤害程度的大小决定了刑法的轻重。\n这是荒诞的逻辑，因为父母对孩子是有监护权，但不是谁完全属于谁、谁是谁的私人财产的关系。人贩贩卖孩子，应以对孩子造成的伤害为主要量刑依据，这是我的看法。不然，孩子父母的痛苦，无疑也会造成父母的亲朋的痛苦，那么这份痛苦也要向罪犯赎回吗？\n如果讨论的是精神伤害的罪名，通常也只关注直接伤害的那部分，而『通过对亲密关系或者试图建立的亲密关系进行打击从而伤害到某一方的感情』这种情况是难以处理的，孩子青春期跟父母闹别扭，是不是也让父母心如刀割，是不是也应该把孩子抓起来毙了？追求女神，女神爱理不理，是不是也应该把女神抓起来毙了。我明天就去找二马，他们不理我就让国家把他们毙了。\n当然这是一个过于敏感话题，从政治正确性上说，如果父母不在这件事情上『比死还痛苦』的话，就不足以说明他们对于孩子的爱。然而就我个人看来，这种爱与仇恨无异了。这种态度甚至反映出某种现状，太将情感和希望寄托在孩子身上了，这种爱并不包含无私、尊重和理解，往往只是一种对家庭中所有人的负担。\n最后，还是祝愿天下太平，祝愿务实理性的人，做事能不受傻逼的干扰，祝愿自以为好心，实际办坏事的人，始终办不成事，即使这恐怕很难。\n","categories":["唠唠叨叨"],"tags":["因果","拐卖儿童","死刑","讨论"]},{"title":"今天学习了 DOM 事件流三阶段","url":"//learn-dom-event-periods/","content":"起了个小学生式标题。\n这东西又是浏览器历史的一桩恩怨……当最初的 HTML 标记式的语言结构逐步成形后，人们开始对网页内的互动有了要求。当然，这事本来并不难，所有的用户互动归根结底就是『触发事件 – 判断当前状态 – 执行相应命令』的逻辑，而 HTML 本身就已经通过开标签和闭标签组对的形式，很好地形成了后来被称之为『DOM 元素』的数据结构，理论上只要把触发事件分别加到一个个的元素上，或者按需加到某些特定的元素上，就可以执行命令了。\n然后问题就来了。\n由于 HTML 的表现是盒式结构，都是一些大框框包含小框框的情况。比如如下代码：\n&lt;div id=&quot;blue&quot;&gt;\t&lt;div id=&quot;green&quot;&gt;\t\t&lt;div id=&quot;red&quot;&gt;            sometext\t\t&lt;/div&gt;\t&lt;/div&gt;&lt;/div&gt;\n\n形成的 DOM 盒式包含结构大约就是这样：\n\n当用户点击红块时，实际上浏览器是无法判断这次点击的意图的，也就是说，到底应该是点在红块上，红块对这次点击作出反应，还是点在绿块上，亦或是蓝块上。即使是三者都算作被点到了，三者都有反应，那怎么也得有个先后顺序吧。\n有两种顺序都可以，一种是先子后父，先里后外，红绿蓝顺序；第二种是先父后子，先外后里，蓝绿红顺序。\n两者都可以，两者都有理，然后老 IE 用的是前者，老 Netscape 用的是后者……结的梁子够多了，也不差这一个了。\n于是新的协议为了兼容，提出了 DOM 事件流的三个阶段的设计，即……首先，都别争了，顺序就按『蓝绿红绿蓝』这么来吧……然后，这一顺序又分成三个阶段，第一阶段我称之为『下沉』，顺序为蓝绿；第二阶段『触底』，系统发现红色已经是最底层 DOM 元素了，第三阶段『上浮』，顺序变成了红绿蓝。\n这三个阶段是有标准的命名的，分别是『捕获阶段』、『目标阶段』、『冒泡阶段』。并且严格来说，捕获阶段不包括最底层元素，而冒泡阶段包括目标阶段。盗图一张：\n\n尽管规范上来说，要求捕获阶段只注册事件，而在冒泡阶段执行相应阶段。但事实上各浏览器在实现时，都允许在捕获阶段也执行相应的事件。结果就是，对于一个目标，有两次执行事件的机会。这在为 DOM 元素添加事件的 JS 函数里就写得很明白：\naddEventListener(type, listener, useCapture)\n\n其中第三参数就是决定这个事件是否在捕获阶段就开始执行的。\n当我们使用 jQuery 等第三方库时，这一特性被 jQuery 很好地隐藏封装起来了，并良好地处理了各浏览器不一致的特性，使得我们可以通过 .click() 函数方便地添加点击事件，并不用考虑三个阶段的问题。\n","categories":["前端新手菩萨保佑"],"tags":["Javascript","事件","阶段","冒泡","捕获"]},{"title":"Javascript 的时间格式问题","url":"//js-time-format/","content":"先上代码：&gt; new Date(&quot;2015-07-08&quot;)&lt; Wed Jul 08 2015 08:00:00 GMT+0800 (中国标准时间)&gt; new Date(&quot;2015/07/08&quot;)&lt; Wed Jul 08 2015 00:00:00 GMT+0800 (中国标准时间)&gt; new Date(&quot;2015 Jul 08&quot;)&lt; Wed Jul 08 2015 00:00:00 GMT+0800 (中国标准时间)&gt; new Date(&quot;2015 Jul 08 GMT+400&quot;)&lt; Wed Jul 08 2015 04:00:00 GMT+0800 (中国标准时间)&gt; new Date(&quot;2015-07-08 GMT+400&quot;)&lt; Wed Jul 08 2015 04:00:00 GMT+0800 (中国标准时间)\n\n再说结论：在 Javascript 中，当为某个变量只赋值日期时，会默认使用该日期的 0 点 0 分 0 秒作为完整的值。而根据表现格式的不同，在具体赋值时会使用不同的时区时间赋值。\n当使用『-』作为年月日的分隔，即 YYYY-MM-DD 的格式时，赋值会根据 GMT&#x2F;UTC 时间的当日 0 点赋值，再根据浏览器提供的系统时间，折算为当地时间。也就是说，如果你在北京，并且电脑时区正常。那么当你为某变量赋值『今天』时，实际上赋的值是 0 时区的 0 点 0 分 0 秒，换算成北京时间为早上 8 点。如果在东京，则是早上 9 点。\n也就是说，无论是在哪个时区，相同的一套代码在不同的电脑上，会得到相同的值。\n而当使用『&#x2F;』作为年月日的分隔，即 YYYY&#x2F;MM&#x2F;DD 的格式时，赋值则根据电脑时间，取到本地时间该日的 0 点 0 分 0 秒。由于各时区都差一个小时整，实际上会导致 JS 代码在不同时区电脑上执行相同代码时，得到的时间值在绝对值上并不相等。即在北京时区时，会取到北京时区的 0 点 0 分 0 秒，同一时刻在东京则已经是当日 1 点 0 分 0 秒了。\n换句话说，不同客户端执行相同代码会取得不同的值。\n但即使如此，两者也有表现相同的时候。只要在赋值时就明确指定时区，则两者的值可以是相同的。例如：\n&gt; var a = new Date(&#x27;2015-07-01 GMT+800&#x27;)&gt; var b = new Date(&#x27;2015/07/01 GMT+800&#x27;)&gt; a.getTime() == b.getTime()&lt; true\n\n同时，无论是哪种情况，当通过 JS 转换成时间戳时，其值都是相同的。原因在于时间戳本身的定义，就是指当前时间距 0 时区的 1970 年 1 月 1 号 0 点 0 分 0 秒的秒数。所以在执行环境中，函数会根据电脑的时区设置来加减相应的小时数，先转换为 0 时区，然后再进行时间距离的计算。\n参考：http://www.w3schools.com/js/js_date_formats.asp\n","categories":["前端新手菩萨保佑"],"tags":["GMT","javascript","UTC","时区","时间格式"]},{"title":"Chrome 44 拼写检查的浏览器性能 bug","url":"//chrome-44-spellcheck-perform-bug/","content":"Chrome 在更新到 44.0.2403.125 m 后，存在一个由拼写检查导致的性能低下 bug，该 bug 只在 win 版 Chrome 下呈现，同时影响 32 位和 64 位版本。\n就是这货\n具体表现&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;\t&lt;meta charset=&quot;UTF-8&quot;&gt;\t&lt;title&gt;Document&lt;/title&gt;\t&lt;style type=&quot;text/css&quot;&gt;\t\tp &#123;margin: 20px;font-weight: bold;text-align: center;width: 33%&#125;\t\t.input &#123;display: block;width: 33%;margin: 20px;border: 2px solid #999;&#125;\t\t.editor &#123;display: block;width: 33%;border-radius: 4px;margin:20px;overflow: scroll;padding: 8px;min-height: 100px;max-height: 400px;&#125;\t\t.area &#123;border: 2px solid #fa0;&#125;\t\t.div &#123;border: 2px solid #0af;&#125;\t&lt;/style&gt;&lt;/head&gt;&lt;body&gt;\t&lt;input type=&quot;text&quot; class=&quot;input&quot;&gt;\t&lt;p&gt;Textarea&lt;/p&gt;\t&lt;textarea class=&quot;editor area&quot;&gt;&lt;/textarea&gt;\t&lt;p&gt;Contenteditable DIV&lt;/p&gt;\t&lt;div class=&quot;editor div&quot; contenteditable=&#x27;true&#x27; role=&#x27;textbox&#x27;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n\n将上面这段代码另存为 html 网页，在 Chrome 44 (win) 版本下打开。\n用文本编辑器制造 10000 行会被触发单词拼写识别的文本，比如使用 Excel 连续生成 10000 行『AKB0048』。复制粘贴到橙色 Textarea 框中，然后用鼠标点击灰色 Input 框……\n你会发现，非常的卡，光标在三个输入框中切换，每次切换都需要花费很长时间，对于性能不佳的电脑，和彻底进入死循环没区别了。\n刷新页面重置数据后，再将这 10000 行粘贴到 Contenteditable DIV 的蓝色框里，第一次粘贴也略有卡顿，毕竟数据量比较大。但等卡顿过后，鼠标再在三个框中反复切换，就非常顺畅毫无迟滞感了。\n\n这就是这个 bug 的真身了：\n在 Textarea 有大量会触发拼写检查的内容时，Chrome 44 的 Spellcheck 功能会极大消耗计算机资源，使得整台电脑近乎死机。\n解决办法由于这是浏览器 bug，前端程序员对此几乎无能为力，只能绕过这个 bug。\n通常来说，HTML5 已经提出了 Textarea 的一些标准属性，比如 spellcheck&#x3D;”false” 可以强制浏览器不检查内容，webkit 内核支持这一属性。正常来说，这似乎是很容易解决的一个兼容性问题。\n但偏偏 Chrome 却强制忽略了这一设置，就像它强制忽略 font-size &lt; 10 时那样。禁用拼写检查只在用户手动输入时有效，而对于 Ctrl+V 进来的内容，拼写检查依然正常运行，搞死你机。\n即使你把相关属性全部列全：\n&lt;textarea class=&quot;editor area&quot; spellcheck=&quot;false&quot; autocapitalize=&quot;off&quot; autocomplete=&quot;off&quot; autocorrect=&quot;off&quot;&gt;&lt;/textarea&gt;\n\n也是然并卵，在别的浏览器一切正常，而 Chrome 下依然故我。并没有解决问题。\n解决方法一：\n你可以通过 JS 检查当前浏览器是否是 Chrome，在需要粘贴大量内容的 textarea 上提示用户去关闭 SpellCheck 功能，具体位置为：\nChrome 菜单 → 设置 → （最下方）显示高级设置 → 语言和输入设置 → 启用拼写检查。\n但这并不是一个好方法，尤其是需要用户主动去对 Chrome 进行设置。\n解决方法二：\n使用 JS，将一次的粘贴行为，模拟为连续字符添加的行为。比如当用户 Paste 后得到 Text 值，立刻删除该 Textarea 元素再重建一个。然后根据 text.length 使用 JQuery 插件 Jquery.Caret 不断循环插入字符。\n这一方法缺点更多，首先是作为 walkaround 的方案，引入了太多并非用户参与的互动。其次，这一 bug 本来就是在大文本量 paste 下才会出现，如果再使用额外的一重循环，并不会使得体验有太多改善。最后，假如 Chrome 的再次升级把 JS 插入字符也纳入拼写检查的话，就会导致页面更 n 倍重的卡顿，到时候大概是再高性能的电脑都扛不住了。\n解决方法三：\n使用带 contenteditable&#x3D;’true’ 属性的 DIV 元素代替 Textarea，并使用 innerText 或者 $.text() 来获取用户填写的文本内容。\n\n这也是这篇博客所写的内容，这样的方法是最合法且绕过 Chrome 44 拼写检查 Bug 的方法。完全相当于是『有两种实现方法选择了另一种』。contenteditable &#x3D; ‘true’ 属性的 DIV 往往也是很多 JS 版所见即所得编辑器的常用办法。比如 WordPress。这一方法不需要用户操作，也只需要少量 JS 代码。最后，即使这个 BUG 的影响范围继续蔓延，也不过是和现有的情况一样，不会更坏。\n关于 MAC 版 Chrome：Mac 下无此 bug，是因为暂时还没有拼写检查功能。\n&#x3D;&#x3D;&#x3D;&#x3D; edit &#x3D;&#x3D;&#x3D;&#x3D;\n现在 Mac 下也有了。\n&#x3D;&#x3D;&#x3D;&#x3D; edit &#x3D;&#x3D;&#x3D;&#x3D;\n现在修正了。\n","categories":["前端新手菩萨保佑"],"tags":["Chrome 44","lag","solution","spellcheck","textarea","拼写检查","卡顿","解决办法"]},{"title":"Excel 自动打印表格份数/序号","url":"//excel-prints-print-number/","content":"#Update:\n改进了。现在的样式如下：\n\n第一步，先做一张报销单：从自动化的角度来说，尽量采用公式帮助计算、限定单元格可输入的内容、以及设置单元格格式。在这张单据里，编号单元格为 K1。\n\n公式：\n对于报销单而言，使用 &#x3D;SUM() 和 &#x3D;VLOOKUP() 通常就足够了，至多再加个 &#x3D;SUMIF()、&#x3D;COUNTIF() 就足以做出挺复杂的报销单了。\n单元格格式：\n选定单元格后 『右键 → 设置单元格格式』。标准的可以选择第三类货币格式，复杂的可以自行定义格式，使用#代表一个数位，使用 0 代表『当这个数位是最高位但为 0 时依然显示』。\n\n限定填充序列：\n选定单元格后菜单栏选择『 数据 → 数据验证 → 数据验证』。允许序列，来源直接写入需要的内容，用英文逗号分隔。\n\n第二步，添加 Excel 的开发工具菜单：依次点击菜单上的 『文件 → 选项 →（跳出 Excel 选项窗口)→ 自定义功能区 →☑ 开发工具』打钩。\n\n第三步，设置打印宏：点击菜单上的 『开发工具 →Visual Basic』，打开 VBA 面板，左侧双击 『ThisWorkbook』，把以下代码粘贴到出现的窗口内，然后关闭窗口\n注意 K1 为这篇文章中的编号位置，其它表单需要相应调整。\nSub PrintWithNumber()                                       &#x27;定义宏名Dim startnum, loopnum, N As Long                            &#x27;定义变量：起始编码，打印份数和循环值loopnum = Application.InputBox(Prompt:=&quot;需要打印多少份？&quot;)     &#x27;定义打印份数startnum = Sheet1.Range(&quot;K1&quot;)                               &#x27;读入表格上的份数的起始值For N = startnum To startnum + loopnum - 1                  &#x27;开始循环ActiveSheet.PrintOut                                        &#x27;打印当前表格Range(&quot;K1&quot;) = N + 1                                         &#x27;份数加一Next N                                                      &#x27;下一个循环直到结束End Sub                                                     &#x27;结束\n\n\n第四步，添加宏按钮：点击『开发工具 → 插入 → 按钮（窗体按钮）』。\n\n然后用鼠标在 Excel 空白处拖出一个方块，当松开鼠标时，会自动跳出『指定宏』窗口，选择窗口内的『ThisWorkbook.PrintWithNumber』，然后确定。\n\n右键点击该按钮，选择『编辑文字』，修改为『打印报销单』。\n\n第五步，设置打印区域：这一步是为了防止把按钮本身也打印出来。\n全选需要打印的区域，选择菜单 『页面布局 → 打印区域 → 设置打印区域』。\n\n第六步，另存为 xlsm：由于使用了 vba，必须把文件存为 xlsm 格式。（启用宏的 Excel 格式）\n完工。\n\n今天接到一个小任务，寥寥一记。\n在 Excel 中，常见的一种需求是打印带份数号码的各种表单，例如报销单、外出单等。通常财务都会提供模板给员工自行填写，再由财务按入帐顺序统一写上序号。但当某人一次性要写几十份，或者说类似的需求，需要一次性打印 N 份时，有没有办法让打印的表格上自动带上序号？\n解决办法需要依赖 Excel 中的宏程序，在 Excel 中按 Alt+F11 可以直接打开宏编辑器。或需要先通过『视图』→『宏』→『录制宏』，再经由编辑宏的办法来打开。\n核心宏程序如下，一目了然：\nSub test()Dim N As IntegerFor N = 1 To 10Range(&quot;E1&quot;) = NActiveSheet.PrintOutNext NEnd Sub\n\nE1 为需要填序号的单元格。程序先定义一个变量用来作为页码，然后不断用它替换指定单元格中的值，每替换一次就打印一张。这一方法硬要说有什么缺点的话，大概也就是打印任务数比较多，可能在几千份时会占用不少内存。\n更完整的模板还需要在界面上做个按钮和两个输入框，以便让完全没有宏能力的财务也能定义起始和结束页码并打印。但今天这需求仅仅是帮助打印而不是做个新模版，所以这任务也就完成了不再搞复杂了。\n样例下载 模板-日常费用报销表\n","categories":["软件使用"],"tags":["excel","press number","print","份数","序号","打印","编号","自动变化"]},{"title":"命令行批量建立 github 库","url":"//batch-create-github-repos/","content":"一个需求：如何批量建立 Github 帐号下的库。\nGithub 库通常的建立方式是通过网页，其次是通过 Github 客户端 Publish。\n但这两种方式都无法批量建立库，每新建一个库都需要用户重复操作一遍。\n查了一下，还真有这样的办法。Github 提供了 Restful API 来帮助企业管理代码库。不光是批量建立，还包括添加删除用户组等等，非常完善。就建库这一需求，Github 提供了这样的一个 API：\nhttps://developer.github.com/v3/repos/\n第5节就讲的是如何 Create 一个库，提供了非常详尽的设置参数：\n\n\n\nName\nType\nDescription\n\n\n\nname\nstring\nRequired. The name of the repository\n\n\ndescription\nstring\nA short description of the repository\n\n\nhomepage\nstring\nA URL with more information about the repository\n\n\nprivate\nboolean\nEither true to create a private repository, or false to create a public one. Creating private repositories requires a paid GitHub account. Default: false\n\n\nhas_issues\nboolean\nEither true to enable issues for this repository, false to disable them. Default: true\n\n\nhas_wiki\nboolean\nEither true to enable the wiki for this repository, false to disable it. Default: true\n\n\nhas_downloads\nboolean\nEither true to enable downloads for this repository, falseto disable them. Default: true\n\n\nteam_id\ninteger\nThe id of the team that will be granted access to this repository. This is only valid when creating a repository in an organization.\n\n\nauto_init\nboolean\nPass true to create an initial commit with empty README. Default: false\n\n\ngitignore_template\nstring\nDesired language or platform .gitignore template to apply. Use the name of the template without the extension. For example, “Haskell”.\n\n\nlicense_template\nstring\nDesired LICENSE template to apply. Use the name of the template without the extension. For example, “mit” or “mozilla”.\n\n\n当然其中大部分参数可以忽略，理论上只有库名是必须的。\n所以使用以下命令就可以在不登录网站或者客户端的前提下建立一个库，通过 Sublime Text 等多行文本编辑软件（甚至通过 Excel）编辑一个多行批处理文件，然后运行即可：\ncurl -u &quot;Github用户名:Github密码&quot; https://api.github.com/user/repos -d &#x27;&#123;&quot;name&quot;:&quot;库一名字&quot;&#125;&#x27;curl -u &quot;Github用户名:Github密码&quot; https://api.github.com/user/repos -d &#x27;&#123;&quot;name&quot;:&quot;库二名字&quot;&#125;&#x27;curl -u &quot;Github用户名:Github密码&quot; https://api.github.com/user/repos -d &#x27;&#123;&quot;name&quot;:&quot;库三名字&quot;&#125;&#x27;curl -u &quot;Github用户名:Github密码&quot; https://api.github.com/user/repos -d &#x27;&#123;&quot;name&quot;:&quot;库四名字&quot;&#125;&#x27;curl -u &quot;Github用户名:Github密码&quot; https://api.github.com/user/repos -d &#x27;&#123;&quot;name&quot;:&quot;库五名字&quot;&#125;&#x27;\n\n库名重复时，Github 会自动报错，并不影响批处理继续执行。\n","categories":["代码脚本"],"tags":["Curl","Github API","代码库","批量建立"]},{"title":"Excel 数组公式的概念解释","url":"//excel-array-formulas-explaination/","content":"Excel 公式，本质就是输入原始数据，处理后再输出结果数据，放在公式的单元格里。\n有些公式，输入是一个数据，输出也是一个数据，例如取整 int()、10 底对数 log()。若 A1&#x3D;5.5，&#x3D;Int(A1) 显示为 5。\n有些公式，输入是一组数据，输出一个数据，例如 Sum。这一组数据整个是一个参数。若 A1:A5&#x3D;{1,2,3,4,5}，输入公式 &#x3D;Sum(A1:A5)，显示为 15。A1:A5 数组是 Sum() 的一个参数。\n有些公式，输入是一个数据和一组数据，输出一个数据，例如 Match(A2,A1:A5)。两个参数，A2 是待查数据，A1:A5 是被搜索的数组。\n而数组公式，则是输入一组数据，输出一组数据。\n以 Match() 为例，Match 公式的形式为 &#x3D;Match(lookup_value, lookup_array, [match_type])，其中 第三参数 matchtype （查询模式）在本文讨论中忽略。则本文讨论的简化为 &#x3D;Match(_lookup_value 待查询数值, lookup_array 被搜索数组)\n可以看到，一个 Match 公式一次只能在 lookup_array 里查找一个数值。而把 Match 公式改写为数组公式，并用 Ctrl+Shift+Enter 确认以后，实际公式则变成了 {&#x3D;Match( lookupvalue_array, _lookup_array, [match_type] )}。\n在公式里，本来应该是单一数值的地方，被替换成了一个数组，待查询数值 变成了 待查询数组。则 Excel 会自动响应 Ctrl+Shift+Enter 命令，把该公式拆分成多次分别执行，每次取待查询数组里的一项，单独给出一个结果，然后循环到该数组里的每个元素都被查询一遍。\n例如，选择 C1:C5 单元格并在公式栏中输入 &#x3D;Match( B1:B5, A1:A10, 0 ) ，按 Ctrl+Shift+Enter 回车。Excel 会自动内部展开五次 &#x3D;Match() 查询，每次查询在第一个参数位分别填入 B1 – B5。即在 A1:A10 中分别查找 B1 – B5 的值，查 5 遍，并把 5 个结果分别放在对应的 C1:C5 单元格里。\n\n所以：\n1. 因为往往有多个输出结果，使用数组公式需要先选择好输出位置，再在公式栏写公式，写完用 Ctrl+Shift+Enter 确认。注意，这多个单元格包含的是『一个公式』。\n2. 数组公式需要你在写公式时，把『一个数据』的参数改写为『一组数据』。（例子中 Match() 函数本来的 lookup_value 即『需要查找的值』改成了『需要查找的数组』。）Excel 会自动循环这个改写数组里的每一个数据，然后把公式计算结果填到对应的单元格里。\n3. 数组公式修改起来较为费劲，经常会出现『不能更改数组的某一部分』，正确的方法是先按 Ctrl+&#x2F; 全选该数组公式的整体占用位置，然后再在公式栏进行修改。\n4. 某些公式，例如 Sum()、Len() 使用数组公式和直接使用该公式往往没有区别。所以如果你见到某个教程在以 Sum 举例讲数组函数时就不用往下看了。百度搜出来有不少是这样的。\n5. 一般来说，常用的数组计算 Excel 都已经提供了特定的函数，比如 Logest()、Frequency 等。如果返回的值有两个以上的，也通常都拆成了多个公式，比如线性回归的 Slope()、Linest()、Steyx() 等。当需要多个计算结果时，也无需使用数组公式，使用 Excel 的公式复制粘贴就可以完成绝大部分工作。上文的例子即是如此，选择 C1:C5 然后输入 Match() 数组公式，和先在 C1 输入普通的 Match 公式 &#x3D;Match( B1, $A$1:$A:$10,0 )，然后把公式复制到 C2:C5 上，效果是一样的，后续处理起来还方便一些。\n那么数组公式有什么用呢？\n大部分情况其实没什么用，确实没什么用，所以很多人用了好久也没用过数组公式。哲学点地说，等到你需要用数组公式时，数组公式就有用了。\n数组公式的最大特点是『输出的是一个数组』，所以它需要用多个单元格才能放下，同时，它可以作为数组参数供其它函数使用。所以数组函数最大的使用场景是通过复杂嵌套函数，实现更大程度的 Excel 自动化。\n例如，去除重复单元格，可以使用 Alt+A+M 的『删除重复项』实现，但这样意味着每次数据更新，都需要重新进行人工操作，当处理步骤较多时，往往意味着后续步骤也需要重新操作。而使用数组公式，则可以一劳永逸地解决这个问题。\n&#123;=INDEX(A:A,SMALL(IF(MATCH(A$2:A$20,A$2:A$20,)=ROW($1:$19),ROW($2:$20),4^10),ROW(A1)))&amp;&quot;&quot;&#125;\n\n因为『删除重复项』本质上就是一个『输入一个数组，输出一个数组』的操作。在这个例子里，Match() 函数的第一个参数和两个 Row() 参数进行了相同的对应循环，并把每个计算结果填入相应的单元格里。\n而另一个例子\n&#123;=Mid(A1,Row(1:100),1)&#125;\n\n则相当于把 A1 单元格中的每个字符都单拆出来。辅以其它公式嵌套，可以比较方便地计算诸如『若干个单元格一共包含多少个特定字符』之类的问题。\n一句话总结：当你在使用 Excel 时，需要处理『处理若干个数据，过程中包含若干数据，结果也是若干个数据』时，在宏程序之外，还可以考虑使用数组公式。\n","categories":["软件使用"],"tags":["excel","数组公式","示例","详解"]},{"title":"补充一个数组公式的实际应用","url":"//an-example-of-array-formula/","content":"关于数组公式解释见这里：&lt;Excel 数组公式的概念解释&gt;\n补充一个实际应用里出现的公式\n&#123;=INDEX($A$4:$A$27,MATCH(1,IF(ISERROR(FIND(C4,$A$4:$A$27)),0,1),0))&#125;\n\n作用是在 A 组数据的各项文字中寻找到第一条包含 B 组词汇的数据，如图：\n\n原理是这样的，将 find()函数数组化，令其在 A4:A27 中逐个寻找 C4 中的『愿望』两字。当找到匹配时，Find() 函数会返回一个具体数值，即『愿望』两字在被查找的字串中在第几个字符出现；当找不到匹配时，则 Find() 函数会返回 #Value!。在数组化后，返回的数组大致为 \n","categories":["软件使用"],"tags":["数组公式","示例","Excel","批量查找"]},{"title":"Steam 上 3DMark 的搞笑评论","url":"//steam-3dmark-fun-comments/","content":"3DMark 是个显卡性能评测软件，通过运行一些实际的 3D 场景，给出电脑的 3D 性能评分。类似于国内的鲁大师评分之类的，只是 3DMark 更专注于 3D 性能评分而已。由于 3D 性能绝大部分实用场景都是玩游戏，所以 3DMark 自己的口号就是 『The Gamer’s Benchmark（是玩家就跑个分）』。\n作为电脑的性能测试测试软件，自然是有不少榨压极限的测试项目，其中最耗资源的一项叫『Fire Strike』，寓意电脑满负荷运行时如同火烧一样。\n\n就此为止这还是个正常的测试工具软件，然后软件公司就开了个脑洞。它添加了个全球排名榜（和打败了99%的电脑一样），还添加了 Steam 游戏成就……(⊙ˍ⊙)观赏一下：3DMark Game Archievements\n于是一帮成就党和吐槽党就沸腾了：\n\nHevcy:This game is the most pay-to-win game I have ever played. To have any hope of getting near the top of leaderboards you will have to spend at least 4-5k of your hard earned cash, and, to add to all of this, there is no gameplay to be found, just a series of cutscenes with no relevance to eachother at all. This is a grim sign of where the industry is headed.\n– 这是我玩过的最氪金的游戏。你至少要花两三万辛苦搬砖赚的钱才有那么一丁点上榜的希望，关键是你攒起来了也没啥可玩的，就看那些没啥剧情的场景演示。这游戏行业怕是要走歪了。\n\n\nMaxterChief:I tried running the Fire Strike test. It just laughed at me, called me a loser and would have stolen my girlfriend if I had one.\n– 我试着跑了下火焰冲击测试，然后就被它嘲笑了。它喊我卢瑟，还想抢走我女友，如果我有女友的话。\n\n\nModified420:most expensive program ever.1. Buy it.2. Run it.3. Go buy CPU&#x2F;GPU.4. Run it again.5. Repeat from step 2.\n史上最贵的程序– 1. 买买买。– 2. 运行软件。– 3. 升级电脑。– 4. 再次运行。– 5. 从第2步开始重复。\n\n\nModified420Just when you think you have a pretty good rig. This program will smack that thought right out your head, Stomp on that dream, and crush any hopes of possibly obtaining that Master PC status again until tax time. 10&#x2F;10\n– 你以为你搞了台牛机。这软件会狠狠拍醒你，告诉你别做梦了，也别觉得自己的机器能打败多少人了，还是搬砖去吧。\n\n\nSeñor FreezerCool software if you want your heart, hopes and dreams broken\n– 你想让你心灵受伤希望幻灭梦想破碎的话这软件很不错。\n\n\nSuper Saiyan PapyrusPros:Amazing VisualsIntuitive menusGlobal ranking system (by different classes)Really fun to compete and see who is the best between all of your friendsCross platform support for Windows Phone, Anroid, and iOS\nCons:Pay to win\n– 优点：– 惊艳的视觉效果– 直观的菜单– 全球分类排名– 基友之间撕逼谁最牛确实很爽– 跨平台支持，包括 Windows Phone、安卓和 iOS\n– 缺点：– 氪金\n\n\nArctiixOverclocked till my computer hit temps of 100 degrees Celsius to get achievements… No regrets.\n– 超频到电脑 100℃ 拿成就……我不后悔(＞﹏＜)\n\n\nmoistI got the CPU bottleneck and GPU bottleneck achievements at the same time\n– 我同时拿了『处理器不够用』成就和『显卡不够用』成就。\n\n\nSystemworksBought Alienware x51 gaming PC.Ran standard Fire Strike test.\nI bought a potato.\n– 买了外星人 X51 游戏电脑。– 运行标准火焰冲击测试。– 我买的个山芋啊！(Hot potato 比喻棘手的问题、烫手山芋、使人厌恶的事。难题。)\n\n\n♠ DgO ♠The Fire Strike Ultra is so real that my PC got on fire.\n– 超级火焰冲击很真实，我电脑着火了。\n\n\nHEMI™Lets face it we need this app to test our hardware and just make ourselves feel better about spending vast sums of cash on more hardware we really didn’t need just wanted 😉\n– 其实吧，我们是需要这个 app 的。花了大价钱买了口水但实际根本用不上的硬件时，用它测两下，心里就不那么内疚了。\n\n\nkinsey430成就：0（以及以后若干年也会是0）卡片：无为什么买：要问2天前的我，顺便帮我劝劝他。\n\n\n༼ つ ͡° ͜ʖ ͡° ༽つI own two Gtx 780’s and got the cpu bottleneck achievement.\n– 我整了两块 GTX780 显卡然后拿了个『处理器不够用』成就。\n\n\nAoi没成功运行过一次，歧视我没四路泰坦吗\n\n\n[fwdcp] tscThis is the most disgustingly pay-to-win game that I’ve ever played, and it’s not even interactive, more like a movie. I’m very disappointed.\n– 最烂的氪金游戏，没啥互动，像个电影，我很失望。\n\n\nXenom73Couldn’t handle firestorm at even 30fps. My epeen is deflated. Computer not worth any achievement score. Think i’ll cry myself to sleep.\n– 火焰风暴跑不到 30 桢，我痿了。这电脑连个成就都挣不到，哭着睡了。\n\n\nDrifterSpent $1250 on a high-end computer.Spent $5 to know that I made a terrible decision.\n– 花 8000 买了台牛逼电脑。– 花 30 发现我错了。\n\n\n喵啦啦卡吧标配游戏\n\n\nGreenpoolI want to achieve the ultimate pleasure in life by unlocking all achievements. This is now my sole purpose to overclocking.\n– 追求成就全解锁时的终极快感是我超频的唯一原因。\n\n\n矢泽妮可终于知道了我的电脑是战5渣..\n\n观光链接：\nhttp://store.steampowered.com/app/223850/\n","categories":["二逼青年"],"tags":["3DMark","评论"]},{"title":"VMWare 安装 Ubuntu 出现『默认声音设备无法打开』的原因与解决办法","url":"//vmware-ubuntu-the-default-sound-device-cannot-be-opened-solution/","content":"Update: Ubuntu 16.04 系的解决了这个问题。此文终结。\n\n\n这个 Bug 出现在几乎所有版本的 VMWare Workstation、VMWare Fusion 而且按原理来说似乎也会出现在 VirtualBox 上（未验证）。用户选择右键点击喇叭图标手动连接，则可以使用一段时间，Rhythmbox 之类的也可以正常播放声音，但只要打开声音设置或其它类似操作就又会断开。\n遇到这种情况，可以先尝试在宿主机接上麦克风&#x2F;耳麦，随便弄个录音设置，或者把普通耳机插头插进录音孔也行。对的，尽管实际上录不了音，但只要让录音孔插着东西就行。\n然后重启虚拟机，如果一切正常该提示不再出现，就继续往下看真·解决办法，如果依然不行，很抱歉你的问题不是这篇文章所能解决的。\n这个问题的真正原因是：Ubuntu 默认会检测音频硬件设备，包括音频输入和输出两种设置，但 VMWare 不能正常反馈宿主机声卡的状态。感觉更多的是 Ubuntu 的锅，它没有检测设备存在就直接调用录音设备。\n解决办法：\nsudo apt-get install pavucontrol\n\n安装 pavucontrol 软件包，然后在 Term 中输入 pavucontrol 启动旧版的音量控制：\n\n在音量控制界面，选择『配置』选项卡，选择『模拟立体声输出』，不要选任何带“输入”的项。然后注销用户再重新进入桌面。\n\n以上，VMware Ubuntu 就可以正常出声了。\n\n","categories":["软件使用"],"tags":["vmware","ubuntu","解决方案","问题原因","默认声音设备无法打开"]},{"title":"3 逗还是 4 逗？","url":"//comma-3-comma-4/","content":"为方便位数较长的数字，我们经常会加上一些逗号或者故意在若干位数之间加大间隙以方便阅读。比如：\n100 万亿元津巴布韦币\n这里的 100 万亿尽管没有直接加逗号『,』，但在每三位数字之间加大了间隙，所以如果学过英语，就可以比较方便地数出 Thousand, Million, Billion, Trillion 四级单位，所以这张钱是 One hundred trillion dollars。 但这是使用英语度量衡的国家，他们的语言以千为一级，所以以 3 位一级标比较方便，而中文是以 4 位一级的，这意味着在数数量级单位时，我们的思维变成了『千，百万，十亿，万亿』，于是得到『一百万亿』这个表达。\n在汉语语系下，这个划分并不方便。直观的显然应该是 4 位一级，也就是『万，亿，万亿，兆，…… 』下去。比如：\n\n三位一级：100,000,000,000,000\n四位一级：100,0000,0000,0000\n\n看起来显然是 4 位一级更直观。\n接下来又到了是民族还是世界的争论，我认为在这种鸡毛蒜皮的『3 逗还是 4 逗』问题上，以下的见解是可以达成一致的：\n\n这个标记本来就是辅助阅读用的小改进。除了它应当承担的用途外， 不承担别的用途。\n无论 3 逗还是 4 逗，即使不熟悉的人，阅读起来也并不会造成障碍。本来这就是个辅助阅读的事情，辅助不了就当它不存在。\n对于相应语言体系下的人，只有熟悉的分法才有较好的辅助作用。\n\n所以我的结论是，如果作者和可以预知到的读者群体，都更熟悉 4 逗的话，那么相应的文字应该以 4 逗优先。反之 3 逗优先。假如某种文化是 5 位一个数量级的话，他们的出版物显然应该以 5 逗优先。如果作者与读者群的习惯不一致并且可以预期这种不一致的话，我觉得应该以读者优先。如果不可预知，那就是看作者个人习惯了。\n于是，在我的博客和我可能的译作（英译中）的相关文字里，我都会尽量以 4 位为大数划分数量级。而若写的是英文博客的话，则会以 3 位划分。\n说白了这就是个习惯问题，中文环境中并不需要强求以 3 位划分为准，4 位更习惯就用 4 位吧。\n据我所知日语也是 4 位一级单位的，那么想必中国周边受中华文化影响的应该都是 4 位，大概。\n","categories":["唠唠叨叨"],"tags":["中英文","大数分段","逗号"]},{"title":"HTML5 &lt;audio&gt; 粗考","url":"//html5-audio-issues/","content":"HTML 5 提供的 &lt;audio&gt; 给了前端相当多的方便，不再需要 js 库和 swf 作为播放器。但是新带来的坑也是坑得我要死要活的。\n这是 W3School 提供的一张简表：\n\n\n\nBrowser\nMP3\nWav\nOgg\n\n\n\nInternet Explorer\nYES\nNO\nNO\n\n\nChrome\nYES\nYES\nYES\n\n\nFirefox\nYES\nYES\nYES\n\n\nSafari\nYES\nYES\nNO\n\n\nOpera\nYES\nYES\nYES\n\n\n信了你就掉坑了。\nHTML5 的 &lt;audio&gt; 有着比看起来的大得多的坑。主要在于各浏览器的实现上有区别，自带的音频解码器各有不同，导致实际支持的格式各有不一。\n并且，在宣称支持的格式里，各浏览器也只支持其中一部分编码格式。例如：\n\nFirefox、Chrome 可以正常播放 Microsoft PCM, 16 bit, mono 8000 Hz 的wav，但是无法播放 GSM 6.10, mono 8000 Hz 的wav\n\n以及来自于 这篇文章 的：\n\nPlaying MP3 files in Firefox is actually OS&#x2F;hardware dependent. That’s right, instead of using a built in, true native support, we have to rely on outside variables that we have no control over. Kind of defeats the purpose of that whole no extensions, native support thing that HTML5 is good for. Yes, this is to avoid patent issues (and so Mozilla doesn’t have to pay licensing fees). If you are serving to a lucky person below, here’s the real MP3 support for Firefox:\n\nWindows 7+ (Firefox 21.0)\nWindows Vista (Firefox 22.0)\nAndroid (Firefox 20.0)\nFirefox OS (Firefox 15.0)\nOS X 10.7 (Firefox 22.0)\n\n大意是 Firefox 的 MP3 播放支持其实是依赖于系统和硬件的，这样可以免去专利费。相应的，支持列表就变得有点复杂了。\n\n这里有几个测试页， 可以大致用来测试主流浏览器的音频文件支持情况，但是也不完全。就如上文所述，Chrome 对 wav 文件只能说部分支持。\n测试页一：http://hpr.dogphilosophy.net/test/\n测试页二：https://html5test.com/\n所以在实际测试中，某浏览器播放不了指定音频有两种可能性：\n\n音频格式不支持\n音频编码格式不支持\n\n对于相关的编码格式，大致查了一下，列表如下：\nOGG\n同样后缀名为 .ogg 的音频文件，可能有以下几种编码格式： Vorbis, speex, OggPCM, FLAC，其中，Vorbis 是被建议的。\nWAV\n.wav 文件通常被理解为原始采样，未经压缩。但其实并不一定如此。最广泛标准的 .wav 文件是指微软 PCM 编码的音频文件（其实也已经编码过了，毕竟从模拟信号转数字信号无论如何都会有一个采样过程。）PCM 细分又可分为定长（16bit、32bit 等）和浮点两类。另外.wav 还可能是 GSM 编码格式，这种格式广泛使用于通讯网络，但在互联网上并不常用，最有可能的来源是电话录音导入电脑。\nMP3\nMP3 规范并没有详细规定如何编码，但却有细致的解码定义。也就是说『符合这一类规范的才叫 MP3』。因此，MP3 的格式反而才是最一致的，除了采样率、变长&#x2F;定长和声道数量外，不存在其它变化。\nOpus\nOpus 是设计为同时包含音频和视频的编码格式。* 可以取代复杂的编码后封装方案。但实际上普及率很低，支持也不好。\nAAC\nAAC （Advanced Audio Coding）主要是得到了苹果的支持。但除此以外，在互联网的使用并不广泛。\nMozilla 提供了另一张更为详细的表格：（注意这个表还是只能作为参考）\n\n\n\nFeature\nChrome\nFirefox (Gecko)\nInternet Explorer\nOpera\nSafari\n\n\n\nBasic support\n3.0\n3.5 (1.9.1)\n9.0\n10.50\n3.1\n\n\n&lt;audio&gt;: PCM in WAVE\n(Yes)\n3.5 (1.9.1)\nNot supported\n10.50\n3.1\n\n\n&lt;audio&gt;: Vorbis in WebM\n(Yes)\n4.0 (2.0)\nNot supported\n10.60\n3.1\n\n\n&lt;audio&gt;: Streaming Vorbis in WebM via MSE\n?\n36.0 (36.0)\n?\n?\n?\n\n\n&lt;audio&gt;: Vorbis in Ogg\n(Yes)\n3.5 (1.9.1)\nNot supported\n10.50\nNot supported\n\n\n&lt;audio&gt;: MP3\n(Yes)\n(Yes)\n9.0\n(Yes)\n3.1\n\n\n&lt;audio&gt;: MP3 in MP4\n?\n?\n?\n?\n(Yes)\n\n\n&lt;audio&gt;: AAC in MP4\n(Yes)\n(Yes)\n9.0\n(Yes)\n3.1\n\n\n&lt;audio&gt;: Opus in Ogg\n27.0\n15.0 (15.0)\n?\n?\n?\n\n\n&lt;video&gt;: VP8 and Vorbis in WebM\n6.0\n4.0 (2.0)\n9.0\n10.60\n3.1\n\n\n&lt;video&gt;: VP9 and Opus in WebM\n29.0\n28.0 (28.0)\n?\n(Yes)\n?\n\n\n&lt;video&gt;: Streaming VP9 and Opus&#x2F;VP8 and Opus in WebM via MSE\n?\n36.0 (36.0)\n?\n?\n?\n\n\n&lt;video&gt;: Theora and Vorbis in Ogg\n(Yes)\n3.5 (1.9.1)\nNot supported\n10.50\nNot supported\n\n\n&lt;video&gt;: H.264 and MP3 in MP4\n(Yes)\n(Yes)\n9.0\n(Yes)\n(Yes)\n\n\n&lt;video&gt;: H.264 and AAC in MP4\n(Yes)\n(Yes)\n9.0\n(Yes)\n3.1\n\n\nany other format\nNot supported\nNot supported\nNot supported\nNot supported\n3.1\n\n\n所以解决方案大概就是先通过测试确定一两种被绝大部分浏览器支持的音频编码格式，然后服务器后端将音频文件转码为这一到两种适用的音频格式再传递给前端。\n看起来最通用的是 MP3？简单地说，是的。但要注意的是不是任意一种 mp3 编码格式都支持，最优化编码的 VBR 支持性就存疑。同时，由于 Firefox 的 MP3 支持是基于系统的，所以假如 Ubuntu 没有安装 ubuntu-restricted-extra 包也可能出现支持性问题。\n* 附：\n更复杂的是 &lt;video&gt; 标签，由于视频通常是包含声音和图像两部分的，因此实际上视频文件数据是由已经编码的视频数据和已经编码的音频数据，再次进行数据交错编制而成的。因此除 编码格式 外，又衍伸出 封装格式 的概念。深受大家喜爱的 .avi 格式，即 Audio Video Interleave 的简写，就是一种封装格式。当你使用 avi 封装器折开文件后，就会见到一个无声的视频文件和一个无图像的音频文件。至于各自的编码格式又五花八门了。因此对于 &lt;video&gt; 标签的支持更加混乱，几乎必然需要通过服务器转码才能确保在尽可能多的浏览器上前端一致，这也是各视频网站为什么会有大量集群转码处理用户上传的视频的原因。\n","categories":["前端新手菩萨保佑"],"tags":["音频格式","浏览器"]},{"title":"……数零与进位","url":"//count-zeroes-and-carry/","content":"最近 AlphaGo 与李世石的人机围棋大赛很火，也蹦出一大波跳梁小丑。你会发现什么热点事件都少不了这种人，总是挡在路上污人视线，比如那个输入法王。我记得上次 SoloLens 它也跳出来大谈 Matrix 来着。\n牢骚完毕，这次深夜短篇不是写围棋也不是写计算机的，只说数数，更严格的说，只是数『0』。比如：\n\n围棋棋盘共有 19×19 个点，每个点有『无子』、『黑子』、『白子』三种可能性。不考虑无气提子等特殊情况，则一共有 3^361 种盘面。如果考虑到下子进程，则有 361! 种棋谱。\n\n因为有围棋规则在，实际数字会小一些，但这不是本文重点。这两个数字分别是一个 173 位数和一个 769 位数：\n3^361=17408965065903192790718823807056436794660272495026354119482811870680105167618464984116279288988714938612096988816320780613754987181355093129514803369660572893075468180597603361!=1437923258884890654832362511499863354754907538644755876127282765299227795534389618856841908003141196071413794434890585968383968233304321607713808837056557879669192486182709780035899021100579450107333050792627771722750412268086775281368850575265418120435021506234663026434426736326270927646433025577722695595343233942204301825548143785112222186834487969871267194205609533306413935710635197200721473378733826980308535104317420365367377988721756551345004129106165050615449626558110282424142840662705458556231015637528928999248573883166476871652120015362189137337137682618614562954409007743375894907714439917299937133680728459000034496420337066440853337001284286412654394495050773954560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n\n呼应本文标题的问题来了——这两个数字末尾各有多少个『0』？\n你当然可以靠眼力劲儿去数，前者容易看出末尾没有 0，后者大概费些功夫能数出有 88 个 0。当然你也可以使用查找替换，数起来方便些。\n但是如果没有事先把总数算出来，又如何数出一个数的末尾有多少个 0 呢？毕竟连乘 300 多次算个 700 多位的数字恐怕是更累的一件事情。能少算就少算点吧。\n办法是有的，数质因素 5 就可以了。\n要注意到，无论多少个数连乘，只有 2×5 才会在末尾添加一个 0。有人说 8×5 也会出 0，4×25 会出两个 0。但 8×5&#x3D;40&#x3D;22x2x5，有两个 2 其实浪费掉了。而 4×25 &#x3D; (2×5)2，本质上正好是两对 2×5 相乘，完全符合之前的设定。又因为在阶乘中，2 作为质因数的出现次数远远超过质因数 5 出的次数。每个偶数都能至少贡献一个质因素 2，而每个 5 个数字才能贡献一或若干个质因数 5。因此可得结论：\n只要数清连乘中一共有多少个质因数 5，就知道最终数字末尾有多少个 0 了。\n对于 3^361，显然一个质因数 5 都没有。所以末尾没有 0。\n对于 361!，\n\n每隔 5 个数字，可以提供一个 5。即 5, 10, 15, 20, 25, 30, ……, 360。一共 361 &#x2F; 5 向下取整，有 72 个。\n每隔 25 个数字，可以一次提供两个 5。即 25, 50, 75, ……。一共 361 &#x2F; 25 向下取整，有 14 个。由于上一条已经重复计算一次，因此这里的 14 不必再翻倍了。\n每隔 125 个数字，可以一次提供三个 5。即 125, 250。一共 361 &#x2F; 125 向下取整，有 2 个。由于上一条已经重复计算一次，因此这里的 2 不必再翻倍了。\n\n再上去是 625，直接超了。于是数 5 活动就此停止。\n一共有 72+14+2&#x3D;88，而 2 的数量肯定是足够的，于是会产生 88 组 2×5，即末尾有 88 个『0』。\n这个方法可以广泛用于各类无聊的数 0 活动中，例如：\n\n任取一个足够大的数字 N，比如 10100 即 1 googol，把小于 N 的所有素数乘起来，那么多素数的乘积的末尾有几个 0？\n\n——答案是只有一个 0，算对了么？\n那么第二个问题来了，为什么数 5 知 0？\n答案是，这个和 10 进制有关。\n仔细思考，『进制』的本义就是每满多少就 归 0 进位。换句话说，如果 要让末尾为 0，就必须不多不少，最末尾那些余量恰恰等于当前进制。这个 『余量』不是严谨的用词，意会即可。在 10 进制里，你总要正好凑出 10 个或者 10 的倍数个，才能让末尾是 0。在 8 进制里就要凑 8 的倍数个让末尾是 0。16 进制凑 16，N 进制凑 N。\n所以归根结底，要让若干个数连乘得到末尾零，就是看能凑出几份当前进制。10 进制就是要凑 2×5，8 进制要凑 2x2x2，每三份质因数 2 会多一位尾 0，只看 2，别的都没用。\n既然 10 进制下，10 的唯一质因数分解就是 2×5，而 2 又远多于 5，所以数 5 知 0 就变成了最简单的办法。\n理解了这些，下面这些问题也不难回答了：\n\n3361在 3 进制下，末尾有几个 0？\n\n答案是 361 个 0。这个问题等效于 10 进制下 10361末尾有几个 0，等效于 N 进制下 N361末尾有几个 0。——都是361个。\n\n21024在 16 进制下，末尾有几个 0？\n\n答案是 256 个。因为 16 &#x3D; 24，1024 &#x2F; 4 &#x3D; 256。\n最后一个问题：\n\n31024在 2 进制下，末尾有几个 0？\n\n","categories":["硬用数学"],"tags":["乘法","尾 0","质因数","进制"]},{"title":"Excel 计算缺陷与大数计算","url":"//excel-big-calc/","content":"Excel 很多时候可以当作一个简易的数学计算程序，代替 Mathematica 或者 Matlab 之类的专业软件进行一些不算太复杂的数值运算。但 Excel 的数据处理存在很多弱项，在遇到时需要相应作一些处理。\n问题一：有效位数大约只有 15-16 位，更多的位数只会用 0 填充了。\n\n精确计算的 2n 的尾数不会是 0，始终是 2→4→8→6→2…… 的循环，但从截图上可以看到，Excel 在计算 250 时，就遇到了有效位数问题，使得末尾出现了数字 0。\n关于问题一的应对：从例子中可以看到，Excel 提供了 15 位的精度，这意味在在『千万亿』这个级别上 Excel 依然可以进行精确的计算。相当于以小数点后 4 位精度，即 0.0001 元 &#x3D; 0.01 分 的精度下，处理九千亿人民币以下的财务数据。处理全国 GDP 的数据也可以精确到分，以米为精度可以让光跑一个月，以毫秒为精度覆盖三万多年。\n但是如果你真觉得不够，就需要自己用公式实现进位，使用多个单元格作为『数字段』，来确保每个单元格内的数字长度不超过 15 位。\n以 2n 为例，其计算由两部分组成：\n最右一列公式为：\nZ1=2Z2=TEXT(RIGHT(Z1*2,12),&quot;000000000000&quot;)Z3=TEXT(RIGHT(Z2*2,12),&quot;000000000000&quot;)Z4=TEXT(RIGHT(Z3*2,12),&quot;000000000000&quot;)……\n\n其中，Right 函数保证每个单元格只取结果的最右 12 位，让精度始终符合 15 位上限的要求。而 Text() 函数则保证当截取 12 位数字时，不会将原来在中间位置的 0 因为截取而成为首位 0 消失掉。例如，263 &#x3D; 461,1686,0092,1369,3952，当截取 12 位时，会获得 0092,1369,3952，如果不通过 Text() 函数保存首位的 0，则最后合并回去时就会产生错误。\n左边每一列的公式均为：\nX2=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Y1*2,LEN(Y1*2)-12)),0),12),&quot;000000000000&quot;); Y2=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Z1*2,LEN(Z1*2)-12)),0),12),&quot;000000000000&quot;)X3=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Y2*2,LEN(Y2*2)-12)),0),12),&quot;000000000000&quot;); Y3=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Z2*2,LEN(Z2*2)-12)),0),12),&quot;000000000000&quot;)X4=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Y3*2,LEN(Y3*2)-12)),0),12),&quot;000000000000&quot;); Y4=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Z3*2,LEN(Z3*2)-12)),0),12),&quot;000000000000&quot;)                                                                              ……;                                                                               ……\n\n这个公式同时适用于左边任意多列，使得只要电脑性能过关，尽可用尽 Excel 的所有列（一共 16384 列）。\n公式略复杂，以 Y2 为例：\nY2=TEXT(RIGHT(Y1*2+IFERROR(VALUE(LEFT(Z1*2,LEN(Z1*2)-12)),0),12),&quot;000000000000&quot;)\n\n最外层 Text() 依然是为了保留首位 0。Value(Left()) 用于提取右边列的进位数字，即当前列的右侧列如果出现超过 12 位的数字时，则截取头部进到本列。Iferror() 用于检测是否进位。将进位数字和本列上一行数据乘二的结果相加后，再检测是否本列也多于 12 位，如果多则截取。公式引用关系如下：\n\n使用类似思想，可以精确进行一次数值变化不超过 1014 的大部分大数计算。需要注意的是，假如一次数值变化较大，则每单元格所能保留的位数就相应变小，不一定是 12 位了。\n应对问题一的要点有二， 一是自行实行截取与进位，二是利用 Text() 公式特性，保留截断后的首位 0 不丢失。我通常把这种处理办法称为『大数多列化处理』。\n问题二：数值上限大约在 21024-1，由于有效位数限制，实际上限更小一点，大约在 21023+21022+……+2971 ≈ 1.7977e308 左右。\n\n这与问题一不同点在于，这个问题不关注精确展开，而更关注公式计算过程中的上限值。当然，使用问题一中的办法也能解决本问题中的部分情况，但对于更大的数字，例如用尽 Excel 所有列（16384 列）也写不下的数字，大约 1016384*14 &#x3D; 10229376，问题一中精确展开的解法就无能为力了。况且在实际展开中，在装满 Excel 前就早早会遇到内存和 CPU 瓶颈了。问题二的解法注重于在有限的计算资源下计算尽可能大的数字。\n我们以计算 361 的阶乘为例，如果使用 Excel 公式直接输入 &#x3D;Fact(361) 则只会得到一个 #NUM! 的结果。意即该计算的值或者计算过程中已经出现了超过 Excel 单元格所能容纳的最大值。\n关于问题二的应对：我们在 Excel 中准备三列数字，A 列为从 1-361 的展开。C1 公式为 &#x3D;FLOOR.MATH(LOG10(A1))，B1 公式为 &#x3D;A1&#x2F;10^C1。\n从 C2 起公式为：\nC2=FLOOR.MATH(LOG10(B1*A2))C3=FLOOR.MATH(LOG10(B2*A3))C4=FLOOR.MATH(LOG10(B3*A4))……\n\n从 B2 起公式为：\nB2=B1*A2/10^C2B3=B2*A3/10^C3B4=B3*A4/10^C4\n\n于是形成如下形式：\n![1~P8Q1T0%@[@S4J1CS4Y&#96;U9](..&#x2F;attach&#x2F;2016&#x2F;03&#x2F;1P8Q1T0@@S4J1CS4YU9.png)\n即 B C 两列形成了类似科学计数法的 b × 10 c 的数列。但不同之处在于，C 列的所有值全部相加，才是整个计算过程的最终解，如图：\n\n即：361! &#x3D; B361 × 10 SUM(C1:C361) &#x3D; 1.43792325888489 × 10768，和上一篇博客对照一下，结果还是很精确的。\n仔细观察 B、C 两列数值，其实原理就是每当一个新的 A 乘进来，都对结果作一次科学计数法处理，形成 b × 10 c 结构，确保每一次都有 1&lt;b&lt;10，然后把乘方 c 扔在一边最后再相加。\n这一解法的关键在于在计算的每一步都即时处理，避免单元格数字过大而『爆掉』。通过这种方法，Excel 的可计算数域范围从大约 10308 变大到了大约 101,0000,0000,0000,0000，更大的数字则会产生 10 ~1000 倍甚至更大的误差。但如果对 C 列的数字再作问题一解法中的多列化处理，则可计算数上限大约会变成 1010229348 ，这里被迫用了幂的幂。这个数字相当大，并且实际不可能用到。早在这个极限之前，你的电脑内存估计就会挂掉。\n当然，因为有 VBA，Excel 理论上也可以做复杂大数字计算，但考虑到学习成本和应用场景，不如学习 Mathematica 来得方便了。一般使用 Excel 做计算，都仅限于操作单元格和自带公式可以解决的问题。\n","categories":["软件使用"],"tags":["excel","大数计算","精度上限","阶乘"]},{"title":"AWS Ubuntu 安装 PPTP VPN","url":"//aws-ubuntu-pptp-vpn/","content":"AWS 现在提供新注册帐号一年免费服务，1台1G内存30G硬盘的 VPS，每月 15G 流量，可以用来架 VPS 或者博客主机，虽然流量不大，但日韩机房的速度很不错。\n\n首先需要在主机配置面板的安全设置中，把入口流量防火墙的 1723 端口打开。否则配置正确也会被防火墙挡上。\n\n安装 PPTPD 服务。\nsudo apt-get updatesudo apt-get install pptpd\n\n编辑 pptpd.conf 配置文件。\nsudo vim /etc/pptpd.conf\n\n#其它的不用动，注意 option、localip、remoteip 三项即可option /etc/ppp/pptpd-optionslocalip 192.168.9.1remoteip 192.168.9.11-30\n\n\n编辑 pptpd-options 配置文件。sudo vim /etc/ppp/pptpd-options\n\n#refuse,require 五项通常都是默认的refuse-paprefuse-chaprefuse-mschaprequire-mschap-v2require-mppe-128#添加 Google DNSms-dns 8.8.8.8ms-dns 8.8.4.4\n\n\n编辑 chap-secrets 配置文件，添加 VPN 用户名和密码。sudo vim /etc/ppp/chan-secrets\n\n# Secrets for authentication using CHAP# clientserver secret IP addresses# 从前到后四项分别是用户名、PPTP/L2TP 选择、密码、允许连到该 VPN 的 IP 段，用空格或者 tab 分隔，用 * 表示通配kaikai * 123456 *\n\n\n打开 IP 转发sudo vim /etc/sysctl.conf\n\nnet.ipv4.ip_forward = 1\n\n需要重启服务：\nsudo sysctl -p\n\n\n添加 iptables 规则，这句根据服务商的不同会有不同，本句适用于 AWSsudo siptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n\n并添加到启动项中，以便服务器意外重启后继续正常工作：\nsudo vim /etc/rc.local\n\niptables -t nat -A POSTROUTING -o eth0 -j MASQUERADEexit 0\n\n\n配置完成，重启 pptpd 服务sudo service pptpd restart\n\n","categories":["命令行"],"tags":["vpn","ubuntu","Amazon AWS","配置"]},{"title":"HeidiSQL 的 SSH Tunnel 连接方式","url":"//heidisql-ssh-tunnel/","content":"\nHeidiSQL 是个挺好用的 Windows 下轻量级 MySQL &#x2F; Ms SQL &#x2F; PostgreSQL 客户端。官网地址：http://www.heidisql.com/ 。功能不写了，反正都差不多。 它提供的 SSH Tunnel 连接方式这里记一笔备忘。\nHeidiSQL 的 SSH Tunnel 连接方式其实就是先 SSH 连接到目标主机，再以目标主机的身份，连接到 MySQL 服务器。这有两种情况，一种是出于安全因素，数据库只允许本机或者有限几个 IP 访问，另一种是 MySQL 服务器和 SSH 目标主机在同一局域网内，而该局域网的多台机器只有 SSH 主机可以被外界直接连接。总之就是 MySQL 机无法被直接连接到，要通过 SSH 主机中转。\n\n在中小网站中，数据库只允许 localhost &#x2F; 127.0.0.1 连接是很常规的安全配置。但往往又存在需要后台操作数据的时候，于是有时会搭配 phpMyAdmin 这样的网页端方案，或者就是用 SSH Tunnel 这样的变通远程连接。\n所以 HeidiSQL 的连接设置在选择网络类型为『MySQL (SSH Tunnel)』时也有所不同，除多出一个 『SSH 隧道』选项页外，填写的参数也有变化。在 SSH Tunnel 模式下，设置页填写的是 SSH 主机如何连接到 MySQL 服务器.\nSSH 主机（不是本机）如何连接到数据库，很多中小网站的数据库只允许本地访问，则这里应当填写 127.0.0.1\n而 SSH 隧道页填写的则是 本机如何连接到 SSH 主机，由于 SSH Tunnel 依赖 Putty 软件包中的 Plink.exe 程序，所以需要指定 plink.exe 的位置，或者索性复制一个到 HeidiSQL 同目录下。同时，SSH 除用户名密码连接方式外，还有公私钥系统的连接方式，需要通过 Putty 软件包的 puttygen.exe 将私钥文件转成 Putty 专用的 .ppk 格式。\n本机如何连接到 SSH 主机\n填写连接到 SSH 主机的用户名、密码，如果使用私钥文件的话，密码可以为空。\n保存以后配置就完成了。并不需要去配置 Putty.exe 的任何内容。不知道为什么百度搜出来的好多博客都花了不少篇幅去写怎么配置 Putty，略扯淡。配置 Putty 与使用 HeidiSQL 并无直接关系。\n一句话总结：在普通模式下设置页填写的是运行 Heidi 的机器如何连接到目标 MySQL 服务器，而在 SSH Tunnel 模式下，需要先从运行 Heidi 的机器连接到 SSH 主机，再以 SSH 主机的身份连接到数据库服务器。\n","categories":["软件使用"],"tags":["HeidiSQL","plink.exe","SSH 隧道","SSH Tunnel"]},{"title":"VMWare 安装 Ubuntu 的一些豆知识","url":"//vmware-ubuntu-trivias/","content":"1. Ubuntu Family Mini ISO如果网络条件不错的话，安装虚拟机可以使用适用于 Ubuntu 全家族（Kubuntu、Lubuntu、Xubuntu、Edubuntu、Mythubuntu 等）的通用迷你 ISO。32 位或 64 位都有。\nhttps://help.ubuntu.com/community/Installation/MinimalCD （32 位或 64 位）\n这个 ISO 只有不到 40MB，在安装过程中会自动从网上下载需要的文件，并在某个步骤让用户选择桌面环境。本来 desktop 版 ISO 在安装时也会上网更新，所以这个 Mini ISO 能节约的时间还是不少的，体积小还易于本地保存。我的网络带宽上限速度大约是 2MB&#x2F;s，apt 源实际速度大约是 1MB&#x2F;s 安装完成费时和先用迅雷下完整 ISO 再安装再 update 差不多。顺便还能满足软件洁癖们。\n其实就是 Tasksel 整合安装器\n缺点也是有的，界面和 Server 版映像文件一样是纯英文，且有些步骤的默认选择是&lt;No&gt;，不能一路回车到底。所以得能看懂提示。安装步骤倒是和 desktop 版没区别，无非是语言地区、分区、用户名密码这几个选项。\n2. 命令行安装 VMWare Tools使用虚拟机下拉菜单的『安装 VMWare Tools』只会自动载入 VMTools 的 ISO 文件，需要自行解压 VMTools 安装包。\ncd ~ --当前目录sudo mkdir /mnt/cdrom --建立目录sudo mount /dev/cdrom /mnt/cdrom --加载光盘内容到这个目录tar -zxpf /mnt/cdrom/VMwareTools-*.tar.gz --解压到当前目录cd vmware-tools-distrib --进入安装包目录ls\n\n\n可以看到 vmware tools 安装包目录下有 vmware-install.pl，有时还有 vmware-install.real.pl。但由于 vmware tools 需要 gcc 来重新编译，所以在安装 vmware tools 前需要先确保 gcc 已经安装：\nsudo apt-get updatesudo apt-get install build-essential\n\n然后再安装 vmware tools\nsudo ./vmware-install.real.pl\n\n第一个问题问，现在有 open-vm-tools 了，是否还要用这个老的，默认是 no，选 yes。我试用了一下 open-vm-tools，缺陷依然太多，没法用。\n然后一路回车到结束。安装完成时提示你，如果是图形界面的话，需要手动启动 &#x2F;usr&#x2F;bin&#x2F;vmware-user，然后注销重登录。其实这步作用不大，系统关机下次再开效果是一样的。\n\n如果之前没有安装 gcc，有时就会出现以下情况：\ngcc 路径为空，无限循环无法往下\n这时需要用 Ctrl+C 中断，安装 gcc 后重新安装 vmware tools\n3. 安装 Google Chrome 不用翻墙因为下载浏览器的实际域是 dl.google.com，没有被墙。（北京联通）当然这个域名用浏览器是打不开的，因为它只提供下载，但知道路径的话就可以用 wget 直接下载了。\nwget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb --64位wget https://dl.google.com/linux/direct/google-chrome-stable_current_i386.deb --32位sudo dpkg -i google-chrome*.debsudo apt-get install -f\n\n4. 压缩虚拟磁盘，减少宿主机磁盘占用。虚拟机用得时间长了，虚拟硬盘文件会变大。VMware 提供了清理磁盘功能释放空间，在 Windows 下很正常，但在 linux 下提供的 vmware-toolbox-cmd 有 bug，并不能起到压缩作用，需要先用零数据覆盖磁盘，再使用 vmware tool 的磁盘清理功能。\nsudo dd if=/dev/zero of=zerowipe bs=1024x1024sudo rm zerowipesudo vmware-toolbox-cmd disk shrinkonly\n\n检查语言支持并补充安装，特别是使用 Minimal CD 在线安装的系统。安装语言选择控制面板：\nsudo apt-get install language-selector-gnome\n\n检查缺失语言：\nsudo apt install $(check-language-support)\n\n5. 减少 &#x2F;var&#x2F;log 体积sudo journalctl --vacuum-time=1d # 普通用户不看日志。要延长就改成 7d 或 30d\n","categories":["命令行"],"tags":["linux","disk","bean knowledges","miniISO","shrink","vmtools"]},{"title":"计算机里的随机数","url":"//random-in-computer/","content":"计算机中没有随机数。\n本文完。\n\n小游戏里的小随机如果做个打地鼠小游戏，要让地鼠从 9 个小洞里『随机』出现，不能挨个洞出来。简单办法是给九个小洞编上号 0-8，然后令 Holen+1 &#x3D; (4 * Holen + 4) mod 9。也就是乘 4 加 4，然后除 9 取余数。游戏开始，我们希望地鼠第一次从中间的洞，也就是 4 号洞里出来。所以 Hole1&#x3D;4。得到的结果是：\n4,2,3,7,5,6,1,8,0,4,2,3,7,5,6,1,8,0,4,2,3,7,5,6,1,8,0,……\n\n也就是地鼠会这样出现：\n\n看起来很规律，记一记就记住了。但把上面公式的几个常数放大，变成 Xn+1 &#x3D; (1103515245 * Xn + 12345) mod 231，序列就变成了：\n4,119106029,1583775792,1104372736,1199162368,546350080,1200489472,1420813312,2119975936,33629184,192185400,1547013152,339646976,1301529152,177825024,1578512704,703899648,1482405888,1629325312,151197696,1470195776,1593643776,1066092288,1743743744,1972027136,205882112,964884288,1603859968,320138752,342722112,654956928,……\n\n数字太大，做一下归一化。因为是 mod 231的结果序列，所以归一化也就是除以 231，得到：\n0.00000000190.05546306680.73750307410.51426362990.55840349200.25441408160.55902147290.66161775590.98719072340.01565980910.08949330080.72038413580.15816044810.60607174040.08280622960.73505225780.32777881620.69029903410.75871372220.07040691380.68461325760.74209821220.49643790720.81199395660.91829669480.09587132930.44930925970.74685549740.14907622340.15959241990.3049880862…………\n\n我们再次把这个序列处理回地鼠出现的序列，Floor(Xn*9)，得到：\n0,0,6,4,5,2,5,5,8,0,0,6,1,5,0,6,2,6,6,0,6,6,4,7,8,0,4,6,1,1,2,……\n\n来 1000 个：\n0,0,6,4,5,2,5,5,8,0,0,6,1,5,0,6,2,6,6,0,6,6,4,7,8,0,4,6,1,1,2,6,4,1,2,0,2,3,1,1,6,6,4,6,4,5,2,3,8,0,7,8,4,3,0,4,1,1,0,4,3,5,4,6,8,8,1,2,5,6,5,8,2,4,8,1,2,6,3,1,3,7,8,8,4,2,8,7,8,4,5,3,6,3,3,6,8,0,1,1,4,8,0,5,3,5,7,5,4,4,0,7,5,3,1,4,1,2,3,5,8,7,0,5,6,5,0,6,0,4,3,1,7,4,0,3,4,6,5,2,5,5,8,1,2,7,7,3,8,0,4,8,5,3,6,7,6,1,5,2,5,0,1,0,6,5,3,6,0,7,1,3,0,1,2,0,2,4,6,0,2,1,5,6,2,1,0,0,0,0,7,2,4,0,1,6,2,4,3,4,1,5,1,6,7,3,7,8,3,3,3,3,6,1,1,4,0,3,7,5,0,0,3,7,7,7,5,4,3,8,2,2,2,7,7,2,6,1,2,2,6,3,8,8,3,3,0,2,2,3,6,1,4,6,1,8,1,5,7,1,7,6,5,0,6,4,2,0,6,0,0,8,7,6,8,0,1,2,5,5,1,1,3,7,7,0,3,2,4,5,1,2,1,0,8,1,6,6,4,5,5,1,0,1,5,5,6,5,3,5,7,5,0,2,7,8,7,6,5,6,7,0,1,0,3,4,1,4,4,2,3,7,8,1,5,4,1,8,8,6,5,0,8,1,6,4,7,6,4,1,8,5,3,5,8,6,4,7,3,3,0,7,2,3,3,8,0,5,3,6,6,3,0,1,4,7,4,0,1,5,0,1,4,3,0,4,0,0,1,0,5,4,4,5,4,3,6,4,8,5,7,6,7,4,0,8,4,2,7,8,6,6,0,4,4,6,6,6,4,2,3,8,2,1,6,8,5,3,6,4,3,7,3,4,5,4,8,6,1,5,0,4,1,7,6,5,7,3,5,6,5,7,5,0,4,0,1,7,0,5,6,3,0,8,7,6,3,3,3,8,1,3,4,8,1,4,7,3,3,3,1,6,0,4,8,8,3,7,5,7,3,8,3,3,7,2,7,7,1,3,7,2,6,7,1,1,7,4,4,8,0,7,2,6,7,6,0,7,7,1,8,2,3,4,7,3,3,4,3,0,0,7,5,1,8,2,3,1,0,1,4,7,2,0,0,7,8,5,3,1,0,3,8,5,7,8,5,1,5,3,7,3,6,0,8,8,7,8,8,4,7,1,0,6,5,6,4,5,0,4,7,0,8,5,8,8,5,4,3,8,5,4,3,8,6,6,4,6,3,3,3,1,6,3,0,4,7,7,2,2,2,7,1,3,2,0,4,2,2,2,1,2,2,8,2,4,7,8,7,1,2,6,8,0,7,3,1,0,7,0,0,8,6,1,0,0,4,1,0,5,4,2,8,8,2,8,7,7,0,3,3,8,8,2,4,1,3,6,1,1,5,3,6,8,3,3,3,5,4,4,8,4,6,1,6,2,8,1,1,3,0,0,5,0,0,2,2,8,8,8,8,3,7,1,0,0,5,0,7,7,7,7,4,3,2,6,8,7,6,7,0,4,8,7,2,2,7,6,3,5,2,8,8,5,6,8,2,0,8,3,7,0,4,5,4,4,0,5,3,5,4,1,7,3,7,5,8,4,6,0,6,2,1,4,6,7,8,0,3,0,5,5,3,2,5,2,6,4,7,0,6,5,2,1,0,4,1,5,3,4,6,8,0,1,5,5,1,1,1,3,8,3,2,7,4,5,4,3,1,4,0,8,3,5,6,7,4,5,8,2,6,2,1,4,6,3,6,3,7,2,5,8,2,5,8,1,3,3,5,7,8,5,4,6,0,7,3,3,4,8,3,2,4,0,4,4,2,7,6,2,1,0,4,0,1,8,3,2,8,0,5,2,1,1,1,2,1,7,4,1,1,4,1,8,7,5,6,2,5,3,4,6,2,8,3,7,6,7,5,2,1,0,7,1,8,8,5,5,7,2,5,6,4,4,2,5,2,0,2,5,6,8,2,4,6,3,7,4,5,0,0,4,1,2,1,7,1,2,5,3,3,0,3,8,7,6,0,2,5,5,6,4,2,0,8,7,2,0,2,5,0,4,5,4,8,2,7,6,4,1,7,7,6,5,1,6,8,0,0,1,0,4,6,3,0,7,2,7,5,1,0,5,5,2,6,0,7,0,4,0,……\n\n这个已经足够『随机』了，发现不了什么明显的规律，统计上也符合平均分布。要说规律也是有的，就像之前 mod 9 于是出现了 9 个一循环一样。在把常数增大以后，这个序列的循环也变成了 231。\n因为打地鼠游戏中的『随机』的要求，只是无法让玩家找到并掌握规律。任何一个玩家都不可能打上 231 只地鼠，所以这个算法生成的『随机』已经足够了，截取其中一段完全符合打地鼠的要求。\n事实上， fn+1 &#x3D; (a * fn+b) mod c 正是一种很传统的计算机随机数生成法，称之为线性同余法，是使用最广泛也是最古典的随机数生成算法之一。随着时代发展和实际需求不断加深，更加严格的算法被不断发展出来，但线性同余由于算法简单，计算性能高效而又能满足很大一部分一般需求，依然是大部分编程语言 rand() 函数的默认实现方式。从公式可知这些随机数并不是真正的随机，总是会在 c 的范围内循环出现。当\nb 和 c 互素a-1 可被所有 c 的质因数整除如果 c 是 4 的整数倍，则 a-1 也是 4 的整数倍\n\n时，输出序列的周期为 c。只要保证 c 足够大，那么一般情况下是不会遇到周期性重复的。\n事实上 a&#x3D;1103515245, b&#x3D;12345, c&#x3D;231 正是 C 语言标准函数 rand() 所使用的几个常数。rand() 函数包含于 stdlib.h 头文件库中。\n种子从算法可知，假如 X0 不变，那么每一次执行程序，得到的“随机数据”其实都是一样的。执行两遍程序，得到完全样同的数据，重开一次游戏，NPC 的行为一模一样，这感觉其实并不怎么好。但从数学的角度上看，既然算法是一定的，那么每一步得到的数据也必然是确定的，如果初始值相同，那么后续的值也一定是相同的。甚至即使一个序列中断了，只要后续重新设定的种子值与中断前的最后一个值一致，那么这个序列就可以原样继续下去。\n换个角度看，只要用不同的初始值，我们就能得到不同的结果。\n这一初始值，被称为算法的『种子』(Seed)。最常用的种子数据大概就是使用系统的当前时间了，这是一个简单易用，必然存在，而且还时时刻刻在变化的值。可以让每时每刻产生的随机序列都有所不同。稍复杂一些的有 CPU 当前温度，用户鼠标的移动轨迹，键盘的击键速度等，属于不可预测的 Seed。\n『种子』这个词汇甚至不光是随机数据生成算法里有，加密解密算法、身份识别、图像算法等都有这一词汇的出现（当然下载界也有这个词）。对加密算法而言，种子数据往往是高度保密或者完全无法复现的了。前面说的鼠标键盘数据即属于此类。于是围绕种子值往往也会产生许多巧妙的奇思秒想与攻防破解，后文再述。\n随机与伪随机不光是线性同余，计算机里一切随机数生成方法实际上都是通过一定的算法生成的，区别只是在于算法复杂不复杂，种子的要求高不高，得出来的 结果能不能满足实际场景的需要。这些通过公式计算得到的“随机数”，有一个特定的名称『伪随机』(Pseudorandomness)。即，看起来像是随机的，实际却不是。但看起来随机往往就足够了。\n在有些场景里，这种通过计算机生成的伪随机算法会变得无法符合真实需求。\n\n大规模的理化生模拟实验，伪随机算法在统计上的瑕疵 可能 会影响到模拟实验的结果数据。\n ——由于实验可能会用到海量的随机数据，部分伪随机算法的规律性或者其它统计上的瑕疵正好撞上实验的检查项，就会导致实验结果的异常。\n\n程序员开年会，了解了随机数原理的程序员们纷纷表示不能被一个确定的算法影响了自己的『强运』。\n ——由于对年会奖品抽奖程序的不满导致年会现场变成 Code Review 大会的事情简直随处可闻。\n\n赌场这种胜负直接关系到利益的地方\n ——关于伪随机算法缺陷导致巨额损失的情况后文细讲。\n\n涉及到窃听与加密、远程控制肉机等可能造成反复利用的情况\n ——往往破解出一种加密方法，就可以进入大量的服务器，产生巨大的利益。\n\n\n这时人们会更倾向于使用常识中认为的『真随机数』，例如放射性衰变、电子设备的热噪音、宇宙射线的触发时间等等。比如专门提供这类服务的 random.org 网站，声称是通过测量大气噪音(Atmospheric Noise)获得的随机数据。相比于受到算法限制的数据，毕竟这些数据感觉更“随机”一些。\n当然，使用环境数据，则会受到测量传感器采样率的限制，数据的生成速度会受到影响。同时，很多自然环境数据也是连续渐变，或者服从一些确定的分布，随机性可能没有预想的高。比如 CPU 温度之类，在一定时间内的变化总是一条较为连续平滑的曲线。\n所以更务实的办法是混用两种情况，即使用一套设计良好的随机数生成算法，了解算法的适用场景，避开算法缺陷，同时使用环境数据作为 Seed。初始值『真随机』后，后续尽管是伪随机但也拥有了更大的不可预测性，在大量重复实验中会表现出来更多的随机性，也就有了更广泛的使用场景。\n“更随机”与“不那么随机”对『随机程度』概念的理解多少有点凭感觉。尽管数学上对随机和随机程度是有严格定义的，但引用《信息简史》里提及的，香农提出的例子，大概更容易让人理解『随机程度』的意思：\n\n·零阶近似一一完全随机的字符，其中不存在结构或依赖：XFOML RXKHRJFFJUJ ZLPWCFWKCYJ FFJEYVKCQSGHYDQPAAMKBZAACIBZLHJQD.\n·一阶近似一一每个字符与其他字符不存在依赖关系，各自的出现频率取在英语中的出现频率：字母 e 和 t 出现得较多，而 z 和 j 较少，且单词长度看起来也较接近现实。OCRO HLI RGWR NIMIELWIS EU LL NBNESEBYA TH EEI ALHENHTTPA OOBTTVA NAH BRL.\n·二阶近似一一不仅单个字母，双字母组合的出现频率也符合英语的情况。(香农从密码破解者所用的表格中，找到了所需的统计数据。英语中最常出现的双字母组合是 th ，大致每千个单词出现 168 次，紧跟其后的是 he, an, re, 和 er 还有相当数量的双字母组合的出现频率为零。）ON IE ANTSOUTINYS ARE T INCTORE ST BE S DEAMY ACHIN DILONASIVE TUCOOWE AT TEASONARE FUSO TIZIN ANDY TOBE SEACE CTISBE.\n三阶近似一一三字母组合也符合英语的情况。IN NO 1ST LAT HEY CRATICT FROURE BIRS GROCID PONDENOME OF DEMONSTURES OF THE REPTAGIN IS REGOACTIONA OF CRE.\n一阶单词近似REPRESENTING AND SPEEDILY IS AN GOOD APT OR COME CAN DIFFERENT NATURAL HERE HE THE A IN CAME THE TO OF TO EXPERT GRAY COME TO FURNISHES THE LINE MESSAGE HAD BE THESE\n二阶单词近似一一双单词组合以英语中期望的频率出现，所以不会出现上例中 “A IN” 或 “TO OF” 的情况。THE HEAD AND IN FRONTAL ATTACK ON AN ENGLISH WRITER THAT THE CHARACTER OF THIS POINT THEREFORE ANOTHER METHOD FOR THE LETTERS THAT THE TIME OF WHO EVER TOLD THE PROBLEM FOR AN UNEXPECTED\n\n衡量随机性的方法就是香农同学提出的信息熵概念。在这里没有必要展开论述计算方法，我们使用另一个例子来简单说明随机程度：\n这是一个来自 知乎 的巧妙方法，尽管局限性很大，但却一目了然：\n\n对于通过算法生成的随机数序列而言，在整个序列中多少会存在一定程度的『局部结构』。『结构』的存在和反复出现，就表明这一序列的随机程度较差。结构越多越密，随机度越差。上面两个例子都展示了这种『结构』的存在。结构是可以预测的，可预测的越多，随机性就越少。赌徒们大概更容易理解这点吧。\n生成方法与评价方法线性同余法\n线性同余法的公式非常简单，如果已知了足够长的结果序列以后，三个参数 a, b, c 也很容易反推出来。从数学上讲，任何一个可以被计算机运行的算法都必然有有限大的取值范围，既然范围有限，到最后必然会出现周期性循环。尽管如此，231（大约 21 亿）的循环周期也小了一点。尽管没人会去打 21 亿只地鼠，但是 21 亿粒子碰撞，21 亿次装备掉落等等都是很有可能出现的。线性同余法的优点在于高效简洁易于实现，能满足常规需求，但人们还是需要更复杂更随机的算法。\nMersenne Twister\n维基百科 上有比较详细的论述。它的循环周期为 219937 − 1，这是个梅森数所以才叫“梅森旋转”，和梅森本人大概是没啥关系。算法优点一是循环周期大，二是可以通过一些比较严苛的随机数测试，三是可以实现 1 ≤ k ≤ 623 范围内的 32 位精度 k-分布。\n缺点一是速度较慢，但在现有的计算机性能下常规运算不是太大问题。二是在一些特定的初始值下，输出的序列会有大量相似模式。也就是会出现初始值相似而输出序列大量相似的情况，这个比较要命。另外，它通不过 TestU01 等少数随机测试。\nMultiply with carryMWC 是 George Marsaglia 提出的方法，优点在于速度快周期特别大，大约有 260 到 22000000。缺点维基上没写，我猜测大概是结构较为明显，不适合的场景较多吧。OpenCV 使用了 MWC 作为随机数生成器，在图像领域，速度和周期确实是最重要的，相比之下，结构导致的缺陷并不重要且容易规避。\n其它维基百科上有专门的目录页提到了伪随机数生成器：https://en.wikipedia.org/wiki/Category:Pseudorandom_number_generators，而很显然这并不是全部的随机数生成程序。每一种伪随机算法都有自己的优点和缺点，适用于不同的场景。在一些简单场景下，设计人员也会使用更简化的，可以通过互质齿轮组机械结构实现的随机，比如：\n\n算法评价\n同时，当然也有各种针对伪随机数测试方法，去检验生成数据的质量（即随机性如何）。原理基本都是评测生成的序列是否符合必要的复杂性要求。这与无损压缩算法反而有某种异曲同工之处，毕竟压缩算法的目的就是寻找规律模式并且使用更短的片段去代替它。几乎所有的随机序列测试都是基于假设检验、广义傅立叶变换和复杂性测试，对一个已经生成的伪随机数序列进行检测，寻找模式，并评测结果。\n最简单的理解，如果你用 int(rand(0,255)) 一百万次生成了一个 .bin 文件，扔进 Winzip 里，结果体积压缩了一半，那么这个随机数生成算法就是非常不合格的。这跟上面的点阵图方式很相似。\n顺便附上还是从 知乎 同一问题下抄来的四原则：\n\nK1——相同序列的概率非常低K2——符合统计学的平均性，比如所有数字出现概率应该相同，卡方检验应该能通过，超长游程长度概略应该非常小，自相关应该只有一个尖峰，任何长度的同一数字之后别的数字出现概率应该仍然是相等的等等K3——不应该能够从一段序列猜测出随机数发生器的工作状态或者下一个随机数K4——不应该从随机数发生器的状态能猜测出随机数发生器以前的工作状态\n作者：DD YY链接：https://www.zhihu.com/question/20222653/answer/16482344来源：知乎\n\n说实话这四条只是原则，并不是任何一个实测的测试方法。单一的测试方法也无法涵盖各种可能性，所以一些比较有名的测试，Diehard Test、TestU01 等实际上都是测试包，包含了多种不同的方法，尽可能覆盖测试的方方面面。\n回到游戏计算机程序大部分都服务于确定的目的，不会有随机的成分存在。查字典不可能随机给解释，打字不可能随机出字，做帐目不可能随机变计算结果。那么什么地方需要随机？最常见的也就是游戏了，包括电子赌博。所以再回来说说游戏中的随机。\n『乱步』圆桌武士(Knight of the Round) 是个当年非常受欢迎的街机游戏，应该也是不少人的童年回忆。\n\n这款游戏后来被有心人研究出来被发现者命名为『乱步』的方法，类似以下这些规则：\n\n1.红色小兵（不戴头盔的，血少）a.砍开箱子出 800 分宝箱，他在地上滚动的时候，砍开 800 分，出魔杖。b.屏幕上如果有两个桶，先不开桶，等他在地上滚的时候，放血放死他，然后开另一个桶，再开 800 分的桶，再开 800 分，出魔杖。2.绿色小兵（戴头盔的）a.先吸引他跑动(不攻击)，如果他马上又跑动攻击的话，出刀时放血放倒但不要放死他，马上去开箱子。等他站起来踹气的时候，开 400 分或蔬菜盘，出地震法球(这种方法不能出杖，up)。b.在他在地上滚动时，放血放死他，然后开一个箱子，开里面的分或血，再开 800 箱子，开 800 分，出魔杖。3.胖子(Fatman)a.走 C 步时( C 形状的步子，步子很小也很快，就那么一下)，放血放倒他，马上开箱子，在他起来踹气时开 800 分，出魔杖。b.站在他前方等他冲跑过来攻击你，他冲的时候你马上站在他斜下的方向，他如果走向下走一步（只是 1 步），放血放死他，然后开两个箱子，再砍 800 分，出魔杖。4.大剑(Swordman)a.同样是观察它走 C 步，放血放倒它，马上砍 800 箱子，等它站起来就开 800 分，出魔杖。…………\n\n乱步的实质就是随机数规律被人掌握了。\n受限于街机主板不高的性能，游戏开发使用了比较简单的一个随机数发生器，实际的重复周期很小。同时还将宝物掉落、敌兵行动、主角行动等一系列需要随机的行为，全放在同一个随机数序列中。每一个需要随机的行为，都让这个序列往后走一格，一轮序列走完再从头开始第二轮。\n也是因此，玩家可以通过反复的的跳跃、放血大招等动作，来『快进』掉随机数序列中的若干位数字，到需要的位置，再劈砍宝箱，以获得指定的需要的宝物。如下图，当随机序列进行到 03 时，游戏中某个小兵根据该数字进行了冲锋动作，使用掉 03 这个数值。序列进行到 1C，被玩家用连续两次跳跃消耗掉两个随机数，使得随机序列当前值变为 0F。而 0F 对应于掉宝则为『魔杖』。\n即，用户根据一些游戏内的特别现象，通过自己的操作控制了掉宝内容。\n\n可是主角行动是个受玩家操控的行为，并不是一个需要随机的东西，为什么还会在随机序列中并影响到掉宝结果？\n有两个原因。一是为了让画面更富有表现力，游戏主角的动作会有多种画面表现。同样是跳，可以表现为前空翻跳，直立跳。同样是转身，一种先转头，一种先迈步，等等。而另一个原因仅仅是为了让序列更随机。没错，就像前文写过的那样，使用键盘击键、鼠标轨迹等算法外部的影响因素，可以让破解者更难以发现规律。当然，也可能两个原因都有。\n我猜测圆桌武士这个游戏就是第二类情况。由于玩家行动，尤其是多人游戏，多位玩家同时行动时，玩家行为的不可预测性甚至比有限机能下内部的随机数发生器更有效，这可以避免简单地被玩家发现『如果做了 A 接下来一定是 B』的规律，也避免了敌人行动永远一致的囧境。事实上在它的游戏生命周期内，几乎是整个街机的商业周期内，都运作得很好。直到电脑模拟器时代，才由几个多年孜孜不倦研究的玩家发现并完善了这份随机表。\n看起来，似乎让玩家动作可以影响随机序列是个坏主意，若玩家掌握规律，岂不是就可以通过自身动作来影响游戏掉宝等结果了么？但事实并非如此。『并非如此』不是说不影响结果，而是说在玩家动作里设置锚点以影响随机数序列，进而影响掉宝，并不是一个坏主意。\n因为在有限的机能和简单的算法下，规律始终是容易被发现的（参考第一节的打地鼠）。假如没有玩家动作影响，规律性的掉宝会让玩家非常容易就总结出形如『第二个箱子不打则第五个箱子必出 +100% 生命大血包』的结论，这会极大缩短游戏寿命。而将玩家动作引入后，即使是同一个玩家玩同一个游戏，两次行动也往往并不一致，于是相同游戏进展也就可能掉出各种不同的宝物了。另外，因为玩家并不清楚哪些动作被埋入了影响因子，因此也很难一开始就针对性的调整动作来尝试『探宝』。\n在引入玩家动作影响因素以后，什么时候规律才能被发现呢？一是某位玩家熟练到全套过关动作几乎一致时，他才容易发现掉宝似乎也表现出了某种规律性，从而开始探索对掉宝率的控制。这大概就是上面乱步表的由来。另一种是在游戏起始阶段，玩家的行为并不复杂，正好某个掉率也设置较高容易被随机到时，大量玩家的集体行为容易让规律暴露出来。一个第二关开头的水果盘砍出 +2 生命宝物的古老秘籍大概就是这么来的。\n而随着硬件性能的不断提升，这种要依靠玩家行为来产生游戏不确定性的情况越来越少了。该方法毕竟是把双刃剑，在可以不用的时候就不必使用了。现在使用任何语言，都有足够多现成的算法可用，并且硬件性能也足以支撑大量的计算了。唯一还需要讲究的大概就是种子值了。\n种子对齐种子和密码正好相反，密码要求前后不变以供核对，而种子则最好每次都不同，因为相同的种子必然产生相同的『随机』序列。如果种子是预先定义好的固定值，服务器每次重启后跑出来的都是相同的序列，开出一样的奖，显然是不合适的。\n相同的种子必然产生相同的序列。\n发现什么了么？\n这意味着，假如你知道某个随机算法的种子，你就拥有了预测能力，精确地知道每一次开奖的结果，就可以批量地安全地赢走电子赌博网站里所有的奖金。甚至就算你不知道种子，发现每次是相同的序列后，也会拿个纸笔记下来吧。在这层意义上，种子值和密码又有了相通之处——不能为人所知。\n好办，只要每次种子值都不一样连程序作者自己都不知道不就行了？\n——不是这样的。\n前文提到最常用的随机种子是时间戳。可是你服务器总要维护重启吧，甚至可能还有自动重启。假如你在凌晨 3:05 重启，直到 3:15 重新开始赌博抽奖。我就知道你这台服务器的赌博程序一定是在 3:05-3:15 之间启动的。假如你真的使用了时间戳作为种子，也一定是在这 10 分种里取的。10 分种，600 秒， 60 万毫秒。大不了把这 60 万个时间全部作为种子挨个跑一遍看哪个能对上你重启后出产的随机序列就好了。能对上的那个序列，对应的时间戳就是你的种子。然后就是原本计划的那样，安全批量地赢走网站里的所有奖金。\n好吧，不用时间戳了，使用 CPU 温度吧。同样也不安全，实际运行的机房计算机的 CPU 温度，我们就算它可能是 50℃ ~ 90℃ 吧，传感器温度有限，就算三位小数，那也就是四万种可能情况而已，挨个跑一遍就好了。奖金就到手了。\n要知道，计算机不依赖第三方，内部可以提供的变化数据其实就那么几种，而随机算法也只有那么几种。圈定了一个大致的范围以后，『大不了全跑一遍』来反推种子值，其实是非常有效的。相同的随机算法，相同的种子，必然产生相同的序列，于是你就获得了神的预言能力。\n那么假如使用外部数据呢，比如前文提到的 random.org。也可以通过 DNS 解析到假网站，提供自己预先准备好的『毒种子』进行攻击。尽管这个方法在 random.org 启用了 SSL 证书以后变得麻烦一些了，但还有更简单的攻击办法，就是让服务器无法访问该网站，直接让你拿不到网站提供的随机种子。\n网站总是要经营的，如果服务器一直无法正常运作，损失不比奖金被赢走小。既然种子对齐的目的是赢走奖金，那么当破解难度大到一定程度时，各种攻击勒索就变成收益更高的方式了。\n话题似乎跑远了，但其实本文讨论的核心是『计算机随机，够用就好』。当破解的难度大于勒索的成本，基本也就说明在随机算法这一层面，确实够用了。\n感觉的随机『够用』往往还有另一层意思。\n我们还是从掉宝率开始，假如一样极品宝物，比如屠龙宝刀 点击就送 在游戏内的掉率为 1%，这意味着大约杀 100 次 boss 会掉一把。作为一个通过反复击杀 boss 获取的装备，掉率 1% 本就是定位于每个人都能获取的高级装备。只要统计一下整个网游的怪物击杀量，就知道那是多么大一个天文数字.如果真要定位为全服稀有，那么掉率必然是几乎接近于零的。\n既然是普及型稀有装备，假如一个玩家每天可以杀 boss 一次，那么大约 100 天期望时间也就是三个月左右会掉一把，这也比较符合网游的更新周期。假如有 10 万人玩游戏，那么平均每天大约有 1000 人会获得该武器，通过游戏社区也会刺激其它玩家的游戏动力。随着游戏进程玩家的装备变好，击杀 boss 的速度越来越快，在版本的最后阶段变成例行公事一般，也可以满足游戏运营方对上线率存留率方面的要求。\n如果只计算粗放数据，以上一切看起来都很美好。但事实是：\n大约有 10,0000 * (1-1%)100 &#x3D; 36603 名玩家在三个月以后依然没有获得宝刀；大约有 10,0000 * (1-1%)150 &#x3D; 22145 名玩家在五个月以后依然没有获得宝刀；大约有 10,0000 * (1-1%)240 &#x3D; 8963 名玩家在八个月以后依然没有获得宝刀；大约有 10,0000 * (1-1%)300 &#x3D; 4904 名玩家在十个月以后依然没有获得宝刀；大约有 10,0000 * (1-1%)365 &#x3D; 2552 名玩家在一整年以后依然没有获得宝刀；\n对于这几千名玩家而言，怀疑游戏开发商虚假承诺数据做假，完全合情合理。在没有附加条件的 1% 随机掉率下，第一天拿到宝物的就有 1000 名玩家，而运气不好刷一整年都不出的有 2552 名玩家。如果我们考虑得更实际一点，不是每个人都天天刷游戏，实际都是新版本刚开火热一点，后面就是有时间上线没时间算了。那我们假设第一周七天天天刷，第一个月每周刷三次，之后丧失新鲜感失望情绪蔓延，每周只上线一次。则：\n大约有 10,0000 * (1- 99% 7) &#x3D; 6793 名玩家在第一周拥有了宝刀，一人多刀没用只算一把，每百人有 6.7 把。大约有 10,0000 * (1- 99% 16) &#x3D; 14854 名玩家在第一个月拥有了宝刀，每百人里有 14.8 把宝刀，三周涨了 8.1。大约有 10,0000 * (1- 99% 24) &#x3D; 21432 名玩家在三个月内有了宝刀，每百人里有 21.4 把宝刀，两月涨了 6.6。大约有 10,0000 * (1- 99% 64) &#x3D; 47440 名玩家在一年内有了宝刀，每百人里有 47.4 把宝刀，九月涨了 28.0。\n总比例造成未获得者的不快感蔓延，由于击杀频率的减少也导致存量增长下降。游戏根本撑不到一年。\n\n假如我们可以付费买 boss 复活再次击杀获得额外一次掉宝机会——就是花钱开宝箱，则需要 chance &#x3D; 1146 才能使得 10,0000 * (1-1%) chance &lt; 1，也就是说运气最差的哥们需要开一千多个箱才能获得这个 1% 几率的宝物。对他而言，这根本就是千分之一的几率。\n不患寡而患不均。不加限制条件的纯随机，对那些一次就出的幸运儿很不错，但整体而言其实给玩家的体验并不怎么好。如果有 10% 的几率，玩家可以容忍 20 次甚至 30 次不出，但如果 1% 的几率，能容忍 200 次的都是凤毛麟角。而前者 20 次不出的几率是 12.15%，后者 200 次不出的几率为 13.40%。越是低的掉率，无限制纯随机给玩家的体验就更不好。究其原因，在于人的感觉与概率的实际表现之间存在差异。人人都不觉得自己是最差的那个倒霉蛋，但总有人会填上这个位置。\n有两种截然不同的办法去解决这个问题。\n一种是尽量去掉这个位置，比如『积累胜率』。当玩家在一次抽奖不中后，略微提升下一次的中奖几率，如若继续不中，则继续提升，直到 100% 必中为止。例如初始 1% 每次提升 1%，那么再倒霉的人在第 100 次开奖时，面对 100% 的中奖几率也该中了。这样的 100 次才中的倒霉蛋，每十万人里大概会有 9.33×10 -38 人…… 嗯，十万人中最倒霉的倒霉蛋大约也会在第 45-50 次开奖时得到顶级装备，到不了 100 次。魔兽世界里 “幸运币” 的积累机制就是这么做的。\n另一种是分割并加大随机性，让这个倒霉蛋的位置被切分到几乎不可感知。暗黑破坏神 3 里的装备随机属性和随机掉落机制是这种方法的例子之一。对于暗黑 3 而言，一个人物身上有 13 件装备位置，每个位置都有十几种可能的掉落，但最合适的只有一种。而对于每一件特定装备，又是在十几种不同的属性列表中随机获得四到六种属性，每种属性又是在既定的数值上下限区间随机确定某个值。同时对于一个玩家而言，正常游戏在一小时内即可获得十来二十甚至更多的装备。\n尽管绝大部分装备都免不了被嫌弃，但通过这种 多装备+多掉落+极大随机 的模式，成功地把倒霉蛋的感觉切分到几乎不可感知了。玩家依然可以在论坛上看见别人的极品装备，但对于自己而言，身上也往往会有几件装备是过得去，勉强能让自己满意的，这已经能极大抚慰倒霉蛋们的感受了。\n所以有时候，我们反而需要减少一定程度的随机性，使得它感觉起来更随机。\n『We’re making it less random to make it feel more random.』\n英文那句不是我说的，是乔布斯说的。\n在一个既定音乐列表随机播放时，如果是不加限制的随机，经常会出现同一首曲目连续播放两次甚至更多次的情形。这事实上是很正常的事情，如果每次切歌都是从同一个长度为 n 的列表里选取一首，就意味着每次都有 1&#x2F;n 的几率选到和上一首相同的歌，于是就重复播放了。直接从播放清单移除听过的歌曲可以解决问题，但就和打乱列表的顺序播放没什么区别了。\n根据一些访谈所述，苹果 iPod 的随机播放程序是将不同歌手、不同曲风交错播放，让使用者感觉到每一首歌之间毫无关联，相当的“随机”。\n所以你看，科学计算需要的随机，和游戏需要的随机，和播放器需要的随机，和自然界的随机，其实都各有不同。\n算法服务于目的。\n","categories":["硬用数学"],"tags":["乱步","伪随机","圆桌武士","掉宝","游戏","计算机","随机"]},{"title":"ow.thnuclub.com 条目编辑规范","url":"//ow-thnuclub-com-edit-rule/","content":"1120 update：『下载时自动根据文本内容重命名』终于实现了。不能启用的请关闭 adblock 再试。1006 update: 添加 Ctrl+Enter 功能：提交当前条目，并自动跳到下一条编辑面板，方便连续编辑。0522 update: 在提交编辑文本内容时，会再播放一遍该音频，方便检查。12.11 update: 试图添加『下载时自动根据文本内容重命名』功能 失败了。原因是浏览器限制，跨域 a 连接中的 download 属性会被忽略。请勿再提类似需求。11.20 update: 请勿随意改动英雄标签，目前数据已经是通过客户端导入的正确数据了，除非你有非常确实的理由。比如为对话语音添加对话另一方是可以的，但猜测就不必了。\n\n感谢您的热心贡献。\n如果确信某个条目有错误或需要补充，请直接在页面上修改。\n由于音频资源是托管在国外的免费空间上的，因此 移动宽带 国内部分品牌宽带 可能 无法访问 ，请自行准备梯子。\n这篇规则说明并规范守望先锋在线音频小站 http://ow.thnuclub.com 条目编辑时的格式。这份规则不是强制的，但相同的格式有助于更好地回馈大家的贡献。\n基本格式：\n\n【黑百合】（对猎空）哦呵呵，似乎我们这次要合作了。【地图】【好莱坞】【导演】还要多久？真希望这玩艺还有轮胎。【源氏】竜神の剣を喰らえ（尝我龙神剑）（技能演示语音）\n\n细则：1. 发出语音的英雄名、地图名、特有元素名称，使用黑色方括号【】括起，放在条目开头。如果有多个元素则从大类到小类排列。\n2. 并未在语音内出现，但有助于说明场景的，比如对话另一方，触发条件等，使用圆括号（）括起，放在正文文本前。\n3. 并未在语音内出现，但有助于解释语义的，比如解释台词梗等，使用圆括号（）括起，放在正文文本最后。\n4. 非中、英文语音（岛田兄弟日文、查莉娅俄文、D.Va 韩文、堡垒蜂鸣器文等），有能力可以使用该语言原文，并使用括号配以中文翻译，放在紧邻正文文本后。无法写出原文的，用中文或（中文）。英语文本可以不配中译。\n5. 使用规范的英雄、地图、元素名称：莱因哈特 大锤 、查莉娅 毛妹 、路霸 猪 ，尽管小站有少量繁体与海外访客，但考虑到最大用户群和称呼一致性，还是以简体中文客户端的英雄名称为准。\n简体中文版英雄名称：堡垒，D.VA，源氏，半藏，狂鼠，卢西奥，麦克雷，美，天使，法老之鹰，死神，莱因哈特，路霸，士兵：76，秩序之光，托比昂，猎空，黑白合，温斯顿，查莉雅，禅雅塔，安娜，黑影，奥丽莎，莫伊拉。\n6. 优先贡献尚未有内容的条目，越往后翻新条目越多。尽量保证听译的准确，不确定的使用三个问号『？？？&#x2F;???』标记。\n7. 即使如此，您只要愿意贡献，依然可以无视以上规则。『黑百合 – （法语听不出来）』同样可以接受，留待别人去改进。\n标签：“标签”功能已经上线，齿轮面板是编辑音频标签，顶部面板是筛选标签。请留言建议，改进标签分类。\n编辑语音标签\n根据标签筛选\n尽管已经导入了一部分标签数据，但目前数据依然较少，需要您的鼎力相助。关于标签的编辑细则：\n1. 不确定的内容尽量都勾选。例如听出是女声，但不确定是猎空、D.Va 或者美的声音，则三位都勾选上，以增大曝光机率，更快地修正结果。此条部分废弃，现在涉及英雄的语音已通过拆解客户端导入了正确数据，不必猜测是哪位英雄了。尽管如此，技能音效、环境音效等依然需要通过猜测解决。此条已废弃。\n2. 对话的双方英雄都勾选上。由客户端拆解只能得到发出语音的英雄名，与其对话的另一名英雄，需要手动钩选。\n3. 语言数据来自于客户端本身（中英），尽管如此，对于源氏、半藏、小美等英雄，可以按实际情况添加标签，但请勿改动旧标签。\n4. 没有数据时，不会得到筛选结果，所以请勿询问为何搜索结果比标签筛选结果多。\n5. 堡垒的语音是不分语言的，中英完全相同。\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n由于音频内容增多，单个包的体积已经超出 github 限制，故不得不拆分为 256 个包了。\n打包下载地址，随版本更新，请使用批量下载工具：\nhttps://codeload.github.com/k6i/00/zip/gh-pageshttps://codeload.github.com/k6i/10/zip/gh-pageshttps://codeload.github.com/k6i/20/zip/gh-pageshttps://codeload.github.com/k6i/30/zip/gh-pageshttps://codeload.github.com/k6i/40/zip/gh-pageshttps://codeload.github.com/k6i/50/zip/gh-pageshttps://codeload.github.com/k6i/60/zip/gh-pageshttps://codeload.github.com/k6i/70/zip/gh-pageshttps://codeload.github.com/k6i/80/zip/gh-pageshttps://codeload.github.com/k6i/90/zip/gh-pageshttps://codeload.github.com/k6i/a0/zip/gh-pageshttps://codeload.github.com/k6i/b0/zip/gh-pageshttps://codeload.github.com/k6i/c0/zip/gh-pageshttps://codeload.github.com/k6i/d0/zip/gh-pageshttps://codeload.github.com/k6i/e0/zip/gh-pageshttps://codeload.github.com/k6i/f0/zip/gh-pageshttps://codeload.github.com/k6i/01/zip/gh-pageshttps://codeload.github.com/k6i/11/zip/gh-pageshttps://codeload.github.com/k6i/21/zip/gh-pageshttps://codeload.github.com/k6i/31/zip/gh-pageshttps://codeload.github.com/k6i/41/zip/gh-pageshttps://codeload.github.com/k6i/51/zip/gh-pageshttps://codeload.github.com/k6i/61/zip/gh-pageshttps://codeload.github.com/k6i/71/zip/gh-pageshttps://codeload.github.com/k6i/81/zip/gh-pageshttps://codeload.github.com/k6i/91/zip/gh-pageshttps://codeload.github.com/k6i/a1/zip/gh-pageshttps://codeload.github.com/k6i/b1/zip/gh-pageshttps://codeload.github.com/k6i/c1/zip/gh-pageshttps://codeload.github.com/k6i/d1/zip/gh-pageshttps://codeload.github.com/k6i/e1/zip/gh-pageshttps://codeload.github.com/k6i/f1/zip/gh-pageshttps://codeload.github.com/k6i/02/zip/gh-pageshttps://codeload.github.com/k6i/12/zip/gh-pageshttps://codeload.github.com/k6i/22/zip/gh-pageshttps://codeload.github.com/k6i/32/zip/gh-pageshttps://codeload.github.com/k6i/42/zip/gh-pageshttps://codeload.github.com/k6i/52/zip/gh-pageshttps://codeload.github.com/k6i/62/zip/gh-pageshttps://codeload.github.com/k6i/72/zip/gh-pageshttps://codeload.github.com/k6i/82/zip/gh-pageshttps://codeload.github.com/k6i/92/zip/gh-pageshttps://codeload.github.com/k6i/a2/zip/gh-pageshttps://codeload.github.com/k6i/b2/zip/gh-pageshttps://codeload.github.com/k6i/c2/zip/gh-pageshttps://codeload.github.com/k6i/d2/zip/gh-pageshttps://codeload.github.com/k6i/e2/zip/gh-pageshttps://codeload.github.com/k6i/f2/zip/gh-pageshttps://codeload.github.com/k6i/03/zip/gh-pageshttps://codeload.github.com/k6i/13/zip/gh-pageshttps://codeload.github.com/k6i/23/zip/gh-pageshttps://codeload.github.com/k6i/33/zip/gh-pageshttps://codeload.github.com/k6i/43/zip/gh-pageshttps://codeload.github.com/k6i/53/zip/gh-pageshttps://codeload.github.com/k6i/63/zip/gh-pageshttps://codeload.github.com/k6i/73/zip/gh-pageshttps://codeload.github.com/k6i/83/zip/gh-pageshttps://codeload.github.com/k6i/93/zip/gh-pageshttps://codeload.github.com/k6i/a3/zip/gh-pageshttps://codeload.github.com/k6i/b3/zip/gh-pageshttps://codeload.github.com/k6i/c3/zip/gh-pageshttps://codeload.github.com/k6i/d3/zip/gh-pageshttps://codeload.github.com/k6i/e3/zip/gh-pageshttps://codeload.github.com/k6i/f3/zip/gh-pageshttps://codeload.github.com/k6i/04/zip/gh-pageshttps://codeload.github.com/k6i/14/zip/gh-pageshttps://codeload.github.com/k6i/24/zip/gh-pageshttps://codeload.github.com/k6i/34/zip/gh-pageshttps://codeload.github.com/k6i/44/zip/gh-pageshttps://codeload.github.com/k6i/54/zip/gh-pageshttps://codeload.github.com/k6i/64/zip/gh-pageshttps://codeload.github.com/k6i/74/zip/gh-pageshttps://codeload.github.com/k6i/84/zip/gh-pageshttps://codeload.github.com/k6i/94/zip/gh-pageshttps://codeload.github.com/k6i/a4/zip/gh-pageshttps://codeload.github.com/k6i/b4/zip/gh-pageshttps://codeload.github.com/k6i/c4/zip/gh-pageshttps://codeload.github.com/k6i/d4/zip/gh-pageshttps://codeload.github.com/k6i/e4/zip/gh-pageshttps://codeload.github.com/k6i/f4/zip/gh-pageshttps://codeload.github.com/k6i/05/zip/gh-pageshttps://codeload.github.com/k6i/15/zip/gh-pageshttps://codeload.github.com/k6i/25/zip/gh-pageshttps://codeload.github.com/k6i/35/zip/gh-pageshttps://codeload.github.com/k6i/45/zip/gh-pageshttps://codeload.github.com/k6i/55/zip/gh-pageshttps://codeload.github.com/k6i/65/zip/gh-pageshttps://codeload.github.com/k6i/75/zip/gh-pageshttps://codeload.github.com/k6i/85/zip/gh-pageshttps://codeload.github.com/k6i/95/zip/gh-pageshttps://codeload.github.com/k6i/a5/zip/gh-pageshttps://codeload.github.com/k6i/b5/zip/gh-pageshttps://codeload.github.com/k6i/c5/zip/gh-pageshttps://codeload.github.com/k6i/d5/zip/gh-pageshttps://codeload.github.com/k6i/e5/zip/gh-pageshttps://codeload.github.com/k6i/f5/zip/gh-pageshttps://codeload.github.com/k6i/06/zip/gh-pageshttps://codeload.github.com/k6i/16/zip/gh-pageshttps://codeload.github.com/k6i/26/zip/gh-pageshttps://codeload.github.com/k6i/36/zip/gh-pageshttps://codeload.github.com/k6i/46/zip/gh-pageshttps://codeload.github.com/k6i/56/zip/gh-pageshttps://codeload.github.com/k6i/66/zip/gh-pageshttps://codeload.github.com/k6i/76/zip/gh-pageshttps://codeload.github.com/k6i/86/zip/gh-pageshttps://codeload.github.com/k6i/96/zip/gh-pageshttps://codeload.github.com/k6i/a6/zip/gh-pageshttps://codeload.github.com/k6i/b6/zip/gh-pageshttps://codeload.github.com/k6i/c6/zip/gh-pageshttps://codeload.github.com/k6i/d6/zip/gh-pageshttps://codeload.github.com/k6i/e6/zip/gh-pageshttps://codeload.github.com/k6i/f6/zip/gh-pageshttps://codeload.github.com/k6i/07/zip/gh-pageshttps://codeload.github.com/k6i/17/zip/gh-pageshttps://codeload.github.com/k6i/27/zip/gh-pageshttps://codeload.github.com/k6i/37/zip/gh-pageshttps://codeload.github.com/k6i/47/zip/gh-pageshttps://codeload.github.com/k6i/57/zip/gh-pageshttps://codeload.github.com/k6i/67/zip/gh-pageshttps://codeload.github.com/k6i/77/zip/gh-pageshttps://codeload.github.com/k6i/87/zip/gh-pageshttps://codeload.github.com/k6i/97/zip/gh-pageshttps://codeload.github.com/k6i/a7/zip/gh-pageshttps://codeload.github.com/k6i/b7/zip/gh-pageshttps://codeload.github.com/k6i/c7/zip/gh-pageshttps://codeload.github.com/k6i/d7/zip/gh-pageshttps://codeload.github.com/k6i/e7/zip/gh-pageshttps://codeload.github.com/k6i/f7/zip/gh-pageshttps://codeload.github.com/k6i/08/zip/gh-pageshttps://codeload.github.com/k6i/18/zip/gh-pageshttps://codeload.github.com/k6i/28/zip/gh-pageshttps://codeload.github.com/k6i/38/zip/gh-pageshttps://codeload.github.com/k6i/48/zip/gh-pageshttps://codeload.github.com/k6i/58/zip/gh-pageshttps://codeload.github.com/k6i/68/zip/gh-pageshttps://codeload.github.com/k6i/78/zip/gh-pageshttps://codeload.github.com/k6i/88/zip/gh-pageshttps://codeload.github.com/k6i/98/zip/gh-pageshttps://codeload.github.com/k6i/a8/zip/gh-pageshttps://codeload.github.com/k6i/b8/zip/gh-pageshttps://codeload.github.com/k6i/c8/zip/gh-pageshttps://codeload.github.com/k6i/d8/zip/gh-pageshttps://codeload.github.com/k6i/e8/zip/gh-pageshttps://codeload.github.com/k6i/f8/zip/gh-pageshttps://codeload.github.com/k6i/09/zip/gh-pageshttps://codeload.github.com/k6i/19/zip/gh-pageshttps://codeload.github.com/k6i/29/zip/gh-pageshttps://codeload.github.com/k6i/39/zip/gh-pageshttps://codeload.github.com/k6i/49/zip/gh-pageshttps://codeload.github.com/k6i/59/zip/gh-pageshttps://codeload.github.com/k6i/69/zip/gh-pageshttps://codeload.github.com/k6i/79/zip/gh-pageshttps://codeload.github.com/k6i/89/zip/gh-pageshttps://codeload.github.com/k6i/99/zip/gh-pageshttps://codeload.github.com/k6i/a9/zip/gh-pageshttps://codeload.github.com/k6i/b9/zip/gh-pageshttps://codeload.github.com/k6i/c9/zip/gh-pageshttps://codeload.github.com/k6i/d9/zip/gh-pageshttps://codeload.github.com/k6i/e9/zip/gh-pageshttps://codeload.github.com/k6i/f9/zip/gh-pageshttps://codeload.github.com/k6i/0a/zip/gh-pageshttps://codeload.github.com/k6i/1a/zip/gh-pageshttps://codeload.github.com/k6i/2a/zip/gh-pageshttps://codeload.github.com/k6i/3a/zip/gh-pageshttps://codeload.github.com/k6i/4a/zip/gh-pageshttps://codeload.github.com/k6i/5a/zip/gh-pageshttps://codeload.github.com/k6i/6a/zip/gh-pageshttps://codeload.github.com/k6i/7a/zip/gh-pageshttps://codeload.github.com/k6i/8a/zip/gh-pageshttps://codeload.github.com/k6i/9a/zip/gh-pageshttps://codeload.github.com/k6i/aa/zip/gh-pageshttps://codeload.github.com/k6i/ba/zip/gh-pageshttps://codeload.github.com/k6i/ca/zip/gh-pageshttps://codeload.github.com/k6i/da/zip/gh-pageshttps://codeload.github.com/k6i/ea/zip/gh-pageshttps://codeload.github.com/k6i/fa/zip/gh-pageshttps://codeload.github.com/k6i/0b/zip/gh-pageshttps://codeload.github.com/k6i/1b/zip/gh-pageshttps://codeload.github.com/k6i/2b/zip/gh-pageshttps://codeload.github.com/k6i/3b/zip/gh-pageshttps://codeload.github.com/k6i/4b/zip/gh-pageshttps://codeload.github.com/k6i/5b/zip/gh-pageshttps://codeload.github.com/k6i/6b/zip/gh-pageshttps://codeload.github.com/k6i/7b/zip/gh-pageshttps://codeload.github.com/k6i/8b/zip/gh-pageshttps://codeload.github.com/k6i/9b/zip/gh-pageshttps://codeload.github.com/k6i/ab/zip/gh-pageshttps://codeload.github.com/k6i/bb/zip/gh-pageshttps://codeload.github.com/k6i/cb/zip/gh-pageshttps://codeload.github.com/k6i/db/zip/gh-pageshttps://codeload.github.com/k6i/eb/zip/gh-pageshttps://codeload.github.com/k6i/fb/zip/gh-pageshttps://codeload.github.com/k6i/0c/zip/gh-pageshttps://codeload.github.com/k6i/1c/zip/gh-pageshttps://codeload.github.com/k6i/2c/zip/gh-pageshttps://codeload.github.com/k6i/3c/zip/gh-pageshttps://codeload.github.com/k6i/4c/zip/gh-pageshttps://codeload.github.com/k6i/5c/zip/gh-pageshttps://codeload.github.com/k6i/6c/zip/gh-pageshttps://codeload.github.com/k6i/7c/zip/gh-pageshttps://codeload.github.com/k6i/8c/zip/gh-pageshttps://codeload.github.com/k6i/9c/zip/gh-pageshttps://codeload.github.com/k6i/ac/zip/gh-pageshttps://codeload.github.com/k6i/bc/zip/gh-pageshttps://codeload.github.com/k6i/cc/zip/gh-pageshttps://codeload.github.com/k6i/dc/zip/gh-pageshttps://codeload.github.com/k6i/ec/zip/gh-pageshttps://codeload.github.com/k6i/fc/zip/gh-pageshttps://codeload.github.com/k6i/0d/zip/gh-pageshttps://codeload.github.com/k6i/1d/zip/gh-pageshttps://codeload.github.com/k6i/2d/zip/gh-pageshttps://codeload.github.com/k6i/3d/zip/gh-pageshttps://codeload.github.com/k6i/4d/zip/gh-pageshttps://codeload.github.com/k6i/5d/zip/gh-pageshttps://codeload.github.com/k6i/6d/zip/gh-pageshttps://codeload.github.com/k6i/7d/zip/gh-pageshttps://codeload.github.com/k6i/8d/zip/gh-pageshttps://codeload.github.com/k6i/9d/zip/gh-pageshttps://codeload.github.com/k6i/ad/zip/gh-pageshttps://codeload.github.com/k6i/bd/zip/gh-pageshttps://codeload.github.com/k6i/cd/zip/gh-pageshttps://codeload.github.com/k6i/dd/zip/gh-pageshttps://codeload.github.com/k6i/ed/zip/gh-pageshttps://codeload.github.com/k6i/fd/zip/gh-pageshttps://codeload.github.com/k6i/0e/zip/gh-pageshttps://codeload.github.com/k6i/1e/zip/gh-pageshttps://codeload.github.com/k6i/2e/zip/gh-pageshttps://codeload.github.com/k6i/3e/zip/gh-pageshttps://codeload.github.com/k6i/4e/zip/gh-pageshttps://codeload.github.com/k6i/5e/zip/gh-pageshttps://codeload.github.com/k6i/6e/zip/gh-pageshttps://codeload.github.com/k6i/7e/zip/gh-pageshttps://codeload.github.com/k6i/8e/zip/gh-pageshttps://codeload.github.com/k6i/9e/zip/gh-pageshttps://codeload.github.com/k6i/ae/zip/gh-pageshttps://codeload.github.com/k6i/be/zip/gh-pageshttps://codeload.github.com/k6i/ce/zip/gh-pageshttps://codeload.github.com/k6i/de/zip/gh-pageshttps://codeload.github.com/k6i/ee/zip/gh-pageshttps://codeload.github.com/k6i/fe/zip/gh-pageshttps://codeload.github.com/k6i/0f/zip/gh-pageshttps://codeload.github.com/k6i/1f/zip/gh-pageshttps://codeload.github.com/k6i/2f/zip/gh-pageshttps://codeload.github.com/k6i/3f/zip/gh-pageshttps://codeload.github.com/k6i/4f/zip/gh-pageshttps://codeload.github.com/k6i/5f/zip/gh-pageshttps://codeload.github.com/k6i/6f/zip/gh-pageshttps://codeload.github.com/k6i/7f/zip/gh-pageshttps://codeload.github.com/k6i/8f/zip/gh-pageshttps://codeload.github.com/k6i/9f/zip/gh-pageshttps://codeload.github.com/k6i/af/zip/gh-pageshttps://codeload.github.com/k6i/bf/zip/gh-pageshttps://codeload.github.com/k6i/cf/zip/gh-pageshttps://codeload.github.com/k6i/df/zip/gh-pageshttps://codeload.github.com/k6i/ef/zip/gh-pageshttps://codeload.github.com/k6i/ff/zip/gh-pages\n","categories":["开开开发"],"tags":["守望先锋","Overwatch","英雄语音","ow.thnuclub.com","更新规范"]},{"title":"新地图艾兴瓦尔德","url":"//overwatch-eichenwalde/","content":"更新完音频小站上线体验了一把新地图。\n艾兴瓦尔德，德国小镇，智械危机中莱因哈特所在的十字军死守的小镇。十字军在此一役中几乎全军覆没，但为后方大部队的集结争取了时间，人类从而获得了反攻的机会并最终赢得了胜利。（大概是这样的剧情吧）《最后的堡垒》短片里有一段回忆也和这场战役有关。莱因哈特在这地图上也有特殊相关台词。\n体验了几把，包括使用自定义跑图，感觉是对进攻方非常不友好的地图。大概是随着游戏被越来越多的玩家深入理解掌握，各地图进攻方的优势和胜率越来越大，逼得暴雪通过地图加强防御方了。\n但从全局看，这图怕是更难做到攻防平衡。\nA 点路口\n在所有的占点推车混合图里，这图是唯一一个 A 点只有一条直路可供大部分英雄通过的了，对于同类型的努巴尼，A 点有四条路线，任何一条路线都可以集体进攻。国王大道也有右侧二楼的集体路线。即使是好莱坞也有一个侧门，虽然对于鱼塘局作用不大但也偶有奇效，况且好莱坞大门处防守方掩体不足，很难死守大门，完全阻止进攻方突进英雄从左侧绕后。\n但这个新图真的差不多准心瞄准桥头就行了。桥左破房子翻过去也只能骚扰，很可能在没有技能时直接面对对面两三个英雄，右侧只有法拉 D.VA 能飞，并且也要耗费完主力技能（飞行）才能通过。占点圈也比其它地图小，并暴露在三处高点下。\n进攻方大部队我想不出什么其它策略，只能正面强冲。顶多就是利用温斯顿、法拉天使双飞、源氏、猎空之类的从桥上翻跃，勉强算是半个绕后。但温斯顿单重装强冲往往瞬死，如果想再加上查莉娅盾、禅雅塔谐，那么查莉娅和禅雅塔还是得从桥下经过，落单反而更容易死。对于水平相当的对战，很难想通过源氏、法拉等个人超水平发挥来牵制两名以上防守方英雄足够长的时间，让剩下 5 名队友获得足够长时间的人数优势从而压制并控制桥洞。\nA – B （城门）运载路线\n运车路线全程都很狭窄，并且左右优势高地众多。进攻方由于必须推车，并没有很好的分支路线选择，顶多就是源氏法拉略微脱离人群打开视野，而防守方却有多个选择，甚至可以集体绕后或居高临下强冲。尤其是 A B 点之间那段路，对进攻方简直是恶梦。前半段几十米路有三个弯曲，暴露在至少五六处不同高地的火力覆盖范围内，防守方登上城墙以后不用绕直接就可以突袭进攻方后方辅助位。同时路线狭窄，查莉娅大招、小美大招甚至温斯顿大招都可以分割整条道路。这前半段是少有的防守方可以在任何位置都可以主动寻求开团的地图版块了，比好莱坞 A B 段还强硬，至少好莱坞两个房顶只能占一个。\n后半段则是奈何桥，这桥防守方重生路线比进攻方略短，交换人头会积累微弱的优势，同时左侧的城墙高点还能发挥作用，进攻方要上城墙需要从左边绕一大圈，而防守方只是顺路。进攻方需要尽量避免在桥上长时间作战，被迫作战也要尽量以攻城锤为掩体，否则全场最佳大概就会变成法拉的了。对鱼塘局而言，有大门遮挡视野，防守方重生英雄很难中途被截，必然可以赶到战场，而进攻方重生英雄则要面临整条路线上的任何可能位置的埋伏。\n这段路线尽管非常短，差不多是所有地图中最短的一条，但同时也是最易守难攻的一段了。\nB – 运载终点\n这段防守方的优势没有前面的大了但依然存在，一是拐弯左侧小道利于防守方，二是依然狭窄的道路对于防守续命英雄（温斯顿、美、D.VA 等）也都是利好。但其实在我看来，这段路线对进攻方的最大压力已经不在于地形，而在于经过前两段路以后，捉襟见肘的剩余时间了。\n总结\n主路小，几个关键关卡点没有分路，繁多的支线和立体地形，使得防守方的优势极其巨大。由于鱼塘局和高端局在攻防配合上的天然差距，这图会成为鱼塘进攻方的恶梦，同时对于高端局而言，也因为存在过大的不确定性，导致 Banpick 中被选出的可能性较小。\n源氏、法拉等立体机动性英雄和狂鼠等封路英雄优势较大，而猎空却受限明显，黑百合在 A 点桥门和 B 点奈何桥的争夺中可以当奇兵一用（狙掉两个，强冲一波）。\n由于制作地图工程量巨大，后期也很难修改，所以猜测暴雪会在日后加快推车速度以平衡一下鱼塘进攻方的劣势，不会修改地图本身。但由于高端局和比赛是『一次团战胜利推一段』的模式，较短的路线和加快的车速又会变成进攻方的优势。就是说，这个地图放大了配合推进的重要性，导致鱼塘和比赛的攻防胜率更加割裂。不知道暴雪之后会怎么处理，会不会出现加快 AB 段车速减慢 BC 段车速的奇葩情况。拭目以待。\n","categories":["游戏中心"],"tags":["守望先锋","Overwatch","艾兴瓦尔德","Eichenwalde","地图","更新","体验"]},{"title":"没有未桥接的主机网络适配器","url":"//no-unbridged-host-network-adapters/","content":"问题：安装 VMWware 的机器，在打开虚拟机时无法以桥接方式连入网络，使用虚拟网络编辑器，则提示『没有未桥接的主机网络适配器』。\n解决办法：\n打开控制面板\\网络和 Internet\\网络连接\n右键本地连接\\属性\n\n删除 VMWare Bridge Protocol，如果有共享设置，则所有项目都取消钩选，然后确定。\n从开始菜单打开虚拟网络编辑器，点击左下角『还原默认设置』。\n\n搞定。\n","categories":["软件使用"],"tags":["vmware","桥接"]},{"title":"盗号开挂被封责任是谁的？","url":"//who-responsible-blocked-stolen-accounts/","content":"最近一段时间守望外挂封号频率变快，吃瓜群众们顺带就发现了另一乐趣：『看演员』。即是围观被封号的人员是如何花样百出地去论坛控诉他们是『被误封』的。我也去了。可不是嘛，挺开心的。\n绝大部分的申冤理由最后都集中到了『被盗号开挂』上，毕竟这大概确实属于最能彻底撇清责任的理由。帐号被盗并非拥有者意愿，而被盗期间主人对帐号失去了控制权，造成的影响也应当与主人无关，既然两个环节都并非号主意愿，那么号主自然不应当承受处罚。我觉得这个申诉理由确实有点意思，就记一笔理一下这里的逻辑好了。\n『帐号被盗开挂被封』，仔细想想这八个字背后的逻辑其实挺复杂的。为了说明问题逻辑，不妨先来看一下另一个例子：\n你买了一辆汽车，一切手续完备资格有效，各种费用包括保险费交通费全部交清——这完完全全是你的东西，别人找不到一丝茬。然后你某天下车没有关好门，一个无业混混一拉车把，门就开了。他坐进去打算开一把过瘾，然后就撞死了个老太太，要赔 30 万。\n你忘了关车门，混混偷了你的车撞死了人。好嘛，这事怎么了结？\n一般来说，首先是分配责任。混混偷车还撞死人当然是主责，但你确实也忘了关门，次要责任肯定得担一些。至于比例多少基本就是法官定度了，就假设是二八开吧。于是理论上你承担 6 万，混混承担 24 万。在结案以后，汽车会还给你。至于洗车费做法事香火钱，那得你自己出。\n这个例子可以有诸般变化，比如你能证明你没有疏忽，已经尽到了保管责任，有监控录像证明你确实停在车库并且锁了门，混混是自己撬门开的。那你很幸运的不用承担责任，理论上还可以找混混要求赔偿修车钱。又比如混混还未成年，你停车的地方又是学校附近，可以预见到这里未成年人多。那你忘关车门甚至可能成为主责。再比如混混出车祸一块死了。那你就安心赔上 30 万给老太太家属，说不定还得另赔 30 万给混混家属。\n但就算是一堆废铁了，车还是会还给你。如果你还要，记得付拖车费。\n所以照这么说，帐号&#x3D;车，应该还你罗？\n这里的最大区别，其实恰恰就在于帐号不等于车。\n你对某辆车拥有『所有权』，意味着对这车拥有一切处置、支配的权力，改了拆了砸了埋了卖了，都行。除非法律明确禁止，比如做成汽车炸弹。但退一万步说，法律也只是禁止你危害公共安全，并不禁止你对汽车进行改装，哪怕是改造成炸弹。\n实物商品的复制需要和原型等量多的材料，还需要同等的加工和运输，凝聚了诸多人类劳动，因而我们可以将每一辆车看作独立物品，并单独分配所有权。但软件不同，软件存在一个实物没有的特点，『零成本复制』。无论是代码也好，小说也好，本质上都只是一段特定的排列顺序。软件作者，小说也好，所做的工作本质是排出这段序列而已。排列是困难的，排出来了，接触到的人想要照着再排一次，却毫不费力。\n为了对抗这种情况，人们发明了版权。一旦某个序列排好，作者就可以宣称对这样一段序列有所有权。全世界任何一个地方，只要出现相同的序列，作者就拥有所有权，这就是版权的本质。实物的『复制』有成本，所以所有权可以分配到物。序列的复制无成本，则所有权索性不可分割，全部属于创造者。\n而客人购买的，是『接触、阅读或者使用这段序列』的权利。说人话，就是买了软件的使用权，或者书本的阅读权。对于书籍而言，作者把『一段排列好的文字』通过卖实体 &#x2F; 电子书的渠道，展现在你面前。展现的期限通常都是永久的，但也存在『租书』这种有时限的情况。软件同理，你购买的是限时或者永久使用这段代码的权利。\n因为所有权永远是作者的，所以『复制』作为对原型的一种处置，自然也只有作者拥有这一权利。这样就从法理上，确定了未经作者许可的『复制』（也就是盗版）是侵犯作者权力的。同时，尽管在绝大多数情况下使用时长是永久的，但购买使用权本身更像是一种『租赁』。你花钱在某网吧办了『牛逼会员』，终身免费上网，也终归只是一种特殊的包时上网，并非就拥有网吧了。\n回到守望这事上。你花 198&#x2F;328 购买的，首先并不是软件的『所有权』。如果你对守望有了『所有权』，则暴雪网易反过来需要向你交纳使用费了，这显然不成立。没有所有权，就排除了『任意处置』的权利。顾客购买的并非所有权，则如何使用，需要根据买卖双方的约定执行。\n你把钱交给暴雪，暴雪允许你复制它的客户端，连上它架的服务器，获得愉悦。所以你购买的是『使用名为守望的这段代码获得娱乐』的权利。时长名义上是『永久』，实际上是暴雪公司的寿命。服务器本质上也只是另一段代码，客户端和服务端代码一起，才能整个正常运行起来。\n讲到这里，就涉及到核心问题了：盗号开挂该不该封？\n暴雪拥有守望的『所有权』，并分割出了很多份不同的『使用权』，一个客人通常会购买一份使用权，但真想要购买多份也可以（小号）。每一份使用权都在顾客和暴雪达成约定后获得，约定内容包括：\n\n支付一定的金钱（就是花钱买）。\n为客人准备一份使用权，并准备相应的服务资源。（例如每卖出一千份多开一组服务器）。\n约定这份使用权的帐号密码，包括密保等，通常由客人自行完成（注册帐号）。\n若干条使用权的限制（也就是用户协议），通常包括不可共享、反编译等，当然也包括不可开挂。\n\n在这一逻辑下，帐号密码只是链接暴雪和玩家的一个环节。它本身并不是出售的使用权的一部分，而仅仅是用来和玩家约定，谁可以使用这份『使用权』而已。也就是说：\n\n对于玩家，主观感觉可能是：花了 198 &#x2F; 328，买了一个游戏的使用权，只有我能用，别人用不算。\n对于暴雪，客观的逻辑则是：某一份特定的『使用权』已经售出。自己准备好了相应的服务资源，并和客人约定了使用这份资源的口令。当然，口令可以由双方约定得很复杂（安全令&#x2F;异地IP限制），并且暴雪也建议约定得足够复杂（绑安全令送 WOW 宠物）。但用户依然可以约定得很简单。\n\n对于暴雪而言，确认身份的唯一方法就是口令，只有拥有口令才能获得『使用权』，只要拥有口令就能拥有『使用权』。而惩罚也是针对『使用权』在行使过程中的不当行为作出的，根据情节轻重，会暂停提供使用权，几天到永久不等。也就是说，对于暴雪而言，只是针对每一份『使用权』的不当行为，削减该份『使用权』的时长罢了。\n由于事先约定了口令，自然拥有该口令的连接，必须可以访问该份『使用权』。盗号者当然犯了冒用他人身份的罪，然而之所以说“冒用”，正是因为只有当事人才知道是假的，而对于善意的第三方而言，这个身份是正确有效的。\n一个有效『使用权』做出了不当行为，于是削减该份『使用权』的时间。\n一个有效『使用权』开了外挂，于是削减该份『使用权』所有剩余时间（即封禁）。\n由冒用身份而对事主造成的损失，由冒用身份的人负责。假若在核对口令检查身份时服务方有疏忽，则服务方也有责任。也就是说，如果你不但可以证明是有人盗用你的帐号开的挂，并且还能证明暴雪在验证帐号密码上有疏忽（比如明明开了将军令没却没验证 &#x2F; 错误的用户名密码也可以登录），那么确实有理由解封。但假若在验证帐号密码上没有疏忽，则你的损失应当向冒用身份的人去追索，而与服务方无关。\n以上只是逻辑上而言的，但在现实中其实还有更强大的约束存在——购买时的事前约定，也就是用户协议。当用户协议与法律不冲突时，该协议无论从人伦视角来看多么过份，依然是受法律保护的有效协议。因为这是最顶层的“事前约定”。至于怎么看用户协议，就不用多说了。\n","categories":["唠唠叨叨"],"tags":["封禁","开挂","盗号","责任"]},{"title":"Overwatch Toolchain 解包方式考察","url":"//overwatch-toolchain-test/","content":"\n理想状态的英雄语音音频源文件，应该是这样的：\n\n有一个比较标准的文件名（Filename），以英雄名字起头，文件名自己就包含了一些有用的分类信息。有一个配套的文本文件（Dictionary），里面写好了每个音频对应的台词（Text），我们直接可以查找替换复制粘贴。有一套分类详尽的标签（Tags）列表，里面详细地给每个音频分好了类，我们可以方便地根据这些标签进行筛选、处理、归档。这些理论上 Blizzard 应该已经做好了放在客户端里，我们只要解压了就能拿来用。\n但事实上并不是这样的，CASC 是 BLZ 私有的加密格式，目前并没有很好的手段可以完美解压，实际解出来的结果大概是这样的：\n\n这种 32 个数字英文组成的字符串称之为 filehash，可以简单理解为一种特殊的文件名。这种名字没有实际意义，仅仅表示『这个文件和那个文件是不同的』。\n所以，比『什么都没有』稍微好点，我们有了『不知道是什么的一堆文件』，稍后我们又通过文件格式识别软件，找出了其中的音频部分，并转换成了可以播放的 mp3。于是我们得到了『不知道是什么的一堆音频』：\n\n情况没有本质变化，但我们有了一大包知道是 mp3 的文件以后，我们就可以 手-动-听-写-打-标-签 了。\n于是情况变成了这样：\n\n这就是 http://ow.thnuclub.com 这个小站现在正在做的事情。全世界想的办法都一样——先解出来能播放的，再人工一个一个挑。幸运的是，吃瓜群众撸袖自己上，一不小心撸出了全世界最好的守望音频网站。\n\n昨天 nga 有网友（青龙圣者@ngacn.cc）推荐了 toolchain 系列解压软件。这个软件在小站建站之初是没有的。现在看来，它有优点也有缺点，但前景似乎不错。\ntoolchain 使用的还是 zezula 的 CASCLib 开源库，但库版本更新了不少。因此比 cascview 能多解出一些信息，具体地来说是有了目录和文件类型，有目录就意味着可以自动完成一部分标签。但缺点是引入了另一套也没啥意义的文件名系统。于是情况变成了这样：\n\n小站的旧数据有 Text 内容，而 toolchain 有相对比较准确的标签分类。但因为两边的文件名对不上，所以不知道哪个对应哪个。\n再仔细验证以后，发现 toolchain 解压的文件是可以计算得到 filehash 的，于是又变成了：\n\n这是目前所能获得的最大的成果了。\n进一步分析发现，toolchain 解压出的音频总数较少，也就是：\n\n原因可能是 toolchain 的作者的关注重点并不在音频上，因而把原始数据中暂时未分析的部分直接抛弃了。而 CascView 则以解压优先，并未抛弃数据。\n总结：\n\ntoolchain 通过目录结构间接提供了较为准确的英雄分类 tag，可以补充修正现有小站全靠人工听写的标签数据。\ntoolchain 目前仍然没有解出音频对应的文本，而目前音频文本（Text 数据）依然是最宝贵的劳动成果，也是 ow.thnuclub.com 小站存在的最大价值。暂时还没办法由 toolchain 自动化解决，期待未来某天可以彻底解决。那时小站大概就可以关闭了。\ntoolchain 引入了另一套文件名，但可以通过计算得到 hash 值与旧数据对应起来。\ntoolchain 的数据分类更细致，但总量较少，新的文件名系统无甚作用，且构成规则不明。因此也没有必要跟随 toolchain 的命名方式。\ntoolchain 可解压出 *.mdl、*.dds 等文件，对视频制作者、签名档、头像等很有作用，但对于既有的音频内容，所助仅限于标签分类数据。\n对于一些特殊的标签数据，例如莱因哈特的台词『Many of my comerads fell in battle here, may they rest in peace.(我的许多同伴在此牺牲，愿他们安息)』只会在艾兴瓦尔德这张地图出现，因此较完美的 tag 应当是『莱因哈特,英雄,艾兴瓦尔德,地图,入场』，这个是 toolchain 也无法提供的，只能依靠人工标注。\n\n因此，在现阶段 toolchain 还不成熟的情况下，暂时还没有必要修改小站现有的数据结构和使用方式，只需要把 toolchain 提供的目录结构，转化成较为准确的 tag 数据补充到小站上即可。相比于 toolchain 构成规则不明的文件名系统，可以通过计算得到的 filehash 系统通用性也更好一些。\n\n接下来的工作：\n\n计算 toolchain 获得的所有音频文件的 hash 值，如果有软件可以直接带子目录列表输出 csv 就好了。\n根据目录路径给 toolchain 所有音频文件打上英雄分类&#x2F;地图分类 tag。\n合并到现有小站数据上，需要解决英雄标签冲突，并尽可能保留有效信息。\n但合并 tag 也可能导致形如『【天使】I feel unstoppable.』这类音频中的安娜标签丢失。具体处理办法还需要考虑。\n\n\n更新完成。\n","categories":["开开开发"],"tags":["守望先锋","Overwatch","英雄语音","ow.thnuclub.com","toolchain","CascView"]},{"title":"Ubuntu 安装 scrapy 及 pip upgrade 时的各种依赖问题","url":"//issues-ubuntu-pip-upgrade-and-install-scrapy/","content":"安装 Scrapy 时遇到了依赖问题，使用 pip 时又发现自带的基础 py 包同样依赖不全，后一并 Google 解决，记一笔备忘。\n首先安装 PIP，即 python 的包管理器。\nsudo apt-get install python-pip\n\n由于 ubuntu 官方库提供的 pip 不是最新的，因此需要先 upgrade 自己：\nsudo pip install --upgrade pip\n\n此时如果你直接试图安装 scrapy 是会出错的：\nsudo pip install scrapy.........    error: command &#x27;x86_64-linux-gnu-gcc&#x27; failed with exit status 1    ----------------------------------------Command &quot;/usr/bin/python -u -c &quot;import setuptools, tokenize;__file__=&#x27;/tmp/pip-build-Cs9KYN/cryptography/setup.py&#x27;;f=getattr(tokenize, &#x27;open&#x27;, open)(__file__);code=f.read().replace(&#x27;\\r\\n&#x27;, &#x27;\\n&#x27;);f.close();exec(compile(code, __file__, &#x27;exec&#x27;))&quot; install --record /tmp/pip-a5Rs1Z-record/install-record.txt --single-version-externally-managed --compile&quot; failed with error code 1 in /tmp/pip-build-Cs9KYN/cryptography/\n\n原因是 scrapy 需要抓取网页因而要处理 https，而处理 https 又依赖加解密算法（即 cryptography 包），而 cryptography 又依赖傅立叶变换的算法以及相应的编译环境。Ubuntu 16.04 默认没有安装 libffi-dev 和 libssl-dev，gcc 也不一定安装，而 scrapy 包又没有将相关软件包记到依赖列表里，因此需要先手动安装：\nsudo apt-get install libssl-dev libffi-dev python-dev build-essential libxml2-dev libxslt1-dev\n\n然后再安装 scrapy 即可顺利完成。\n\n顺便，由于更新强迫症，一并把 pip 自带的包均更新了一遍。pip 没有 apt 那么好用的 dist-upgrade 命令，需要先手动列出旧包然后逐项更新：\n&gt; pip list --outdatedblinker (1.3) - Latest: 1.4 [sdist]colorama (0.3.2) - Latest: 0.3.7 [wheel]Flask (0.10.1) - Latest: 0.11.1 [wheel]html5lib (0.999) - Latest: 0.999999999 [wheel]Jinja2 (2.7.3) - Latest: 2.8 [wheel]ndg-httpsclient (0.3.2) - Latest: 0.4.2 [sdist]numpy (1.8.2) - Latest: 1.11.2 [sdist]Pillow (2.6.1) - Latest: 3.4.2 [sdist]pyasn1 (0.1.7) - Latest: 0.1.9 [wheel]pyinotify (0.9.4) - Latest: 0.9.6 [sdist]pyOpenSSL (0.13.1) - Latest: 16.2.0 [wheel]pyserial (2.6) - Latest: 3.2.1 [wheel]requests (2.4.3) - Latest: 2.12.3 [wheel]setuptools (5.5.1) - Latest: 30.2.0 [wheel]six (1.8.0) - Latest: 1.10.0 [wheel]spidev (3.0) - Latest: 3.2 [sdist]twython (3.1.2) - Latest: 3.4.0 [sdist]urllib3 (1.9.1) - Latest: 1.19.1 [wheel]Werkzeug (0.9.6) - Latest: 0.11.11 [wheel]wheel (0.24.0) - Latest: 0.29.0 [wheel]\n\n这些 Py 包可以直接升级：\nsudo pip install --upgrade blinkersudo pip install --upgrade coloramasudo pip install --upgrade Flasksudo pip install --upgrade html5libsudo pip install --upgrade pyasn1sudo pip install --upgrade pyinotifysudo pip install --upgrade pyserialsudo pip install --upgrade requestssudo pip install --upgrade setuptoolssudo pip install --upgrade sixsudo pip install --upgrade twythonsudo pip install --upgrade urllib3sudo pip install --upgrade wheel\n\n这些 Py 包需要先安装 libssl-dev、libffi-dev、python-dev 以及 build-essential 以后才能升级（其实都是因为要依赖 cryptography）：\nsudo apt-get install libssl-dev libffi-dev python-dev build-essentialsudo pip install --upgrade ndg-httpsclientsudo pip install --upgrade numpysudo pip install --upgrade pyOpenSSLsudo pip install --upgrade spidev\n\n这些 Py 包需要先安装 python-dev 以及 libjpeg8-dev 以后才能升级：\nsudo apt-get install python-dev libjpeg8-devsudo pip install --upgrade Pillow\n\n解决。\n话说 numpy 的编译时间真是长啊……\n","categories":["命令行"],"tags":["pip upgrade","scrappy","build-essential"]},{"title":"Windows 10 下清理 WinSxS 很有用的一条命令","url":"//useful-command-cleaning-winsxs-from-microsoft/","content":"更新：DISM++ 已经减缓了更新频率，但仍可使用。\n更新：查询相关资料时发现已经有人实现了更完整的工具： DISM++\n地址：http://www.chuyu.me/zh-Hans/index.html\n\nDism.exe /online /Cleanup-Image /StartComponentCleanup /ResetBase\n\n来源：Microsoft MSDN\nWindows 在每次更新补丁以后会把补丁新旧文件都放到 WinSxS 目录里，于是 WinSxS 越来越大。如果你使用 Windows 磁盘工具中的磁盘清理功能，确实能清理掉一些文件，但清理以后，你依然可以在控制面板里卸载各个 Windows Update 补丁，就意味着旧文件其实还在目录里。\n而这条命令通过 &#x2F;ResetBase 参数，会把所有的旧补丁全部清理干净，将当前系统状态设置为『Base』。你也再无法退回到之前的状态，当前状态变成了新的 Base。也就是说，这命令相当于是 WinSxS 目录专用的『删除还原备份』命令。该命令不会影响以后的补丁，如果有新补丁需要重新运行该命令清理。\n注意，清理时间会很长，笔记本注意电池电量。\n扩展阅读： WinSxS 目录功能 (MSDN)\n","categories":["命令行"],"tags":["Windows","DISM++","Diet"]},{"title":"4.1 守望先锋平衡性补丁更新（伪）","url":"//4-1-overwatch-update-notes/","content":"安娜站姿：\n\n现在安娜站得更直一些了。\n\n摔杯为号(生物手雷被动)\n\n生物手雷技能添加了一个被动效果：摔杯为号。其技能音效可以被大范围的队友听到，并短暂地让队友可以穿墙看到自己。\n\n设计师评论：\n\n安娜一直都是最出色的守望先锋战士之一，但毕竟是老太太了，蹲马步太久实在太累了。\n\n设计师从从削弱生物手雷遭到的巨大争议中获得启发，安娜迫切需要防绕后能力，而最好的办法就是呼叫队友。\n\n\n死神幽灵形态\n\n幽灵形态添加了新的台词：”死神走了”。\n\n换弹\n\n现在死神扔在地上的枪可以对踩在上面的敌人造成 5 点伤害并轻微地减速敌人一秒。\n\n死亡绽放\n\n死亡绽放现在除原有伤害外同时还会扔下若干把枪，这些枪落地后，同样可以对踩中的敌人造成 5 点伤害并轻微地减速敌人一秒。\n\n设计师评论：\n\n死神的暗影步伴随有台词”死神来了”，使得这个技能的收益伴随风险。我们觉得高风险高收益很 Cool。所以给幽灵形态也添加了台词。\n\n死神特殊的换弹技巧给我们提升死神上场率提供了新的思路。\n\n\n黑百合卧倒\n\n黑百合新增了一个卧倒状态，你可以在设置界面为其绑定额外的按键，或者打开蹲下一秒后自动卧倒的选项。\n\n卧倒时的移动速度极其缓慢，并有专门的匍匐移动动作。\n\n卧倒时的受弹面积大幅减小，但被暴头率因形体原因自然增大到几乎 100%。\n\n卧倒时，黑百合视野会受到一定限制。转身若超过 90 度，继续往该方向的转身速度将有一个上限，不能随鼠标实时地移动到目的方向。\n\n卧倒时黑百合的换弹速度减慢 50%，但开镜及充能速度不变。\n\n卧倒时黑百合还会随机地翘起小腿，此动作不受黑百合玩家控制。\n\n\n剧毒诡雷(感谢 SamBool 回帖)\n\n为了和动画逻辑一致，剧毒诡雷现在将会造成摔倒效果。\n\n组队\n\n现在黑影、死神无法与黑百合同处一队，以确保黑百合的胜率。已选此二英雄的玩家会自动回到英雄选择界面。\n\n设计师评论：\n\n我们认为玩家对重建帝国组合的抱怨本质上来源于自己的愉悦感不够，因此希望通过让队友及敌人更好地观赏黑百合的屁股获得愉悦，以此减少玩家对重建帝国组合的反感。毕竟半藏已裸左胸，应当会获得一些朋友的亲睐。\n\n考虑到黑爪组织迄今的战绩，我们认为让黑百合单飞，胜率会有所提高，这也能提升队友的愉悦感。\n\n\n源氏自责\n\n源氏添加了新的被动技能：自责。\n\n每当源氏说出台词：Ahoga 后，机械心脏会在血液内注入微量毒素，5 秒内降低源氏 50% 移动速度并持续造成每秒 10 点伤害。\n\n\n闪\n\n现在闪无法反弹坦克模式堡垒的攻击和莱因哈特的火箭重锤和烈焰打击，但可以通过闪亮的刀刃反射查莉娅的粒子枪了。但源鬼等刀刃黑色的特定皮肤除外。\n\n影、二段跳\n\n现在源氏使用影、二段跳等技能在空中改变位移状态时，会有明显的喷气声，该音效有助于敌人更好的应对源氏，同时也使源氏的技能更逻辑自洽。\n\n设计师评论：\n\n天使小姐姐多次在战场上被源氏切来切去后，趁着某次维护时给源氏添加了该功能。”既然他师傅没法教他礼貌，那就我来教吧。”天使纯真无邪地微笑着说道。设计师不 敢 予更多点评。\n\n温斯顿特斯拉炮\n\n现在特斯拉炮对源氏、半藏、黑百合造成的伤害会被计作治疗量。\n\n屏障发生器\n\n为与动画保持一致，现在屏障发生器会在屏障碎裂或消失后爆炸，对死神造成 50 点伤害，对其它英雄无影响。\n\n原始暴怒\n\n现在温斯顿的眼镜拥有了独立的命中判定，命中眼镜不会对温斯顿造成双倍伤害，但直接触发原始暴怒技能。眼镜不会被范围性攻击技能命中。\n\n设计师评论：\n\n温斯顿的特斯拉炮并非杀伤性武器，他是希望通过科学让世界更美好的守望先锋一员。尽管如此，可不要惹怒它！\n\n麦克雷被动音效\n\n由于长期抽烟，麦克雷现在有很大的喘息声以及不时的咳嗽声，周围 15 码内的友方和敌方均可听到该声音。\n\n战术翻滚\n\n由于长期抽烟，麦克雷现在在战术翻滚后需要双手撑膝大口喘气三秒，期间无法移动和攻击。\n\n午时已到\n\n由于长期抽烟，麦克雷现在喊完午时以到后会咳嗽不止，且无法击中任何目标。\n\n皮肤\n\n现在麦克雷的所有皮肤中的香烟均改成了棒棒糖。\n\n设计师评论：\n\n我们添加该功能是为了保护地球环境和大家的身心健康，正如我们一直以来都规定大家应该怎么玩一样，这很 Cool，不是么。\n\n士兵：76表情\n\n现在士兵：76 在发你好表情时，有机率触发战术目镜，如果战术目镜已经准备就绪则直接激活，如果尚未充能完毕，则损失所有已经积攒的能量。\n\n设计师评论：**\n\n现在我们都是 Hello 了。\n\n法老之鹰推进背包\n\n现在法老之鹰在遭受爆炸伤害，例如火箭发射器(法老之鹰)、粒子炮(查莉雅)、坦克模式(堡垒)、螺旋飞弹(士兵：76)等时，会额外削减一部分推进背包能量。\n现在法老之鹰在使用推进背包后的上升阶段接触天花板后会遭受少量伤害。\n\n设计师评论：\n\n我们之前忘了漏油这个设计了，现在补上。这对平衡性几乎没有影响，毕竟其它英雄几乎没有对空中目标的爆炸伤害能力，但会让法老之鹰的内战更具戏剧性。\n\n堡垒被动减伤\n\n现在哨卫模式下和坦克模式下的血条添加了一个护盾边框，以明确地表现其减伤特性。\n\n哨卫模式\n\n如果堡垒在户外保持哨卫模式超过 10 秒没有任何动作，妮妮将会从天空飞下来停在堡垒的头或肩上，在堡垒有任何动作或周围有任何敌人发出的声音时飞走。\n\n侦查模式\n\n现在堡垒在原地转身时，仅通过腰部转身，双腿不会再移动了。\n\n在堡垒攻击某个目标时，妮妮会同时不断盘旋在该目标眼前，并啄击该目标，造成 1 点伤害。妮妮不可被击中。\n\n\n设计师评论：\n\n堡垒没有语言能力，缺乏和其它英雄的互动，因此我们添加了更多和妮妮的互动。\n\n莱因哈特冲锋\n\n如果冲锋未能撞到敌人而直接冲撞到墙壁等障碍物，则莱因哈特将获得头晕效果，在玩家的鼠标正常移动基础上，会随机加入若干左右方向的飘移。其效果类似于魔兽世界角色在醉酒时的鼠标效果，但幅度更大。持续 3 秒。\n\n如果被冲锋撞飞的敌人再次碰到墙壁，则会另外受到 30 点伤害并根据方向原地转一圈，操作该敌人的玩家屏幕上也会表现该效果。若击飞的敌人碰到天花板则受到 60 点伤害。\n\n\n烈焰打击\n\n烈焰打击不能再被源氏反弹。\n\n烈焰打击对小美的冰墙造成 100% 的额外伤害。另外还可以解除队友的被冰冻状态(小美的冰霜冲击枪和暴雪技能效果)，但不造成伤害也无法获得充能。\n\n\n火箭重锤\n\n火箭重锤在撞到墙壁后会立刻结束此次挥动，且不改变下一次挥动的前摇时间。这使得在小巷、通道等狭窄地形中，莱茵哈特可以获得更快的挥锤频率，提高伤害，但同时也限制了范围。\n\n裂地猛击\n\n现在裂地猛击的伤害降低为 30 点，但猛击后的地面会持续对倒地或站立于上面的敌人造成每秒 5 点的伤害，持续 5 秒。对方英雄可以通过跳跃取消该伤害，站立状态的禅雅塔、托比昂不受此效果影响，温斯顿受到该效果双倍伤害。\n\n设计师评论：\n\n莱因哈特现在更重视地形因素对战斗造成的影响，作为终级碾压机器，莱因哈特必需要有相应的优势。另外，通过解冻队友，我们给莱因哈特玩家提供了更多的战斗策略供选择。\n\n猎空闪现\n\n如果猎空的闪现因为地形因素没有完整地移动 7 码距离，即撞到墙、电线杆等地形物，则猎空会短暂地眩晕 0.5 秒。在玩家的鼠标正常移动基础上，会随机加入若干左右方向的飘移。\n\n如果猎空的在眩晕状态下再次闪现撞墙，则眩晕状态会延长 2 秒，该状态可叠加。\n\n猎空使用闪现经过向上斜坡，会使猎空的闪现也变为向上移动，角度与斜坡一致，这使得猎空有机会更丰富地利用地形因素。\n\n猎空在闪现经过敌人时会撞上敌人而非穿过，同时对敌人造成 30 点伤害。\n\n\n闪回\n\n现在使用闪回会严格地回复到 3 秒前的状态，包括位置、动量、生命值、子弹数量与增减益。但时空稳定器的能量依然会被消耗，因此闪现和闪回不会恢复。\n\n英雄难度评级\n\n现在猎空的英雄难度改为三颗星。\n\n设计师评论：\n\n你上你也晕。\n\nD.Va近战攻击\n\n现在 Meka 机甲的近战攻击统一造成 50 点伤害，而宋哈娜的近战攻击则造成 10 点伤害。如果对方有黄甲，则额外对哈娜自己造成 10 点伤害。\n\n推进器\n\n现在 Meka 机甲在使用推进器的同时可以使用聚变机炮。\n\n设计师评论：\n\n有感于鱼塘双飞太强，同时为了增加 D.Va 上场率，继让 D.Va 能用右键保被路霸钩走的队友后，我们又给 D.Va 增加了一项新的华而不实的英雄反制设计：D.Va 可以对抗双飞！D.Va 更加万能了，这很 Cool，不是么？\n\n黑影黑客入侵、电磁脉冲\n\n现在路霸、安娜、死神的所有技能都不会被黑客入侵和电磁脉冲打断制或禁用。尽管如此，视觉上的红色效果依然保留。\n\n黑客入侵\n\n猎空玩家在被黑客入侵后会回到英雄选择界面，猎空直接在你和你所有队友的英雄选择界面上消失。\n\n士兵 76 的战术目镜现在会被黑客入侵打断或禁用，如果被打断时士兵：76正在释放战术目镜，则黑影获得剩余的战术目镜技能与持续时间，此时间内黑影的自动手枪带有自动瞄准功能。\n\n堡垒、禅雅塔被黑客入侵后会开始随机做一系列表情，持续 3 秒，即使你尚未购买该表情。由于 Meka 的一部分功能是通过机械传动的 宋哈娜在机甲里拼命踩脚蹬子 类内燃机结构，因此不会自动做表情，但此时 D.Va 玩不了《失落的维京》飞机游戏。\n\n美被黑客入侵后，其小机器人会开始随机堆雪人，持续 5 秒，其间小美无法释放暴雪技能，但其它技能不受影响。\n\n以下技能将不会再被黑客入侵打断、限制或禁用。尽管如此，视觉上的红色效果依然保留。 \n\n狂鼠的捕兽夹和炸弹轮胎。\n\n黑百合的抓钩。\n\n士兵：76 的疾跑。\n\n半藏的竜。\n\n温斯顿的原始暴怒。\n\nD.Va 的机甲自毁。\n\n\n\n黑客入侵现在可以直接打开部分地图的大门并控制其开关。例如观测站：直布罗陀AB点、多拉多B点、66号公路AB点、国王大道A点车库门等。\n\n\n电磁脉冲\n\n士兵 76 的战术目镜现在会被电磁脉冲打断或禁用。\n\n堡垒、禅雅塔被电磁脉冲击中后会瘫痪 3 秒，禅雅塔的所有护盾将会消失。由于 Meka 的一部分功能是通过机械传动的 宋哈娜在机甲里拼命踩脚蹬子 类内燃机结构，因此不会瘫痪，但此时 D.Va 玩不了《失落的维京》飞机游戏。\n\n美被被电磁脉冲击中后，无法释放暴雪技能，但其它技能不受影响。\n\n以下技能将不会再被电磁脉冲打断、限制或禁用。尽管如此，视觉上的红色效果依然保留。 \n\n狂鼠的捕兽夹和炸弹轮胎。\n\n黑百合的抓钩。\n\n士兵：76 的疾跑。\n\n半藏的竜。\n\n温斯顿的原始暴怒。\n\nD.Va 的机甲自毁。\n\n\n\n\n设计师评论：\n\n我们重做了整个黑影，现在她的技能更符合逻辑了，同时也会成为影响双方阵容的重要角色。\n\n","categories":["游戏中心"],"tags":["守望先锋","Overwatch","平衡补丁","愚人节"]},{"title":"微信取消 iOS 打赏功能一二三","url":"//wechat-cancel-ios-public-writer-appreciation-function/","content":"事件原委：\n\n4月19日下午，微信官方通过其公众号发布了一片公告，其核心内容为“iOS版微信公众平台赞赏功能将从4月19日下午17：00开始被关闭，安卓等其他版本微信赞赏功能不受影响。”微信表示仍然可以通过二维码转账的方式对公众号表示支持，但次日凌晨微信又发布官方通知，宣布紧急对昨天(19日)下午上线的 iOS 版微信公众平台文章个人转账功能进行关闭，意味着二维码转账也不能用了。\n根据微信团队的说法，做出这次改动的原因主要在于苹果公司一方。声明中写道：“2016年6月13日，苹果更新了3.1.1条款，更严格要求App 不得包含指引客户使用非 IAP 机制进行购买的按钮、外部链接或其他行动号召用语。”腾讯方面与苹果公司长期沟通未果，最终只能够在 iOS 系统上取消了打赏功能。\n\n\n苹果方面已经针对此事做出回应，表示微信可以选择提供App内购买让用户赞赏他们喜爱的公众号运营者，微信只需正确使用App内购买体系进行开发即可。并强调“如同我们提供这一选择给所有的开发者一样”。\n\n\nApp Store 审核指南 ( https://developer.apple.com/app-store/review/guidelines/cn/#in-app-purchase )\n3.1.1 App 内购买：\n\n如果您想要在 app 内解锁特性或功能（解锁方式有：订阅、游戏内货币、游戏关卡、优质内容的访问权限或解锁完整版等），则必须使用 App 内购买。App 不得包含指引客户使用非 IAP 机制进行购买的按钮、外部链接或其他行动号召用语。\n通过 IAP 购买的所有点数和游戏货币必须在 app 内使用且不得过期，并且您应确保为所有可恢复的“App 内购买”设计一套恢复机制。\n请务必指定正确的可购买类型，否则您的 app 将被拒绝。\nApp 不得直接或间接地将 IAP 内容、功能或消耗品赠予他人。\n通过 Mac App Store 分发的 app 可托管基于非 App Store 机制的插件或扩展功能。\n\n\n\n后续事件：腾讯某高管在其公号上发布文章《腾讯高管：为了更自由的用微信，我打算重新买部安卓手机》评论此事，表示自己打算重新买部安卓手机，“虽然可能性不大，但我希望未来苹果公司的股价和在华销量能够告诉它，这种逼迫 App 应用与安卓平台产生功能性差异化的平台政策，是得不偿失的。”\n\n列表式评论：\n一、关于公众号:\n\n开设公众号需要提交身份证明付费审核，文章内容在微信管理下，『不适』内容随时可能被删除。\n公众号的文章数据完全储存在微信服务器上，微信制定了一系列规则限定公众号的行为。\n外链（跳转其它网站）必须有企业资质，个人开号只能链接到微信内其它文章，完全出不了微信。\n基于此，苹果认为公众号文章就是微信的功能之一，微信认为是独立个人行为。\n微信认为『打赏』是用户间转帐，而苹果觉得这是购买应用内功能。\n双方争议在于『公众号文章』是否属于应用本身部分功能。\n双方争议还在于打赏功能是否有『解锁』行为。\n公众号文章算不算，你自己判断。\n你自己判断也不算，苹果说了算。\n\n二、关于 App Store：\n\nApp Store 内，免费获得，也被定义为一种购买行为，只是价格为零。\nApp Store 内，不改变任何 App 功能甚至连界面都不变的 IAP （应用内购买，简称内购）是存在的。\n比如 Doodle God 就有 Thanks to developers 的内购，即打赏。\n可以认为，事前付费事后付费，付不付费，都不是定义内购的必要条件。\n可以认为苹果觉得没有跳出 APP 范围的非实物付费都属于内购，而微信严格规范下的公众号文章属于此类。\n各直播平台 iOS 版的打赏功能确实是用内购充值平台代币的，当然你也可以通过网站或安卓版 APP 充。\niOS 充值获得的代币大约就是网页&#x2F;安卓版的 70%，差额就是 App Store 分成。\n苹果的审核标准并不一致，确实有大量开发者抱怨。\n2016 年 6 月的标准，到现在才开始怼，苹果在打自己脸。\n\n三、关于事件\n\n微信并没有否认苹果『一视同仁』的声明，而是抛了个暧昧的高官『个人』文章作为回应。\n微信沟通大半年并非为达成一致意见，而是想要特权。\n商业合作的事，不能叫要特权，应该叫利益分配。\n如果按苹果要求开发，至少公众号运营者能拿到 iOS 用户打赏的 70%。\n现在微信不干了，公众号运营者的这部分收益降为零。\n从这个角度来说，吃相难看的是微信，为跟苹果要特权牺牲作者群利益。\n高管 个人 对对方公司股价和销量的言辞，直如街市泼妇。\n个人 两字我用了加粗，表强调，显然他不能代表公司立场。\n显然 两字也应该用加粗的，我忘了。\n即使如此，事件影响到的只有公众号运营者的一部分收益。\n所以这事本来就是公说公有理，婆说婆有理。\n吃你的瓜。\n\n四、升华主题\n\n微信不会从 iOS 下架，也不会再有 3Q 大战二选一，都是成年人。\niOS 版和安卓版的功能已经有很多区别，以后会更多，这次事件未来回头看，只会是过程中的寻常一节。\n当然炒一炒还是可以成为热点的。\nApp Store 优点之一就是严格审核，统一规范带来的体系信赖。\n苹果限制多，不全是对用户有利的限制。\n安卓更自由，也未必是对用户有利的自由。\n苹果只占手机市场份额 20%，App Store 同样只占软件市场 20%，谈不上垄断。\n利润份额和利润率不是垄断的指标，但是商业谈判时的优势。\n在商言商，本不须谈及道义。然而腾讯某高管似乎选择性忘了自家微信是怎么对付淘宝、网易云音乐、快的、虾米等的。\n同是争取利益，苹果偏执的『一视同仁』，在托辞上比微信还是显得高尚一些。\n\n五、实用建议\n\n手机号目前依然是别人找你的最好方法。\n电话比文字直接，快速，准确，有时也更温暖。\n文字比电话含蓄、有存档、有时会误解，会错过时机。\n你的相对价值决定了是你担心找不到别人，还是别人担心找不到你。\n最有经济能力换手机的人，也最不用担心上不了微信别人找不到他，当然也最不需换手机。\n屁股决定脑袋的某高管除外，当然，其实他也不用担心。\n强行假设一个对立困境并为之争吵，即使在脑残粉中也是最愚蠢的行为之一。\n有人换手机难，有人换 APP 难，苹果害怕失去用户，微信也害怕失去用户。\n你是用户，你怕啥。用到不想用，换哪一个都行。\n\n","categories":["唠唠叨叨"],"tags":["评论","iOS 内购","公众号","微信关闭打赏"]},{"title":"新编故事会：琴瑟和谐两则","url":"//club-two-love-stories/","content":"第一个故事，姑且称为杨大哥和徐小妹的故事吧。\n前段时间给父亲电话，他颇为无奈地告诉了我这事。我又给杨大哥打了电话，聊了很多，也感触颇多，真是觉得人生如戏，戏如人生。\n杨大哥不是什么黑道大哥，在我父亲眼里，他一直是个普通学生。父亲任教三十余年，也算是桃李满天下，可毕业多年还能来探望，还能多少愿意说几句的，也就那么几个，杨大哥是其中一个。\n这是个很老套的开头，无非是那时杨大哥还是杨小哥，敷衍学业，荒废才智，在高一分班后遇上了他生命中的第一段感情，括号单相思括号完。杨小哥和所有单纯少年一样，把表白当成宣战，把体贴弄成骚扰，搞得徐小妹很是困扰了一段时间。她家长愤怒地跑到校长那里堵截，弄得杨小哥差点被开除。事情最后平息了下来，当时父亲作为他的班主任，很是顶了不少压力。\n杨小哥只是贪玩和童贞，并不是坏孩子。看见班主任愿意理解他的感情，替他承担压力，也是确实后悔，很快地就转心学习了。高考也甚是喜报，在年级前十都有清北一搏之力的省重点高校里，他考了全年级二十来名，非重点班第二。\n然后大家才发现，他对感情的态度，和他两年来对学习的态度一样，都是认真的。他和徐小妹都报了浙大，最后也都去了浙大，尽管分数有差距不在一个系。浙大一直以来在本省招生两三千人，只要分数合适服从调剂，确实是个风险很低的选择。但尽管如此，依然有理由相信，小妹在两年的时间里对杨小哥的态度也有了不少转变，毕竟报志愿这事，也不是那么容易就能被小哥打听到的。\n杨小哥用事实证明自己的态度后，在师生家长之间的声誉已经大为改观。但当大家都以为能成就一段姻缘时，四年过去，徐小妹保研，并在研究生期间和另一位同门博士师兄结了婚。杨小哥毕业以后则不知去向。\n不知去向，只是对外人而言的。我父亲知道，我也知道，他是真的受了很大的刺激。徐小妹要的是一份现成的事业有成，让她可以不受风雨，满足于花艺茶道胭脂新妆，满足于官人四海觅封侯奴家相思如流水。博士师兄家境不错，工作高端，收入丰厚，毕竟是那时的博士，在那时的外企上班，相当高富帅。而杨小哥一如所有的学生一样，一穷二白，一无所有。可怜七年单相思，最初是无聊的笑话，最后是凄惨的笑话。\n故事继续老套地发展，杨小哥受了刺激，下海经商，终成巨……其实没有成巨贾。跟很多小商小贩那样，起早贪黑，要说挣，比父亲确实多一些，但折算假期摊薄时薪，其实也没多多少。换句话说，挣了份辛苦钱而已。这种程度，是依然远远比不上那个并无此意却在事实上刺激到了他的博士先生的。\n所以这个故事不是什么鸡汤文，徐小妹那边幸福指数继续涨，生下了双胞胎徐小小妹。杨小哥熬成了杨大哥，挣了钱，也成了家，有了自己的小小哥。两人的轨迹本应该就停在高一那刹那间心动的初见。\n但这十几年来，事情开始各种奔放地发展。\n第一件事是博士师兄不幸早亡。我并不清楚原因，杨大哥并不愿意细述。他只是说，徐小妹因为生的是双胞胎女儿，大概还有财产方面的原因，非常不受婆家待见，全靠夫君出面平衡。加之多年家庭主妇没有走动，在夫亡之后，婆家就基本断绝了关系，娘家也不来往了。要知道，法律并不保护不会伸张自己权益的人，小妹最后落得个孤儿寡女，靠不多的遗产过活。杨大哥接济了她好几年。\n第二件事是杨大哥终于富了。他近几年卖车开 4S 店终于挣了不少钱，心一狠给徐小妹买了套房，接她们娘儿仨到自己身边。刚听时，我觉得这不就是初恋成小三么，虽然总会有生活琐事不易处理，但杨大哥自己乐意，也确是相思多年，算个大事，但不算奇事吧。后来才知道，事情要复杂得多。\n第三件事是，杨大哥终于离婚了。这件事我很难评价，因为他接济徐小妹，更像是供一尊菩萨。肉体有没有出轨不知道，但精神出轨……我想说从杨小哥到杨大哥，他就没变过轨，如果说最初是爱，那十几年未见还能如此，说是信仰也不差了。杨夫人是好人，她主动提的离婚，也不让杨大哥净身出户，儿子也不小了可以面对这事。当然，这个我也只是电话听杨大哥说，不知道事实如何。\n所以万事俱备，接下来杨大哥和徐小妹在一起了么？\n还没，不过杨大哥确实重新谈起了恋爱，久违了十几年的恋爱，和两位徐小小妹。\n你没看错，我电话听到这里也是懵逼的，杨大哥和徐小妹的双胞胎女儿一起谈起了恋爱。\n我了个去！\n两位小小妹还是挺喜欢杨大哥的，毕竟孤儿寡女时，待她们最好的确实就是杨叔叔，比自己的奶奶家好得多。随着年岁渐长，情窦初开，依赖之情也更浓了。杨大哥呢，眼里的两位小姑娘的身形，俨然就是自己魂牵梦萦十几年的当年那个小姑娘的身影，音容笑貌，举手投足，完全是一个模子出来的。区别只在于当年那姑娘不喜欢他，而现在的小姑娘确实喜欢他也待他很好。俩小姑娘比她们娘还好的一点是，虽然也风花雪月满脑幻想，但懂得适可而止懂得体谅。\n妈的简直好太多了。这两妹子对杨大哥一片真心，也没有家长方面的问题——母亲多年艰辛以后变得懦弱而更加依赖别人，父亲早亡则正是她们沦落如此的原因之一。\n从我电话里听见的声音的沙哑与颤抖来看，杨大哥也确实犹豫着。我想他现在的压力，未必比当年那时小。他实在是走投无路，才找到他尊敬的当年班主任，倾诉也好，忏悔也罢，无论是放弃还是坚持，他都需要更多的理由。\n我父亲的观点是，他们不是一辈人，不应该在一起，这是不对的。当然，两个……更不对，但就算一个，也是不对的。\n我的观点是，杨大哥喜欢的，是那个影子。这个影子被过去烙在了心里，一直没能填补，而现在终于找到了。两……三情相悦，先这么过着吧。如果他接济徐小妹但谈恋爱的妹子是别人家的女儿，就只是一般的老少恋，其实不算什么异常的事。\n我不知道之后会怎么样。\n第二个故事就简单多了。\n我师弟。\n也是高中恋爱，少年单纯少女巧思，虽然女孩子成绩差点，可师弟智商超群并不在乎，就像王思聪并不在乎交的朋友有没有钱一样。虽然师弟跑来北大，妹子去了三本，但两人依然你侬我侬，千里送炮，毕业后两人就结婚了。两家家长都很喜欢这对小夫妇，也都是中产家境门当户对。两家各出一套全款房车，一处省会赴任，一处老家抱孙，简直是人生赢家。\n还没抱孙，人生赢家偷偷找我聊天了。\n想离婚。\n我说去你妈的你离个毛你有啥不满的人家八分相貌九分身材我一想到你老婆就鸡儿邦硬亏她对你十分真心土硬得跟水泥似的实在挖不动，你他妈就是没有房贷闲的要不帮我凑个首付我 200 万首付只差 190 万了。\n他说，你能理解我读书有感而发找她聊天说也许宋朝被灭是因为唐朝对外征服时把国家级的组织方式教给了北方游牧民族部落导致人家从部落级的散兵游勇变成了强大的国家机器反过来征服了中原结果她说我知道的匈奴都是坏人呀，然后我沉默了过一会想换个话题于是说哦这个观点有意思作者认为尽管自由贸易会使两个国家或地区都获益但由于这些收益只会分配到两国参与交易的部分民众而非全体国民所以实际上会导致资本输出国内的劳动力和劳动输出国内的资本方利益受损因此任何的自由贸易都会受到国家保护主义的反抗结果她说那 LV 包为什么还是那么贵……\n……时候的感受么？\n我说我能。\n我理解她是真爱她夫君也已经在尽力迎合她的夫君时的无奈，我也理解师弟真的无从找到倾泻他富余智力的渠道时的苦闷。\n琴瑟和谐，真的不是那么容易。\n其实要我说，师弟这个结，比杨大哥那个结，还难解得多。杨大哥那个结，不过是自己的心结，解不解，只看他一个人就够了。我们旁人，总还是愿意祝福的。而心结，即使无人帮助，迟早也会自解。\n师弟这个结，我却觉得无解。\n我说，我能劝解你的话，你自己也会说。\n他说，是。\n他说，羡慕您。\n我说，其实和你一样。\n他说，那你和我一样吗？\n我说，一样。\n他说，懂了。\n聊天就此结束了，希望这个懂了，能再延续她几年的婚姻。至于师弟，只能说我越来越能理解，为什么有时天才们也会跑去向神佛寻求智慧了。\n","categories":["文艺青年"],"tags":["感情故事","琴瑟和谐","编剧","镜花水月"]},{"title":"ow.thnuclub.com 更新与计划更新","url":"//ow-sound-site-updated-and-planned/","content":"小站因为忙停更了一段时间，结果被各种催更。值此国庆佳节加之周末免费，趁势也更新一下，再开些空头支票。\n\nDone：更新末日铁拳、地平线月球基地及其它英雄新增语音。（1.13 版客户端拆解）  时间有限，只处理了增量更新部分。旧数据的疏漏错误更新后依然存在。他日有空再逐步更新旧数据。\n\nDone：去掉了早期开发的赞与踩功能。  在去年小站刚出来时，曾指望让热心用户通过 vote &#x2F; devote 功能，把『有内容的音频』也就是台词、音乐等条目上浮到前几页，让意义不大的嘈杂环境音下沉。但事实看来结果不好，一来是用户并没有很好地理解该功能。后台数据显示，被踩得最多的是源氏的龙神拔刀，其次是麦爹的午时已到。想必是冤魂太多，多少发泄一下吧╮(￣▽￣”)╭。二来呢，我看到这个数据以后也就懒病发作，没有继续考虑改进该功能了。后来还短暂地改成『倒放音频』，也就是猎奇一番，甚不实用。今日该功能彻底取消，就当是当年那几千投票，终于修正成果了吧。\n\nDone：调整了下界面，加了圆角、阴影，js 代码的报错部分也处理了。  主要新增数据会用黄色标签显示在上方。条目按钮加了细微的圆角和渐变阴影，整体会更柔和一些。同时每页条目数从 200 条减少到 100 条，相应的显然页码数量也加了一倍。因为网页背景本身是守望的全屏截图，故整体风格不会有大的变化，没有前后对比，不仔细看的话应该看不出来。修正 JS 报错这事其实也可做可不做，只要不搞死页面，能正常执行功能，jQuery 也就这样了。\n\nDone：加了打赏按钮。  这个没啥说的，目前平均也就每周一罐可乐，但听见叮咚声时的好心情很值钱。摊开算收益的话应该现在就把小站关掉，每年能省千儿块服务器钱。\n\nDone：更新 36729 条音频的 MP3，音质略有提升。  音频文件的处理路径是游戏客户端→.wem格式→.ogg格式→.mp3格式，理论上每一步都会有损耗。为了能在网页上直接播放必须使用 MP3，但之前在把 OGG 转为 MP3 时我选的是 LameXP 里的质量等级 2（一共 10 级），现在我想通了，把质量等级改成了最高的 0。当然，质量越高，mp3 的体积也越大，从质量 2 到质量 0 体积平均会增大 50%，也就是大概每个文件 20KB 会增加到 30KB。\n  这对视频制作者会有所帮助，下载的音频在嵌入视频后的音效会有略微的提升。对 Lame 编码而言，质量 2 到质量 0，新增的数据主要集中在轻微的、高频的或者低频音域。这些音域的补足会让音频的回声、立体感和通透性更好一点点点点，就当是信则有吧。 缺点是，对于使用手机流量访问的用户流量的消耗会增加。目前统计的平均每条数据大概是 28KB，请量力而行。至于对网页响应速度则是几乎没影响的，你的主要延迟是来自于与 Github.io 这个网站（我拿来存音频源）之间的通讯延迟，至于下载的数据是 20KB 还是 30KB，差的不过是 0.0x 秒而已。\n\nDone：当条目文字很长时改用换行式，取代当前的隐藏式。  这个功能和上一条类似，不难，但是会比较烦。换行以后会涉及到每行高度的变化，于是打开编辑面板时的对齐代码就需要调整。同时变化的高度也意味着右侧的齿轮按钮也要相应变化，现在它的高度是写死的。更麻烦的是 Input 框的高度自适应我没做过，可能要换用 contenteditable 的 div，要调整不少代码。好处当然也是显而易见的，长句子台词可以一次看完整了。\n  Input 框暂时先不修改了，太麻烦要查资料，一时搞不定。条目本身现在是换行式的了。\n\nDone：编辑条目时按 Ctrl+Enter 直接提交当前条目并自动打开下一条的编辑界面并同时播放音频。  我自己，目前还是小站音频条目听写的第一贡献者，我觉得我在编辑条目时遇到的麻烦，你们肯定也遇到了。这个 Ctrl+Enter 的连续编辑提交功能应该会对热心的贡献者比较有帮助。当然伸手党是永远不会遇到这种麻烦的，但谁管你们那么多呢。\n  我还没写过根据键盘组合键执行功能的代码，不过想必 Google 一下很容易就能得到答案。这功能不难，但是会比较烦。\n\nTodo：编辑界面的标签钩选稍微改进一点。  打算把现在的钩选换成和顶部筛选框类似的变色选中，顺便加上和英雄主题色相同的背景色。估计也挺麻烦的，tag 数据都是根据数据库生成的，现在数据库里没有英雄颜色，于是得改后端代码了。\n\nTodo：逐步修正音频标签数据。  这个没啥说的，其实主要依靠的是拆解软件的更新。之所以写在这里，是因为现有拆解结果，在数据处理上还能有少许改进，只是要花不少时间。\n\n\n你看，写完这个，又快天亮了。\n","categories":["开开开发"],"tags":["守望先锋","Overwatch","ow.thnuclub.com","更新计划","音频"]},{"title":"写了个简易的多个网页连续截图脚本","url":"//simple-webpage-batch-screenshot-script/","content":"目前适用于 ngacn 论坛帖子，效果图如下：\n\n启动脚本后，会依次询问你 nga 的帖子 id，总页码数量和帖子名称。脚本会自动检查是否之前已经抓取过该帖子并在上次抓取的最后一页开始继续往下抓取。\n\n每个帖子的抓取结果会放在独立的目录，并以”帖子 id”-“自定义名称”的形式储存\n\n注意事项：\n脚本会优先检查是否有 $tid-xxx 形式的目录，只要 $tid 一致，脚本就认为本次会在旧的内容基础上往后抓取截图，xxx 的名称可以是任意的，不检查。假如已经存在一个 『12345-上山打老虎』 的目录，而你第二次输入的是 『12345-钻石王老五』，则实际更新的依然是『12345-上山打老虎』 目录。\n目录名称中间的减号必须保留，否则脚本会忽略已存在的目录，按新目录工作执行。目录内的 1.update.sh 文件也必须保留。\n我的运行环境是 Win10 64 位 1703 版本，不保证在其它机器上能正常运行。在 Win10 下脚本文件可以直接双击打开，在 Win7 下可能需要右键点击并选择用 Git Bash 打开。\n需要预先安装该脚本所需要的环境才能正常运行，包括 node、bash 等。\n\n安装与准备工作：\n下载并安装 Node for win 使 Windows 获得本截图脚本所需的 node 语言支持： 下载网址： https://nodejs.org/en/download/ ，选择下载 LTS 版本下对应的 32 位 或 64 位 Windows Installer。安装一路 next 就行。\n下载并安装 Git for win 使 Windows 也能使用 Bash 脚本。下载网址：https://git-for-windows.github.io/ ，也是一路 next 默认安装就行。\n从开始菜单找到 Git Bash，，点击运行，在黑色窗口内依次输入以下内容：\n\nnpm config set registry https://registry.npm.taobao.orgnpm i -g npm@latestnpm i -g pageres-cli\n\n效果：\n\n\n新建一个目录，起个名，比如叫『nga 截图收藏夹』之类的。\n在目录下新建一个文本文件，复制粘贴以下代码：\n\n#!/bin/bash#User inputtid=&quot;&quot;totalpage=&quot;&quot;title=&quot;&quot;while [[ ! $tid =~ ^[0-9]+$ ]]; do    echo -e &quot;输入 NGA 帖子 id：&quot;    read -r tiddonewhile [[ ! $totalpage =~ ^[0-9]+$ ]]; do\techo -e &quot;指定该帖子的总页数：&quot;    read -r totalpagedoneecho -e &quot;起个标题备注（可以自定义）:&quot;read -r title#Check if $tid follder is existfor _dir in &quot;$&#123;tid&#125;-&quot;*; do    [ -d &quot;$&#123;_dir&#125;&quot; ] &amp;&amp; targetdir=&quot;$&#123;_dir&#125;&quot; &amp;&amp; breakdoneif [ -z &quot;$targetdir&quot; ]; thenecho &quot;建立一个新目录&quot;\tfoldername=$tid&quot;-&quot;$title\tmkdir &quot;$foldername&quot;\tcd &quot;$foldername&quot;\ttouch 1.update.sh\techo -e &quot;#!/bin/bash&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;startpage=\\&quot;1\\&quot;&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;totalpage=\\&quot;&quot;$totalpage&quot;\\&quot;&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;tid=\\&quot;&quot;$tid&quot;\\&quot;&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;rm \\&quot;page\\&quot;\\$startpage\\&quot;.png\\&quot;&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;for i in \\`seq \\$startpage \\$totalpage\\`&quot; \t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;do&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;\tpage=\\&quot;http://bbs.ngacn.cc/read.php?tid=\\&quot;\\$tid\\&quot;\\&amp;page=\\&quot;\\$i&quot; \t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;\tfn=\\&quot;page\\&quot;\\$i&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;\techo \\$page&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;\tpageres \\$page --filename=\\$fn&quot; \t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;done&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.sh\techo -e &quot;sed s/^startpage=\\\\\\&quot;.*\\\\\\&quot;\\$/startpage=\\\\\\&quot;\\$totalpage\\\\\\&quot;/g 1.update.sh &gt;u.tmp&quot;\t&gt;&gt;1.update.sh\techo -e &quot;mv -f u.tmp 1.update.sh&quot; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&gt;&gt;1.update.shelse\tfoldername=$targetdir\techo &quot;发现旧的工作目录，在此目录上更新：&quot;\techo $foldername\tcd &quot;$foldername&quot;\tsed s/^totalpage=\\&quot;.*\\&quot;$/totalpage=\\&quot;$totalpage\\&quot;/g 1.update.sh &gt;u.tmp\tmv -f u.tmp 1.update.shfish ./1.update.shecho &quot;Work Done&quot;\n\n随便起个名，并把后缀名改为 .sh。如何修改后缀名请自行百度。\n使用：\n双击，依次输入帖子 id，最后一页页码和标题就可以用了。\n\n尾注：\n如果你懂得简单的编程，可以尝试阅读脚本，并自行修改以抓取其它网站的贴子。这个脚本的原理就是利用 nga 帖子很有规律的地址，通过指定帖子 tid、页码 pageid 拼接出需要抓取的指定页面网址，然后反复调用 pageres 去抓取。实际进行抓取的是一个叫 pageres 的 npm 小程序。\n如果你懂得简单的 JS，你可以自行指定 pageres 的抓取参数，甚至包括登录的 cookie 等，以实现『个性化抓取』。\n如果你会完整的 node 开发，希望这个脚本也能为你提供一些参考。\n\n","categories":["开开开发"],"tags":["nga","论坛帖子","截图","脚本"]},{"title":"近期用到的一些命令合集","url":"//commands-me-used-recently/","content":"Grep 字典式匹配输出\ngrep -f source.txt dictionary.txt &gt; output.txt\n\nSED 若干则\n# 匹配成功输出sed -n &#x27;/匹配成功/p&#x27; file.txt &gt;output.txt# 多个脚本并行执行sh script01.sh &amp; sh script02.sh &amp; sh script03.sh# 一般的正则替换sed -i -e &#x27;s/^[0-9a-f]\\&#123;2\\&#125;/target\\//g&#x27; a.txt# 文件名无空格的列表输出for file in $(find lib -name &#x27;*.txt&#x27;); do    echo &quot;$file&quot; &gt;&gt;liblist.txtdone# 文件名有空格的列表输出find lib -type f -name &#x27;*.txt&#x27; -print0 | while IFS= read -r -d &#x27;&#x27; file; do   \techo -e \\&quot;$file\\&quot; &gt;&gt;liblist.txtdone# 计算文件 hash 值，用 cut 切掉输出时自带的文件名hash=$(md5sum &quot;$file&quot;|cut -c1-32)\n\nCMD 快速删除文件\n:: 极快速删除所有文件del /f/s/q *.*:: 快速删除目录与子目录与文件rmdir /s/q dir:: 后者包含前者，但前者速度比后者快\n\nExcel：从右往左查找某个字符。\n=FIND(&quot;|&quot;,SUBSTITUTE(A2,&quot;/&quot;,&quot;|&quot;,LEN(A2)-LEN(SUBSTITUTE(A2,&quot;/&quot;,&quot;&quot;))))\n\n原理，使用 Substitute() 将所查找的字符替换为空，则长度差代表该字符出现的次数。将该次数作为 substitute 函数的第四参数，用一个特殊字符再度进行 Substitute() 替换，然后 Find() 该特殊字符。注意替换用的特殊字符（这里是&quot;|&quot;，即Shift+\\）不能在A2中出现，否则必须换一个。\n","categories":["命令行"],"tags":["excel","bash","CMD","grep","sed","hash","common"]},{"title":"守望先锋 1.14 版本后更改了底层数据格式","url":"//ow-117-data-format-changed/","content":"参考老文章： Overwatch Toolchain 解包方式考察\\，OW 音频小站一直以来使用原始文件 hash 的办法，便每次更新以后，都能区分旧数据和新增数据，使得每次更新的条目数量都在合理范围。但从版本 1.14 开始，暴雪更新了内部数据格式，这个是由蓝帖明确提到的，目的是减少之后的每次客户端更新时的下载。\n但这对本小站来说不亚于一次冲击。这意味着，直到 1.13 版为止的条目，和从 1.17 版开始的所有条目，无法从数据角度建立『新』与『旧』的联系。\n也就是说，明明从用户角度来说是同一句台词，音频波形也一致，但由于 OW 内部格式的变化，导致 hash 计算的结果变化，使得从数据角度来说，它们变成了两个不同的条目。\n比如： 【D.Va】D.Va 一分，坏蛋零分。（1.17 版本） 的 hash 计算结果是 5908654fbc3965232689836abb249c57，而【D.Va】D.Va 一分，坏蛋零分。（1.16 或更早版本） 的 hash 计算结果是 1d99c1739f5b0844f57f3a1a5fbb4580。\n我做了很多尝试，试图恢复一些信息，把这些本质相同的音频重新联系起来，有些成功了，有些失败了。最后我把匹配成功部分更新到原有条目上，匹配失败的部分按『新增音频』对待，添加到数据库里。\n\n尝试使用音频分析软件批量比较，如果成功，理论上这是最好的办法。\n这是本质的解决办法，如果两个音频文件的波形完全一致，则两个音频当然是一样的。\n尝试了 Audacity 和 Similarity，前者缺乏批量功能，后者无法对这种只有一两秒的音频进行比较，均告失败。\n\n\n尝试使用新版本拆解工具拆解旧客户端，失败，但得到了启发。\n因为拆解所用的 Toolchain 工具链（简称 TC）本身有自己的文件名系统，而我亦保留了过去所有版本的原始拆解数据，理论上能通过新旧版本文件的相同路径名等信息恢复联系。\n测试以上两条 D.VA 音频的 TC 路径分别为：\n旧(1.13)：cn\\heroes\\D.Va\\Sound Dump Full\\_Base\\000300000057\\000000020231.wem\n新(1.18)：cn\\HeroVoice\\D.Va\\00000000059F.078\\000000020231.wem\n\n\n测试成功。\n进入实操，发现由于旧版本拆解工具的不完全，数据存在错误，依然有许多坑要填：\n一，多个不同的 TC 文件名对应同一个 hash，即多个 1.18 新文件条目对应同一个 1.13 旧条目 hash，错误在旧版拆解工具自带的文件名系统有 bug。\n解决办法是视为多个条目，并将旧条目的听写内容更新到各个新条目上。\n对于网站用户来说，同一个关键词可能会搜索出几条内容，但其中应该至少有一条是对得上的\n\n\n二，同一个 TC 文件名对应多个一个 hash，即同一个 1.18 新文件条目对应多条旧的 1.13 旧条目，显然错误还是旧版折解工具的不完善\n解决办法只能是人工筛选按多条里面正确的那条。\n大约一共有 1200 条这种类型的错误，一条一条听完。网站用户肯定会得到正确的结果，因为这部分我都筛完了。\n\n\n\n\n\n这次更新正常应当在 1.14 新版数据格式更新，1.17 新版拆解软件开发成熟以后更新，但这数据处理是真 TM 麻烦啊，烦死了。\n","categories":["开开开发"],"tags":["守望先锋","Overwatch","ToolChain","数据更新"]},{"title":"Ikaruga 评测","url":"//ikaruga/","content":"Ikaruga「斑鸠」 on Steam\n来，跟我念：\n黑机吃黑弹躲白弹打白鸡留黑鸡给白队友遇白光切白机。白机吃白弹躲黑弹打黑鸡留白鸡给黑队友遇黑光切黑机。\n黑白黑白黑白黑黑白白黑黑黑黑白黑白黑白黑白黑白黑黑黑白黑，变变变变变变变定变定变定定定变变变变变变变变变变定定变变。\n黑白黑黑白白白黑白白黑白黑白白黑黑白黑白黑黑黑白白黑黑黑黑黑白白白黑黑黑白黑黑白白黑黑白黑白黑黑黑黑白白白白白白,变躲吸吸变吸吸躲吸吸躲吸变躲躲吸吸躲吸躲吸吸吸放大招吸吸吸吸变吸吸变吸吸变躲躲吸吸变吸躲吸躲吸吸吸躲变吸吸放大招。\n……差不多这个感觉。\nIkaruga 斑鸠如果说彩京、虫姬、东方是用层层叠叠的华丽弹幕压迫你的灵魂让你手脚冰凉让你奋起反抗让你一世积累尽殁此役，那么斑鸠则是用至简与朴素唤醒你心底的温暖，唤起你对理想与光明世界的向往。\n这个世界没有遮天蔽日的弹幕，每一个子弹都可以直接吸收无需躲避，这个世界没有血条畸长的敌人，即使是关底 Boss 也挡不住几轮蓄能爆发，这个世界的敌人甚至还会在死去时抛出剩余的能量帮你充能，这个世界不断地告诉你什么叫理想、试练、信念、现实与轮回。这个世界总是将光明放在你的眼前，触手可及。\n一个完美的世界。\n这个世界里里唯一不完美的是你。是屏幕前双手颤抖面目狰狞的你，是竭力紧抓手柄胡乱变色仓皇逃窜的你。但这个世界依然爱着你，从内到外都爱着你。\n\n    .blue {color:#4271ff;font-weight: bold;}\n\n\n她 没有 给你任何 随机出现的敌人，只有约定之时，只有约定之地。她给了你远超需要的强大技能，蓄能爆发，让你在瞬间打倒最强大的敌人。她给了你 异色双倍伤害，给了你 三同色击破链式加分，给了你破敌 残弹 额外蓄能。她还给了你 竖屏模式，将显示器旋为竖置，世界便扩大八分。她甚至给了你 单手柄双机模式，让最孤独的你也能与自己一起游戏。她唯独只是 没有 给你 网络联机 模式，她是完美的，她不需要的，便是不需要的。\n你只需要做好一件事，在该变白时变白，该变黑时变黑，你就能回应她的爱，双双走向高潮。\n你怎么就做不到呢。\n甚至最后的最后，她为了如此不成器的你，把 无限命模式 也给了你。\n完美的她，深深地爱着毫不完美的你，爱着什么都做不到的你，爱着靠无限命死乞白赖撒泼打混的你，爱到了最后。\n这份爱，只需 36 人民币，打折 18。\n","categories":["游戏中心"],"tags":["ikaruga","Steam","斑鸠","评测"]},{"title":"Excel Match() 函数的通配特性","url":"//excel-match-function-wildcard-feature/","content":"今天遇到一个奇怪的情况，在使用形如：\n\n&#x3D;Match(A2,A:A,0)\n\n的 Excel 公式查找时，居然返回了 #N&#x2F;A 的结果。逻辑上来说，在自己所在的数组里查找自己，不应该得到错误结果，事实上这个公式的值只可能是 1 或者 2 才对。\n经过检查，发现问题出在字符 ~ （波浪号）上，即键盘上 ESC 键的下方，数字 1 的左边那个键的 Shift 上档符号。\n从 Excel 官方帮助文档 中，找到了相关的解释。\n\n如果 match_type 为 0 且 lookup_value 为文本字符串，您可在 lookup_value 参数中使用通配符 – 问号 (?) 和星号 (*) 。问号匹配任意单个字符；星号匹配任意一串字符。如果要查找实际的问号或星号，请在字符前键入波形符 (~)。\n\n这里提到了，当使用 Match() 函数进行精确的文本查找时可以使用通配符 ? 和 *，当用户确实需要查找问号&#x2F;星号时，则可以用 ~? 和 ~* 来表示。这里没有提到的是，如果用户需要查找 ~，其实也需要通过两个波浪号 ~~ 来表示。转义符自身也需要转义表达，也算是一般规则了。\n所以，如果一个单元格中包含了波浪号 ~，则当这个单元格作为被查找的数据的一部分时，是正常的。但当它同时作为 lookup_value 时，则会在转义后变得无实际意义。于是导致了 Match() 函数查找自身所在数组时产生的错误结果。\n遇到这个问题时，我正在处理由家用下载机长年积累下的大量动画片资源。用 Bash 获得所有的动画目录名、文件名，并试图尽量删减一些重复资源。文件名系统中并不存在『 ? * : &lt; &gt; | &#x2F; \\ ” 』等符号，但偏偏允许波浪号 ~ 的存在。又因为在 Excel 的默认字体中，波浪号并不显示为扭曲的波浪形状，而是略长的横线，如图，于如是尴尬便发生了。\n\n解决办法：\n给 lookup_value 添加一个 SUBSTITUTE() 函数进行修正，即：\n=Match(Substitute(A2,&quot;~&quot;,&quot;~~&quot;),A:A,0)\n\n即可得到期望结果。\n一句话总结:当 match_type 为 0 且 lookup_value 为文本字符串时，使用 &#x3D;Match() 函数时需要注意 lookup_value 是否包含 ~ 、?、* 并根据需要预先做处理。\n","categories":["软件使用"],"tags":["Excel","Match()","Escape","通配符","转义"]},{"title":"脚本文件里的 Hybrid Script（混合式脚本）","url":"//learning-hybrid-script/","content":"因为日常需要，经常写一些脚本命令，比如 Windows CMD &#x2F; PowerShell &#x2F; bash 之类的。最近学习了一种新的脚本类型：Hybrid script，即混合式脚本，是在一个脚本文件内，同时使用多个语言的语法和对应功能。比如以下这段代码：\n&lt;# : hybrid.bat@ECHO OFFif &quot;%~1&quot; == &quot;&quot; goto SELECTbin\\youtube-dl -a &quot;%~1&quot;goto :EOF:SELECTsetlocalfor /f &quot;delims=&quot; %%I in (&#x27;powershell -noprofile &quot;iex ($&#123;%~f0&#125; | out-string)&quot;&#x27;) do (    bin\\youtube-dl -a &quot;%%~I&quot;)goto :EOF:: end Batch portion / begin PowerShell hybrid chimera #&gt;Add-Type -AssemblyName System.Windows.Forms$f = new-object Windows.Forms.OpenFileDialog$f.InitialDirectory = pwd$f.Filter = &quot;Text Files (*.txt)|*.txt|All Files (*.*)|*.*&quot;$f.ShowHelp = $true$f.Multiselect = $true[void]$f.ShowDialog()if ($f.Multiselect) &#123; $f.FileNames &#125; else &#123; $f.FileName &#125;\n\n这段代码的功能是调用 youtube-dl.exe，按预先准备的待下载视频列表指示，下载所有视频。有趣的是，如果你通过拖拽的方式，把列表放到脚本文件图标上，则脚本直接开始按列表下载。\n如果没有拖拽，而是双击打开脚本文件，则会跳出一个选择文件的 Windows 对话框，让用户选择一个或者多个列表，然后再开始下载。\n这是一个用户体验相对比较好的方法。虽然这脚本只是自用，但我自己也是比较烦命令行的。至于任务是下载视频，或者处理音频，亦或删除目录什么的，只是中段执行不同，和本文主旨无关。\n这脚本的核心难点，便是『如果没有拖拽列表文件，则打开窗口让用户选』这个需求点。CMD 是没有 Windows 图形界面下的对话框功能的，但 PowerShell 有。因此便有了这个 Hybrid Script 脚本。\n脚本前半段是 Batch 代码，输入下载列表文件路径，执行下载。这个『下载列表文件路径』，或者是用户拖拽获得，或者是用户在选择窗口中操作获得。后半段则是 .ps1 代码，用来绘制选择窗口并把列表路径返回 CMD。\n但问题在于，两种代码并不兼容。CMD 并不能识别 PowerShell 代码，而 PS 也无法识别 Batch 代码。如果普通的执行对方的代码，一定会报错的。\n于是我们看到，上面这段代码里似乎有几行奇怪的代码：\n&lt;# : hybrid.bat......goto :EOF......:: end Batch portion / begin PowerShell hybrid chimera #&gt;\n\n没错，就是这几行特殊代码，以及另一个非常重要的变量 %~f0，决定了 Hybrid Script 的可行性。\n事实上，&lt;# ... #&gt; 是 PowerShell 的注释代码，PS1 执行器遇到它时，会直接忽略两者中间的所有内容，执行后面的代码。而 &lt;# :hybrid.bat 对 CMD 而言是个没有指定目标的左向重定向命令。因此 CMD 确实执行了第一行，但没有任何效果。\n对于 PS 的结束注释符号 #&gt;，在 CMD 看来确实有意义。但我们提前用 goto :EOF 直接跳到脚本最末（End-Of-File）的办法，把这一行以及后面的所有代码都跳过了。于是这些代码在 CMD 下的对错就无关紧要了。\n也就是说，在 CMD 眼睛里，这段代码其实是这样的：\n&lt;# : hybrid.bat@ECHO OFFif &quot;%~1&quot; == &quot;&quot; goto SELECTbin\\youtube-dl -a &quot;%~1&quot;goto :EOF:SELECTsetlocalfor /f &quot;delims=&quot; %%I in (&#x27;powershell -noprofile &quot;iex ($&#123;%~f0&#125; | out-string)&quot;&#x27;) do (    bin\\youtube-dl -a &quot;%%~I&quot;)goto :EOF\n\n而在 PowerShell 眼里，这段代码是这样的：\nAdd-Type -AssemblyName System.Windows.Forms$f = new-object Windows.Forms.OpenFileDialog$f.InitialDirectory = pwd$f.Filter = &quot;Text Files (*.txt)|*.txt|All Files (*.*)|*.*&quot;$f.ShowHelp = $true$f.Multiselect = $true[void]$f.ShowDialog()if ($f.Multiselect) &#123; $f.FileNames &#125; else &#123; $f.FileName &#125;\n\n以上都明确以后，中间那句\npowershell -noprofile &quot;iex ($&#123;%~f0&#125; | out-string)&quot;\n\n的作用也就容易理解了：Batch 脚本调用了 PowerShell 的执行器，并把这个 hybrid.bat 自己（在 Batch 代码中，%~f0 这个变量就是指脚本文件自己）传递给了 PowerShell。\nPowerShell 接到消息以后，又执行了一遍这个 Hybrid.bat。这次是 PS 视角，因此上来就忽略了前面整大段的“注释”，直接从 Add-Type -AssemblyName System.Windows.Forms 这段开始，绘制窗口，等待用户选择，获得列表文件路径，然后再返回给 CMD。CMD 最后再执行 for /f &quot;delims=&quot; %%I in ( ...... ) do ( ...... ) 的部分，并根据 goto :EOF 的指示，跳过剩余代码，避免了在 CMD 环境下的报错。\n因此，为了正确执行功能，Hybrid Script 的核心思想是：\n1. 利用两种语言的注释符号的不同，隐藏非执行环境下的代码。2. 灵活应用两种语言的特性，确保任一语言下的注释符号本身，对于另一种语言没有负面效果。3. 首先执行的语言 A，需要把脚本文件自身的路径，传递给另一种语言 B 的执行器。4. B 语言的执行器，忽略掉被 B 语言注释符号包裹起来的 A 语言代码，执行 B 的代码，如果需要的话，把执行结果返回给 A。5. A 继续执行剩下的部分，忽略掉被 A 语言的注释符号包裹起来的 B 语言代码。6. Hybrid Script 至少会执行两遍，可能更多。\n———————————————\n充分理解 Hybrid Script 思想以后，我们就知道这并不仅仅限于 Batch 和 PowerShell 脚本的混合了。常用的几种脚本语言都可以实现混合代码。实践中：\n1. Windows Batch &amp; Windows PowerShell2. Windows Batch &amp; Linux Bash3. Windows Batch &amp; Python4. Windows Batch &amp; Javascript5. Linux Bash &amp; Python6. Linux Bash &amp; Javascript7. NodeJS &amp; Python8. …\n等等组合都可以写出相应的混合代码脚本。\nHybrid Script 能同时利用两种甚至多种语言的方便特性。并且对于各语言组合，相互注释的『套路』是固定的，几部分代码实际功能如何变化并不影响套路。但其实整体来说适用性不广，一来机器上需要同时有两种语言的运行环境，二来 Python JS C# 等几种主流语言都有完备的功能集和函数库，不需要跨语言写作。三来，即使真的需要两种语言，大部分情况下也可以写成两个脚本互相调 用执行。\n只有很少的几种情况下需要考虑 Hybrid Script，包括：\n1. 因为传播渠道问题，不适合拆分成多个脚本的。比如互联网上常见的『复制粘贴代码到记事本改后缀为 .bat 然后双击运行』。2. 代码票友，对 A 语言和 B 语言都不甚精通，或者从 A 转 B 的学习过程中，B 还不甚了解，需要用 A 语言的代码补足。3. A 语言确实功能有限，但胜在编码方便历史普及率高。而产品虽需要却也只需要 B 的极小功能。比如本文示例。4. 写着玩。\n\n5. 解决 PowerShell 无法正确处理文件路径带空格的 BUG，参见：\n\nHybrid Script 附一则：解决 PowerShell 无法双击打开路径含空格文件的 Bug\n\n","categories":["代码脚本"],"tags":["CMD","Powershell","混合脚本","Hybrid Script","相互注释"]},{"title":"Hybrid Script 附一则：解决 PowerShell 无法双击打开路径含空格文件的 Bug","url":"//hybrid-script-solve-ps-script-cant-be-double-clicked-with-blank-in-path/","content":"\n脚本文件里的 Hybrid Script（混合式脚本）\n\n上文曾介绍了混合式脚本的原理和示例，这里补充一个实际适用的场景。\n问题描述：\n\n在 Windows 下，即使正确关联了 .ps1 的打开方式，Powershell 也无法正常运行脚本，只有一闪而过的报错信息。\n正确设置了 PowerShell 的关联\n使用录屏软件捕获到这一闪而过的错误信息\n而首先打开 PowerShell 终端，并在终端里指定执行脚本，则可以正确执行：\n脚本本身没有问题\n\n错误原因：\n这个错误原因其实挺显然的——在 Windows 下双击执行，等同于运行 PowerShell.exe，并向其传入了脚本文件的完整地址作为参数。但 Windows Explorer 在传递 %1 时没有加引号，PowerShell.exe 也没有对此做检查。结果就是，只要脚本所在的目录含有空格，PowerShell.exe 就会把空格前半段视为文件地址，而把空格后半段视为另一个运行参数。\n而通过先启动终端再指定脚本运行正常，就是因为没有传参这个过程，Powershell 自行请求了脚本文件，就能正常执行。\n解决办法\n解决办法却不容易。修改双击打开时的参数设置为其加上引号，这个太困难了。修改 PowerShell 程序本身，为其添加参数检查更是不可能，只能坐等微软更新。\n剩下的只有两种办法，一是永远把 .ps1 脚本放在没有空格的目录里。不但本目录不能有空格，上级目录一直到盘符所在的根目录都不能有空格。这其实也挺麻烦的。\n另一种办法就是用混合式脚本：\n\n代码示例：\n\n&lt;# : test.ps1.bat@ECHO OFFpowershell -noprofile &quot;iex ($&#123;%~f0&#125; | out-string)&quot;goto :EOF:: 以上是 bat 代码，用以正确向 PowerShell 传递带空格路径 / 以下是 PowerShell 代码，示例用的 echo #&gt;echo &quot;&quot;echo ================================echo &quot;You can run PS1 correctly here.&quot;echo &quot;But can&#x27;t run it by double click.&quot;echo ================================echo &quot;&quot;cmd /c pause | out-null\n\n虽然我们要写的是 PowerShell 脚本，但为了让脚本能支持在含空格的路径下双击执行，我们不得不首先以批处理文件的形式调用 CMD，然后让 CMD 向 PowerShell 正确地传递带上引号的完整路径。这样，PowerShell 就能正确识别脚本文件的位置，执行混合脚本里的 PowerShell 代码段，完成最初预期的功能。\n\n双击运行效果：混合脚本显示的是 CMD 的黑窗口\n\n因为混合脚本首先运行的是 CMD，所以窗口变成了黑色。但 PowerShell 的脚本确实正确执行了。\n题外话：\n\n通常这种混合脚本我都会按语言命名为 ***.ps1.bat 以区别普通的 .bat，并提醒用户（也就是我自己）这需要 Windows 安装了 Powershell 才能正确执行。PowerShell 可以从 Windows 的系统组件里添加，Win10 则已经自带了。\n为了截图方便，上文的示例代码最后一行其实又用到了 CMD 代码的 pause，所以这个示例代码严格来说是 CMD → Powershell → CMD 的三阶混合脚本。\n\n","categories":["代码脚本"],"tags":["Powershell","混合脚本","空格","路径"]},{"title":"减小 vmware 虚拟机的硬盘容量，不是压缩","url":"//decrease-vmware-guest-disk-size-not-shrink/","content":"默认情况下，vmware 虚拟机的硬盘空间可以在 vmware 的虚拟机设置里调整大小，但只能『扩展』，却无法缩小。\n当输入较小数字时，按钮变灰，无法点击。\n问题：为什么要缩小虚拟机硬盘一，vmware 的虚拟硬盘文件 *.vmdk 默认是动态分配空间的，没有数据的虚拟 “硬盘空间” 并不占用真实主机的实际硬盘空间。当虚拟机内需要储存更多数据时，对应的 vmdk 文件会相应增大，以便容纳新增的数据。但当虚拟机内的数据被清理时，已经增大的 vmdk 文件却不会自动缩小。随着虚拟机的不断使用，『只增大不缩小』的情况会逐渐严重，直到 vmdk 体积达到预设的虚拟机硬盘完整容量为止。临时文件、虚拟机快照、积累性的文件复制与删除操作等各种情况都会增大 vmdk 体积。vmware 针对这种情况提供了 shrink disk（压缩硬盘）功能，也就是在虚拟机数据已经被清除后，整体扫描一遍 vmdk 文件，清理无效数据，缩小真实体积。但这也有两个麻烦：\n\n因为膨胀永远存在，所以压缩也要经常进行，难免感觉在做无用功。\nLinux 下 shrink 功能有 bug，需要配合 dd 命令先以 0 数据充，相当于先撑大再缩小，耗时数倍。参考：第四条豆知识\n\n二，很多情况下，我们安装虚拟机的用途都比较单一，虚拟机的实际硬盘占用也往往小于 vmware 的推荐值。这是实际需求方面及可操作方面。\n三，强迫症 &#x2F; 好奇 &#x2F; 无理由。\n于是，根据实际使用情况，适当降低虚拟机的硬盘容量，将『使用膨胀』的上限卡住，释放真实硬盘空间并避免经常的压缩操作，对时间和金钱都有好处。尤其是现在 SSD 逐步标配的阶段，虚拟机硬盘容量设置不当造成的浪费是很可观的。\n问题：如何操作我以一个当初决策不当分配了 40GB 硬盘空间的虚拟机 Windows XP 为例，重新调整的目标为 10GB。一般来说，全新安装的 Windows XP 大约占 4-5GB 空间，则我们还有约 5GB 空间可用来安装测试软件等，足够了。如果不够就自行酌情决定调整目标。\n一、清理删除当前虚拟机下的所有快照，如果这些快照很重要不能删，那接下来的操作对你就没意义了。\n二、确认虚拟机硬盘是拆分成多个文件的动态分配硬盘。本例子中，该虚拟机的所有文件放在 D:\\Program files\\Windows XP.vmwarevm 目录下。用 VSCode 打开虚拟机目录下和虚拟机同名的 *.vmdk 文件，如 『Windows XP.vmdk』。找到 # Extent description 部分，检查描述部分，一看就懂了。如图：打开 vmdk 时几种可能的情况：\n\n如果有多行描述，并且每行写了  SPARSE  ，这就是我们需要的类型，拆分+动态分配磁盘。直接跳过后续转格式步骤，进入修改分区步骤即可。\n如果有多行描述，但每行写的是  FLAT ，则为拆分的预分配磁盘，需要转格式。\n只有一行描述，写的是  FLAT ，则是单一文件预分配磁盘，也需要转格式。\n如果乱码或者提示打不开，则是单一文件动态分配磁盘，还是需要转格式。\n\nVMWare 在新建虚拟机时会默认选择第一种类型，但玩家当初可能出于性能等考虑，选择了其它类型的虚拟硬盘。那么就需要使用 vmware 自带的一个命令行工具\nvmware-vdiskmanager.exe\n转换成第一种类型。该工具在 vmware 安装目录下，默认为 “C:\\Program Files (x86)\\VMware\\VMware Workstation\\vmware-vdiskmanager.exe”。\n\n转换方法：\n该工具的命令行写法为：\n\n\n\n工具名\n参数 1\n源文件\n参数 2\n参数 3\n目标名称\n\n\n\nvmware-vdiskmanager\n-r（转格式）\nWindows XP.vmdk（例）\n-t（目的）\n1（目的磁盘类型，1 为拆分+动态分配）\nnewdisk.vmdk\n\n\n该命令中， -r，-t 1 两部分不需要变化，目标名称 随意，之后会改名覆盖源文件。源文件名 根据实际情况变化，而 工具名 通常要带上路径。\n所以完整的命令大约是如下样子：\n&quot;c:\\Program Files (x86)\\VMware\\VMware Workstation\\vmware-vdiskmanager.exe&quot; -r &quot;d:\\Program Files\\Windows XP.vmwarevm\\Windows XP.vmdk&quot; -t 1 &quot;d:\\Program Files\\Windows XP.vmwarevm\\newdisk.vmdk&quot;\n\n回车以后开始执行转换：\n\n转换完成以后，删除旧的 “windows XP.vmdk” 和多个关联文件 “windows XP-s0xx.vmdk”，然后把新的 newdisk.vmdk 重命名成 “windows XP.vmdk” 以替换。其它 newdisk-s00x.vmdk 不用变。\n\n三，打开虚拟机，进入系统。\n\n在虚机机内，使用分区管理软件将硬盘分区缩小，并将空闲保留在右端，分区块保持在左端。我们的整体目标是从 40GB 缩到 10GB，则现在要多缩一点给后续操作留出余量。如图，暂时缩到 9GB。\nWindows 7 以上系统，自带的磁盘管理就有『压缩卷』功能可以调整分区大小，WinXP 用的是 DiskGenius 免费版本。Win98 则需要寻找更古老的相应软件。\n中途可能需要重启虚拟机，无妨，调整完关闭虚拟机即可。\n\n四，加减乘除：\n再次打开 Windows XP.vmdk 文件，定位到 # Extent description 部分。这次重点放在第二部分数字内容上，经计算，该数字为每个分块文件对应虚拟硬盘的簇数量，每簇 512 Byte，2 簇 &#x3D; 1KB。我们的目标容量为 10GB，也就是：\n\n10(GB)*1024(MB&#x2F;GB)*1024(KB&#x2F;MB)&#x3D; 10485760 KB &#x3D; 20971520 簇。\n\n检查 # Extent description，前两个文件每个 8323072，则把第三行的数字改为\n\n20971520 – 8323072*2 &#x3D; 4325376\n\n并删掉后续各行及对应文件，我们就在 vmware 部分完成了虚拟机硬盘大小调整。\n五，补足余量：\n重开虚拟机。前次调整分区时，预留了 1GB 左右的余量。再次打开分区工具，把剩余未使用空间重新分配给各分区。\n因为对计算机分区而言，由于存在分区表、启动扇区等原因，物理上的 10GB 硬盘空间在系统内表现是略小于 10GB 的，『内』『外』之间有差额，这对于虚拟机也一样成立。如果一开始就分区 10GB 而外部调整也等 10GB 的话，再次启动虚拟机就会报分区表错误，界时修改起来反而麻烦。现在这样按先预留余量，而后补足分区操作就没问题了。\n六，清理死数据：\n由于直接修改了描述文件，改小了簇数量，-s003.vmdk 里原本存于 4325376 之后的数据变成了永久的『死数据』。关闭虚拟机后，需要使用 vmware-vdistmanager -r -t 1 再作一次转换。虽说是转换，但目的却是清理死数据。清理完以后直接单独替换新旧 -s003.vmdk 即可。（想想为什么？）\n————————————————-\n相关细节：\n虚拟机为 Linux 系统时原理一样。利用 GParted 等分区工具，首先缩小使用分区，并调整未分区块到尾端。关机编辑 vmdk 描述，开虚拟机调整补分区足余量，再用 vmware 提供的工具清理死数据即可。\n预分配类型的虚拟硬盘必须先 vdiskmanager 转类型，不能直接操作。追求性能的话在编辑完再转回去。不过追求性能的话应该上 SSD，一力降十会。\n编辑 .vmx 和 .vmdk 文件不要用 windows 自带的记事本。\n虚拟机备份直接复制整个目录即可。\n扩容不需要按本文操作，使用 vmware 自带功能即可。\n\n","categories":["软件使用"],"tags":["vmware","vmdk","缩小容量","最大虚拟磁盘大小","虚拟硬盘"]},{"title":"categories","url":"/categories/index.html","content":""},{"title":"404","url":"//404.html","content":"██╗  ██╗ ██████╗ ██╗  ██╗    ███╗   ██╗ ██████╗ ████████╗██║  ██║██╔═████╗██║  ██║    ████╗  ██║██╔═══██╗╚══██╔══╝███████║██║██╔██║███████║    ██╔██╗ ██║██║   ██║   ██║╚════██║████╔╝██║╚════██║    ██║╚██╗██║██║   ██║   ██║     ██║╚██████╔╝     ██║    ██║ ╚████║╚██████╔╝   ██║     ╚═╝ ╚═════╝      ╚═╝    ╚═╝  ╚═══╝ ╚═════╝    ╚═╝    ███████╗ ██████╗ ██╗   ██╗███╗   ██╗██████╗    ██╔════╝██╔═══██╗██║   ██║████╗  ██║██╔══██╗    █████╗  ██║   ██║██║   ██║██╔██╗ ██║██║  ██║    ██╔══╝  ██║   ██║██║   ██║██║╚██╗██║██║  ██║    ██║     ╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ╚═╝      ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝\n"},{"title":"Documentation","url":"/docs/index.html","content":"Elegant and Powerful Theme for HexoTheme NexT has the following features:\n\nVanilla JavaScript.\nSupport native dark mode.\nSupport Pjax to deliver a fast browsing experience.\nIntegrated MathJax and KaTeX mathematical formula rendering.\nIntegrated PDF.js and mermaid diagram.\nSupport Disqus, Changyan, LiveRe, Gitalk, Utterances and Isso comment systems.\nSupport a large number of third-party statistics services.\nEasy to switch CDN provider.\nEasy to customize content or modify style.\n\nFour Schemes in OneBy using different Schemes in NexT, you can simply change the style of your blog, and nearly all options can be used in all schemes.\n\n.image-comparison-container {\n    position: relative;\n}\n\n.image-comparison {\n    opacity: 1 !important;\n}\n\n@keyframes next-clip-path {\n    from {\n        clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);\n    }\n    to {\n        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n    }\n}\n\n.image-comparison:last-of-type {\n    animation: next-clip-path 8s alternate ease-in-out infinite;\n    position: absolute;\n    top: 0;\n}\n\n\n    \n    \n\n\nMultilingual SupportThanks to the contribution of our users and developers, NexT now supports over 20 languages.\n\n\nCode Highlighting ThemesNexT uses code highlighting themes from the Highlight.js and Prism package, and makes more than 300 themes available to you.\n\n\n\n\nTomorrow\nTomorrow Night\nTomorrow Night Eighties\n\n\n\n\n\n\n\n\n\n\n\nTomorrow Night Blue\nTomorrow Night Bright\nDefault\n\n\n\n\n\n\n\n\nSupported BrowsersWe design NexT to support the latest web browsers. We support the current versions of Chrome, Firefox, Safari, and Microsoft Edge. Many CSS3 and ES6 features are used in theme NexT, including CSS Variables, Destructuring assignment, Arrow functions and Spread operator.\n\n\n\nBrowser\nSupported versions\nRelease date\n\n\n\n IE\nN&#x2F;A\nOct 17, 2013\n\n\n Chrome\n60+\nJul 25, 2017\n\n\n Firefox\n55+\nAug 8, 2017\n\n\n Opera\n47+\nAug 9, 2017\n\n\n Safari\n11+\nSep 19, 2017\n\n\n Edge\n80+\nFeb 7, 2020\n\n\nSome other new Web APIs, such as IntersectionObserver and Fetch API, are used by NexT plugins. They are not core functions of NexT, so we have no plans to make them compatible with legacy browsers.\nIn addition, CSS position: sticky is used for sidebar positioning. On browsers that do not support this property, its fallback style position: static will be used.\nCustomize Your NexTNexT have flexible but simple options, and you can make your own blog with built-in third-party support. Now let&#39;s get started.\n"},{"title":"Troubleshooting","url":"/docs/troubleshooting.html","content":"Quick Debug InstructionsBefore submitting an Issue on GitHub, you can follow the steps below to debug:\nIf you get an error message from Hexo or your browser:\n\nIf the error comes from a Hexo plugin, such as hexo-word-counter, please submit an Issue to its GitHub repository.\nIf the error comes from a third-party service, such as the Gitalk comment system, please submit an Issue to its GitHub repository.\nOtherwise, please search in Google &#x2F; Stackoverflow &#x2F; GitHub Issues, or report it to us when submitting a new Issue.\n\nThe following steps will help you determine the cause of the problem:\n\nExecute hexo clean, clear the browser cache and purge CDN cache (or disable all CDN services) - This may take some time to take effect.\nDisable browser plug-ins or use other devices and browsers to test, because bugs may only occur in specific browsers.\nSwitch to another theme and check if the bug still exists (e.g. default theme landscape).\nUpgrade theme NexT to the latest version.\nUpgrade Hexo and all Hexo plugins to the latest version. You can use tools like npm-check.\nUpgrade or downgrade Node.js to the latest LTS version.\nUninstall all non-essential Hexo plugins, or delete node_modules and then reinstall all plugins using npm install --force.\n\nIf you decide to submit an Issue, please answer the following questions based on the Issue template:\n\nCan you reproduce the problem? Can you reliably reproduce the issue? If not, provide details about how often the problem happens and under which conditions it normally happens.\nDid the problem start happening recently or was this always a problem?\nIf the problem started happening recently, can you reproduce the problem in an older version of NexT? What&#39;s the most recent version in which the problem doesn&#39;t happen? You can download older versions of NexT from the releases page.\nWhich version of Node, Hexo and NexT are you using? You can get the exact version by running node -v, hexo version in your terminal.\nWhich packages do you have installed? You can get that list by copying the output from npm ls --depth 0 in Hexo root directory.\n\nKeep Up IndentationWhen you edit any YAML configs, always need to keep up indents.Currently, in all Hexo and NexT configuration files parameters uses 2 spaces indents from parent option.\nIf you encounter other yaml errors, you can also check if there is a syntax problem in the configuration file or front-matter.\nSet skip_renderIf you want to skip rendering for some files, you can set skip_render in the Hexo config file.\nHexo config fileskip_render:  - robots.txt  - CNAME\n\nDark Mode not WorkingThere are 3 prerequisites for Dark Mode to work:\n\nEnable darkmode in NexT config file.\nYour browser supports prefers-color-scheme media query. (Supported by most browsers released after 2020)\nEnable Dark Mode in your operating system settings.\n\nIn some operating systems, such as macOS, you can configure to enable dark mode at night. In other operating systems, the default color scheme is light, so you need to turn on Dark Mode in the system settings manually.\nTOC IssuesDo not write a skip-level heading in the post. For example, a third-tier heading ### followed by a ##### is not recommended.See: https://github.com/theme-next/hexo-theme-next/issues/882\nIf you are using hexo-renderer-markdown-it, it&#39;s recommended to install markdown-it-named-headings to make the TOC work correctly.\nnpm install markdown-it-named-headings\n\nSee: https://github.com/theme-next/hexo-theme-next/issues/1168Here is the Pull Request with bugfix for default config of hexo-renderer-markdown-it plugin.\nFavicon Set but Doesn&#39;t WorkPut your favicon under site's source dir. If you find that your Favicon doesn&#39;t work, please clean your browser&#39;s cache first and then visit your Favicon&#39;s URL directly, which should be http(s)://your-domain.com/favicon.ico.\nIf your site is in a subdirectory please set it to favicon: favicon.ico.\n\n"},{"title":"Plugins","url":"/plugins/index.html","content":"Hexo Plugins\nhexo-generator-searchdb\nhexo-pangu\nhexo-filter-mathjax\nhexo-word-counter\nhexo-optimize\n\nNexT Plugins\nhexo-next-three\nhexo-next-fireworks\nhexo-next-exif\nhexo-next-valine\nhexo-next-giscus\n\n\n\nVisit the Awesome NexT list for more plugins.\n\n"},{"title":"tags","url":"/tags/index.html","content":""},{"title":"Custom Files","url":"/docs/advanced-settings/custom-files.html","content":"Custom File SupportPull Request #868 has adjusted the way of customizing the layout or style, canceling the custom files (such as _custom/custom.styl) in the original theme directory, and only retaining the way of specifying the custom file in the NexT config file.\nIt is a good practice to separate the custom files from the theme files, so that you can add custom content without modifying the original source code of the theme, and avoid conflicts due to git merge.\nAs with Data Files, you can place all custom layouts or styles in a specific location (for example: hexo/source/_data). Add the custom file to hexo/source/_data and uncomment the content under the custom_file_path section in the NexT config file.\nThe file name and path must be the same in custom_file_path.\n\n\nNexT config filecustom_file_path:  #head: source/_data/head.njk  #header: source/_data/header.njk  #sidebar: source/_data/sidebar.njk  #postMeta: source/_data/post-meta.njk  #postBodyStart: source/_data/post-body-start.njk  #postBodyEnd: source/_data/post-body-end.njk  #footer: source/_data/footer.njk  #bodyEnd: source/_data/body-end.njk  #variable: source/_data/variables.styl  #mixin: source/_data/mixins.styl  #style: source/_data/styles.styl\n\nIn addition to custom_file_path, we also provide a more flexible way to customize, you can read the Theme Inject in documentation.\nExamples of Modifying LayoutLive2d WidgetCreate and edit source/_data/head.njk in site root directory and add the following content:\nhexo/source/_data/head.njk&lt;script src=&quot;https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js&quot;&gt;&lt;/script&gt;\n\nThen uncomment head under the custom_file_path section in NexT config file.\nNexT config filecustom_file_path:  head: source/_data/head.njk\n\nNetlify Logo in SidebarCreate and edit source/_data/sidebar.njk in site root directory and add the following content:\nhexo/source/_data/sidebar.njk&lt;div class=&quot;cc-license animated&quot; itemprop=&quot;sponsor&quot;&gt;  &lt;a href=&quot;https://www.netlify.com&quot; class=&quot;cc-opacity&quot; title=&quot;Deploy with Netlify → https://www.netlify.com&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;80&quot; src=&quot;https://www.netlify.com/img/global/badges/netlify-dark.svg&quot; alt=&quot;Netlify&quot;&gt;&lt;/a&gt;&lt;/div&gt;\n\nThen uncomment sidebar under the custom_file_path section in NexT config file.\nNexT config filecustom_file_path:  sidebar: source/_data/sidebar.njk\n\nExamples of Modifying StyleTagcloud ColorCreate and edit source/_data/variables.styl in site root directory and add variables:\nhexo/source/_data/variables.styl$tag-cloud-start      = #aaa;$tag-cloud-end        = #111;$tag-cloud-start-dark = #555;$tag-cloud-end-dark   = #eee;\n\nThen uncomment variable under the custom_file_path section in NexT config file.\nNexT config filecustom_file_path:  variable: source/_data/variables.styl\n\nHow to Change Content WidthBy default, the content width of NexT is controlled by the following variables:\n\n$content-desktop → when screen width &lt; 1200px.\n$content-desktop-large → when screen width &gt;&#x3D; 1200px.\n$content-desktop-largest → when screen width &gt;&#x3D; 1600px.\nIn mobile &#x2F; tablet devices it will use responsive width.\n\nYou can override the default content width by editing source/_data/variables.styl in site root directory.\nMuse / Mist schemesPisces / Gemini schemesDefault variables for both Muse and Mist schemes are defined as:\nnext/source/css/_variables/base.styl$content-desktop         = 700px$content-desktop-large   = 800px$content-desktop-largest = 900px\n\nFor example, you may override these variables with percentage value to increase content width. Create and edit source/_data/variables.styl in site root directory and add variables:\nhexo/source/_data/variables.styl$content-desktop         = 90%$content-desktop-large   = 90%$content-desktop-largest = 90%\n\nIf values will in percents, during opening sidebar will dynamically decrease content width to defined by you percent.But in standard behaviour, sidebar must displace content from yourself.To around it, you can specify content width in em:\nhexo/source/_data/variables.styl$content-desktop         = 50em$content-desktop-large   = 55em$content-desktop-largest = 60em\nDefault variables for Pisces (and Gemini) scheme are defined as:\nnext/source/css/_variables/Pisces.styl$content-desktop         = &#x27;calc(100% - %s)&#x27; % unit($content-desktop-padding / 2, &#x27;px&#x27;)$content-desktop-large   = 1160px$content-desktop-largest = 73%\n\n$content-desktop value in this schemes is auto-responsive by default. It can be changed to any value too, but for better content visibility recommended to stay it as is.\n\n\nIn this schemes content width was defined on maximum and already balanced: if desktop width will be wider – content width will more narrowed for easier reading. But if you want to make more narrow content width in wider desktops, here is example. Create and edit source/_data/variables.styl in site root directory and add variables:\nhexo/source/_data/variables.styl$content-desktop-large   = 65em$content-desktop-largest = 65%\n\nIn fact, Gemini scheme is just fork of Pisces scheme with some style improvements.Therefore, almost all part of variables from Pisces scheme are imported to Gemini scheme too.So, the changes of these variables or styles will be applied to both Pisces and Gemini schemes.\n\n\nThen uncomment variable under the custom_file_path section in NexT config file.\nNexT config filecustom_file_path:  variable: source/_data/variables.styl\n\nHide Sidebar on MobileCreate and edit source/_data/styles.styl in site root directory and add styles:\nhexo/source/_data/styles.styl+tablet-mobile() &#123;  .sidebar-toggle, .sidebar &#123;    display: none;  &#125;&#125;\n\nThen uncomment style under the custom_file_path section in NexT config file.\nNexT config filecustom_file_path:  style: source/_data/styles.styl\n\nHide &quot;Keep on posting&quot; in Archive PageCreate and edit source/_data/styles.styl in site root directory and add styles:\nhexo/source/_data/styles.styl.archive .collection-title &#123;  display: none !important;&#125;\n\nThen uncomment style under the custom_file_path section in NexT config file.\nNexT config filecustom_file_path:  style: source/_data/styles.styl\n"},{"title":"Front Matter","url":"/docs/advanced-settings/front-matter.html","content":"\nFront-matter is a block of YAML or JSON at the beginning of the file that is used to configure settings for your writings. Front-matter is terminated by three dashes when written in YAML or three semicolons when written in JSON.— from Hexo site.\n\nYAML\n---title: Hello Worlddate: 2013/7/13 20:46:25---\n\nJSON\n&quot;title&quot;: &quot;Hello World&quot;,&quot;date&quot;: &quot;2013/7/13 20:46:25&quot;;;;\n\nNext extends and provide more variables. It allows users to configure a single page.\nSettings &amp; Their Default Values\n\n\nSetting\nType\nDescription\nDefault\n\n\n\nauthor\nstring\nAuthor name for post copyright\nauthor in Hexo _config.yml\n\n\npost_link\nstring\nPost link\nNone\n\n\ndescription\nstring\nDocs here\nNone\n\n\ndirection\nstring\nAvailable value: rtl\nNone\n\n\nheader\nboolean\nWhether to display the post header in index page\ntrue\n\n\nmathjax\nboolean\nMathJax support\nmath.every_page in _config.yml\n\n\nsidebar\nboolean\nWhether the sidebar will be shown\nDepends on sidebar.display in _config.yml\n\n\ncopyright\nboolean\nWhether to display copyright notices below the post with theme.creative_commons.license and theme.creative_commons.post enabled\ntrue\n\n\nsticky\nnumber\nPin the post to the top of the index page. hexo-generator-index plugin required\n0\n\n\nquicklink\nobject (1)\nQuicklink support\nFrom _config.yml\n\n\nreward_settings\nobject (1)\nReward settings\nFrom _config.yml\n\n\ntoc\nobject (1)\nTable of Contents in the sidebar\nFrom _config.yml\n\n\n(1): They have the same structure as the options in NexT config file.\nExample\ntoc:  enable: true  number: false  max_depth: 3reward_settings:  enable: true  comment: Buy me a coffeequicklink:  enable: true  delay: true  timeout: 3000  priority: true\n\nUndocumented Front-matter VariablesThe following variables are not mentioned in the Hexo documentation, but are required by hexo-theme-unit-test.\n\n\n\nSetting\nType\nExample\n\n\n\nlink\nstring\nlink-post\n\n\nphotos\narray\ngallery-post\n\n\n"},{"title":"Advanced Settings","url":"/docs/advanced-settings/index.html","content":"Besides common Theme Settings and Third-party Plugins, NexT supports some advanced settings which makes NexT customizable.Please note that those settings may lead to abnormal behavior if they are wrong. Change them only when you know for what they are.\n\nVendors\nCustom Files\nInjects\nFront-matter\n\n"},{"title":"Injects","url":"/docs/advanced-settings/injects.html","content":"InjectsWe extended the Hexo filter and added theme_inject, so user can add the desired custom content to any injection point.\nSynopsishexo.extend.filter.register(&#x27;theme_inject&#x27;, function(injects) &#123;  // ...&#125;);\n\nA injects argument will get passed into the function, so we can use it add custom code in injectPoint as following.\nFor inject view:\n// The name of same `injectPoint` suggest be unique. If same, it will override low priority configurations.// `locals` and `options` is the same as partial https://hexo.io/docs/helpers#partial.// `order` defines the order of injection, which by default depends on the priority of injection.hexo.extend.filter.register(&#x27;theme_inject&#x27;, function(injects) &#123;  // it will put code from this filePath into injectPoint.  injects.[injectPoint].file(name, filePath, [locals, options, order]);  // it will put raw string as code into injectPoint.  injects.[injectPoint].raw(name, raw, [locals, options, order]);&#125;);\n\nYou have to note filePath, it must be absolute path or relative to hexo_dir.\n\n\nFor inject style:\nhexo.extend.filter.register(&#x27;theme_inject&#x27;, function(injects) &#123;  // it will put styleFile into injectPoint.  injects.[injectPoint].push(styleFile);&#125;);\n\nThese are many injectPoint, defined in utils.js\nmodule.exports = &#123;  views: [&#x27;head&#x27;, &#x27;header&#x27;, &#x27;sidebar&#x27;, &#x27;postMeta&#x27;, &#x27;postBodyStart&#x27;, &#x27;postBodyEnd&#x27;, &#x27;footer&#x27;, &#x27;bodyEnd&#x27;, &#x27;comment&#x27;],  styles: [&#x27;variable&#x27;, &#x27;mixin&#x27;, &#x27;style&#x27;]&#125;;\n\ncustom_file_path also uses this API, see default-injects.js. It will consume custom name in view inject points. So if you use custom_file_path, please not use custom.\nExamplesOne: load a custom script. We can add it in bodyEnd.\nhexo.extend.filter.register(&#x27;theme_inject&#x27;, function(injects) &#123;  injects.bodyEnd.raw(&#x27;load-custom-js&#x27;, &#x27;&lt;script src=&quot;js-path-or-cdn.js&quot;&gt;&lt;/script&gt;&#x27;, &#123;&#125;, &#123;cache: true&#125;);&#125;);\n\nTwo: add a custom my-favourite-food.njk to sidebar.\nStep1: you should create my-favourite-food.njk in any path(e.g. source/_data/) as below. You can get variable from hexo or local defined in filter.\n&#123;% for food in foods %&#125;  &lt;div&gt;&#123;&#123; food &#125;&#125;&lt;/div&gt;&#123;% endfor %&#125;\n\nStep2: add filter to load it.\nhexo.extend.filter.register(&#x27;theme_inject&#x27;, function(injects) &#123;  injects.sidebar.file(&#x27;my-favourite-food&#x27;, &#x27;source/_data/my-favourite-food.njk&#x27;, &#123;    foods: [&#x27;apple&#x27;, &#x27;orange&#x27;]  &#125;);&#125;);\n\nThree: want to have big header, put big-header.styl to NexT.\nOf course, you need to create this file first(e.g. source/_data/big-header.styl).\nh1 &#123;  font-size: 2rem;&#125;\n\nAnd then add it in filter.\nhexo.extend.filter.register(&#x27;theme_inject&#x27;, function(injects) &#123;  injects.style.push(&#x27;source/_data/big-header.styl&#x27;);&#125;);\n\nPluginWe also support hexo&#39;s plugin system, which makes it easy to extend functions without modifying the source code of the core module. You can see https://hexo.io/docs/plugins.html#Plugin to learn how to create a plugin.\n"},{"title":"Vendors","url":"/docs/advanced-settings/vendors.html","content":"CDN SettingsYou can specify a proper CDN provider in the vendors section in NexT config file, which can make the static assets of plugins load faster.\nNexT config filevendors:  # The CDN provider of NexT internal scripts.  # Available values: local | jsdelivr | unpkg | cdnjs | custom  # Warning: If you are using the latest master branch of NexT, please set `internal: local`  internal: local  # The default CDN provider of third-party plugins.  # Available values: local | jsdelivr | unpkg | cdnjs | custom  # Dependencies for `plugins: local`: https://github.com/next-theme/plugins  plugins: cdnjs  # Custom CDN URL  # For example:  # custom_cdn_url: https://cdn.jsdelivr.net/npm/$&#123;npm_name&#125;@$&#123;version&#125;/$&#123;minified&#125;  # custom_cdn_url: https://cdnjs.cloudflare.com/ajax/libs/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;cdnjs_file&#125;  custom_cdn_url:\n\nInternal Scriptsinternal: local is used to set how to load the internal scripts, e.g. source/js/utils.js. These libraries are loaded from your site by default, they are required by the basic functions of NexT. Set internal to jsdelivr, unpkg or cdnjs to load them from the corresponding CDN.\nIf your site is deployed to any free hosting service (Github, Gitlab, etc.), CDN links are recommended for internal scripts. CDN usually has faster speeds and no traffic restrictions.\n\n\nIf you are using the latest master branch of NexT, please set internal: local.\n\n\nThird-party Pluginsplugins: cdnjs is used to set how to load the third-party plugins, e.g. anime.js. Third-party plugins are loaded from CDNJS CDN by default.\nAnd we also provide other optional CDNs, including the famous UNPKG and jsDelivr. These CDN providers are chosen to deliver our third-party plugins because they are fast and reliable. Set plugins to unpkg or cdnjs to load them from different CDN provider.\nParticularly, if you are a Chinese blogger or most of your visits come from China, please note that the CDNJS is blocked in some parts of China, don&#39;t use it as your CDN provider.\n\n\nIf your would like to load all third-party plugins from your site, please set plugins to local and install the @next-theme/plugins package: https://github.com/next-theme/pluginsIf your website is deployed in the local area network, then this will have a faster loading speed than CDN services.\n\n\nCustom CDN URLsSometimes you may need to use CDNs other than jsdelivr, unpkg or cdnjs. For example, users can get faster loading speed in certain areas using the mirror site of jsDelivr.\nTo enable custom CDN URL, you need to set internal: custom and &#x2F; or plugins: custom in the vendors section, and then specify a CDN URL with the custom_cdn_url option.\nRemember to use the HTTPS protocol of CDN links when you enable HTTPS on your site.\njsDelivr MirrorsjsDelivr could automatically minify the JS and CSS files, even if the package owner doesn&#39;t publish the minified version on npm. You just need to access *.min.js and  *.min.css, instead of *.js and  *.css. For more information: https://www.jsdelivr.com/features\nIn theme NexT, you can simply use the variable $&#123;minified&#125; in custom_cdn_url to serve the minified version if you are using a mirror site of jsDelivr. NexT will automatically replace the variable $&#123;minified&#125; with the path of each JS file to load from CDN.\nNexT config filevendors:  custom_cdn_url: https://fastly.jsdelivr.net/npm/$&#123;npm_name&#125;@$&#123;version&#125;/$&#123;minified&#125;\n\nCDNJS MirrorsNexT config filevendors:  custom_cdn_url: https://cdnjs.cloudflare.com/ajax/libs/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;cdnjs_file&#125;\n\nCDN URLs For Each LibraryFurthermore, you can configure the CDN URL of each library individually in the vendors section.\nThe config is in format of libname: CDN URL. The libname is the same as in the _vendors.yml file. The CDN URL will override the default one.\nFor example, if you want to set the CDN URL for anime, go to NexT config file and add a key named anime in the vendors section, and set its value to the CDN URL of anime.js:\nNexT config filevendors:  # ...  # Some contents...  # ...  anime: //fastly.jsdelivr.net/gh/juliangarnier/anime@latest/lib/anime.min.js\n\nIt&#39;s recommended to use the same version of the library as in _vendors.yml to avoid potential problems.\n"},{"title":"Configuration","url":"/docs/getting-started/configuration.html","content":"How to configure NexT theme? The traditional approach is to edit NexT config file (themes/next/_config.yml or node_modules/hexo-theme-next/_config.yml) directly. However, the config file will be overwritten when upgrade NexT theme via git or npm, which brings inconvenience to the configuration of the theme.\nAt present, NexT encourages users to use the Alternate Theme Config. It&#39;s a feature of Hexo and the documentation is here: Hexo Configuration.\nThis tutorial shows you how to configure NexT using Alternate Theme Config. Please choose only one of the following solutions and resume next steps.\n_config.[name].ymlWith this way, all your theme configurations locate in config file /_config.[name].yml. Replace [name] with the value of theme option in Hexo config file. For NexT theme, the file name is _config.next.yml by default.\nUsage\nPlease ensure you are using Hexo 5.0 or later.\n\nCreate a config file in site&#39;s root directory, e.g. _config.next.yml.\n\nCopy needed NexT theme options from NexT config file into this config file. If it is the first time to install NexT, then copy the whole NexT config file by the following command:\n # Installed through npmcp node_modules/hexo-theme-next/_config.yml _config.next.yml# Installed through Gitcp themes/next/_config.yml _config.next.yml\n\ntheme_configWith this way, all your Hexo and NexT configurations locate in main Hexo config file. You don&#39;t need to edit NexT config file or create any new files. But you need to keep up indentation within theme_config option.\nUsageCopy needed NexT theme options from NexT config file into Hexo config file, then\n\nMove all these settings to the right with two spaces indentation (in Visual Studio Code: select all strings, CTRL + ]).\nAdd theme_config: parameter above all this settings.\n\nnext.yml (Deprecated)Older versions of NexT theme also provide another configuration method, which is to place the theme configuration in the /source/_data/next.yml file. This method is deprecated, please use _config.next.yml instead. If the /source/_data/next.yml file exists, move it to the Hexo root directory and rename it to _config.next.yml.\n"},{"title":"Deployment","url":"/docs/getting-started/deployment.html","content":"Local Deployment\nModify files locally.\nLocalization testing: hexo clean &amp;&amp; hexo s.\nDeployment: hexo g -d.\n\nContinuous Integration\nEdit the file directly online, effective immediately\nAutomatic deployment, simultaneous deployment to multiple locations\n\nCloudflare PagesCloudflare Pages is a JAMstack platform for frontend developers to collaborate and deploy websites. You can connect your GitHub or GitLab account with Cloudflare Pages. After that, you just need to push your blog source code to the repository, and create a new project in Cloudflare Pages. In the project&#39;s settings, you can configure the build settings as shown below.\n\nCloudflare Pages will automatically build and deploy your site.\nNetlifyNetlify is an all-in-one platform for automating modern web projects. Replace your hosting infrastructure, continuous integration, and deployment pipeline with a single workflow. Integrate dynamic functionality like serverless functions, user authentication, and form handling as your projects grow.\nPerhaps you have already found that this website is deployed on Netlify. Checkout deploy.sh and netlify.toml in theme-next-docs repository for more information.\nGithub PagesTo publish your Hexo site on Github Pages, you need create a GitHub repository and push your local repository to it. Visit your GitHub repository, from the main menu choose Settings &gt; Pages. In then center of your screen you will see this option:\n\nChange the Source to GitHub Actions. The change is immediate; you do not have to press a Save button.\nCreate an empty file .github/workflows/hexo.yaml in your local repository. Copy and paste the YAML below into the file you created. Change the branch name and other parameters as needed.\n.github/workflows/hexo.yaml# Sample workflow for building and deploying a Hexo site to GitHub Pagesname: Deploy Hexo site to Pageson:  # Runs on pushes targeting the default branch  push:    branches: [$default-branch]  # Allows you to run this workflow manually from the Actions tab  workflow_dispatch:# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pagespermissions:  contents: read  pages: write  id-token: write# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.concurrency:  group: &quot;pages&quot;  cancel-in-progress: false# Default to bashdefaults:  run:    shell: bashjobs:  # Build job  build:    runs-on: ubuntu-latest    steps:      - name: Checkout        uses: actions/checkout@v3        with:          submodules: recursive      - name: Setup Pages        id: pages        uses: actions/configure-pages@v3      - name: Use Node.js 18.x        uses: actions/setup-node@v3        with:          node-version: &quot;18&quot;      - name: Install Dependencies        run: npm install      - name: Build with Hexo        run: npx hexo g      - name: Upload artifact        uses: actions/upload-pages-artifact@v1        with:          path: ./public  # Deployment job  deploy:    environment:      name: github-pages      url: $&#123;&#123; steps.deployment.outputs.page_url &#125;&#125;    runs-on: ubuntu-latest    needs: build    steps:      - name: Deploy to GitHub Pages        id: deployment        uses: actions/deploy-pages@v2\n\nCommit the change to your local repository with a commit message of something like &quot;Add workflow&quot;, and push to GitHub. GitHub will build and deploy your site automatically. In the future, whenever you push a change from your local repository, GitHub will rebuild your site and deploy the changes.\nGitlab CIGitLab offers a continuous integration service and pages service. If you add a .gitlab-ci.yml file to the root directory of your repository, and configure your GitLab project to use a Runner, then each commit or push, triggers your CI pipeline. The .gitlab-ci.yml file tells the GitLab runner what to do. By default it runs a pipeline with three stages: build, test, and deploy. You don&#39;t need to use all three stages; stages with no jobs are simply ignored. And at the end, your websites will be published on GitLab Host automatically.\n\nAdd .gitlab-ci.yml to the root directory of your repository, and configure it.\n hexo/.gitlab-ci.ymlimage: node:ltsbefore_script:  # Set TimeZone, eg: Asia/Shanghai  # - export TZ=&#x27;Asia/Shanghai&#x27;  # Restore last modified time  - &quot;git ls-files -z | while read -d &#x27;&#x27; path; do touch -d \\&quot;$(git log -1 --format=\\&quot;@%ct\\&quot; \\&quot;$path\\&quot;)\\&quot; \\&quot;$path\\&quot;; done&quot;pages:  stage: build  cache:    paths:    - node_modules/  script:  - npm install  - npx hexo deploy  artifacts:    paths:    - public  only:  - master\n\nUpload scaffolds, source, themes, .gitignore, .gitlab-ci.yml, _config.yml, and package.json to your Gitlab repository.\n $ git init$ ssh -T git@gitlab.com$ git remote add origin YOUR-GITLAB-REPO-SSH-LINK$ git add .$ git commit -m &quot;COMMIT MESSAGE&quot;$ git push -u origin master\n\nNow, your static website is available at https://yourname.gitlab.io/project that is similar to GitHub. More GitLab Pages config in here.\nOf course, you can also publish static website on GitHub Pages or others pages service. There are two ways to configure .gitlab-ci.yml:\nHTTPSSSH\nGet the Access Token: Settings → Developer settings → Personal access token → Generate new token. Set access rights according to the actual situation. It should be noted that the access token is only displayed once on this page, and it should be copied, otherwise it can only be regenerated.\n\nClick SETTINGS-CI/CD → Variables in Gitlab, and defined access token as custom variable GITHUB_ACCESS_TOKEN. Or set USERNAME PASSWORD variable for coding repo.\n\nConfigure .gitlab-ci.yml: only add deploy stage at the end of this file\n  hexo/.gitlab-ci.ymlgithub:  stage: deploy  script:  - cd ./public  - git init  - git config --global user.name &quot;YOUR-USER-NAME&quot;  - git config --global user.email &quot;YOUR-EMAIL&quot;  - git add .  - git commit -m &quot;gitlab-auto-deploy&quot;  - git push --force --quiet --set-upstream https://$GITHUB_ACCESS_TOKEN@github.com/username/username.github.io.git master # replace github_access_token  # - git config http.postBuffer 524288000  # - git push --force --quiet --set-upstream https://$USERNAME:$PASSWORD@git.coding.net/username/reponame.git master # replace username &amp; password, please escape the password  only:  - master\nDeploy key is a SSH key set in your repo to grant client read-only (as well as r&#x2F;w, if you want) access to your repo. This method is suitable for most public blog repositories and there are no private sub-modules in the repositories.\n\nGenerate a deploy key\n  $ ssh-keygen -t rsa -b 4096 -C &quot;&#123;email&#125;&quot; -f ~/.ssh/deploy_key\n\nClick SETTINGS-CI/CD → Variables in Gitlab, copy the content of private key and defined it as custom variable DEPLOY_PRIVATE_KEY.\n\nConfigure .gitlab-ci.yml: only update script in before_script\n  hexo/.gitlab-ci.ymlbefore_script:  # Set TimeZone, eg: Asia/Shanghai  # - export TZ=&#x27;Asia/Shanghai&#x27;  - git config --global user.name &quot;YOUR-USER-NAME&quot;  - git config --global user.email &quot;YOUR-EMAIL&quot;  # Restore last modified time  - &quot;git ls-files -z | while read -d &#x27;&#x27; path; do touch -d \\&quot;$(git log -1 --format=\\&quot;@%ct\\&quot; \\&quot;$path\\&quot;)\\&quot; \\&quot;$path\\&quot;; done&quot;  # Install ssh-agent if not already installed, it is required by Docker.  # (change apt-get to yum if you use a CentOS-based image)  - &#x27;which ssh-agent || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )&#x27;  # Run ssh-agent (inside the build environment)  - eval $(ssh-agent -s)  # Add the SSH key stored in SSH_PRIVATE_KEY variable to the agent store  - ssh-add &lt;(echo &quot;$DEPLOY_PRIVATE_KEY&quot;)  # For Docker builds disable host key checking. Be aware that by adding that  # you are susceptible to man-in-the-middle attacks.  # WARNING: Use this only with the Docker executor, if you use it with shell  # you will overwrite your user&#x27;s SSH config.  - mkdir -p ~/.ssh  - &#x27;[[ -f /.dockerenv ]] &amp;&amp; echo -e &quot;Host *\\n\\tStrictHostKeyChecking no\\n\\n&quot; &gt; ~/.ssh/config&#x27;  # In order to properly check the server&#x27;s host key, assuming you created the  # SSH_SERVER_HOSTKEYS variable previously, uncomment the following two lines  # instead.  # - mkdir -p ~/.ssh  # - &#x27;[[ -f /.dockerenv ]] &amp;&amp; echo &quot;$SSH_SERVER_HOSTKEYS&quot; &gt; ~/.ssh/known_hosts&#x27;  # Install pandoc, eg: v1.19.2.1  # - wget https://github.com/jgm/pandoc/releases/download/1.19.2.1/pandoc-1.19.2.1-1-amd64.deb  # - dpkg -i ./pandoc-1.19.2.1-1-amd64.debimage: node:ltspages:  cache:    paths:    - node_modules/  script:  - npm install  - npx hexo deploy  artifacts:    paths:      - public  only:    - master\n\n\nVariables are not masked, and their values can be shown in the job logs if explicitly asked to do so. So make sure gitlab pipelines can only be viewed by yourself.\n\n"},{"title":"Getting Started","url":"/docs/getting-started/index.html","content":"Hexo InstallationIf this is your first time using Hexo, you can take some time to review the Hexo Docs to see how to install Hexo and initialize a site. After the installation is successful, you should be able to execute hexo (or npx hexo) on the command line, and there must be package.json, source, themes and other directories in your site root directory:\n$ cd hexo-site$ ls_config.yml  node_modules  package-lock.json  package.json  scaffolds  source  themes\n\nIf you are new to Node.js or Hexo, you can also modify the source code of an existing Hexo website instead of creating a new one, to help you understand how Hexo works. In fact, the document you are reading is generated by Hexo with NexT, and you can install it with the following command:\n$ git clone https://github.com/next-theme/theme-next-docs$ cd theme-next-docs$ npm install\n\n\nMake sure that you have installed Hexo and created a site with it successfully, because the following documents require you to operate in the site root directory.\nNexT InstallationThe detailed steps to install or upgrade the theme are as follows.\nDownloading NexTIt&#39;s easy to install Hexo theme: you can choose to install the theme through npm, or download the source code of the theme in the themes directory under site root directory.\nUsing npmUsing gitIf you&#39;re using Hexo 5.0 or later, the simplest way to install is through npm.\nOpen your Terminal, change to Hexo site root directory and install NexT theme:\n$ cd hexo-site$ npm install hexo-theme-nextIf you know about Git, you can clone the whole repository and update it in any time with git pull command instead of downloading archive manually.\nOpen your terminal, change to Hexo site root directory and clone the latest master branch of NexT theme:\n$ cd hexo-site$ git clone https://github.com/next-theme/hexo-theme-next themes/next\n\nYou can also read detailed installation instructions if you want any other installation variant.\n\n\nUpgrading NexTA new version of NexT will be released every month. Please read the release notes before updating the theme. You can update NexT by the following command.\nUsing npmUsing gitInstall the latest version through npm:\n$ cd hexo-site$ npm install hexo-theme-next@latestOr update to the latest master branch:\n$ cd hexo-site$ cd themes/next$ git pull origin master\n\nWhen running git pull, you can bypass merge conflicts (error message like «Commit your changes or stash them before you can merge») by using the Commit, Stash or Reset commands for local changes. See here how to do it.\n\nIf you are still using NexT version 5 or 7, you can read instructions for upgrading from legacy version.\n\n\nConfiguration FilesAfter the installation of Hexo and NexT, you may found that there are two configuration files using by Hexo and both called _config.yml:\n\nThe first one is under site root directory, which contains Hexo&#39;s config.\nThe second one is under theme root directory (e.g. themes/next/_config.yml or node_modules/hexo-theme-next/_config.yml), which is provided by NexT and contains theme&#39;s config.\n\nLet&#39;s call the first one – Hexo config file, and the second one – NexT config file.\nHowever, we do not recommend directly modifying the NexT config file. It is quite often running into conflict status when updating NexT theme via git pull, or need to merge configurations manually when upgrading to new releases. For the theme installed through npm, it is also difficult to modify the NexT config file in node_modules.\nIn order to resolve this issue, we recommend using the Alternate Theme Config feature to configure theme NexT.\n\n\nHexo ConfigurationThe following settings in Hexo config file are very helpful for optimizing your website.\nConfiguring AuthorEdit Hexo config file and set the value of author to your nickname.\nHexo config file# Siteauthor:\n\nConfiguring DescriptionEdit Hexo config file and set the value of description to your description, which can be a sentence you like.\nHexo config file# Sitedescription:\n\nEnabling NexTLike all Hexo themes, after you download it, open Hexo config file, find theme option, and change its value to next (or another theme directory name).\nHexo config filetheme: next\n\nNow you have installed NexT theme and enabled it. The following steps will help you verify whether NexT is enabled correctly.\nChecking NexTIt&#39;s recommended to use hexo clean to clean Hexo&#39;s cache first.Then start Hexo local server with debug parameter (by adding --debug), the whole command is hexo s --debug. You can see the output while running, and if you find problem, you can use the output to help others locate error better. When it prints:\nINFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.\n\nNow you can open http://localhost:4000 in your browser, and check whether the site works correctly.\nIf you find your site looks like this picture, you have installed it correctly. That&#39;s default NexT scheme – Muse.\n\n\nAfter that we can configure deployment.\nIf everything is OK, in next steps we will change some settings including personalization and third-party services integration.\n"},{"title":"Installation","url":"/docs/getting-started/installation.html","content":"Select VersionA new version of NexT will be released every month. You can choose to install the latest version or choose a stable old version.\nLatest Master BranchLatest Release VersionSpecific Release VersionOption 1: Download the Latest Master Branch\nMay be unstable, but includes latest features. At most cases useful and recommended for advanced users and for developers.Option 2: Download the Latest Release Version\nAt most cases stable. Recommended for beginners.Option 3: Download the Specific Release Version\nIn rare cases useful, but not recommended.You must define version. Let&#39;s take v8.0.0 as an example. Replace it with any version from tags list.\n\nGet NexTThere are 2 recommended ways to download NexT: npm and git. You need to choose only one of them. Other installation methods, such as downloading and decompressing the theme source code in zip format from GitHub, are no longer recommended, because the installed theme is difficult to manage and upgrade.\nChange dir to site root directory in the command line first, and then continue with the following steps.\nUsing npmIf you&#39;re using Hexo 5.0 or later, you can install hexo-theme-next through npm.\nLatest Release VersionSpecific Release Version$ npm install hexo-theme-next@latest\n\nThis variant will install the latest release version.$ npm install hexo-theme-next@8.0.0\n\nThis variant will install the specific release version.\n\nUsing gitLatest Master BranchSpecific Release Version$ git clone https://github.com/next-theme/hexo-theme-next themes/next\n\nOr download via mirror on GitLab:\n$ git clone https://gitlab.com/hexo-theme-next/hexo-theme-next themes/next\n\nThis variant will install the whole repository (with .git directory inside).And in any time you can update current version with git (instructions below) and switch to any tagged release or on latest master or any other branch.\nGet tags list:\n$ cd themes/next$ git tag -l...v8.0.0-rc.1v8.0.0-rc.2v8.0.0-rc.3...\n\nFor example, you want to switch on v8.0.0 tagged release version. Input the following command:\n$ git checkout tags/v8.0.0Note: switching to &#x27;tags/v8.0.0&#x27;....HEAD is now at f27e45b Release v8.0.0\n\nIf you want to switch on latest release version without defining tag (optional)\n$ git checkout $(git describe --tags $(git rev-list --tags --max-count=1))\n\nAnd if you want to switch back on master branch, input this command:\n$ git checkout master$ git clone --branch v8.0.0 https://github.com/next-theme/hexo-theme-next themes/next\n\nOr download via mirror on GitLab:\n$ git clone --branch v8.0.0 https://gitlab.com/hexo-theme-next/hexo-theme-next themes/next\n\nThis variant will install the specific release version (with .git directory inside).And in any time you can switch to any tagged release, but with limit to specific version.\n\nAnd if you see any error message during update (something like «Commit your changes or stash them before you can merge»), recommended to learn Alternate Theme Config feature. Howbeit, you can bypass update errors by Commit, Stash or Discard local changes. See here how to do it.\nSet It UpWhen NexT download will complete, we must go back to previous guide and follow Enabling NexT instructions.\n"},{"title":"Upgrade","url":"/docs/getting-started/upgrade.html","content":"NexT Compatibility with Hexo Version\n\n\nVersion\nHexo 3.0.0-beta.4 or earlier\nHexo 3.0.0-rc.1 ~ 3.9\nHexo 4.0 ~ 4.2.1\nHexo 5.0 or later\n\n\n\nNexT v0.4.5.1 or earlier\n✅\n✅\n❌ Icon (2)\n❌ Icon (2)\n\n\nNexT v0.4.5.2 ~ v7.4.1\n⚠️ Data Files (1)\n✅\n❌ Icon (2)\n❌ Icon (2)\n\n\nNexT v7.4.2 ~ v8.1.0\n⚠️ Data Files (1)\n✅\n✅\n✅\n\n\nNexT v8.2.0 or later\n⚠️ Nunjucks (3)\n⚠️ Nunjucks (3)\n⚠️ Nunjucks (3)\n✅\n\n\n(1): Hexo 3.0.0-beta.4 or earlier does not support Data Files.(2): Icons may not be displayed normally.(3): Nunjucks renderer plugin required.\nNexT RepositoriesDue to historical reasons, NexT has three different repositories.\n\n\n\nYears\nVersion\nRepository\n\n\n\n2014 ~ 2017\nv5\nhttps://github.com/iissnan/hexo-theme-next\n\n\n2018 ~ 2019\nv6 ~ v7\nhttps://github.com/theme-next/hexo-theme-next\n\n\n2020\nv8\nhttps://github.com/next-theme/hexo-theme-next\n\n\nUpgrade from Legacy VersionIt&#39;s recommended to upgrade NexT to version 8 to get the latest features and supports in the new Theme-Next repository.\nBreaking ChangesThere are some breaking changes that need attention when upgrading across versions.\n\nUpdate language configuration (for Simplified Chinese) Since v6.0.3, zh-Hans has been renamed to zh-CN: https://github.com/theme-next/hexo-theme-next/releases/tag/v6.0.3\n Users upgrading to v6.0.3 and later need to explicitly modify the language configuration in Hexo config file, otherwise the language display is incorrect.\n\nSince v8.0.0, all libraries under the next/source/lib directory was moved out to @next-theme&#x2F;plugins. Please see this article for the new 3rd-party libraries installation method: Adding Plugins.\n\n\nUpgradeSo, NexT suggest to upgrade from version 5 or 7 to version 8 in this way:\n\nYou need to do some copies of old NexT files: 1.1. _config.yml or next.yml (if you used Alternate Theme Config). 1.2. Custom CSS files placed in next/source/css/_custom/* and next/source/css/_variables/* directories. 1.3. Custom layout files placed in next/layout/_custom/*. 1.4. Any another possible custom additions which can be found by compare tools between repositories.\nThen rename the old NexT folder, for example, rename next to next-old.\nInstall the new version according to the method provided in this article: installation instructions. Run hexo clean and hexo s to check whether the site works correctly.\nUpdate Hexo and Hexo plugin If after completing the above steps, an error occurs when executing hexo s or hexo g, it means that there may be a conflict between the old version of Hexo &#x2F; Hexo plugin and the new version of the theme NexT. We recommend upgrading Hexo and Hexo plugins to the latest version. You can run npm outdated to see all the upgradeable plugins.\nIf you see any bugs or you simply does not like this version, you can switch back to the old version at any time.\n\n"},{"title":"Caniuse","url":"/docs/tag-plugins/caniuse.html","content":"Usage&#123;% caniuse feature @ [periods] %&#125;\n\nor\n&#123;% can feature @ [periods] %&#125;\n\n\nfeature   : Search for the feature you want on https://caniuse.com, then click on the hash sign to the left of the search result heading and you will get the unique name of this feature.\n[periods] : Optional parameter. Select the browser versions to display. Supported values: past_1, past_2, past_3, past_4, past_5, current, future_3, future_2, future_1. If this value is empty, the default value current will be used.\n\nExamplesCaniuse without periods&#123;% caniuse fetch %&#125;\n\n\n\nCaniuse with current period&#123;% caniuse sharedarraybuffer @ current %&#125;\n\n\n\nCaniuse with future periods&#123;% caniuse loading-lazy-attr @ future_3,future_2,future_1 %&#125;\n\n\n\nCaniuse with past periods&#123;% caniuse link-rel-modulepreload @ past_1,past_2,past_3,past_4,past_5 %&#125;\n\n\n"},{"title":"Button","url":"/docs/tag-plugins/button.html","content":"Usage&#123;% button url, text, icon [class], [title] %&#125;\n\nor\n&#123;% btn url, text, icon [class], [title] %&#125;\n\n\nurl     : Absolute or relative path to URL.\ntext    : Button text. Required if no icon specified.\nicon    : Font Awesome icon name. Required if no text specified.\n[class] : Optional parameter. Font Awesome class(es): fa-fw | fa-lg | fa-2x | fa-3x | fa-4x | fa-5x\n[title] : Optional parameter. Tooltip at mouseover.\n\nExamples&#123;% button #, Text %&#125;\n\nText\n\nButton with text &amp; title&#123;% btn #, Text %&#125;&#123;% btn #, Text &amp; Title,, Title %&#125;\n\nTextText & Title\n\n&#123;% btn #, Text %&#125; &#123;% btn #, Text &amp; Title,, Title %&#125;\n\nText Text & Title\n\n&#123;% btn #, Text %&#125;&#123;% btn #, Text &amp; Title,, Title %&#125;\n\nText\nText & Title\n\nButton with icon&#123;% btn #,, home fa-5x %&#125;&#123;% btn #,, home fa-4x %&#125;&#123;% btn #,, home fa-3x %&#125;&#123;% btn #,, home fa-2x %&#125;&#123;% btn #,, home fa-lg %&#125;&#123;% btn #,, home %&#125;\n\n\n\n\n\n\n\n\nButton with text &amp; icon&#123;% btn #, Text &amp; Icon (buggy), home %&#125;&#123;% btn #, Text &amp; Icon (fixed width), home fa-fw %&#125;\n\nText & Icon (buggy)\nText & Icon (fixed width)\n\n&#123;% btn #, Text &amp; Large Icon, home fa-fw fa-lg %&#125;&#123;% btn #, Text &amp; Large Icon &amp; Title, home fa-fw fa-lg, Title %&#125;\n\nText & Large Icon\nText & Large Icon & Title\n\nButton inside textLorem &#123;% btn #, Lorem, home fa-fw fa-lg %&#125; ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident &#123;% btn #, Ipsum, home fa-fw fa-lg %&#125;, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\nButton inside other tag&#123;% note info %&#125;&#123;% btn #, Text &amp; Icon, home fa-fw %&#125;&#123;% btn #,, home, Title %&#125;&#123;% btn #, Text %&#125;[Link](#)&#123;% endnote %&#125;\n\nText &amp; Icon\nText\nLink\n\n\nButton margin&lt;div class=&quot;text-center&quot;&gt;&lt;div&gt;&#123;% btn #,, heading %&#125;&#123;% btn #,, fab fa-edge %&#125;&#123;% btn #,, times %&#125;&#123;% btn #,, circle-notch %&#125;&lt;/div&gt;&lt;div&gt;&#123;% btn #,, italic %&#125;&#123;% btn #,, fab fa-scribd %&#125;&lt;/div&gt;&lt;div&gt;&#123;% btn #,, fab fa-google %&#125;&#123;% btn #,, fab fa-chrome %&#125;&#123;% btn #,, fab fa-opera %&#125;&#123;% btn #,, gem fa-rotate-270 %&#125;&lt;/div&gt;&lt;/div&gt;\n\n\n\n\n\nButton with relative URL&lt;div class=&quot;text-center&quot;&gt;&#123;% btn #, Previous Chapter, arrow-left fa-fw fa-lg, Previous Chapter (Full Image) %&#125; &#123;% btn #, Next Chapter, arrow-right fa-fw fa-lg, Next Chapter (Label) %&#125;&lt;/div&gt;\n\nPrevious Chapter Next Chapter\n\nButton with absolute URL&lt;div class=&quot;text-center&quot;&gt;&#123;% btn https://github.com, GitHub, fab fa-github fa-fw fa-lg, GitHub %&#125;&lt;/div&gt;\n\nGitHub\n"},{"title":"Group Pictures","url":"/docs/tag-plugins/group-pictures.html","content":"Usage&#123;% grouppicture [number]-[layout] %&#125;&#123;% endgrouppicture %&#125;\n\nor\n&#123;% gp [number]-[layout] %&#125;&#123;% endgp %&#125;\n\n\n[number] : Optional parameter. Total number of pictures to add in the group pictures.\n\n[layout] : Optional parameter. The index of the layout, which can be obtained according to the figure below. For example, if you want to apply the second layout to 4 pictures, then use\n  &#123;% grouppicture 4-2 %&#125;&#123;% endgrouppicture %&#125;\n\n\nIt&#39;s recommended to use Group Pictures with Fancybox enabled.\n\n\nPlease use absolute paths for &lt;img&gt; inside group pictures. See this issue for details.\n\n\nExamples&#123;% grouppicture 3-3 %&#125;![](/images/next.svg)![](/images/next.svg)![](/images/next.svg)&#123;% endgrouppicture %&#125;\n\n\n\n&#123;% gp 5-2 %&#125;![](/images/next.svg)![](/images/next.svg)![](/images/next.svg)![](/images/next.svg)![](/images/next.svg)&#123;% endgp %&#125;\n\n\n"},{"title":"Tag Plugins","url":"/docs/tag-plugins/index.html","content":"Tag Plugin is a way to make special style contents supported by Hexo. For example, we cannot show a image with custom size in standard Markdown. And then we can use tag plugins to solve it. Hexo has a lot of tags which can help user. And Hexo also have interfaces to themes which make themes able to create their own tags. Following tags are provided by NexT:\n\nButton\nCaniuse\nCentered Quote\nGroup Pictures\nLabel\nLink Grid\nMermaid\nWaveDrom\nNote\nPDF\nTabs\nVideo\n\nThese tag plugins are only available in the theme NexT. If you switch to other Hexo themes, they may cause rendering errors.\nCentered QuoteThis tag will make a quote with two lines before and after it, and text quoted will be centered. When using centered quote, if we have multi-line text, and each line has a different length, the quote won&#39;t be symmetrical, so it&#39;s recommended to use when only have single line text. For example before article all after article to make a summary.\nUsage&#123;% centerquote %&#125;Something&#123;% endcenterquote %&#125;\n\nor\n&#123;% cq %&#125;Something&#123;% endcq %&#125;\n\nExamples&#123;% cq %&#125;Elegant in code, simple in core&#123;% endcq %&#125;\n\n\nElegant in code, simple in core\n\n\n\nVideoUsage&#123;% video url %&#125;\n\nExamples&#123;% video https://example.com/sample.mp4 %&#125;\n\n&#123;% video /path/to/your/video.mp4 %&#125;\n"},{"title":"Label","url":"/docs/tag-plugins/label.html","content":"Usage&#123;% label [class]@text %&#125;\n\n\n[class] : Optional parameter. Supported values: default | primary | success | info | warning | danger.If not specified, the default style of the browser will be used, which may be different in different browsers.\ntext    : @text can be specified with or without spaceE.g. success @text is the same as success@text.\n\nExamplesLorem &#123;% label @ipsum %&#125; &#123;% label primary@dolor sit %&#125; amet, consectetur &#123;% label success@adipiscing elit, %&#125; sed &#123;% label info@do eiusmod %&#125; tempor incididunt ut labore et dolore magna aliqua.Ut enim *&#123;% label warning @ad %&#125;* minim veniam, quis **&#123;% label danger@nostrud %&#125;** exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Duis aute irure dolor in reprehenderit in voluptate ~~&#123;% label default @velit %&#125;~~ &lt;mark&gt;esse&lt;/mark&gt; cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\nUt enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"title":"Link Grid","url":"/docs/tag-plugins/link-grid.html","content":"Usage&#123;% linkgrid [image] [delimiter] [comment] %&#125;&#123;% endlinkgrid %&#125;\n\nor\n&#123;% lg [image] [delimiter] [comment] %&#125;&#123;% endlg %&#125;\n\n\n[image]     : Optional parameter. Default image URL.\n[delimiter] : Optional parameter. If the optional delimiter parameter is given, it is interpreted as the delimiter of items in each line.\n[comment]   : Optional parameter. If the optional comment parameter is given, it is interpreted as the symbol to comment out a line.\n\nExamples&#123;% linkgrid %&#125;Theme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.pngTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.pngTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.pngTheme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png% Theme NexT | https://theme-next.js.org/ | Stay Simple. Stay NexT. | /images/apple-touch-icon-next.png&#123;% endlinkgrid %&#125;\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n\n&#123;% lg /images/apple-touch-icon-next.png , %&#125;Theme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.pngTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.pngTheme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png% Theme NexT , https://theme-next.js.org/ , Stay Simple. Stay NexT. , /images/apple-touch-icon-next.png&#123;% endlg %&#125;\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n\nTheme NexTStay Simple. Stay NexT.\n\n\n"},{"title":"Mermaid","url":"/docs/tag-plugins/mermaid.html","content":"SettingsNexT config file# Mermaid tagmermaid:  enable: true  # Available themes: default | dark | forest | neutral  theme:    light: default    dark: dark\n\nHexo config filehighlight:  exclude_languages:    - mermaid\n\nUsage&#123;% mermaid type %&#125;&#123;% endmermaid %&#125;\n\nor\n```mermaidtype```\n\n\ntype : type of the mermaid chart, visit https://github.com/mermaid-js/mermaid for more information.\n\nExamples&#123;% mermaid graph TD %&#125;A[Hard] --&gt;|Text| B(Round)B --&gt; C&#123;Decision&#125;C --&gt;|One| D[Result 1]C --&gt;|Two| E[Result 2]&#123;% endmermaid %&#125;\n\nor\n```mermaidgraph TDA[Hard] --&gt;|Text| B(Round)B --&gt; C&#123;Decision&#125;C --&gt;|One| D[Result 1]C --&gt;|Two| E[Result 2]```\n\n\ngraph TD\nA[Hard] --&gt;|Text| B(Round)\nB --&gt; C{Decision}\nC --&gt;|One| D[Result 1]\nC --&gt;|Two| E[Result 2]\n\n\n&#123;% mermaid sequenceDiagram %&#125;Alice-&gt;&gt;John: Hello John, how are you?loop Healthcheck    John-&gt;&gt;John: Fight against hypochondriaendNote right of John: Rational thoughts!John--&gt;&gt;Alice: Great!John-&gt;&gt;Bob: How about you?Bob--&gt;&gt;John: Jolly good!&#123;% endmermaid %&#125;\n\n\nsequenceDiagram\nAlice-&gt;&gt;John: Hello John, how are you?\nloop Healthcheck\n    John-&gt;&gt;John: Fight against hypochondria\nend\nNote right of John: Rational thoughts!\nJohn--&gt;&gt;Alice: Great!\nJohn-&gt;&gt;Bob: How about you?\nBob--&gt;&gt;John: Jolly good!\n\n\n&#123;% mermaid gantt %&#125;dateFormat  YYYY-MM-DDsection SectionCompleted :done,    des1, 2014-01-06,2014-01-08Active        :active,  des2, 2014-01-07, 3dParallel 1   :         des3, after des1, 1dParallel 2   :         des4, after des1, 1dParallel 3   :         des5, after des3, 1dParallel 4   :         des6, after des4, 1d&#123;% endmermaid %&#125;\n\n\ngantt\ndateFormat  YYYY-MM-DD\nsection Section\nCompleted :done,    des1, 2014-01-06,2014-01-08\nActive        :active,  des2, 2014-01-07, 3d\nParallel 1   :         des3, after des1, 1d\nParallel 2   :         des4, after des1, 1d\nParallel 3   :         des5, after des3, 1d\nParallel 4   :         des6, after des4, 1d\n\n\n&#123;% mermaid classDiagram %&#125;Class01 &lt;|-- AveryLongClass : Cool&lt;&lt;interface&gt;&gt; Class01Class09 --&gt; C2 : Where am i?Class09 --* C3Class09 --|&gt; Class07Class07 : equals()Class07 : Object[] elementDataClass01 : size()Class01 : int chimpClass01 : int gorillaclass Class10 &#123;  &lt;&lt;service&gt;&gt;  int id  size()&#125;&#123;% endmermaid %&#125;\n\n\nclassDiagram\nClass01 &lt;|-- AveryLongClass : Cool\n&lt;&lt;interface&gt;&gt; Class01\nClass09 --&gt; C2 : Where am i?\nClass09 --* C3\nClass09 --|&gt; Class07\nClass07 : equals()\nClass07 : Object[] elementData\nClass01 : size()\nClass01 : int chimp\nClass01 : int gorilla\nclass Class10 {\n  &lt;&lt;service&gt;&gt;\n  int id\n  size()\n}\n\n\n&#123;% mermaid stateDiagram %&#125;[*] --&gt; StillStill --&gt; [*]Still --&gt; MovingMoving --&gt; StillMoving --&gt; CrashCrash --&gt; [*]&#123;% endmermaid %&#125;\n\n\nstateDiagram\n[*] --&gt; Still\nStill --&gt; [*]\nStill --&gt; Moving\nMoving --&gt; Still\nMoving --&gt; Crash\nCrash --&gt; [*]\n\n\n&#123;% mermaid pie %&#125;&quot;Dogs&quot; : 386&quot;Cats&quot; : 85&quot;Rats&quot; : 15&#123;% endmermaid %&#125;\n\n\npie\n&quot;Dogs&quot; : 386\n&quot;Cats&quot; : 85\n&quot;Rats&quot; : 15\n\n"},{"title":"Note (Bootstrap Callout)","url":"/docs/tag-plugins/note.html","content":"SettingsNexT config filenote:  # Note tag style values:  #  - simple    bs-callout old alert style. Default.  #  - modern    bs-callout new (v2-v3) alert style.  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.  #  - disabled  disable all CSS styles import of note tag.  style: simple  icons: false  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).  # Offset also applied to label tag variables. This option can work with disabled note tag.  light_bg_offset: 0\n\nUsage&#123;% note [class] [no-icon] [summary] %&#125;Any content (support inline tags too).&#123;% endnote %&#125;\n\n\n[class]   : Optional parameter. Supported values: default | primary | success | info | warning | danger.\n[no-icon] : Optional parameter. Disable icon in note.\n[summary] : Optional parameter. Optional summary of the note.\n\nAll parameters are optional.\nExamples&#123;% note %&#125;#### Header(without define class style)&#123;% endnote %&#125;\n\nHeader(without define class style)\n\n\n&#123;% note default %&#125;#### Default HeaderWelcome to [Hexo!](https://hexo.io)&#123;% endnote %&#125;\n\nDefault HeaderWelcome to Hexo!\n\n\n&#123;% note primary %&#125;#### Primary Header**Welcome** to [Hexo!](https://hexo.io)&#123;% endnote %&#125;\n\nPrimary HeaderWelcome to Hexo!\n\n\n&#123;% note info %&#125;#### Info Header**Welcome** to [Hexo!](https://hexo.io)&#123;% endnote %&#125;\n\nInfo HeaderWelcome to Hexo!\n\n\n&#123;% note success %&#125;#### Success Header**Welcome** to [Hexo!](https://hexo.io)&#123;% endnote %&#125;\n\nSuccess HeaderWelcome to Hexo!\n\n\n&#123;% note warning %&#125;#### Warning Header**Welcome** to [Hexo!](https://hexo.io)&#123;% endnote %&#125;\n\nWarning HeaderWelcome to Hexo!\n\n\n&#123;% note danger %&#125;#### Danger Header**Welcome** to [Hexo!](https://hexo.io)&#123;% endnote %&#125;\n\nDanger HeaderWelcome to Hexo!\n\n\n&#123;% note info no-icon %&#125;#### No icon noteNote **without** icon: `note info no-icon`&#123;% endnote %&#125;\n\nNo icon noteNote without icon: note info no-icon\n\n\n&#123;% note primary This is a summary %&#125;#### Details and summaryNote with summary: `note primary This is a summary`&#123;% endnote %&#125;\n\nThis is a summary\n\nDetails and summaryNote with summary: note primary This is a summary\n\n\n\n&#123;% note info no-icon This is a summary %&#125;#### Details and summary (No icon)Note with summary: `note info no-icon This is a summary`&#123;% endnote %&#125;\n\nThis is a summary\n\nDetails and summary (No icon)Note with summary: note info no-icon This is a summary\n\n\n\n&#123;% note success %&#125;#### Codeblock in note```code block in note tagcode block in note tagcode block in note tag```&#123;% endnote %&#125;\n\nCodeblock in notecode block in note tagcode block in note tagcode block in note tag\n\n&#123;% note default %&#125;#### Lists in note* ul* ul    * ul    * ul* ul1. ol2. ol    1. ol    2. ol3. ol&#123;% endnote %&#125;\n\nLists in note\nul\nul\nul\nul\n\n\nul\n\n\nol\nol\nol\nol\n\n\nol\n\n\n\n#### Table in Note&#123;% note default %&#125;| 1 | 2 || - | - || 3 | 4 || 5 | 6 || 7 | 8 |&#123;% endnote %&#125;\n\nTable in note\n\n\n1\n2\n\n\n\n3\n4\n\n\n5\n6\n\n\n7\n8\n\n\n\n"},{"title":"PDF","url":"/docs/tag-plugins/pdf.html","content":"SettingsNexT config filepdf:  enable: true  # Default height  height: 500px\n\nUsage&#123;% pdf url [height] %&#125;\n\n\nurl      : The URL (Absolute path) of the PDF file.\n[height] : Optional parameter. Height of the PDF display element, e.g. 800px.\n\nThe loading of pdf.js or pdf file might be blocked by CORS policy. If you want to load resources from another website, make sure the Access-Control-Allow-Origin header is set correctly. See also Access-Control-Allow-Origin - HTTP | MDN.\n\n\nExamples&#123;% pdf https://example.com/sample.pdf %&#125;\n\n&#123;% pdf /path/to/your/file.pdf 600px %&#125;\n"},{"title":"Tabs","url":"/docs/tag-plugins/tabs.html","content":"SettingsNexT config filetabs:  # Make the nav bar of tabs with long content stick to the top.  sticky: false  transition:    tabs: false    labels: true\n\nUsage&#123;% tabs Unique name, [index] %&#125;&lt;!-- tab [Tab caption] [@icon] --&gt;Any content (support inline tags too).&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\n\nUnique name   : Unique name of tabs block tag without comma.Will be used in #id&#39;s as prefix for each tab with their index numbers.If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.Only for current url of post&#x2F;page must be unique!\n[index]       : Index number of active tab.If not specified, first tab (1) will be selected.If index is -1, no tab will be selected. It&#39;s will be something like spoiler.Optional parameter.\n[Tab caption] : Caption of current tab.If not caption specified, unique name with tab index suffix will be used as caption of tab.If not caption specified, but specified icon, caption will empty.Optional parameter.\n[@icon]       : Font Awesome icon name.Can be specified with or without space; e.g. &#39;Tab caption @icon&#39; is the same as &#39;Tab caption@icon&#39;.Optional parameter.\n\nExamples&#123;% tabs First unique name %&#125;&lt;!-- tab --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nFirst unique name 1First unique name 2First unique name 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs with 3rd tab selected&#123;% tabs Second unique name, 3 %&#125;&lt;!-- tab --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nSecond unique name 1Second unique name 2Second unique name 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs with no tab selected&#123;% tabs Third unique name, -1 %&#125;&lt;!-- tab --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nThird unique name 1Third unique name 2Third unique name 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs with custom labels&#123;% tabs Fourth unique name %&#125;&lt;!-- tab Solution 1 --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab Solution 2 --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab Solution 3 --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nSolution 1Solution 2Solution 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs with icons only&#123;% tabs Fifth unique name %&#125;&lt;!-- tab @text-width --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab @font --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab @bold --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nThis is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs with icons and labels&#123;% tabs Sixth unique name %&#125;&lt;!-- tab Solution 1@text-width --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab Solution 2@font --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab Solution 3@bold --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nSolution 1Solution 2Solution 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs permalinks testPermalink for &gt; [Tab one](#tab-one).Permalink for &gt; [Tab one 1](#tab-one-1).Permalink for &gt; [Tab one 2](#tab-one-2).Permalink for &gt; [Tab one 3](#tab-one-3).Permalink for &gt; [Tab two](#tab-two).Permalink for &gt; [Tab two 1](#tab-two-1).Permalink for &gt; [Tab two 2](#tab-two-2).Permalink for &gt; [Tab two 3](#tab-two-3).&#123;% tabs Tab one %&#125;&lt;!-- tab --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;&#123;% tabs Tab two %&#125;&lt;!-- tab --&gt;**This is Tab 1.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 2.**&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 3.**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nPermalink for &gt; Tab one.Permalink for &gt; Tab one 1.Permalink for &gt; Tab one 2.Permalink for &gt; Tab one 3.\nPermalink for &gt; Tab two.Permalink for &gt; Tab two 1.Permalink for &gt; Tab two 2.Permalink for &gt; Tab two 3.\nTab one 1Tab one 2Tab one 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTab two 1Tab two 2Tab two 3This is Tab 1.This is Tab 2.This is Tab 3.\n\nTabs with other tags&#123;% tabs Tags %&#125;&lt;!-- tab --&gt;**This is Tab 1.**1. One2. Two3. ThreeIndented code block:    nano /etcTagged code block:&#123;% code %&#125;code tagcode tagcode tag&#123;% endcode %&#125;&#123;% note default %&#125;Note default tag.&#123;% endnote %&#125;&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 2.*** Five* Six* Seven&#123;% note primary %&#125;&#123;% youtube Kt7u5kr_P5o %&#125;&#123;% endnote %&#125;&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Tab 3.**&#123;% subtabs Sub Tabs %&#125;&lt;!-- tab --&gt;**This is Sub Tab 1.**&#123;% note success %&#125;Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.&#123;% note warning %&#125;Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.&#123;% endnote %&#125;Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.&#123;% endnote %&#125;&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Sub Tab 2.**&#123;% note success %&#125;Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.&#123;% note danger %&#125;Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.&#123;% endnote %&#125;&#123;% endnote %&#125;&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Sub Tab 3.**&#123;% subtabs Sub-Sub Tabs %&#125;&lt;!-- tab --&gt;**This is Sub-Sub Tab 1 of Sub Tab 3.**&#123;% note success %&#125;Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.&#123;% endnote %&#125;&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Sub-Sub Tab 2 of Sub Tab 3.**&#123;% note success %&#125;Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.&#123;% note warning %&#125;Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.&#123;% endnote %&#125;&#123;% endnote %&#125;&lt;!-- endtab --&gt;&lt;!-- tab --&gt;**This is Sub-Sub Tab 3 of Sub Tab 3.**&#123;% note success %&#125;Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.&#123;% note warning %&#125;Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.&#123;% note danger %&#125;Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.&#123;% endnote %&#125;&#123;% endnote %&#125;&#123;% endnote %&#125;&lt;!-- endtab --&gt;&#123;% endsubtabs %&#125;&lt;!-- endtab --&gt;&#123;% endsubtabs %&#125;&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nTags 1Tags 2Tags 3This is Tab 1.\n\nOne\nTwo\nThree\n\nIndented code block:\nnano /etc\n\nTagged code block:\ncode tagcode tagcode tag\n\nNote default tag.\nThis is Tab 2.\n\nFive\nSix\nSeven\n\nThis is Tab 3.\nSub Tabs 1Sub Tabs 2Sub Tabs 3This is Sub Tab 1.\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\n\n\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\nThis is Sub Tab 2.\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\nThis is Sub Tab 3.\nSub-Sub Tabs 1Sub-Sub Tabs 2Sub-Sub Tabs 3This is Sub-Sub Tab 1 of Sub Tab 3.\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\nThis is Sub-Sub Tab 2 of Sub Tab 3.\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n\nThis is Sub-Sub Tab 3 of Sub Tab 3.\nLorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.\nSed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl. Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.\nMorbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus. Mauris nibh felis, adipiscing varius, adipiscing in, lacinia vel, tellus. Suspendisse ac urna. Etiam pellentesque mauris ut lectus. Nunc tellus ante, mattis eget, gravida vitae, ultricies ac, leo. Integer leo pede, ornare a, lacinia eu, vulputate vel, nisl.\n\n\n\n"},{"title":"WaveDrom","url":"/docs/tag-plugins/wavedrom.html","content":"SettingsNexT config file# WaveDrom tagwavedrom:  enable: true\n\nUsage&#123;% wavedrom %&#125;&#123;% endwavedrom %&#125;\n\nExamples&#123;% wavedrom %&#125;&#123; signal : [  &#123; name: &quot;clk&quot;,  wave: &quot;p......&quot; &#125;,  &#123; name: &quot;bus&quot;,  wave: &quot;x.34.5x&quot;,   data: &quot;head body tail&quot; &#125;,  &#123; name: &quot;wire&quot;, wave: &quot;0.1..0.&quot; &#125;,]&#125;&#123;% endwavedrom %&#125;\n\n\n{ signal : [\n  { name: \"clk\",  wave: \"p......\" },\n  { name: \"bus\",  wave: \"x.34.5x\",   data: \"head body tail\" },\n  { name: \"wire\", wave: \"0.1..0.\" },\n]}\n\n\n&#123;% wavedrom %&#125;&#123; signal: [  &#123; name: &#x27;A&#x27;, wave: &#x27;01........0....&#x27;,  node: &#x27;.a........j&#x27; &#125;,  &#123; name: &#x27;B&#x27;, wave: &#x27;0.1.......0.1..&#x27;,  node: &#x27;..b.......i&#x27; &#125;,  &#123; name: &#x27;C&#x27;, wave: &#x27;0..1....0...1..&#x27;,  node: &#x27;...c....h..&#x27; &#125;,  &#123; name: &#x27;D&#x27;, wave: &#x27;0...1..0.....1.&#x27;,  node: &#x27;....d..g...&#x27; &#125;,  &#123; name: &#x27;E&#x27;, wave: &#x27;0....10.......1&#x27;,  node: &#x27;.....ef....&#x27; &#125;  ],  edge: [    &#x27;a~b t1&#x27;, &#x27;c-~a t2&#x27;, &#x27;c-~&gt;d time 3&#x27;, &#x27;d~-e&#x27;,    &#x27;e~&gt;f&#x27;, &#x27;f-&gt;g&#x27;, &#x27;g-~&gt;h&#x27;, &#x27;h~&gt;i some text&#x27;, &#x27;h~-&gt;j&#x27;  ],  config:&#123;skin:&#x27;lowkey&#x27;&#125;&#125;&#123;% endwavedrom %&#125;\n\n\n{ signal: [\n  { name: 'A', wave: '01........0....',  node: '.a........j' },\n  { name: 'B', wave: '0.1.......0.1..',  node: '..b.......i' },\n  { name: 'C', wave: '0..1....0...1..',  node: '...c....h..' },\n  { name: 'D', wave: '0...1..0.....1.',  node: '....d..g...' },\n  { name: 'E', wave: '0....10.......1',  node: '.....ef....' }\n  ],\n  edge: [\n    'a~b t1', 'c-~a t2', 'c-~>d time 3', 'd~-e',\n    'e~>f', 'f->g', 'g-~>h', 'h~>i some text', 'h~->j'\n  ],\n  config:{skin:'lowkey'}\n}\n\n\n&#123;% wavedrom %&#125;&#123;reg:[    &#123;bits: 7,  name: 0x07, attr: [      &#x27;VLxU,VLE zero-extended&#x27;,      &#x27;VLxU,VLE zero-extended, fault-only-first&#x27;,      &#x27;VLxU sign-extended&#x27;,      &#x27;VLxU sign-extended, fault-only-first&#x27;,    ]&#125;,    &#123;bits: 5,  name: &#x27;vd&#x27;, attr: &#x27;destination of load&#x27;, type: 2&#125;,    &#123;bits: 3,  name: &#x27;width&#x27;&#125;,    &#123;bits: 5,  name: &#x27;rs1&#x27;, attr: &#x27;base address&#x27;, type: 4&#125;,    &#123;bits: 5,  name: &#x27;lumop&#x27;, attr: [0, 16, 0, 16]&#125;,    &#123;bits: 1,  name: &#x27;vm&#x27;&#125;,    &#123;bits: 3,  name: &#x27;mop&#x27;, attr: [0, 0, 4, 4]&#125;,    &#123;bits: 3,  name: &#x27;nf&#x27;&#125;,]&#125;&#123;% endwavedrom %&#125;\n\n\n{reg:[\n    {bits: 7,  name: 0x07, attr: [\n      'VLxU,VLE zero-extended',\n      'VLxU,VLE zero-extended, fault-only-first',\n      'VLxU sign-extended',\n      'VLxU sign-extended, fault-only-first',\n    ]},\n    {bits: 5,  name: 'vd', attr: 'destination of load', type: 2},\n    {bits: 3,  name: 'width'},\n    {bits: 5,  name: 'rs1', attr: 'base address', type: 4},\n    {bits: 5,  name: 'lumop', attr: [0, 16, 0, 16]},\n    {bits: 1,  name: 'vm'},\n    {bits: 3,  name: 'mop', attr: [0, 0, 4, 4]},\n    {bits: 3,  name: 'nf'},\n]}\n\n"},{"title":"Custom Pages","url":"/docs/theme-settings/custom-pages.html","content":"Custom Page SupportNext allows users to add custom pages in menu.\nAdding New Page →Setting Front-matter Values →Editting MenuChange to site root directory in your terminal. Use hexo new page custom-name to create a new custom-name page:\n$ cd hexo-site$ hexo new page custom-nameFront-matter is a block of YAML or JSON at the beginning of the file that is used to configure settings for your writings. Settings front-matter values and more detailed can be found in front-matter. You can also add contents in custom-name/index.md if you like.\ntitle: custom-namedate: 2014-12-22 12:39:04---Add custom-name to menu by editing NexT config file, like adding about page:\nNexT config filemenu:  home: / || fa fa-home  archives: /archives/ || fa fa-archive  about: /about/ || fa fa-user\n\nIf you want to add Tags or Categories page, please continue reading.Please read Hexo&#39;s Docs of Categories &amp; Tags to know how to add tags or categories for articles.Following code shows you a example of article with tags:\nVariant 1Variant 2title: Tags Testing Articletags: [Testing, Another Tag]---title: Tags Testing Articletags:  - Testing  - Another Tag---\n\nUse Archive Page as Home PageYou can configure the path of archive and index generator in Hexo config file, e.g.\nHexo config filearchive_dir: /index_generator:  path: archives  per_page: 10  order_by: -date\n\nAdding «Tags» PageAdding «Tags» page and show «Tags» link in menu. «Tags» page will show all tags of site. If no article has tags, this page will leave blank.\nAdding New Page →Setting Page Type →Editting MenuChange to site root directory in your terminal. Use hexo new page tags to create a new tags page:\n$ cd hexo-site$ hexo new page tagsEdit the new page and change the type to tags, theme will show tags cloud automatically in this page. Page content looks like following:\ntitle: Tagsdate: 2014-12-22 12:39:04type: tags---Add tags to menu by editing NexT config file, like following:\nNexT config filemenu:  home: / || fa fa-home  archives: /archives/ || fa fa-archive  tags: /tags/ || fa fa-tags\n\nIf you enable any comment system for your site, comments will be shown for all posts and pages.See «How to Disable Comments on Page» if you want to do it for pages like tags or categories.\n\n\nThe default Hexo plugin hexo-generator-tag provides an option called enable_index_page, which will conflict with the «Tags» page created above. Make sure you have the option disabled.\nHexo config filetag_generator:  enable_index_page: false\n\nTagcloudBy default, NexT has setted font color and size for tagcloud in tags page.From NexT v7.0.2 you can customize them, just set related values in NexT config file:\nNexT config file# TagCloud settings for tags page.tagcloud:  min: 12 # Minimum font size in px  max: 30 # Maximum font size in px  amount: 200 # Total amount of tags  orderby: name # Order of tags  order: 1 # Sort order\n\nAdding «Categories» Page«Categories» page can be added in similar way as «Tags» page, only name there is difference: just need to replace tags with categories.\n\n\nAdding Google Calendar PageMind that you need to make sure first you are adding a calendar that is set to public. If you are unsure, please follow these instructions first to set a Google calendar public before adding it.\nMore detailed documentation on creating &amp; managing a public Google calendar: https://support.google.com/calendar/answer/37083\nSetting Google Calendar →Adding Schedule Page →Setting Page Type →Editting MenuGet Calendar ID and API KEY →NexT ConfigFollow these instructions to find your Google Calendar ID.\nLogin to Google developers and add Google Calendar API, you will get your API KEY on the credentials page.You can enable it by setting values in calendar part. Copy the value of Calendar ID and API KEY in NexT config file.\nNexT config filecalendar:  calendar_id: &lt;required&gt;  api_key: &lt;required&gt;  orderBy: startTime  showLocation: false  offsetMax: 72  offsetMin: 4  showDeleted: false  singleEvents: true  maxResults: 250Change to site root directory in your terminal. Use hexo new page schedule to create a new schedule page:\n$ cd hexo-site$ hexo new page scheduleEdit the new page and change the type to schedule, theme will show schedule automatically in this page. Page content looks like following:\ntitle: Scheduledate: 2014-12-22 12:39:04type: schedule---Add schedule to menu by editing NexT config file:\nNexT config filemenu:  home: / || fa fa-home  archives: /archives/ || fa fa-archive  schedule: /schedule/ || fa fa-calendar\n\nCustom 404 PageIn your terminal, change to the source folder of site root directory. Create a new folder called 404, then create a new page in it:\n$ cd hexo-site$ hexo new page 404\n\nMake sure relative_link is disabled in Hexo config file:\nHexo config filerelative_link: false\n\nWhether users can be redirected to the 404 page depends on the settings of the website hosting service or web server, not Hexo. For example, if you use Nginx as the server, you also need to configure the 404 page in nginx.conf file.\n\n\nCommonweal 404If you would like to enable commonweal 404 (A service provided by Tencent in China), Edit 404/index.md like this:\n---title: &#x27;404&#x27;date: 2014-12-22 12:39:04comments: false---&lt;script src=&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot;        charset=&quot;utf-8&quot; homePageUrl=&quot;/&quot; homePageName=&quot;Back to home&quot;&gt;&lt;/script&gt;\n\nYou can also add any content you want to it.\nAdd 404 to menu by editing NexT config file:\nNexT config filemenu:  home: / || fa fa-home  archives: /archives/ || fa fa-archive  commonweal: /404/ || fa fa-heartbeat\n"},{"title":"Footer","url":"/docs/theme-settings/footer.html","content":"Site Copyright SettingSite Start TimeBy default NexT shows current year in the footer like © 2020. You can configure it to show the time gap like © 2015 - 2020 by editing value since in footer section in NexT config file.\nNexT config filefooter:  since: 2020\n\nSite Footer IconBy default NexT shows red heart icon  with animation between year and copyright information in the footer. You can configure it by editing value icon in footer section in NexT config file.\nnameanimatedcolorThe name of footer icon can be founded in Font Awesome site. heart is recommended.\nNexT config filefooter:  icon:    name: fa fa-userSet up animated of footer icon by changing the value of icon.animated:\n\ntrue → Icon will be animated.\nfalse → Icon will not be animated.\n\nNexT config filefooter:  icon:    animated: falseSet up color of footer icon by changing the value of icon.color. Please use Hex Code, and red (#ff0000) is recommended for heart icon.\nNexT config filefooter:  icon:    color: &quot;#808080&quot;\n\nSite Copyright NameBy default NexT shows the name of author from Hexo config file. You can configure it by editing value copyright in footer section in NexT config file.\nNexT config filefooter:  copyright:\n\nSet copyright to false will disable the copyright statement completely.\nThis option will only customize the author name in the footer. The name in the Creative Commons License section at the end of each post is not affected.\n\n\nSite Platform InformationBy default NexT shows Hexo and Theme &amp; scheme information like Powered by Hexo &amp; NexT.Muse. You can configure it by editing value powered in footer section in NexT config file.\nNexT config filefooter:  powered: true\n\nSite Beian InformationBeian information is for Chinese users. By default NexT will not show the information of beian. You can configure it by editing values in footer.beian section in NexT config file.\nNexT config filefooter:  beian:    enable: true    icp: 京ICP备 1234567890号-1    gongan_id: 1234567890    gongan_num: 京公网安备 1234567890号    gongan_icon_url: /uploads/beian.png\n"},{"title":"Theme Settings","url":"/docs/theme-settings/index.html","content":"One of the guiding principles of NexT is to hide complex details and give you a simple but flexible config, so you can use it easily.\nThe values given in the document are often typical allowable values rather than default values. They may be different from those in NexT config file.\n\n\nNexT Quick StartCache SupportNexT v6+ allows to cache content generation. Set the value enable to true in cache section in NexT config file as following:\nNexT config file# Allow to cache content generation.cache:  enable: true\n\nMinify SupportNexT allows to minify Hexo generation. Set the value minify to true in NexT config file as following:\nNexT config file# Remove unnecessary files after hexo generate.minify: true\n\nChoosing SchemeScheme is a feature supported by NexT, by using Scheme NexT gives you different views. And nearly all config can be used by those Schemes. Till now NexT supports 4 schemes, and they are:\n\nMuse → Default Scheme, this is the initial version of NexT. Uses black-white tone and mainly looks cleanly.\nMist → A tighter version of Muse with a tidy single-column view.\nPisces → Double-column Scheme, fresh like your neighbor&#39;s daughter.\nGemini → Looks like Pisces, but have distinct column blocks with shadow to appear more sensitive to view.\n\nYou can change Scheme by editing NexT config file, searching scheme keyword. You&#39;ll see 4 lines of scheme settings and can enable one of them by removing it&#39;s # and added # to previous.\nNexT config file#scheme: Muse#scheme: Mist#scheme: Piscesscheme: Gemini\n\nDark Mode\n.image-comparison-container {\n    position: relative;\n}\n\n.image-comparison {\n    opacity: 1 !important;\n}\n\n@keyframes next-clip-path {\n    from {\n        clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);\n    }\n    to {\n        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n    }\n}\n\n.image-comparison:last-of-type {\n    animation: next-clip-path 8s alternate ease-in-out infinite;\n    position: absolute;\n    top: 0;\n}\n\n\n    \n    \n\n\nYou can enable Dark Mode by setting darkmode to true in NexT config file.\nNexT config filedarkmode: true\n\nThe prefers-color-scheme CSS media feature is used to bring Dark Mode to all 4 schemes above, make sure your browser supports it.\n\n\nTheme NexT automatically shows Dark Mode if the OS prefered theme is dark. It&#39;s supported by macOS Mojave, iOS 13 and Android 10 or later. Relevant docs:How to use Dark Mode on your MacUse Dark Mode on your iPhone, iPad, or iPod touchDark theme | Android Developers\nConfiguring FaviconBy default the Hexo site use NexT favicons in hexo-site/themes/next/source/images/ directory with different size for different device. You can replace them with your own favicons.\nFor example, you can put your favicons in hexo-site/source/images/ directory. Then you need to rename them and change the settings in favicon section in NexT config file, otherwise icons from Next will rewrite your custom icons in Hexo.\nYou can also put custom favicons into hexo-site/source/ directory. In this way, you must remove /images prefix from paths.\nTo generate custom favicons, you can visit Favicon Generator.\nHexo config filefavicon:  small: /images/favicon-16x16-next.png  medium: /images/favicon-32x32-next.png  apple_touch_icon: /images/apple-touch-icon-next.png  safari_pinned_tab: /images/logo.svg  android_manifest: /images/manifest.json\n\nCustom Logo SupportNexT supports the site logo personalization.\nYou can enable it by adding images&#39;s url to custom_logo in NexT config file.\nNexT config filecustom_logo: /uploads/custom-logo.jpg\n\nScheme Mist does not support custom logo setting.\n\n\nCreative CommonsNexT supports the display of Creative Commons 4.0 International License in sidebar and post including by, by-nc, by-nc-nd, by-nc-sa, by-nd, by-sa and cc-zero. These licenses allow creators to communicate which rights they reserve, and which rights they waive for the benefit of recipients or other creators.\nYou can configure it by editing values in creative_commons section in NexT config file, for example:\nNexT config filecreative_commons:  # Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero  license: by-nc-sa  # Available values: big | small  size: small  sidebar: true  post: true  language: deed.zh\n\nYou can set a language value if you prefer a translated version of CC license, e.g. deed.zhCC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org\n\n\nOpen GraphNexT config fileopen_graph:  enable: true  # Add pairs each line to customize  options:    type: blog\n\nConfiguring Menu ItemsMenu settings items have format Key: /link/ || icon which contains 3 values:\nKeylinkiconKey → is the name of menu item (home, archives, etc.).If translate for this menu will be found in languages, this translate will be loaded; if not, Key name will be used.\nKey value is case sensitive (e.g. home is not same as Home).\nValue before || delimiter (/link/) → is the target link to relative url inside your site.Value after || delimiter (icon) → is the name of Font Awesome icon.Names of that icons can be found in Font Awesome site.\n\nBy default, all menu items are commented out to ensure that you can override them in the Alternate Theme Config.To customize menu items, edit the following content in NexT config file:\nNexT config filemenu:  home: / || fa fa-home  #about: /about/ || fa fa-user  #tags: /tags/ || fa fa-tags  #categories: /categories/ || fa fa-th  archives: /archives/ || fa fa-archive  #schedule: /schedule/ || fa fa-calendar  #sitemap: /sitemap.xml || fa fa-sitemap  #commonweal: /404/ || fa fa-heartbeat\n\nExcept home and archives, all custom pages under menu section need to be created manually. See «Custom Page Support».\nBesides, hexo-generator-sitemap plugin is required for sitemap support.\n\n\nDynamic sub-menu within hierarchy structure is also supported. Add your sub-menu items in menu section in NexT config file as following:\nNexT config filemenu:  home: / || fa fa-home  archives: /archives/ || fa fa-archive  Docs:    default: /docs/ || fa fa-book    Getting Started:      default: /getting-started/ || fa fa-flag      Installation: /installation.html || fa fa-download      Configuration: /configuration.html || fa fa-wrench    Third Party Plugins:      default: /third-party-services/ || fa fa-puzzle-piece      Math Equations: /math-equations.html || fa fa-square-root-alt      Comment Systems: /comments.html || fa fa-comment-alt\n\nA default page is required for each sub-menu item.\n\n\nBy default NexT shows the icons of menu items without badges.\niconsbadgesYou can configure it by editing value icons in menu_settings section in NexT config file.\nNexT config filemenu_settings:  icons: trueSet the value badges to true to display the count of Posts &#x2F; Categories &#x2F; Tags within menu items in menu_settings section in NexT config file as following:\nNexT config filemenu_settings:  badges: true\n"},{"title":"Internationalization","url":"/docs/theme-settings/internationalization.html","content":"Choosing LanguageEdit Hexo config file, set the value of language to the language you need. For example, English looks like this:\nHexo config filelanguage: en\n\nNexT now supports following languages:\n\n\n\nLanguage\nExample\nCode\n\n\n\nArabic\nعربي\nar\n\n\nBengali\nবাংলা\nbn\n\n\nChinese (Simplified)\n简体中文\nzh-CN\n\n\nChinese (Traditional)\n繁體中文\nzh-TW\n\n\nChinese (Hong Kong)\n繁體中文-香港\nzh-HK\n\n\nDutch\nNiederländisch\nnl\n\n\nEnglish\nEnglish\nen\n\n\nFrench\nFrançais\nfr\n\n\nGerman\nDeutsch\nde\n\n\nIndonesian\nIndonesia\nid\n\n\nItalian\nItaliano\nit\n\n\nJapanese\n日本語\nja\n\n\nKorean\n한국어\nko\n\n\nPersian\nفارسی\nfa\n\n\nPortuguese\nPortuguês\npt\n\n\nPortuguese (Brazilian)\nPortuguês (Brazilian)\npt-BR\n\n\nRussian\nРусский\nru\n\n\nSinhala\nසිංහල\nsi\n\n\nSpanish\nEspañol\nes\n\n\nTurkish\nTürk\ntr\n\n\nTurkmen\nTürkmençe\ntk\n\n\nUkrainian\nУкраїнський\nuk\n\n\nVietnamese\nTiếng Việt\nvi\n\n\nThe files in the language directory are automatically generated, you do not need to modify them directly. Please submit translations via Crowdin if you would like to add or improve translation for NexT theme.\n\n\nMultilingual SwitcherSet multiple languages in Hexo config file, e.g.\nHexo config filelanguage:  - zh-CN  - en\n\nThen turn on language_switcher in NexT config file:\nNexT config file# Show multilingual switcher in footer.language_switcher: true\n\nOverride Default TranslationsIf you would like to customize the default translation, you do not need to modify the translation files in the languages directory. You can override all translations using Data Files.\n\nCreate a languages.yml in source/_data.\n\nInsert following codes: (be careful about the two-space indent)\n languages.yml# languagezh-CN:  # items  post:    copyright:      # the translation you prefer      author: 本文博主en:  menu:    schedule: Calendar\n\nThis situation is also available for off-list items. For example, Next uses Theme Inject to introduce the comments systems. You can rename the returned value in chinese as followed:\nlanguages.yml# languagezh-CN:  # items  post:    comments:      disqus: 评论\n"},{"title":"Post Settings","url":"/docs/theme-settings/posts.html","content":"Preamble TextIt&#39;s a common need to show some part of article in home page and then give a link to full article. NexT gives two ways to control how article is shown in home page. In other words, you can use following ways to show summary of articles and a Read More button.\nTag moreexcerpt_descriptionUse &lt;!-- more --&gt; in your article to break your article manually, which is recommended by Hexo.If you have added description and set its value to your article summary in front-matter, NexT excerpts description as preamble text in homepage by default. Without description, the full contents would be the preamble text in homepage.\nYou can disable it by setting value excerpt_description to false in NexT config file.\nNexT config fileexcerpt_description: true\n\nIt is recommended to use &lt;!-- more --&gt; (the first way) which can not only control what you want to show better, but also let Hexo&#39;s plugins use it easily.\n\n\nPost Meta DisplayNexT supports post created date, post updated date and post categories display.\nitem_textcreated_atupdated_atcategoriesBy default NexT shows the description text of post meta. You can disable it by setting value post_meta.item_text to false in NexT config file.\nNexT config filepost_meta:  item_text: trueBy default NexT shows the post created date in post meta section and created time in popup. You can disable it by setting value post_meta.created_at to false in NexT config file.\nNexT config filepost_meta:  created_at: trueMake sure you set use_date_for_updated and updated_option in Hexo config file correctly, otherwise this option will not take effect. See also Date &#x2F; Time format.\n\n\nenableanother_dayBy default NexT shows the post updated date in post meta section and updated time in popup. You can disable it by setting value post_meta.updated_at.enable to false in NexT config file.\nNexT config filepost_meta:  updated_at:    enable: trueBy default, if updated&#x2F;edited date is the same as created date, edited time would be displayed in popup message. You can disable it by setting value post_meta.updated_at.another_day to false in NexT config file.In other words:\n\nIf true, show updated date label only if updated date is different from created date (post edited in another day than was created).\nAnd if post was edited in same day as created, edited time will show in popup title under created time label.\nIf false show anyway, but if post edited in same day, show only edited time.\n\nNexT config filepost_meta:  updated_at:    another_day: trueBy default NexT shows the post categories in post meta section. You can disable it by setting value post_meta.categories to false in NexT config file.\nNexT config filepost_meta:  categories: true\n\nPost WordcountInstallation →Hexo Config →NexT ConfigInstall hexo-word-counter by executing the following command in site root dir:\n$ npm install hexo-word-counter$ hexo cleanActivate this plugin in Hexo config file by enabled any option:\nsymbolstimetotal_symbolstotal_timeawlwpmBy default NexT shows the number of post words in post meta section. You can disable it by setting value symbols_count_time.symbols to false in Hexo config file.\nHexo config filesymbols_count_time:  symbols: trueBy default NexT shows the estimated reading time of post in post meta section. You can disable it by setting value symbols_count_time.time to false in Hexo config file.\nHexo config filesymbols_count_time:  time: trueBy default NexT shows the number of all posts words in footer section. You can disable it by setting value symbols_count_time.total_symbols to false in Hexo config file.\nHexo config filesymbols_count_time:  total_symbols: trueBy default NexT shows the estimated reading time of all posts in footer section. You can disable it by setting value symbols_count_time.total_time to false in Hexo config file.\nHexo config filesymbols_count_time:  total_time: trueawl means the average Word Length (chars count in word). You can check this here.\nNexT config filesymbols_count_time:  awl: 4wpm means the average words per minute. You can check this here.\nNexT config filesymbols_count_time:  wpm: 275After the plugin enabled, you may adjust options in symbols_count_time section in NexT config file:\nseparated_metaitem_text_totalBy default NexT shows the words counts and estimated reading time in a separated line. You can add them into one line by setting value symbols_count_time.separated_meta to false in NexT config file.\nNexT config filesymbols_count_time:  separated_meta: trueBy default NexT doesn&#39;t shows the text description of the words counts and estimated reading time in footer section. You can enable it by setting value symbols_count_time.item_text_total to false in NexT config file.\nNexT config filesymbols_count_time:  item_text_total: true\n\nTag IconBy default, tags at the bottom of posts have a symbol # at there left side.\nIf you prefer icon instead of symbol, edit NexT config file like following:\nNexT config filetag_icon: true\n\nDonate SettingsMore and more online blogging platforms (e.g. WeChat public accounts, Jianshu, Zhihu) support donate (sponsor). To catch paid reading trends, we added donate feature, supports WeChat, Alipay and Bitcoin. What you need is:\n\nGet your WeChat &#x2F; Alipay &#x2F; Bitcoin receive money QRcode image(s) and put into source/images under theme directory or upload it(them) to an image cloud to get the absolute HTTP address(es).\n\nSet needed values in  NexT config file:\n NexT config file# Donate (Sponsor) settings# Front-matter variable (nonsupport animation).reward_settings:  # If true, a donate button will be displayed in every article by default.  enable: true  animation: falsereward:  wechatpay: /images/wechatpay.png  alipay: /images/alipay.png  bitcoin: /images/bitcoin.png\n\nYou can also add QRcode of other platforms, e.g.\nNexT config filepaypal: /images/paypal.pngmonero: /images/monero.png\n\nFollow MeNexT config file# Subscribe through Telegram Channel, Twitter, etc.# Usage: `Key: permalink || icon` (Font Awesome)follow_me:  #Twitter: https://twitter.com/username || fab fa-twitter  #Telegram: https://t.me/channel_name || fab fa-telegram  #WeChat: /images/wechat_channel.jpg || fab fa-weixin  #RSS: /atom.xml || fa fa-rss\n\nYou can add links of other platforms not listed here, for example:\nNexT config filefollow_me:  Zhihu: https://www.zhihu.com/people/username || fab fa-zhihu\n\nRelated Popular PostsNexT supports the related posts functionality according to hexo-related-posts.\nInstallation →enableiconInstall hexo-related-posts by executing the following command in site root dir:\n$ npm install hexo-related-posts$ hexo cleanYou can enable it by setting value related_posts.enable to true in NexT config file.\nNexT config filerelated_posts:  enable: trueBy default NexT shows the signs-post icon  before title. The name of icon can be found in Font Awesome site. You can configure it by editing value icon in related_posts section in NexT config file.\nNexT config filerelated_posts:  icon: fa fa-signs-post\n\nPost EditNexT supports the edit functionality of your posts. By enabling this feature, users can quickly browse and modify the blog&#39;s source code on GitHub.\nenableurlYou can enable it by setting value post_edit.enable to true in NexT config file.\nNexT config filepost_edit:  enable: trueYou should create a source repository of your post files. The url setting depends on the source project in github.\n\nFor site repository\nLink for view source: url: https://github.com/.../tree/master/source/_posts/\nLink for fork &amp; edit: url: https://github.com/.../edit/master/source/_posts/\n\n\nFor post repository\nLink for view source: url: https://github.com/.../_posts/tree/master/\nLink for fork &amp; edit: url: https://github.com/.../_posts/edit/master/\n\n\n\nNexT config filepost_edit:  url:\n\nPost NavigationShow previous post and next post in post footer if exists.\nNexT config filepost_navigation: left\n"},{"title":"Misc Theme Settings","url":"/docs/theme-settings/miscellaneous.html","content":"PreconnectNexT supports adding preconnect resource hints to establish early connections to fonts and plugins origins.\nYou can enable it by setting preconnect: true in NexT config file.\nNexT config file# Preconnect CDN for fonts and plugins.# For more information: https://www.w3.org/TR/resource-hints/#preconnectpreconnect: true\n\nText AlignNexT allows to customize the text alignment in posts &#x2F; pages. The text-align CSS property sets the horizontal alignment of a block element or table-cell box.\n\n\n\nValues\nEffect\n\n\n\nstart\nThe same as left if direction is left-to-right and right if direction is right-to-left.\n\n\nend\nThe same as right if direction is left-to-right and left if direction is right-to-left.\n\n\nleft\nThe inline contents are aligned to the left edge of the line box.\n\n\nright\nThe inline contents are aligned to the right edge of the line box.\n\n\ncenter\nThe inline contents are centered within the line box.\n\n\njustify\nThe inline contents are justified. Text should be spaced to line up its left and right edges to the left and right edges of the line box, except for the last line.\n\n\njustify-all\nSame as justify, but also forces the last line to be justified.\n\n\nmatch-parent\nSimilar to inherit, but the values start and end are calculated according to the parent&#39;s direction and are replaced by the appropriate left or right value.\n\n\nNexT config file# Set the text alignment in the posts.text_align:  # Available values: start | end | left | right | center | justify | justify-all | match-parent  desktop: justify  mobile: justify\n\nMobile Devices AdaptationIf you want to reduce padding&#x2F;margin indents on devices with narrow width, you can enable it by setting value mobile_layout_economy to true in NexT config file.\nNexT config filemobile_layout_economy: true\n\nTheme ColorBy default NexT uses black-deep (#222) as the color of browser header panel (it&#39;s supported by Safari 15 and Android Chrome). You can configure it by editing values with Hex color in theme_color section in NexT config file.\nNexT config filetheme_color:  light: &quot;#222&quot;  dark: &quot;#222&quot;\nBody ScrollbarNexT config file# Override browsers&#x27; default behavior.body_scrollbar:  # Place the scrollbar over the content.  overlay: false  # Present the scrollbar even if the content is not overflowing.  stable: false\n\nCodeblock Stylethemecopy_buttonNexT uses the Highlight.js and Prism package to support code highlight.\nPlease read Hexo&#39;s documentation on Syntax Highlighting first, and set it up in Hexo config file.\n\n\nYou can preview all available Code Highlight themes here: NexT Highlight Theme Preview. Change the value of theme and prism to choose the highlight style you like.\nNexT config filecodeblock:  # Code Highlight theme  # All available themes: https://theme-next.js.org/highlight/  theme:    light: default    dark: stackoverflow-dark  prism:    light: prism    dark: prism-dark\n\nIf Dark Mode is enabled, dark code highlighting themes will be available.NexT supports the copy-and-paste functionality of codeblock.\nenablestyleYou can enable it by setting value copy_button.enable to true in NexT config file. By default NexT shows copy result of the copy-and-paste functionality.\nNexT config filecodeblock:  copy_button:    enable: trueWith style option, you can change your copy button style.There are three style available currently: default (Just leave it empty), flat and mac.\nNexT config filecodeblock:  copy_button:    style: flat\n\nBack To TopenablesidebarscrollpercentNexT config fileback2top:  enable: true\n\nSet the value back2top.enable to true to display Back to top button.NexT config fileback2top:  # Back to top in sidebar.  sidebar: true\n\nSet the value back2top.sidebar to true to put the button in sidebar.NexT config fileback2top:  # Scroll percent label in b2t button.  scrollpercent: true\n\nSet the value back2top.scrollpercent to true to display scroll percent label in Back to top button.\n\nReading ProgressNexT supports the page scroll reading progress indicator.\nYou can enable it by setting value reading_progress.enable to true in NexT config file.\nNexT config filereading_progress:  enable: true  # Available values: left | right  start_at: left  # Available values: top | bottom  position: top  reversed: false  color: &quot;#37c6c0&quot;  height: 2px\n\nBookmarkBookmark is a plugin that allow the users save their reading progress. Users could just click the bookmark icon (like 🔖) in left-top of the page to save the scroll position. And when they visit your blog in the next time, they can resume the last scroll position of each page automatically.\nYou can enable it by setting value bookmark.enable to true in NexT config file.\nNexT config filebookmark:  enable: false  # Customize the color of the bookmark.  color: &quot;#222&quot;  # If auto, save the reading progress when closing the page or clicking the bookmark-icon.  # If manual, only save it by clicking the bookmark-icon.  save: auto\n\nGitHub BannerNexT provides Follow me on GitHub banner in right-top corner.\nNexT config file# Follow me on GitHub banner in right-top corner.github_banner:  enable: true  permalink: https://github.com/yourname\n\nYou can set enable to true and add your own GitHub link.\nFonts CustomizationNexT gives you 5 specific font settings, they are:\n\nGlobal Font: Font used in the whole site.\nTitle Font: Font used by site title.\nHeadlines Font: Font used by headings in articles (h1, h2, h3, h4, h5, h6).\nArticle Font: Font used by articles.\nCode Font: Font used by code blocks in articles.\n\nEach font will be used as the first font of this class, NexT will fallback to internal font settings if they are unavailable.\n\nNon-code Font: Fallback to &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif\nCode Font: Fallback to consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace\n\nPlus each section has a external attribute, this controls whether to use the font library CDN.Use this can help you to use fonts installed in system and reduce unnecessary requests.\nTo solve the unstable of Google Fonts API in some countries, NexT supports custom URL of fonts library by setting font.host.In addition, we noticed that for requests from certain websites, Google Fonts will return 403. At this time, it is necessary to use font.host to set up a mirror site.Relevant issues: #613, #1333\n\n\nNexT config filefont:  # Use custom fonts families or not.  # Depended options: `external` and `family`.  enable: true  # Uri of fonts host, e.g. https://fonts.googleapis.com (Default).  host:  # Font options:  # `external: true` will load this font family from `host` above.  # `family: Times New Roman`. Without any quotes.  # `size: x.x`. Use `em` as unit. Default: 1 (16px)  # Global font settings used for all elements inside &lt;body&gt;.  global:    external: true    family: Monda    size: 1.125  # Font settings for site title (.site-title).  title:    external: true    family: Lobster Two    size:  # Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).  headings:    external: true    family: Amita    size:  # Font settings for posts (.post-body).  posts:    external: true    family: Montserrat  # Font settings for &lt;code&gt; and code blocks.  codes:    external: true    family: PT Mono\n\nAnd you can apply multiple font families for each option. This is especially useful for those who often writes both Chinese and English.\nNexT config filefont:  ...  title:    external: true    family: Roboto Slab, Noto Serif SC    size:\n\nAccording to the CSS Fonts Module Level 3 spec:\n\nFont family names other than generic families must either be given quoted as strings, or unquoted as a sequence of one or more identifiers.\n\nTo avoid escaping mistakes, quote font family names if necessary.\n\n\nIf you still need more customization, following change will cover Fonts Customization function. Edit source/_data/variables.styl in site root directory and add two variables:\nhexo/source/_data/variables.styl// Title Font, set it to font family you want.$font-family-headings = Georgia, sans// Set it to font family you want.$font-family-base = &quot;Microsoft YaHei&quot;, Verdana, sans-serif// Code Font.$code-font-family = &quot;Input Mono&quot;, &quot;PT Mono&quot;, Consolas, Monaco, Menlo, monospace// Font size of articles.$font-size-base = 16px// Font size of table and code.$table-font-size = 13px\n\nThen uncomment variable under the custom_file_path section in NexT config file.\n"},{"title":"SEO","url":"/docs/theme-settings/seo.html","content":"SEO SettingNext provides useful options for better Search Engine Optimization (SEO).\nBy default a canonical link tag is created in Hexo after you have set up your URL url: http://example.com in Hexo config file. More detailed information can be found in Consolidate duplicate URLs.\n\n\nSet the value of index_with_subtitle in NexT config file to true to add subtitle information to index page.\nNexT config fileindex_with_subtitle: true\n\nYou can set subtitle in Hexo config file.\nExtURLExternal URL with BASE64 encrypt &amp; decrypt which provide nonsense for search engines to &lt;a&gt; tags.\nDescriptionSearch engines scan &lt;a&gt; tag with hight priority. You may add external &#x2F; nofollow &#x2F; noopener &#x2F; noreferrer or any similar tricks, in any case all external links from your site will be indexed on your site. But here exists another trick: crawlers doesn&#39;t reproduce any javascript – this do clients on their local devices.That tag give the way to set any external link without &lt;a&gt; tag. So, some crawlers like Yandex will not give away links weight from your site and this very useful for SEO. This tag perform:\n\nReplaces a HTML tag with span HTML tag.\nCrypt &amp; Decrypt URL with BASE64. User cannot see base64 format in browser src for this link, but he will see tooltip where this URL pointed to or will be shown custom title which can be specified in title tag parameter.\nBacklinks by this tag will not be scanned by any monitoring. It&#39;s like you open new link with javascript at new tab.\nWorks on mobile devices too, yep.\n\nThis tag was created exceptionally for better SEO-optimization. Any attempts to confuse end-user by phishing links not allowed!\n\n\nSettingsJust one setting must be turned on under the SEO Settings section in theme config file:\nNexT config fileexturl: true\n\nYou can also enable the icon for it:\nNexT config fileexturl_icon: true\n\nThen run the following command in site root dir to ensure that exturl can be enabled or disabled correctly:\n$ hexo clean\n\nWebmaster ToolsGoogle Webmaster ToolsSet the verification string of Google Webmaster Tools which is used in submitting sitemap.\nGet Verification Code →NexT ConfigLogin to Google Webmaster Tools and go to verification methods and choose HTML Tag, you will get some code:\n&lt;meta name=&quot;google-site-verification&quot; content=&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;&gt;Copy XXXXXXXXXXXXXXXXXXXXXXX value of content key.Edit NexT config file and add or change the value of google_site_verification:\nNexT config filegoogle_site_verification: XXXXXXXXXXXXXXXXXXXXXXX\n\nBing Webmaster ToolsSet the verification string of Bing Webmaster Tools which is used in submitting sitemap.\nGet Verification Code →NexT ConfigLogin to Bing Webmaster Tools and go to verification methods and choose HTML Tag, you will get some code:\n&lt;meta name=&quot;msvalidate.01&quot; content=&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;&gt;Copy XXXXXXXXXXXXXXXXXXXXXXX value of content key.Edit NexT config file and add or change the value of bing_site_verification:\nNexT config filebing_site_verification: XXXXXXXXXXXXXXXXXXXXXXX\n\nYandex Webmaster ToolsSet the verification string of Yandex Webmaster Tools which is used in submitting sitemap.\nGet Verification Code →NexT ConfigLogin to Yandex Webmaster Tools and go to verification methods and choose Meta Tag, you will get some code:\n&lt;meta name=&quot;yandex-verification&quot; content=&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;&gt;Copy XXXXXXXXXXXXXXXXXXXXXXX value of content key.Edit NexT config file and add or change the value of yandex_site_verification:\nNexT config fileyandex_site_verification: XXXXXXXXXXXXXXXXXXXXXXX\n\nBaidu Webmaster ToolsSet the verification string of Baidu Webmaster Tools which is used in submitting sitemap.\nGet Verification Code →NexT ConfigLogin to Baidu Webmaster Tools and go to verification methods and choose HTML Tag, you will get some code:\n&lt;meta name=&quot;baidu-site-verification&quot; content=&quot;code-XXXXXXXXXX&quot;&gt;Copy code-XXXXXXXXXX value of content key.Edit NexT config file and add or change the value of baidu_site_verification:\nNexT config filebaidu_site_verification: code-XXXXXXXXXX\n\nBy default Baidu will cache and rewrite your site to provide a webpage snapshot for mobile users. You can disable this by setting the site type.\n\n\n"},{"title":"Sidebar Setting","url":"/docs/theme-settings/sidebar.html","content":"Sidebar StyleBy default sidebar only shows in posts (have a table of content), and is placed in left side. You can change it by editing values under sidebar setting in NexT config file.\nSidebar has several options, including position, width, display, padding and offset.\npositionwidthdisplaypaddingoffsetSet up sidebar position by changing the value of sidebar.position, which can be one of following:\n\nleft → Place at the left of the screen.\nright → Place at the right of the screen.\n\nNexT config filesidebar:  position: left  #position: rightYou can change sidebar width by specify sidebar.width setting in pixels, for example:\nNexT config filesidebar:  width: 300\n\nThis option is commented out by default and values are:\n\nFor Muse | Mist schemes: 320\nFor Pisces | Gemini schemes: 240\n\nSet up conditions under which sidebar will show by editing sidebar.display value, which can be one of following:\n\npost → Show sidebar only in posts which have index.\nalways → Show sidebar in all pages.\nhide → Hide it in all pages (but can be opened by user manually).\nremove → Remove sidebar totally.\n\nNexT config filesidebar:  display: post  #display: always  #display: hide  #display: removeSet up sidebar padding in pixels by changing the value of sidebar.padding:\nNexT config filesidebar:  padding: 18Set up sidebar offset from top menubar in pixels by changing the value of sidebar.offset:\nNexT config filesidebar:  offset: 12\n\nFor now only Pisces &#x2F; Gemini Schemes supports offset setting under 6.0.x version or later.\n\n\nConfiguring AvatarBy default NexT doesn&#39;t show avatar in sidebar. You can configure it by editing values under avatar setting in NexT config file.\nurlroundedrotatedFor first test you can uncomment /images/avatar.gif value near the avatar.url setting to see default avatar:\nNexT config fileavatar:  url: /images/avatar.gif\n\nThen you need to specify your own avatar. It can be done one of the ways below:\nHexo directoryNexT directoryAbsolute URL from InternetPut your avatar under site directory source/uploads/ (create directory if it doesn&#39;t exists).And then change option to url: /uploads/avatar.png.Put your avatar under theme directory source/images/.And then change option to url: /images/avatar.png.\nCurrent site uses avatar under theme directory from file located in next/source/images/apple-touch-icon-next.png with following config:\nNexT config fileavatar:  url: /images/apple-touch-icon-next.png\nYou can also specify any external URL with absolute path to image: http(s)://example.com/avatar.pngSet up rounded of avatar by changing the value of avatar.rounded:\n\ntrue → Avatar will be rounded.\nfalse → Avatar will be squared.\n\nNexT config fileavatar:  rounded: trueSet up rotated of avatar by changing the value of avatar.rotated:\n\ntrue → Avatar will be rotate under the mouse hovering.\nfalse → Avatar will not rotate under the mouse hovering.\n\nNexT config fileavatar:  rotated: true\n\nSidebar Site StateBy default NexT shows the categories and counts of Posts &#x2F; Categories &#x2F; Tags in sidebar. You can configure it by editing value site_state in NexT config file.\nNexT config filesite_state: true\n\nSidebar Social LinksSocial Links have similar structure as Menu Items, only target link there is difference: specified link must have full url path (permalink).\n\n\nEdit the social section in NexT config file as following:\nNexT config filesocial:  GitHub: https://github.com/yourname || fab fa-github  E-Mail: mailto:yourname@gmail.com || fa fa-envelope  Weibo: https://weibo.com/yourname || fab fa-weibo  Twitter: https://twitter.com/yourname || fab fa-twitter  FB Page: https://www.facebook.com/yourname || fab fa-facebook  StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow  YouTube: https://youtube.com/yourname || fab fa-youtube  Instagram: https://instagram.com/yourname || fab fa-instagram  Skype: skype:yourname?call|chat || fab fa-skype\n\nBy default NexT shows the icons of social links in sidebar.\nenableicons_onlytransitionYou can configure it by editing value enable in social_icons section in NexT config file.\nNexT config filesocial_icons:  enable: trueSet the value icons_only to true to display social icons without description in social_icons section in NexT config file as following:\nNexT config filesocial_icons:  icons_only: trueSet the value transition to true to display social icons with transition effects in social_icons section in NexT config file as following:\nNexT config filesocial_icons:  transition: true\n\nSidebar BlogrollsYou can add blog rolls within sidebar in NexT.\nlinks_settingslinksBy default NexT shows the globe icon  before title. The name of icon can be found in Font Awesome site. You can configure it by editing value icon in links_settings section in NexT config file.\nNexT config filelinks_settings:  icon: fa fa-globe\n\nBy default all blogrolls are displayed in block. You can configure it to inline by editing value layout in links_settings section in NexT config file.\nNexT config filelinks_settings:  layout: blockEdit the links section in NexT config file and add your favorite links:\nNexT config filelinks:  Title1: https://example1.com/  Title2: https://example2.com/\n\nSidebar TOCenablenumberwrapexpand_allmax_depthBy default NexT shows Table Of Contents (TOC) in the sidebar. You can disable it by setting toc.enable to false in NexT config file.\nNexT config filetoc:  enable: trueBy default NexT adds list number to TOC automatically. You can disable it by setting toc.number to false in NexT config file.\nNexT config filetoc:  number: trueIf the post header width longer than sidebar width, you can wrap the header words in next lines by setting toc.wrap to true in NexT config file.\nNexT config filetoc:  wrap: trueIf you want all level of TOC in a post to be displayed, rather than the activated part of it, you can set toc.expand_all to true in NexT config file.\nNexT config filetoc:  expand_all: trueBy default maximum heading depth of generated toc is 6. You can set it by setting toc.max_depth to another number in NexT config file.\nNexT config filetoc:  max_depth: 3\n"},{"title":"Comment Systems","url":"/docs/third-party-services/comments.html","content":"OverviewMultiple Comment System SupportNexT allows you to enable multiple commenting systems at the same time. You can modify the following configuration to adjust the style or behavior of multiple commenting systems.\nNexT config file# Multiple Comment System Supportcomments:  # Available values: tabs | buttons  style: tabs  # Choose a comment system to be displayed by default  # Available values: disqus | disqusjs | changyan | livere | gitalk | utterances | isso  active:  # Setting `true` means remembering the comment system selected by the visitor  storage: true  # Lazyload all comment systems.  lazyload: false  # Modify icons and texts for any style, here are some examples  nav:    #disqus:    #  text: Load Disqus    #  order: -1    #gitalk:    #  order: -2\n\nYou can enable lazyload by setting value comments.lazyload to true in NexT config file. NexT uses IntersectionObserver to lazyload the comments, which is not supported by IE and most browsers released before 2017.\n\n\nHow to Disable Comments on PageWhen you enabled comment service like Disqus, all new page will have comment service automatically. If you want to disable it in one page, just add comments key to front-matter and set its value to false. Like following:\nyour-post.mdtitle: All tagstype: &quot;tags&quot;comments: false---\n\nRename Comment Count TextYou can rename the post meta text of comment count using languages.yml: Override Default Translations.\nDisqusDisqus is a global comment system that improves discussion on websites and connects conversations across the web.\n\nCreate an account and log into Disqus. Once logged in, click the GET STARTED button on the homepage, then select I want to install Disqus on my site option and you will see the Create a new site interface.\n\nEnter your Website Name, which will serve as your Disqus shortname, and select a Category from the drop-down menu. Then click Create Site button.\n\nChoose I don&#39;t see my platform listed, install manually with Universal Code, configure Disqus for your site, and click Complete Setup button.\n\nSet the value enable to true, add the obtained Disqus shortname (shortname), and edit other configurations in disqus section in the NexT config file as following:\n NexT config filedisqus:  enable: false  shortname: your-short-disqus-name  count: true\n\nDisqusJSRender Disqus comment component using Disqus API.\n\nGet your Disqus API Key from Disqus API Application.\n\nGo to the settings page of your Disqus Application, enter your domain in Settings → Domains.\n\nGet your Disqus Shortname from General Settings - Disqus Admin.\n\nSet the value enable to true, add the obtained Disqus API Key (apikey) and Shortname (shortname), and edit other configurations in disqusjs section in the NexT config file as following:\n NexT config file# DisqusJS# Demo: https://disqusjs.skk.moedisqusjs:  enable: false  # API Endpoint of Disqus API (https://disqus.com/api/docs/)  # leave api empty if you are able to connect to Disqus API  # otherwise you need a reverse proxy for Disqus API  # For example:  # api: https://disqus.skk.moe/disqus/  api:  apikey: # register new application from https://disqus.com/api/applications/  shortname: # See: https://disqus.com/admin/settings/general/\n\nChangyan (China)Changyan is the industry&#39;s leading social commenting system, supporting both PC and mobile access methods, providing a new way of commenting on websites. Changyan has a variety of common account login, triple filtering mechanism, real-time data statistics, fast data export, comprehensive support for mobile and other leading functions. It fully satisfies the needs of major websites for user login, comment, sharing, and review.\n\nCreate an account or log into Changyan, then add your site to get APP ID and APP KEY.\n\nSet the value enable to true, and add the obtained APP ID (appid) and APP KEY (appkey) to the changyan section in the NexT config file as following:\n NexT config file# changyanchangyan:  enable: false  appid:  appkey:  count: true\n\nNote: after you comment, it will take some time for you to see the increase in the number of comments.\nLiveReLiveRe is a content platform based on social networking site reviews to help users communicate freely.\n\nCreate an account or log into LiveRe, click on the installation button and select the free city version, then click on the install now button.\n\nCopy the data-uid field in the installation code to get your LiveRe UID.\n\nAdd the obtained LiveRe UID to the livere_uid section in the NexT config file as following:\n NexT config file# Support for LiveRe comments system.# You can get your uid from https://livere.com/insight/myCode (General web site)livere_uid: your_uid\n\nGitalkGitalk is a modern comment component based on Github Issue and Preact.\n\nClick here to sign up for a new OAuth Application. Other content can be filled in at will, but be sure to fill in the correct callback URL (usually the domain name corresponding to the comment page). Then you will get a Client ID and a Client secret.\n\nCreate a repository you want to store Gitalk comments in your GitHub.\n\nSet the value enable to true, add Client ID (client_id) and Client secret (client_secret) in step 1, add your Github username (github_id and admin_user) and the created repository name (repo) in step 2, and edit other configurations in gitalk section in the NexT config file as following:\n NexT config file# Gitalk# For more information: https://gitalk.github.iogitalk:  enable: false  github_id: # GitHub repo owner  repo: # Repository name to store issues  client_id: # GitHub Application Client ID  client_secret: # GitHub Application Client Secret  admin_user: # GitHub repo owner and collaborators, only these guys can initialize gitHub issues  distraction_free_mode: true # Facebook-like distraction free mode  # When the official proxy is not available, you can change it to your own proxy address  proxy: https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token # This is official proxy address  # Gitalk&#x27;s display language depends on user&#x27;s browser or system environment  # If you want everyone visiting your site to see a uniform language, you can set a force language value  # Available values: en | es-ES | fr | ru | zh-CN | zh-TW  language:\n\nGitalk relies on the md5 value of the page path for tagging, the comments will not be loaded correctly if a page&#39;s permalink is changed.\n\n\nUtterancesA lightweight comments widget built on GitHub issues. Use GitHub issues for blog comments, wiki pages and more!\nNexT config file# Utterances# For more information: https://utteranc.esutterances:  enable: false  repo: user-name/repo-name # Github repository owner and name  # Available values: pathname | url | title | og:title  issue_term: pathname  # Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light  theme: github-light\n\nIssoIsso – Ich schrei sonst – is a lightweight commenting server written in Python and JavaScript. It aims to be a drop-in replacement for Disqus.\n\nYou need to install and configure Isso on your server first.\n\nSet the value isso in the NexT config file as the value data-isso in Isso script. An exemplary script tag is given in the Integration section of the Isso quickstart document, you need to modify it according to the URL of your server.\n NexT config file# Isso# For more information: https://isso-comments.deisso: # &lt;data_isso&gt;\n\n"},{"title":"Chat Services","url":"/docs/third-party-services/chat-services.html","content":"ChatraChatra is a live chat messenger app for your website.\nEnable Chatra →Activate sidebar buttonVisit Dashboard to get your ChatraID.\nNexT config file# Chatra Supportchatra:  enable: true  async: true  id: &lt;ChatraID&gt;After Chatra enabled, you can set chat.enable to true in NexT config file.\nNexT config file# A button to open designated chat widget in sidebar.# Firstly, you need enable the chat service you want to activate its sidebar button.chat:  enable: true  icon: fa fa-comment\n\nTidioTidio is a live chat messenger app for your website.\nEnable Tidio →Activate sidebar buttonVisit Dashboard to get your Public Key.\nNexT config file# Tidio Supporttidio:  enable: true  key: &lt;Publick Key&gt;After Tidio enabled, you can set chat.enable to true in NexT config file.\nNexT config file# A button to open designated chat widget in sidebar.# Firstly, you need enable the chat service you want to activate its sidebar button.chat:  enable: true  icon: fa fa-comment\n"},{"title":"External Libraries","url":"/docs/third-party-services/external-libraries.html","content":"PJAXPjax is a standalone JavaScript module that uses AJAX (XmlHttpRequest) and pushState() to deliver a fast browsing experience.\nIt allows you to completely transform the user experience of standard websites (server-side generated or static ones) to make users feel like they are browsing an app, especially for those with low bandwidth connections.\nPlease use the absolute path of the image or Hexo asset_img tag in your posts, otherwise the images may fail to load during Pjax refresh.\n\n\nYou can enable it by setting value pjax to true in NexT config file.\nNexT config file# Easily enable fast Ajax navigation on your website.# For more information: https://github.com/next-theme/pjaxpjax: true\n\nFancyboxNexT supports the fancybox plugin, which is a jQuery lightbox script for displaying images, videos and more. Touch enabled, responsive and fully customizable.\nYou can enable it by setting value fancybox to true in NexT config file.\nNexT config filefancybox: true\n\nMedium ZoomMedium Zoom is a JavaScript library for zooming images like Medium.\nYou can enable it by setting value mediumzoom to true in NexT config file.\nNexT config file# A JavaScript library for zooming images like Medium.mediumzoom: true\n\nDo not enable both fancybox and mediumzoom.\n\n\nLazyloadLozad.js is a lazy loader plugin in modern vanilla JavaScript. It delays loading of images in long web pages. Images outside of viewport will not be loaded before user scrolls to them. This is opposite of image preloading.\nYou can enable it by setting value lazyload to true in NexT config file.\nNexT config file# Vanilla JavaScript plugin for lazyloading images.lazyload: true\n\nThen run the following command in site root dir to ensure that lazyload can be enabled or disabled correctly:\n$ hexo clean\n\nPangu Autospacepangu.js will automatically insert a blank space between all the Chinese characters and the hexagonal English numeric symbols on the page.\nYou can enable it by setting value pangu to true in NexT config file.\nNexT config file# Pangu Supportpangu: true\n\nQuicklinkQuicklink is a JavaScript plugin that faster subsequent page-loads by prefetching in-viewport links during idle time. Chrome, Firefox, Edge are supported without polyfills.\nYou can enable it by setting value quicklink.enable to true in NexT config file.\nNexT config file...quicklink:  enable: true  home: true  archive: true  delay: true  timeout: 3000  priority: true...\n\nAnimation EffectNexT enables animation effect by default which is supported by Anime.js and Animate.css, so it will wait for JavaScript loaded to show content.If you need speed you can set the value of motion.enable to false to disable it.\nEdit NexT config file and set the needed values under the motion to fit your demand. You can preview all Transition variants here: NexT Animation Effect Preview.\nNexT config file# Use Animate.css to animate everything.# For more information: https://animate.stylemotion:  enable: true  async: false  transition:    # All available Transition variants: https://theme-next.js.org/animate/    post_block: fadeIn    post_header: fadeInDown    post_body: fadeInDown    coll_header: fadeInLeft    # Only for Pisces | Gemini.    sidebar: fadeInUp\n\nProgress BarPace will automatically monitor your Ajax requests, event loop lag, document ready state and elements on your page to decide on the progress.\npacecolorthemeYou can enable it by setting value pace.enable to true in NexT config file.\nNexT config filepace:  enable: trueYou can change the color of progress bar by setting value pace.color in NexT config file.\nNexT config filepace:  color: orangePace includes a bunch of themes to get you started. By default NexT uses minimal theme (pace-theme-minimal). You can configure it by editing values in pace.theme section in NexT config file.\nNexT config filepace:  theme: minimal\n\nCanvas Ribboncanvas-ribbon.js is a ribbon background of website draw on canvas.\nYou can enable it by setting value canvas_ribbon to true in NexT config file. You can also configure the ribbon setting by editing values in canvas_ribbon section:\n\nsize: The width of the ribbon.\nalpha: The transparency of the ribbon.\nzIndex: The display level of the ribbon.\n\nNexT config filecanvas_ribbon:  enable: true  size: 300  alpha: 0.6  zIndex: -1\n"},{"title":"Third-party Plugins","url":"/docs/third-party-services/index.html","content":"Static website is limited in some functions, so we need third-party services to extend our site.In any time you can extend needed functions by using third-party services supported by NexT.\nAdding PluginsPlugins extend and expand the functionality of NexT. There are two types of libraries: internal scripts and third-party plugins. The internal scripts are loaded from your site by default, they are required by the basic functions of NexT. Third-party plugins provide a large number of optional features. They are loaded from jsDelivr CDN by default, because it is fast in everywhere.\nConfiguring these plugins is very easy. For example, if you want to use pjax in your site, just set pjax to true in NexT config file:\nNexT config file# Easily enable fast Ajax navigation on your website.# For more information: https://github.com/next-theme/pjaxpjax: true\n\nIf you want to specify the CDN provider for any plugins, you need to set &#x2F; update the CDN URL. See Advanced Settings for more information.\nDetailed documentation about these plugins is listed below.\nMath Equations\nMath Equations\n\nComment Systems\nOverview\nDisqus\nDisqusJS\nChangyan (China)\nLiveRe\nGitalk\nUtterances\nIsso\n\nStatistics and AnalyticsAnalytics\nGoogle Analytics\nBaidu Analytics (China)\nGrowingio Analytics\nCloudflare Web Analytics\nMicrosoft Clarity Analytics\nMatomo Analytics\nUmami Analytics\nPlausible Analytics\n\nStatistics\nLeanCloud (China)\nFirebase\nBusuanzi Counting\n\nPost Widgets\nAddToAny\n\nSearch Services\nAlgolia Search\nLocal Search\n\nChat Services\nChatra\nTidio\nGitter\n\nExternal Libraries\nPJAX\nFancybox\nMediumZoom\nLazyload\nPangu Autospace\nQuicklink\nMotion\nProgress bar\nCanvas Ribbon\n\n"},{"title":"Math Equations","url":"/docs/third-party-services/math-equations.html","content":"SettingsNexT config file# Math Formulas Render Supportmath:  # Default (false) will load mathjax / katex script on demand.  # That is it only render those page which has `mathjax: true` in front-matter.  # If you set it to true, it will load mathjax / katex script EVERY PAGE.  every_page: false  mathjax:    enable: true    # Available values: none | ams | all    tags: none  katex:    enable: false    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex    copy_tex: false\n\nThe every_page option controls whether to render Math Equations every page.\n\nfalse → Equations will be processed on demand. It will only render those posts which have mathjax: true in their front-matter.\ntrue → Equations will be processed on every page. Even if they not exists on one or another page.\n\nExamples with every_page: false option\n\n\nThis post will render the Math Equations\n  ---title: Will Render Mathmathjax: true---\n\nThis post will NOT render the Math Equations\n  ---title: Not Render Mathmathjax: false---\n\nThis post will NOT render the Math Equations either\n  ---title: Not Render Math Either---\n\n\n\n\nThe mathjax and katex options are used to set the rendering engine. Please read the detailed document below.\nRender EnginesFor now, NexT provides two rendering engines for displaying Math Equations: MathJax and KaTeX.\n\nMathJax is a JavaScript display engine for mathematics that works in all browsers. It is highly modular on input and output. Use MathML, TeX, and ASCIImath as input and produce HTML+CSS, SVG, or MathML as output.\nKaTeX is a faster math rendering engine compared to MathJax 3. And it could survive without JavaScript. But, for now KaTeX supports less features than MathJax. Here is a list of TeX functions supported by KaTeX.\n\nFirstly, you need to choose a rendering engine and turn on enable for it in NexT config file. Then you need to install the corresponding Hexo Renderer to fully support the display of Math Equations - Only turn on enable may not let you see the displayed equations correctly.\nMathJaxKaTeXRenderer Choosing\nIf you use MathJax to render Math Equations, you can choose one of the Markdown renderers below:\n\nhexo-renderer-pandoc\n\nhexo-renderer-pandoc is recommended because it can handle mathematical formulas in markdown documents perfectly.\nIf you are using other renderers, such as hexo-renderer-marked, you need to be aware of the conflict between LaTeX and Markdown syntax. For example, an underscore (_) may be interpreted as the start of italic text in Markdown, or subscripted mark in TeX. To avoid syntax errors, please use escape characters (\\_) instead:\n-$\\epsilon_0$+$\\epsilon\\_0$-\\begin&#123;eqnarray*&#125;+\\begin&#123;eqnarray\\*&#125;-\\\\+\\\\\\\\\n\n\nInstallation\n\nFirstly, set mathjax as rendering engine in NexT config file.\n NexT config filemath:  ...  mathjax:    enable: true\n\nThen you need to uninstall the original renderer hexo-renderer-marked, and install hexo-renderer-pandoc:\n $ npm un hexo-renderer-marked$ npm i hexo-renderer-pandoc\n\npandoc is required for hexo-renderer-pandoc, here&#39;s how to install pandoc.\n\n\nPlugins\nAll extensions of MathJax are loaded automatically. For example, mhchem is a tool for writing beautiful chemical equations easily. It implements the \\ce and \\pu chemical equation macros of the LaTeX mhchem package. More information: MathJax&#x2F;mhchem Manual.Renderer Choosing\nIf you use KaTeX to render Math Equations, you can choose one of the Markdown renderers below:\n\nhexo-renderer-markdown-it-plus\nhexo-renderer-markdown-it\n\nInstallation\n\nFirstly, set katex as rendering engine in NexT config file.\n NexT config filemath:  ...  katex:    enable: true\n\nThen you need to uninstall the original renderer hexo-renderer-marked and install one of the renderer plugins:\n\n\nhexo-renderer-markdown-it-plushexo-renderer-markdown-it$ npm un hexo-renderer-marked$ npm i hexo-renderer-markdown-it-plus$ npm un hexo-renderer-marked$ npm i hexo-renderer-markdown-it\n\nIf you use hexo-renderer-markdown-it, you also need to install markdown-it-katex:\n$ npm i markdown-it-katex\n\nAnd then in Hexo config file you need to add markdown-it-katex as a plugin for hexo-renderer-markdown-it:\nHexo config file# config of hexo-renderer-markdown-itmarkdown:  render:    html: true    xhtmlOut: false    breaks: true    linkify: true    typographer: true    quotes: &#x27;“”‘’&#x27;  plugins:    - markdown-it-katex\n\nPlugins\nCopy-tex extension for KaTeX modifies the copy&#x2F;paste behavior in any browser supporting the Clipboard API so that, when selecting and copying whole KaTeX-rendered elements, the text content of the resulting clipboard renders KaTeX elements as their LaTeX source surrounded by specified delimiters. More information: Copy-tex extension.\nNexT config filemath:  ...  katex:    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex    copy_tex: true\n\nKnown Issues\n\nFirstly, please check Common Issues of KaTeX.\nDisplayed Math (i.e. $$...$$) needs to started with new clear line. In other words: you must not have any characters (except of whitespaces) before the opening $$ and after the ending $$ (comment #32).\nDon&#39;t support Unicode (comment #32).\nInline Math (..$...$) must not have white spaces after the opening $ and before the ending $ (comment #32).\nIf you use math in Heading (i.e. ## Heading). Then in corresponding TOC item it will show the related LaTeX code 3 times (comment #32).\nIf you use math in your post&#39;s title, it will not be rendered (comment #32).\n\n\n\nAfter setting up the math rendering engine or installing &#x2F; uninstalling the Markdown renderer, please execute hexo clean. Run standard Hexo generate, deploy process or start the server to test whether the plugin is working properly:\n$ hexo clean &amp;&amp; hexo g -d# or hexo clean &amp;&amp; hexo s\n\n\nExcept for the required renderer, any other Hexo math plugins are unnecessary and there is no need to manually import any JS or CSS files. If you have installed plugins such as hexo-math or hexo-katex, they may conflict with the built-in rendering engine of NexT.\n\n\nExamplesThe following examples are rendered by mathjax engine.\n\n\nNumbering and Referring Equations in MathJaxIn NexT v6.3.0, we have added feature to automatic equation numbering with opportunity to make reference to that equations.\nTo enable this feature, you need to set mathjax.tags to ams in NexT config file.\nmath:  mathjax:    enable: true    # Available values: none | ams | all    tags: ams\n\nAnd to make the automatic equation numbering work, you have to wrap your LaTeX equations in equation environment. Using the plain old style (i.e., wrap an equation with two dollar signs in each side) will not work. How to refer to an equation? Just give a \\label&#123;&#125; tag and then in your later text, use \\ref&#123;&#125; or \\eqref&#123;&#125; to refer it. Using \\eqref&#123;&#125; is preferred since if you use \\ref&#123;&#125;, there are no parentheses around the equation number. Below are some of the common scenarios for equation numbering.\nSimple EquationsFor simple equations, use the following form to give a tag,\n$$\\begin&#123;equation&#125; \\label&#123;eq1&#125;e=mc^2\\end&#123;equation&#125;$$\n\n$$\\begin{equation} \\label{eq1}e&#x3D;mc^2\\end{equation}$$\nThen, you can refer to this equation in your text easily by using something like:\nThe famous matter-energy equation $\\eqref&#123;eq1&#125;$ proposed by Einstein...\n\nThe famous matter-energy equation $\\eqref{eq1}$ proposed by Einstein...\nMulti-line EquationsFor multi-line equations, inside the equation environment, you can use the aligned environment to split it into multiple lines:\n$$\\begin&#123;equation&#125; \\label&#123;eq2&#125;\\begin&#123;aligned&#125;a &amp;= b + c \\\\  &amp;= d + e + f + g \\\\  &amp;= h + i\\end&#123;aligned&#125;\\end&#123;equation&#125;$$\n\n$$\\begin{equation} \\label{eq2}\\begin{aligned}a &amp;&#x3D; b + c \\\\  &amp;&#x3D; d + e + f + g \\\\  &amp;&#x3D; h + i\\end{aligned}\\end{equation}$$\nEquation $\\eqref&#123;eq2&#125;$ is a multi-line equation.\n\nEquation $\\eqref{eq2}$ is a multi-line equation.\nMultiple Aligned EquationsWe can use align environment to align multiple equations. Each of these equations will get its own numbers.\n$$\\begin&#123;align&#125;a &amp;= b + c \\label&#123;eq3&#125; \\\\x &amp;= yz \\label&#123;eq4&#125; \\\\l &amp;= m - n \\label&#123;eq5&#125;\\end&#123;align&#125;$$\n\n$$\\begin{align}a &amp;&#x3D; b + c \\label{eq3} \\\\x &amp;&#x3D; yz \\label{eq4} \\\\l &amp;&#x3D; m - n \\label{eq5}\\end{align}$$\nThere are three aligned equations: equation $\\eqref&#123;eq3&#125;$, equation $\\eqref&#123;eq4&#125;$ and equation $\\eqref&#123;eq5&#125;$.\n\nThere are three aligned equations: equation $\\eqref{eq3}$, equation $\\eqref{eq4}$ and equation $\\eqref{eq5}$.\nSince align in and of itself is a complete equation environment (read here about the difference between aligned and align in LaTeX). You do not need to wrap it with equation environment.\nExclude Equations from NumberingIn the align environment, if you do not want to number one or some equations, just use \\nonumber right behind these equations. Like the following:\n$$\\begin&#123;align&#125;-4 + 5x &amp;= 2 + y \\nonumber \\\\w + 2 &amp;= -1 + w \\\\ab &amp;= cb\\end&#123;align&#125;$$\n\n$$\\begin{align}-4 + 5x &amp;&#x3D; 2 + y \\nonumber \\\\w + 2 &amp;&#x3D; -1 + w \\\\ab &amp;&#x3D; cb\\end{align}$$\nUse \\tag to Tag EquationsSometimes, you want to use more «exotic» style to refer your equation. You can use \\tag&#123;&#125; to achieve this. For example:\n$$x+1\\over\\sqrt&#123;1-x^2&#125; \\tag&#123;i&#125;\\label&#123;eq_tag&#125;$$\n\n$$x+1\\over\\sqrt{1-x^2} \\tag{i}\\label{eq_tag}$$\nEquation $\\eqref&#123;eq_tag&#125;$ use `\\tag&#123;&#125;` instead of automatic numbering.\n\nEquation $\\eqref{eq_tag}$ use \\tag&#123;&#125; instead of automatic numbering.\n"},{"title":"Post Widgets","url":"/docs/third-party-services/post-widgets.html","content":"AddToAnyEnable AddToAny →Add ButtonsEdit NexT config file to enable AddToAny Share:\nNexT config file# AddToAny Share. See: https://www.addtoany.comaddtoany:  enable: true  buttons:    - facebook    - twitterAfter AddToAny enabled, you can add more buttons.\nNexT config file# AddToAny Share. See: https://www.addtoany.comaddtoany:  enable: true  buttons:    - facebook    - twitter    - telegram    - wechat    - qzone\n"},{"title":"Search Services","url":"/docs/third-party-services/search-services.html","content":"Algolia SearchNexT provides Algolia search plugin to search your Hexo website content. It should be noted that only turn on enable of algolia_search in NexT config file does not allow you to use the Algolia search correctly. You need to install the corresponding Hexo plugin to index your website on Algolia: Hexo Algolia or Hexo Algoliasearch.\nKnown Issues\n\nThe latest version of the Hexo Algolia plugin removes the content indexing feature, given Algolia&#39;s free account limitation.\nThe Hexo Algoliasearch plugin provides content indexing functionality. The same problem exists with Record Too Big for Algolia&#39;s free account.\n\n\n\nFollow the steps described below to complete the installation of Algolia search.\nRegistration →Algolia Config →Algolia Plugin →NexT ConfigRegister at Algolia, you can log in directly using GitHub or Google Account. Upon Customer&#39;s initial sign-up for an Account, Customer will have a free, fourteen (14) day evaluation period (the «Evaluation Period») for the Algolia Services commencing on the Effective Date, subject to the limitations on Algolia&#39;s website. After that, Algolia offers a free, branded version for up to 10k records and 100k operations per month.\nIf a tutorial pops up, you can skip it. Go straight to create an Index which will be used later.\nGo to the API Keys page and find your credentials. You will need the Application ID and the Search-only API key in the following sections. The Admin API key need to keep confidential. Never store your Admin API Key as apiKey in Hexo config file: it would give full control of your Algolia index to others and you don&#39;t want to face the consequences.\n\nIn the API Keys page, click the All API Keys button to switch to the corresponding tab. Then click the New API Key button to activate a pop-up box where you can setup authorizations and restrictions with a great level of precision. Enter addObject, deleteObject, listIndexes, deleteIndex features in ACL permissions that will be allowed for the given API key. And then click the Create button. Copy this newly created key to the clipboard, we call it a High-privilege API key.\n\nAlgolia requires users to upload their search index data either manually or via provided APIs. You need to choose one of the following two plugins to install. Both plugins will index your site and upload selected data to Algolia.\nHexo AlgoliaHexo AlgoliasearchInstall and configure Hexo Algolia in your Hexo directory.\n$ cd hexo-site$ npm install hexo-algolia\n\nIn your Hexo config file, add the following configuration and replace the Application ID, Search-only API key and indexName with corresponding fields obtained at Algolia.\nHexo config filealgolia:  applicationID: &quot;Application ID&quot;  apiKey: &quot;Search-only API key&quot;  indexName: &quot;indexName&quot;\n\nRun the following command to upload index data, keep a weather eye out the output of the command.\n$ export HEXO_ALGOLIA_INDEXING_KEY=High-privilege API key # Use Git Bash# set HEXO_ALGOLIA_INDEXING_KEY=High-privilege API key # Use Windows command line$ hexo clean$ hexo algolia\n\nInstall and configure Hexo Algoliasearch in your Hexo directory.\n$ cd hexo-site$ npm install hexo-algoliasearch\n\nIn your Hexo config file, add the following configuration and replace the Application ID, Search-only API key, High-privilege API key and indexName with corresponding fields obtained at Algolia.\nHexo config filealgolia:  appId: &quot;Application ID&quot;  apiKey: &quot;Search-only API key&quot;  adminApiKey: &quot;High-privilege API key&quot;  indexName: &quot;indexName&quot;  chunkSize: 5000  fields:    - content:strip:truncate,0,500    - excerpt:strip    - gallery    - permalink    - photos    - slug    - tags    - title\n\nRun the following command to upload index data, keep a weather eye out the output of the command.\n$ hexo clean$ hexo algoliaIn NexT config file, turn on enable of algolia_search. At the same time, you need to turn off other search plugins like Local Search. You can also adjust the text in labels according to your needs.\nNexT config file# Algolia Searchalgolia_search:  enable: true  hits:    per_page: 10\n\nLocal SearchLocal search does not require any external 3rd-party services and can be extra indexed by search engines. This search method is recommended for most users.\nInstallation →Hexo Config →NexT ConfigInstall hexo-generator-searchdb by executing the following command in site root dir:\n$ npm install hexo-generator-searchdbEdit Hexo config file and add following content:\nHexo config filesearch:  path: search.xml  field: post  content: true  format: htmlEdit NexT config file to enable Local Search:\nNexT config file# Local search# Dependencies: https://github.com/next-theme/hexo-generator-searchdblocal_search:  enable: true  # If auto, trigger search by changing input.  # If manual, trigger search by pressing enter key or search button.  trigger: auto  # Show top n results per article, show all results by setting to -1  top_n_per_article: 1  # Unescape html strings to the readable one.  unescape: false  # Preload the search data when the page loads.  preload: false\n"},{"title":"Statistics and Analytics","url":"/docs/third-party-services/statistics-and-analytics.html","content":"NexT will not send record to analytics service provider as long as the page&#39;s host name does not match url option set in Hexo config file. This will prevent local debugging from polluting analytics. Make sure you have configured url correctly, otherwise these statistics tools may not work as expected.\n\n\nAnalytics ToolsGoogle Analytics\nCreate an account and log into Google Analytics. More detailed documentation\n\nEdit NexT config file and fill tracking_id under section google_analytics with your Google track ID. Google track ID always starts with UA-.\n NexT config file# Google Analyticsgoogle_analytics:  tracking_id: UA-XXXXXXXX-X  only_pageview: false\n\nWhen field only_pageview is set to true, NexT will only send pageview event to Google Analytics.The benefit of using this instead of only_pageview: false is reduce a external script on your site, which will give you better performance but no complete analytics function.\n\n\nBaidu Analytics (China)Login →Script ID →NexT ConfigLogin to Baidu Analytics and locate to site code getting page.Copy the script ID after hm.js?, like the following picture:Edit NexT config file and change the value of baidu_analytics to your script ID.\nNexT config file# Baidu Analytics IDbaidu_analytics: your_id\n\nGrowingio AnalyticsOfficial documentation: https://docs.growingio.com/v3/developer-manual/sdkintegrated/web-js-sdk/latest-jssdk\nEdit NexT config file and change the value of growingio_analytics to your project ID.\nNexT config file# Growingio Analyticsgrowingio_analytics: # &lt;project_id&gt;\n\nCloudflare Web AnalyticsOfficial documentation: https://www.cloudflare.com/web-analytics/\nEdit NexT config file and change the value of cloudflare_analytics to your project ID.\nNexT config file# Cloudflare Web Analyticscloudflare_analytics:\n\nMicrosoft Clarity AnalyticsOfficial documentation: https://clarity.microsoft.com/\nEdit NexT config file and change the value of clarity_analytics to your project ID.\nNexT config file# Microsoft Clarity Analyticsclarity_analytics: # &lt;project_id&gt;\n\nMatomo Analytics (Self-managed)Edit NexT config file and fill server_url and site_id under section matomo with the url of your backend server and your customized site ID.\nNexT config file# Matomo Analytics# See: https://matomo.org/matomo:  enable: false  server_url: # https://www.example.com/  site_id: # &lt;your site id&gt;\n\nUmami Analytics (Self-managed)Umami is a self-hosted web analytics solution. Official documentation: https://umami.is/\nEdit NexT config file. Fill script_url under section umami with your tracking script URL, and change the value of website_id to your website ID.\nNexT config file# Umami Analyticsumami:  enable: true  script_url: # https://umami.example.com/script.js  website_id: # &lt;your website id&gt;  host_url: # &lt;your umami site url&gt;\n\nPlausible Analytics (Self-managed)Opt for paid managed hosting or self-host it on your server. Official documentation: https://plausible.io/\nEdit NexT config file. Fill script_url under section plausible with your tracking script URL, and change the value of site_domain to your website domain.\nNexT config file# Plausible Analyticsplausible:  enable: true  script_url: # https://plausible.io/js/script.js  site_domain: # www.example.com\n\nCounting ToolsLeanCloud (China)Adding article reading times counting to NexT theme. Documentation how to set the counter up and running safely aviable in hexo-leancloud-counter-security.\nGet App Keys →Installation →Hexo Config →NexT Config\nCreate an account or log in to LeanCloud, and then click the button to create an application in dashboard. \nGo to the application you just created, select Settings → App Keys in the lower left corner, and you will see your APP ID and APP Key. \nInstall hexo-leancloud-counter-security by executing the following command in site root dir:\n$ npm install hexo-leancloud-counter-securityEdit Hexo config file and add following content:\nHexo config fileleancloud_counter_security:  enable_sync: true  app_id: &lt;your app id&gt;  app_key: &lt;your app key&gt;  username: &lt;your username&gt; # Will be asked while deploying if is left blank  password: &lt;your password&gt; # Recommmended to be left blank. Will be asked while deploying if is left blankEdit NexT config file and fill options under leancloud_visitors section.\nNexT config file# Show number of visitors to each article.# You can visit https://www.leancloud.cn get AppID and AppKey.leancloud_visitors:  enable: true  app_id: #&lt;app_id&gt;  app_key: #&lt;app_key&gt;  # Required for apps from CN region  server_url: # &lt;your server url&gt;  # Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security  # If you don&#x27;t care about security in lc counter and just want to use it directly  # (without hexo-leancloud-counter-security plugin), set the `security` to `false`.  security: true\n\nFirebaseFirebase Analytics provides the functionality of visitor statistics.\nGet apiKey & projectId →NexT ConfigLogin to Firebase to get apiKey and projectId. The Web API Key gets generated once you go into the &quot;Authentication&quot; section for the first time.\n\nMore detailed documentationEdit NexT config file and add or change firestore section:\nNexT config filefirestore:  enable: true  collection: articles #required, a string collection name to access firestore database  apiKey: #required  projectId: #required\n\nBusuanzi Counting (China)Global Settings →Site UV Settings →Site PV Settings →Per-page PV SettingsEdit busuanzi_count option in NexT config file.When enable: true, global setting is enabled. If total_visitors, total_views, post_views are all false, Busuanzi only counts but never shows.When total_visitors: true, it will show site UV in footer. You can also use font-awesome by setting total_visitors_icon to the name of the icon.\nNexT config filebusuanzi_count:  total_visitors: true  total_visitors_icon: fa fa-userWhen total_views: true, it will show site UV in footer. You can also use font-awesome by setting total_views_icon to the name of the icon.\nNexT config filebusuanzi_count:  total_views: true  total_views_icon: fa fa-eyeWhen post_views: true, it will show page PV in post meta. You can also use font-awesome by setting post_views_icon to the name of the icon.\nNexT config filebusuanzi_count:  post_views: true  post_views_icon: far fa-eye\n"},{"url":"/attach/2025/08/lonely-primes-algo-improve.js","content":"const startTime = new Date();\n\nconsole.log('prime table and spf table generation...');\nconst n = 10 ** 8;\nconst spf = new Uint32Array(n + 1).fill(0);\nconst primes = [];\nconst primeIndex = new Map()\nconst product = new Uint32Array(n + 1);\n\n// 构建SPF和素数序号\nfor (let i = 2; i  n) break;\n        spf[ip] = p;\n        if (i % p === 0) break;\n    }\n}\n\nconsole.log('calc product...');\n// 直接计算因子序数乘积\nproduct[1] = 1;\nfor (let i = 2; i "},{"url":"/attach/2025/08/lonely-primes.js","content":"const startTime = new Date();\nconst MAX = 10 ** 8\n\nfunction EulerSieve(n) {\n    const primes = [];\n    let eularboard = new Array(n + 1).fill(true);\n    for (let i = 2; i  1) {\n        const idx = primes.indexOf(n);\n        if (idx === -1) {\n            throw new Error(`Math crisis ${n}`);\n        }\n        indices = indices * (idx + 1)\n    }\n\n    dp[init] = indices\n    return indices\n}\n\nconst lonelyPrimes = []\nfor (let i = 0; i < primes.length; i++) {\n    const p = primes[i];\n    let lonely = true\n    for (let m = 2; m < p / 2; m++) {\n        if (factorOrdersProduct(m) + factorOrdersProduct(p - m) === i + 1) {\n            lonely = false\n            break\n        }\n    }\n    if (lonely) {\n        // console.log(p)\n        lonelyPrimes.push(p)\n    }\n}\n\nfunction groupCount(arr, gpsize) {\n    let groups = []\n    for (let i = 0; i < arr.length; i++) {\n        const gpidx = Math.floor(arr[i] / gpsize)\n        groups[gpidx] = groups[gpidx] ? groups[gpidx] + 1 : 1\n    }\n    groups.forEach(element => {\n        console.log(`${element}/${gpsize}: ${element / gpsize}`)\n    });\n}\ngroupCount(lonelyPrimes, 100000)\n\nconsole.log((new Date() - startTime) / 1000)"},{"url":"/attach/2025/08/object-dict-test.js","content":"// const n = 10 ** 8\n\n// const primes = [];\n// const eularboard = new Uint32Array(n + 1).fill(true);\n\n// for (let i = 2; i "}]